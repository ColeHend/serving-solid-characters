(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Fo="modulepreload",Ko=function(t){return"/"+t},Wi={},Ir=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(a=>{if(a=Ko(a),a in Wi)return;Wi[a]=!0;const l=a.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${o}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Fo,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},ne={context:void 0,registry:void 0};function yn(t){ne.context=t}const Mo=(t,e)=>t===e,gr=Symbol("solid-proxy"),qo=Symbol("solid-track"),pr={equals:Mo};let Da=Ua;const dt=1,vr=2,ja={owned:null,cleanups:null,context:null,owner:null},Yr={};var se=null;let Gr=null,Uo=null,oe=null,De=null,lt=null,Br=0;function Xt(t,e){const n=oe,r=se,s=t.length===0,i=e===void 0?r:e,a=s?ja:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=s?t:()=>t(()=>Ae(()=>Nr(a)));se=a,oe=null;try{return ut(l,!0)}finally{oe=n,se=r}}function I(t,e){e=e?Object.assign({},pr,e):pr;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),qa(n,s));return[Ma.bind(n),r]}function Hi(t,e,n){const r=Lr(t,e,!0,dt);ln(r)}function L(t,e,n){const r=Lr(t,e,!1,dt);ln(r)}function Vo(t,e,n){Da=Xo;const r=Lr(t,e,!1,dt);(!n||!n.render)&&(r.user=!0),lt?lt.push(r):ln(r)}function W(t,e,n){n=n?Object.assign({},pr,n):pr;const r=Lr(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ln(r),Ma.bind(r)}function Wo(t){return t&&typeof t=="object"&&"then"in t}function Ho(t,e,n){let r,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,s=t,i=e||{}):(r=t,s=e,i=n||{});let a=null,l=Yr,o=null,c=!1,u="initialValue"in i,d=typeof r=="function"&&W(r);const h=new Set,[b,_]=(i.storage||I)(i.initialValue),[g,p]=I(void 0),[y,v]=I(void 0,{equals:!1}),[w,x]=I(u?"ready":"unresolved");if(ne.context){o=`${ne.context.id}${ne.context.count++}`;let k;i.ssrLoadFrom==="initial"?l=i.initialValue:ne.load&&(k=ne.load(o))&&(l=k)}function S(k,O,P,R){return a===k&&(a=null,R!==void 0&&(u=!0),(k===l||O===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(R,{value:O})),l=Yr,E(O,P)),O}function E(k,O){ut(()=>{O===void 0&&_(()=>k),x(O!==void 0?"errored":u?"ready":"unresolved"),p(O);for(const P of h.keys())P.decrement();h.clear()},!1)}function C(){const k=zo,O=b(),P=g();if(P!==void 0&&!a)throw P;return oe&&!oe.user&&k&&Hi(()=>{y(),a&&(k.resolved||h.has(k)||(k.increment(),h.add(k)))}),O}function D(k=!0){if(k!==!1&&c)return;c=!1;const O=d?d():r;if(O==null||O===!1){S(a,Ae(b));return}const P=l!==Yr?l:Ae(()=>s(O,{value:b(),refetching:k}));return Wo(P)?(a=P,"value"in P?(P.status==="success"?S(a,P.value,void 0,O):S(a,void 0,void 0,O),P):(c=!0,queueMicrotask(()=>c=!1),ut(()=>{x(u?"refreshing":"pending"),v()},!1),P.then(R=>S(P,R,void 0,O),R=>S(P,void 0,Wa(R),O)))):(S(a,P,void 0,O),P)}return Object.defineProperties(C,{state:{get:()=>w()},error:{get:()=>g()},loading:{get(){const k=w();return k==="pending"||k==="refreshing"}},latest:{get(){if(!u)return C();const k=g();if(k&&!a)throw k;return b()}}}),d?Hi(()=>D(!1)):D(!1),[C,{refetch:D,mutate:_}]}function Ae(t){if(oe===null)return t();const e=oe;oe=null;try{return t()}finally{oe=e}}function Fa(t,e,n){const r=Array.isArray(t);let s,i=n&&n.defer;return a=>{let l;if(r){l=Array(t.length);for(let c=0;c<t.length;c++)l[c]=t[c]()}else l=t();if(i){i=!1;return}const o=Ae(()=>e(l,s,a));return s=l,o}}function Dt(t){return se===null||(se.cleanups===null?se.cleanups=[t]:se.cleanups.push(t)),t}function br(){return se}function ri(t,e){const n=se,r=oe;se=t,oe=null;try{return ut(e,!0)}catch(s){ii(s)}finally{se=n,oe=r}}function Jo(t){const e=oe,n=se;return Promise.resolve().then(()=>{oe=e,se=n;let r;return ut(t,!1),oe=se=null,r?r.done:void 0})}function Ka(t,e){const n=Symbol("context");return{id:n,Provider:Qo(n),defaultValue:t}}function si(t){return se&&se.context&&se.context[t.id]!==void 0?se.context[t.id]:t.defaultValue}function Rr(t){const e=W(t),n=W(()=>ws(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let zo;function Ma(){if(this.sources&&this.state)if(this.state===dt)ln(this);else{const t=De;De=null,ut(()=>_r(this),!1),De=t}if(oe){const t=this.observers?this.observers.length:0;oe.sources?(oe.sources.push(this),oe.sourceSlots.push(t)):(oe.sources=[this],oe.sourceSlots=[t]),this.observers?(this.observers.push(oe),this.observerSlots.push(oe.sources.length-1)):(this.observers=[oe],this.observerSlots=[oe.sources.length-1])}return this.value}function qa(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&ut(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],a=Gr&&Gr.running;a&&Gr.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?De.push(i):lt.push(i),i.observers&&Va(i)),a||(i.state=dt)}if(De.length>1e6)throw De=[],new Error},!1)),e}function ln(t){if(!t.fn)return;Nr(t);const e=Br;Yo(t,t.value,e)}function Yo(t,e,n){let r;const s=se,i=oe;oe=se=t;try{r=t.fn(e)}catch(a){return t.pure&&(t.state=dt,t.owned&&t.owned.forEach(Nr),t.owned=null),t.updatedAt=n+1,ii(a)}finally{oe=i,se=s}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?qa(t,r):t.value=r,t.updatedAt=n)}function Lr(t,e,n,r=dt,s){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:se,context:se?se.context:null,pure:n};return se===null||se!==ja&&(se.owned?se.owned.push(i):se.owned=[i]),i}function yr(t){if(t.state===0)return;if(t.state===vr)return _r(t);if(t.suspense&&Ae(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Br);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===dt)ln(t);else if(t.state===vr){const r=De;De=null,ut(()=>_r(t,e[0]),!1),De=r}}function ut(t,e){if(De)return t();let n=!1;e||(De=[]),lt?n=!0:lt=[],Br++;try{const r=t();return Go(n),r}catch(r){n||(lt=null),De=null,ii(r)}}function Go(t){if(De&&(Ua(De),De=null),t)return;const e=lt;lt=null,e.length&&ut(()=>Da(e),!1)}function Ua(t){for(let e=0;e<t.length;e++)yr(t[e])}function Xo(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:yr(r)}if(ne.context){if(ne.count){ne.effects||(ne.effects=[]),ne.effects.push(...t.slice(0,n));return}else ne.effects&&(t=[...ne.effects,...t],n+=ne.effects.length,delete ne.effects);yn()}for(e=0;e<n;e++)yr(t[e])}function _r(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const s=r.state;s===dt?r!==e&&(!r.updatedAt||r.updatedAt<Br)&&yr(r):s===vr&&_r(r,e)}}}function Va(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=vr,n.pure?De.push(n):lt.push(n),n.observers&&Va(n))}}function Nr(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),a=n.observerSlots.pop();r<s.length&&(i.sourceSlots[a]=r,s[r]=i,n.observerSlots[r]=a)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Nr(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Wa(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function ii(t,e=se){throw Wa(t)}function ws(t){if(typeof t=="function"&&!t.length)return ws(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=ws(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function Qo(t,e){return function(r){let s;return L(()=>s=Ae(()=>(se.context={...se.context,[t]:r.value},Rr(()=>r.children))),void 0),s}}const Zo=Symbol("fallback");function Ji(t){for(let e=0;e<t.length;e++)t[e]()}function ec(t,e,n={}){let r=[],s=[],i=[],a=0,l=e.length>1?[]:null;return Dt(()=>Ji(i)),()=>{let o=t()||[],c,u;return o[qo],Ae(()=>{let h=o.length,b,_,g,p,y,v,w,x,S;if(h===0)a!==0&&(Ji(i),i=[],r=[],s=[],a=0,l&&(l=[])),n.fallback&&(r=[Zo],s[0]=Xt(E=>(i[0]=E,n.fallback())),a=1);else if(a===0){for(s=new Array(h),u=0;u<h;u++)r[u]=o[u],s[u]=Xt(d);a=h}else{for(g=new Array(h),p=new Array(h),l&&(y=new Array(h)),v=0,w=Math.min(a,h);v<w&&r[v]===o[v];v++);for(w=a-1,x=h-1;w>=v&&x>=v&&r[w]===o[x];w--,x--)g[x]=s[w],p[x]=i[w],l&&(y[x]=l[w]);for(b=new Map,_=new Array(x+1),u=x;u>=v;u--)S=o[u],c=b.get(S),_[u]=c===void 0?-1:c,b.set(S,u);for(c=v;c<=w;c++)S=r[c],u=b.get(S),u!==void 0&&u!==-1?(g[u]=s[c],p[u]=i[c],l&&(y[u]=l[c]),u=_[u],b.set(S,u)):i[c]();for(u=v;u<h;u++)u in g?(s[u]=g[u],i[u]=p[u],l&&(l[u]=y[u],l[u](u))):s[u]=Xt(d);s=s.slice(0,a=h),r=o.slice(0)}return s});function d(h){if(i[u]=h,l){const[b,_]=I(u);return l[u]=_,e(o[u],b)}return e(o[u])}}}function f(t,e){return Ae(()=>t(e||{}))}function Wn(){return!0}const $s={get(t,e,n){return e===gr?n:t.get(e)},has(t,e){return e===gr?!0:t.has(e)},set:Wn,deleteProperty:Wn,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Wn,deleteProperty:Wn}},ownKeys(t){return t.keys()}};function Xr(t){return(t=typeof t=="function"?t():t)?t:{}}function tc(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function Xe(...t){let e=!1;for(let a=0;a<t.length;a++){const l=t[a];e=e||!!l&&gr in l,t[a]=typeof l=="function"?(e=!0,W(l)):l}if(e)return new Proxy({get(a){for(let l=t.length-1;l>=0;l--){const o=Xr(t[l])[a];if(o!==void 0)return o}},has(a){for(let l=t.length-1;l>=0;l--)if(a in Xr(t[l]))return!0;return!1},keys(){const a=[];for(let l=0;l<t.length;l++)a.push(...Object.keys(Xr(t[l])));return[...new Set(a)]}},$s);const n={},r=Object.create(null);for(let a=t.length-1;a>=0;a--){const l=t[a];if(!l)continue;const o=Object.getOwnPropertyNames(l);for(let c=o.length-1;c>=0;c--){const u=o[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(l,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:tc.bind(n[u]=[d.get.bind(l)])}:d.value!==void 0?d:void 0;else{const h=n[u];h&&(d.get?h.push(d.get.bind(l)):d.value!==void 0&&h.push(()=>d.value))}}}const s={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const l=i[a],o=r[l];o&&o.get?Object.defineProperty(s,l,o):s[l]=o?o.value:void 0}return s}function Ha(t,...e){if(gr in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(a=>new Proxy({get(l){return a.includes(l)?t[l]:void 0},has(l){return a.includes(l)&&l in t},keys(){return a.filter(l=>l in t)}},$s));return i.push(new Proxy({get(a){return s.has(a)?void 0:t[a]},has(a){return s.has(a)?!1:a in t},keys(){return Object.keys(t).filter(a=>!s.has(a))}},$s)),i}const n={},r=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,o=0;for(const c of e)c.includes(s)&&(l=!0,a?r[o][s]=i.value:Object.defineProperty(r[o],s,i)),++o;l||(a?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}function ai(t){let e,n;const r=s=>{const i=ne.context;if(i){const[l,o]=I();ne.count||(ne.count=0),ne.count++,(n||(n=t())).then(c=>{yn(i),ne.count--,o(()=>c.default),yn()}),e=l}else if(!e){const[l]=Ho(()=>(n||(n=t())).then(o=>o.default));e=l}let a;return W(()=>(a=e())&&Ae(()=>{if(!i)return a(s);const l=ne.context;yn(i);const o=a(s);return yn(l),o}))};return r.preload=()=>n||((n=t()).then(s=>e=()=>s.default),n),r}const Ja=t=>`Stale read from <${t}>.`;function F(t){const e="fallback"in t&&{fallback:()=>t.fallback};return W(ec(()=>t.each,t.children,e||void 0))}function q(t){const e=t.keyed,n=W(()=>t.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return W(()=>{const r=n();if(r){const s=t.children;return typeof s=="function"&&s.length>0?Ae(()=>s(e?r:()=>{if(!Ae(n))throw Ja("Show");return t.when})):s}return t.fallback},void 0,void 0)}function wr(t){let e=!1;const n=(i,a)=>(e?i[1]===a[1]:!i[1]==!a[1])&&i[2]===a[2],r=Rr(()=>t.children),s=W(()=>{let i=r();Array.isArray(i)||(i=[i]);for(let a=0;a<i.length;a++){const l=i[a].when;if(l)return e=!!i[a].keyed,[a,l,i[a]]}return[-1]},void 0,{equals:n});return W(()=>{const[i,a,l]=s();if(i<0)return t.fallback;const o=l.children;return typeof o=="function"&&o.length>0?Ae(()=>o(e?a:()=>{if(Ae(s)[0]!==i)throw Ja("Match");return l.when})):o},void 0,void 0)}function ze(t){return t}const nc=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],rc=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...nc]),sc=new Set(["innerHTML","textContent","innerText","children"]),ic=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ac=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function lc(t,e){const n=ac[t];return typeof n=="object"?n[e]?n.$:void 0:n}const oc=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),cc={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function uc(t,e,n){let r=n.length,s=e.length,i=r,a=0,l=0,o=e[s-1].nextSibling,c=null;for(;a<s||l<i;){if(e[a]===n[l]){a++,l++;continue}for(;e[s-1]===n[i-1];)s--,i--;if(s===a){const u=i<r?l?n[l-1].nextSibling:n[i-l]:o;for(;l<i;)t.insertBefore(n[l++],u)}else if(i===l)for(;a<s;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===n[i-1]&&n[l]===e[s-1]){const u=e[--s].nextSibling;t.insertBefore(n[l++],e[a++].nextSibling),t.insertBefore(n[--i],u),e[s]=n[i]}else{if(!c){c=new Map;let d=l;for(;d<i;)c.set(n[d],d++)}const u=c.get(e[a]);if(u!=null)if(l<u&&u<i){let d=a,h=1,b;for(;++d<s&&d<i&&!((b=c.get(e[d]))==null||b!==u+h);)h++;if(h>u-l){const _=e[a];for(;l<u;)t.insertBefore(n[l++],_)}else t.replaceChild(n[l++],e[a++])}else a++;else e[a++].remove()}}}const zi="_$DX_DELEGATE";function hc(t,e,n,r={}){let s;return Xt(i=>{s=i,e===document?t():m(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{s(),e.textContent=""}}function $(t,e,n){let r;const s=()=>{const a=document.createElement("template");return a.innerHTML=t,n?a.content.firstChild.firstChild:a.content.firstChild},i=e?()=>Ae(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function Te(t,e=window.document){const n=e[zi]||(e[zi]=new Set);for(let r=0,s=t.length;r<s;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,pc))}}function je(t,e,n){ne.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function dc(t,e,n,r){ne.context||(r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r))}function T(t,e){ne.context||(e==null?t.removeAttribute("class"):t.className=e)}function Dr(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const s=n[0];t.addEventListener(e,n[0]=i=>s.call(t,n[1],i))}else t.addEventListener(e,n)}function fc(t,e,n={}){const r=Object.keys(e||{}),s=Object.keys(n);let i,a;for(i=0,a=s.length;i<a;i++){const l=s[i];!l||l==="undefined"||e[l]||(Gi(t,l,!1),delete n[l])}for(i=0,a=r.length;i<a;i++){const l=r[i],o=!!e[l];!l||l==="undefined"||n[l]===o||!o||(Gi(t,l,!0),n[l]=o)}return n}function $r(t,e,n){if(!e)return n?je(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let s,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)s=e[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function ft(t,e={},n,r){const s={};return r||L(()=>s.children=rn(t,e.children,s.children)),L(()=>e.ref&&e.ref(t)),L(()=>mc(t,e,n,!0,s,!0)),s}function Yi(t,e,n){return Ae(()=>t(e,n))}function m(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return rn(t,e,r,n);L(s=>rn(t,e(),s,n),r)}function mc(t,e,n,r,s={},i=!1){e||(e={});for(const a in s)if(!(a in e)){if(a==="children")continue;s[a]=Xi(t,a,null,s[a],n,i)}for(const a in e){if(a==="children"){r||rn(t,e.children);continue}const l=e[a];s[a]=Xi(t,a,l,s[a],n,i)}}function gc(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Gi(t,e,n){const r=e.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)t.classList.toggle(r[s],n)}function Xi(t,e,n,r,s,i){let a,l,o,c,u;if(e==="style")return $r(t,n,r);if(e==="classList")return fc(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const d=e.slice(3);r&&t.removeEventListener(d,r),n&&t.addEventListener(d,n)}else if(e.slice(0,10)==="oncapture:"){const d=e.slice(10);r&&t.removeEventListener(d,r,!0),n&&t.addEventListener(d,n,!0)}else if(e.slice(0,2)==="on"){const d=e.slice(2).toLowerCase(),h=oc.has(d);if(!h&&r){const b=Array.isArray(r)?r[0]:r;t.removeEventListener(d,b)}(h||n)&&(Dr(t,d,n,h),h&&Te([d]))}else if(e.slice(0,5)==="attr:")je(t,e.slice(5),n);else if((u=e.slice(0,5)==="prop:")||(o=sc.has(e))||!s&&((c=lc(e,t.tagName))||(l=rc.has(e)))||(a=t.nodeName.includes("-"))){if(u)e=e.slice(5),l=!0;else if(ne.context)return n;e==="class"||e==="className"?T(t,n):a&&!l&&!o?t[gc(e)]=n:t[c||e]=n}else{const d=s&&e.indexOf(":")>-1&&cc[e.split(":")[0]];d?dc(t,d,e,n):je(t,ic[e]||e,n)}return n}function pc(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),ne.registry&&!ne.done&&(ne.done=_$HY.done=!0);n;){const r=n[e];if(r&&!n.disabled){const s=n[`${e}Data`];if(s!==void 0?r.call(n,s,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function rn(t,e,n,r,s){if(ne.context){!n&&(n=[...t.childNodes]);let l=[];for(let o=0;o<n.length;o++){const c=n[o];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():l.push(c)}n=l}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,a=r!==void 0;if(t=a&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(ne.context)return n;if(i==="number"&&(e=e.toString()),a){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=Vt(t,n,r,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(ne.context)return n;n=Vt(t,n,r)}else{if(i==="function")return L(()=>{let l=e();for(;typeof l=="function";)l=l();n=rn(t,l,n,r)}),()=>n;if(Array.isArray(e)){const l=[],o=n&&Array.isArray(n);if(Ss(l,e,n,s))return L(()=>n=rn(t,l,n,r,!0)),()=>n;if(ne.context){if(!l.length)return n;if(r===void 0)return[...t.childNodes];let c=l[0],u=[c];for(;(c=c.nextSibling)!==r;)u.push(c);return n=u}if(l.length===0){if(n=Vt(t,n,r),a)return n}else o?n.length===0?Qi(t,l,r):uc(t,n,l):(n&&Vt(t),Qi(t,l));n=l}else if(e.nodeType){if(ne.context&&e.parentNode)return n=a?[e]:e;if(Array.isArray(n)){if(a)return n=Vt(t,n,r,e);Vt(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Ss(t,e,n,r){let s=!1;for(let i=0,a=e.length;i<a;i++){let l=e[i],o=n&&n[i],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))s=Ss(t,l,o)||s;else if(c==="function")if(r){for(;typeof l=="function";)l=l();s=Ss(t,Array.isArray(l)?l:[l],Array.isArray(o)?o:[o])||s}else t.push(l),s=!0;else{const u=String(l);o&&o.nodeType===3&&o.data===u?t.push(o):t.push(document.createTextNode(u))}}return s}function Qi(t,e,n=null){for(let r=0,s=e.length;r<s;r++)t.insertBefore(e[r],n)}function Vt(t,e,n,r){if(n===void 0)return t.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const l=e[a];if(s!==l){const o=l.parentNode===t;!i&&!a?o?t.replaceChild(s,l):t.insertBefore(s,n):o&&l.remove()}else i=!0}}else t.insertBefore(s,n);return[s]}const vc=!1,bc="http://www.w3.org/2000/svg";function yc(t,e=!1){return e?document.createElementNS(bc,t):document.createElement(t)}function _c(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,s=br();let i,a=!!ne.context;return Vo(()=>{a&&(br().user=a=!1),i||(i=ri(s,()=>W(()=>t.children)));const l=r();if(l instanceof HTMLHeadElement){const[o,c]=I(!1),u=()=>c(!0);Xt(d=>m(l,()=>o()?d():i(),null)),Dt(u)}else{const o=yc(t.isSVG?"g":"div",t.isSVG),c=e&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get(){return n.parentNode},configurable:!0}),m(c,i),l.appendChild(o),t.ref&&t.ref(o),Dt(()=>l.removeChild(o))}},void 0,{render:!a}),n}function za(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const l of t)l.listener({...a,from:l.location,retry:o=>{o&&(n=!0),l.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:r}}let Cs;function li(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Cs=window.history.state._depth}li();function wc(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function $c(t,e){let n=!1;return()=>{const r=Cs;li();const s=r==null?null:Cs-r;if(n){n=!1;return}s&&e(s)?(n=!0,window.history.go(-s)):t()}}const Sc=/^(?:[a-z0-9]+:)?\/\//i,Cc=/^\/+|(\/)\/+$/g,Ya="http://sr";function Bt(t,e=!1){const n=t.replace(Cc,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function sr(t,e,n){if(Sc.test(e))return;const r=Bt(t),s=n&&Bt(n);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Bt(e,!i)}function xc(t,e){if(t==null)throw new Error(e);return t}function kc(t,e){return Bt(t).replace(/\/*(\*.*)?$/g,"")+Bt(e)}function Ga(t){const e={};return t.searchParams.forEach((n,r)=>{e[r]=n}),e}function Ec(t,e,n){const[r,s]=t.split("/*",2),i=r.split("/").filter(Boolean),a=i.length;return l=>{const o=l.split("/").filter(Boolean),c=o.length-a;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:a?"":"/",params:{}},d=h=>n===void 0?void 0:n[h];for(let h=0;h<a;h++){const b=i[h],_=o[h],g=b[0]===":",p=g?b.slice(1):b;if(g&&Qr(_,d(p)))u.params[p]=_;else if(g||!Qr(_,b))return null;u.path+=`/${_}`}if(s){const h=c?o.slice(-c).join("/"):"";if(Qr(h,d(s)))u.params[s]=h;else return null}return u}}function Qr(t,e){const n=r=>r.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function Pc(t){const[e,n]=t.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Xa(t){const e=new Map,n=br();return new Proxy({},{get(r,s){return e.has(s)||ri(n,()=>e.set(s,W(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function Ac(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([s,i])=>{i==null||i===""?n.delete(s):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function Qa(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),r=t.slice(e.index+e[0].length);const s=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=e[1]),r=r.slice(e[0].length);return Qa(r).reduce((i,a)=>[...i,...s.map(l=>l+a)],[])}const Oc=100,Za=Ka(),oi=Ka(),Rn=()=>xc(si(Za),"<A> and 'use' router primitives can be only used inside a Route."),Tc=()=>si(oi)||Rn().base,Ic=t=>{const e=Tc();return W(()=>e.resolvePath(t()))},Bc=t=>{const e=Rn();return W(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},Rc=()=>Rn().navigatorFactory(),el=()=>Rn().location,cv=()=>Rn().params,Ln=()=>{const t=el(),e=Rc(),n=(r,s)=>{const i=Ae(()=>t.pathname+Ac(t.search,r)+t.hash);e(i,{scroll:!1,resolve:!1,...s})};return[t.query,n]};function Lc(t,e=""){const{component:n,load:r,children:s,info:i}=t,a=!s||Array.isArray(s)&&!s.length,l={key:t,component:n,load:r,info:i};return tl(t.path).reduce((o,c)=>{for(const u of Qa(c)){const d=kc(e,u);let h=a?d:d.split("/*",1)[0];h=h.split("/").map(b=>b.startsWith(":")||b.startsWith("*")?b:encodeURIComponent(b)).join("/"),o.push({...l,originalPath:c,pattern:h,matcher:Ec(h,!a,t.matchFilters)})}return o},[])}function Nc(t,e=0){return{routes:t,score:Pc(t[t.length-1])*1e4-e,matcher(n){const r=[];for(let s=t.length-1;s>=0;s--){const i=t[s],a=i.matcher(n);if(!a)return null;r.unshift({...a,route:i})}return r}}}function tl(t){return Array.isArray(t)?t:[t]}function nl(t,e="",n=[],r=[]){const s=tl(t);for(let i=0,a=s.length;i<a;i++){const l=s[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const o=Lc(l,e);for(const c of o){n.push(c);const u=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!u)nl(l.children,c.pattern,n,r);else{const d=Nc([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((i,a)=>a.score-i.score)}function Zr(t,e){for(let n=0,r=t.length;n<r;n++){const s=t[n].matcher(e);if(s)return s}return[]}function Dc(t,e){const n=new URL(Ya),r=W(o=>{const c=t();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),o}},n,{equals:(o,c)=>o.href===c.href}),s=W(()=>r().pathname),i=W(()=>r().search,!0),a=W(()=>r().hash),l=()=>"";return{get pathname(){return s()},get search(){return i()},get hash(){return a()},get state(){return e()},get key(){return l()},query:Xa(Fa(i,()=>Ga(r())))}}let rt;function jc(){return rt}function Fc(t,e,n,r={}){const{signal:[s,i],utils:a={}}=t,l=a.parsePath||(R=>R),o=a.renderPath||(R=>R),c=a.beforeLeave||za(),u=sr("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[d,h]=I(!1),b=async R=>{h(!0);try{await Jo(R)}finally{h(!1)}},[_,g]=I(s().value),[p,y]=I(s().state),v=Dc(_,p),w=[],x=I([]),S=W(()=>typeof r.transformUrl=="function"?Zr(e(),r.transformUrl(v.pathname)):Zr(e(),v.pathname)),E=Xa(()=>{const R=S(),N={};for(let j=0;j<R.length;j++)Object.assign(N,R[j].params);return N}),C={pattern:u,path:()=>u,outlet:()=>null,resolvePath(R){return sr(u,R)}};return L(()=>{const{value:R,state:N}=s();Ae(()=>{b(()=>{rt="native",R!==_()&&g(R),y(N),x[1]([])}).then(()=>{rt=void 0})})}),{base:C,location:v,params:E,isRouting:d,renderPath:o,parsePath:l,navigatorFactory:k,matches:S,beforeLeave:c,preloadRoute:P,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:x};function D(R,N,j){Ae(()=>{if(typeof N=="number"){N&&(a.go?a.go(N):console.warn("Router integration does not support relative routing"));return}const{replace:J,resolve:V,scroll:B,state:G}={replace:!1,resolve:!0,scroll:!0,...j},re=V?R.resolvePath(N):sr("",N);if(re===void 0)throw new Error(`Path '${N}' is not a routable path`);if(w.length>=Oc)throw new Error("Too many redirects");const pe=_();if((re!==pe||G!==p())&&!vc){if(c.confirm(re,j)){const U=w.push({value:pe,replace:J,scroll:B,state:p()});b(()=>{rt="navigate",g(re),y(G),x[1]([])}).then(()=>{w.length===U&&(rt=void 0,O({value:re,state:G}))})}}})}function k(R){return R=R||si(oi)||C,(N,j)=>D(R,N,j)}function O(R){const N=w[0];N&&((R.value!==N.value||R.state!==N.state)&&i({...R,replace:N.replace,scroll:N.scroll}),w.length=0)}function P(R,N){const j=Zr(e(),R.pathname),J=rt;rt="preload";for(let V in j){const{route:B,params:G}=j[V];B.component&&B.component.preload&&B.component.preload();const{load:re}=B;N&&re&&ri(n(),()=>re({params:G,location:{pathname:R.pathname,search:R.search,hash:R.hash,query:Ga(R),state:null,key:""},intent:"preload"}))}rt=J}}function Kc(t,e,n,r){const{base:s,location:i,params:a}=t,{pattern:l,component:o,load:c}=r().route,u=W(()=>r().path);o&&o.preload&&o.preload();const d=c?c({params:a,location:i,intent:rt||"initial"}):void 0;return{parent:e,pattern:l,path:u,outlet:()=>o?f(o,{params:a,location:i,data:d,get children(){return n()}}):n(),resolvePath(b){return sr(s.path(),b,u())}}}const Mc=t=>e=>{const{base:n}=e,r=Rr(()=>e.children),s=W(()=>nl(r(),e.base||""));let i;const a=Fc(t,s,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(a),f(Za.Provider,{value:a,get children(){return f(qc,{routerState:a,get root(){return e.root},get load(){return e.rootLoad},get children(){return[W(()=>(i=br())&&null),f(Uc,{routerState:a,get branches(){return s()}})]}})}})};function qc(t){const e=t.routerState.location,n=t.routerState.params,r=W(()=>t.load&&Ae(()=>{t.load({params:n,location:e,intent:jc()||"initial"})}));return f(q,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>f(s,{params:n,location:e,get data(){return r()},get children(){return t.children}})})}function Uc(t){const e=[];let n;const r=W(Fa(t.routerState.matches,(s,i,a)=>{let l=i&&s.length===i.length;const o=[];for(let c=0,u=s.length;c<u;c++){const d=i&&i[c],h=s[c];a&&d&&h.route.key===d.route.key?o[c]=a[c]:(l=!1,e[c]&&e[c](),Xt(b=>{e[c]=b,o[c]=Kc(t.routerState,o[c-1]||t.routerState.base,Zi(()=>r()[c+1]),()=>t.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),a&&l?a:(n=o[0],o)}));return Zi(()=>r()&&n)()}const Zi=t=>()=>f(q,{get when(){return t()},keyed:!0,children:e=>f(oi.Provider,{value:e,get children(){return e.outlet()}})}),$e=t=>{const e=Rr(()=>t.children);return Xe(t,{get children(){return e()}})};function Vc([t,e],n,r){return[n?()=>n(t()):t,r?s=>e(r(s)):e]}function Wc(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function Hc(t){let e=!1;const n=s=>typeof s=="string"?{value:s}:s,r=Vc(I(n(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),s));return t.init&&Dt(t.init((s=t.get())=>{e=!0,r[1](n(s)),e=!1})),Mc({signal:r,create:t.create,utils:t.utils})}function Jc(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zc(t,e){const n=Wc(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const Yc=new Map;function Gc(t=!0,e=!1,n="/_server",r){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let l={};function o(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function c(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const p=g.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!p||e&&!p.hasAttribute("link"))return;const y=o(p),v=y?p.href.baseVal:p.href;if((y?p.target.baseVal:p.target)||!v&&!p.hasAttribute("state"))return;const x=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||x&&x.includes("external"))return;const S=y?new URL(v,document.baseURI):new URL(v);if(!(S.origin!==window.location.origin||i&&S.pathname&&!S.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,S]}function u(g){const p=c(g);if(!p)return;const[y,v]=p,w=s.parsePath(v.pathname+v.search+v.hash),x=y.getAttribute("state");g.preventDefault(),a(w,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function d(g){const p=c(g);if(!p)return;const[y,v]=p;typeof r=="function"&&(v.pathname=r(v.pathname)),l[v.pathname]||s.preloadRoute(v,y.getAttribute("preload")!=="false")}function h(g){const p=c(g);if(!p)return;const[y,v]=p;typeof r=="function"&&(v.pathname=r(v.pathname)),!l[v.pathname]&&(l[v.pathname]=setTimeout(()=>{s.preloadRoute(v,y.getAttribute("preload")!=="false"),delete l[v.pathname]},200))}function b(g){const p=c(g);if(!p)return;const[,y]=p;typeof r=="function"&&(y.pathname=r(y.pathname)),l[y.pathname]&&(clearTimeout(l[y.pathname]),delete l[y.pathname])}function _(g){if(g.defaultPrevented)return;let p=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const v=new URL(p,Ya);if(p=s.parsePath(v.pathname+v.search),!p.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=Yc.get(p);if(y){g.preventDefault();const v=new FormData(g.target);g.submitter&&g.submitter.name&&v.append(g.submitter.name,g.submitter.value),y.call({r:s,f:g.target},v)}}Te(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",b),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",_),Dt(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",b),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",_)})}}function Xc(t){const e=()=>{const r=window.location.pathname+window.location.search;return{value:t.transformUrl?t.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},n=za();return Hc({get:e,set({value:r,replace:s,scroll:i,state:a}){s?window.history.replaceState(wc(a),"",r):window.history.pushState(a,"",r),zc(window.location.hash.slice(1),i),li()},init:r=>Jc(window,"popstate",$c(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:Gc(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(t)}var Qc=$("<a>");function ea(t){t=Xe({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=Ha(t,["href","state","class","activeClass","inactiveClass","end"]),n=Ic(()=>t.href),r=Bc(n),s=el(),i=W(()=>{const a=n();if(a===void 0)return[!1,!1];const l=Bt(a.split(/[?#]/,1)[0]).toLowerCase(),o=Bt(s.pathname).toLowerCase();return[t.end?l===o:o.startsWith(l),l===o]});return(()=>{var a=Qc();return ft(a,Xe(e,{get href(){return r()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),a})()}var xs=function(t,e){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},xs(t,e)};function on(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Zc(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})}function rl(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(u){return o([c,u])}}function o(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function sn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ks(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function Es(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Qt(t){return this instanceof Qt?(this.v=t,this):new Qt(t)}function eu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){r[h]&&(s[h]=function(b){return new Promise(function(_,g){i.push([h,b,_,g])>1||l(h,b)})})}function l(h,b){try{o(r[h](b))}catch(_){d(i[0][3],_)}}function o(h){h.value instanceof Qt?Promise.resolve(h.value.v).then(c,u):d(i[0][2],h)}function c(h){l("next",h)}function u(h){l("throw",h)}function d(h,b){h(b),i.shift(),i.length&&l(i[0][0],i[0][1])}}function tu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sn=="function"?sn(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(l,o){a=t[i](a),s(l,o,a.done,a.value)})}}function s(i,a,l,o){Promise.resolve(o).then(function(c){i({value:c,done:l})},a)}}function Ce(t){return typeof t=="function"}function sl(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var es=sl(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Ps(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var jr=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=sn(a),o=l.next();!o.done;o=l.next()){var c=o.value;c.remove(this)}}catch(g){e={error:g}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else a.remove(this);var u=this.initialTeardown;if(Ce(u))try{u()}catch(g){i=g instanceof es?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=sn(d),b=h.next();!b.done;b=h.next()){var _=b.value;try{ta(_)}catch(g){i=i??[],g instanceof es?i=Es(Es([],ks(i)),ks(g.errors)):i.push(g)}}}catch(g){r={error:g}}finally{try{b&&!b.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}}if(i)throw new es(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ta(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Ps(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Ps(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),il=jr.EMPTY;function al(t){return t instanceof jr||t&&"closed"in t&&Ce(t.remove)&&Ce(t.add)&&Ce(t.unsubscribe)}function ta(t){Ce(t)?t():t.unsubscribe()}var ll={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ol={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Es([t,e],ks(n)))},clearTimeout:function(t){var e=ol.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function cl(t){ol.setTimeout(function(){throw t})}function na(){}function ir(t){t()}var ci=function(t){on(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,al(n)&&n.add(r)):r.destination=iu,r}return e.create=function(n,r,s){return new As(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(jr),nu=Function.prototype.bind;function ts(t,e){return nu.call(t,e)}var ru=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Hn(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Hn(r)}else Hn(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Hn(n)}},t}(),As=function(t){on(e,t);function e(n,r,s){var i=t.call(this)||this,a;if(Ce(n)||!n)a={next:n??void 0,error:r??void 0,complete:s??void 0};else{var l;i&&ll.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=function(){return i.unsubscribe()},a={next:n.next&&ts(n.next,l),error:n.error&&ts(n.error,l),complete:n.complete&&ts(n.complete,l)}):a=n}return i.destination=new ru(a),i}return e}(ci);function Hn(t){cl(t)}function su(t){throw t}var iu={closed:!0,next:na,error:su,complete:na},ui=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ul(t){return t}function au(t){return t.length===0?ul:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var Ke=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=ou(e)?e:new As(e,n,r);return ir(function(){var a=s,l=a.operator,o=a.source;i.add(l?l.call(i,o):o?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=ra(n),new n(function(s,i){var a=new As({next:function(l){try{e(l)}catch(o){i(o),a.unsubscribe()}},error:i,complete:s});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ui]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return au(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=ra(e),new e(function(r,s){var i;n.subscribe(function(a){return i=a},function(a){return s(a)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function ra(t){var e;return(e=t??ll.Promise)!==null&&e!==void 0?e:Promise}function lu(t){return t&&Ce(t.next)&&Ce(t.error)&&Ce(t.complete)}function ou(t){return t&&t instanceof ci||lu(t)&&al(t)}function cu(t){return Ce(t?.lift)}function Mt(t){return function(e){if(cu(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function jt(t,e,n,r,s){return new uu(t,e,n,r,s)}var uu=function(t){on(e,t);function e(n,r,s,i,a,l){var o=t.call(this,n)||this;return o.onFinalize=a,o.shouldUnsubscribe=l,o._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,o._error=i?function(c){try{i(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,o._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,o}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ci),hu=sl(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),hl=function(t){on(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new sa(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new hu},e.prototype.next=function(n){var r=this;ir(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=sn(r.currentObservers),l=a.next();!l.done;l=a.next()){var o=l.value;o.next(n)}}catch(c){s={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;ir(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;ir(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,a=s.isStopped,l=s.observers;return i||a?il:(this.currentObservers=null,l.push(n),new jr(function(){r.currentObservers=null,Ps(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,a=r.isStopped;s?n.error(i):a&&n.complete()},e.prototype.asObservable=function(){var n=new Ke;return n.source=this,n},e.create=function(n,r){return new sa(n,r)},e}(Ke),sa=function(t){on(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:il},e}(hl),du=function(t){on(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,i=n._value;if(r)throw s;return this._throwIfClosed(),i},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(hl),fu=new Ke(function(t){return t.complete()});function mu(t){return t&&Ce(t.schedule)}function gu(t){return t[t.length-1]}function pu(t){return mu(gu(t))?t.pop():void 0}var dl=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function fl(t){return Ce(t?.then)}function ml(t){return Ce(t[ui])}function gl(t){return Symbol.asyncIterator&&Ce(t?.[Symbol.asyncIterator])}function pl(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function vu(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vl=vu();function bl(t){return Ce(t?.[vl])}function yl(t){return eu(this,arguments,function(){var n,r,s,i;return rl(this,function(a){switch(a.label){case 0:n=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Qt(n.read())];case 3:return r=a.sent(),s=r.value,i=r.done,i?[4,Qt(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Qt(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function _l(t){return Ce(t?.getReader)}function cn(t){if(t instanceof Ke)return t;if(t!=null){if(ml(t))return bu(t);if(dl(t))return yu(t);if(fl(t))return _u(t);if(gl(t))return wl(t);if(bl(t))return wu(t);if(_l(t))return $u(t)}throw pl(t)}function bu(t){return new Ke(function(e){var n=t[ui]();if(Ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yu(t){return new Ke(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _u(t){return new Ke(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,cl)})}function wu(t){return new Ke(function(e){var n,r;try{for(var s=sn(t),i=s.next();!i.done;i=s.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function wl(t){return new Ke(function(e){Su(t,e).catch(function(n){return e.error(n)})})}function $u(t){return wl(yl(t))}function Su(t,e){var n,r,s,i;return Zc(this,void 0,void 0,function(){var a,l;return rl(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=tu(t),o.label=1;case 1:return[4,n.next()];case 2:if(r=o.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=o.sent(),s={error:l},[3,11];case 6:return o.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function _t(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function $l(t,e){return e===void 0&&(e=0),Mt(function(n,r){n.subscribe(jt(r,function(s){return _t(r,t,function(){return r.next(s)},e)},function(){return _t(r,t,function(){return r.complete()},e)},function(s){return _t(r,t,function(){return r.error(s)},e)}))})}function Sl(t,e){return e===void 0&&(e=0),Mt(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Cu(t,e){return cn(t).pipe(Sl(e),$l(e))}function xu(t,e){return cn(t).pipe(Sl(e),$l(e))}function ku(t,e){return new Ke(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Eu(t,e){return new Ke(function(n){var r;return _t(n,e,function(){r=t[vl](),_t(n,e,function(){var s,i,a;try{s=r.next(),i=s.value,a=s.done}catch(l){n.error(l);return}a?n.complete():n.next(i)},0,!0)}),function(){return Ce(r?.return)&&r.return()}})}function Cl(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ke(function(n){_t(n,e,function(){var r=t[Symbol.asyncIterator]();_t(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function Pu(t,e){return Cl(yl(t),e)}function Au(t,e){if(t!=null){if(ml(t))return Cu(t,e);if(dl(t))return ku(t,e);if(fl(t))return xu(t,e);if(gl(t))return Cl(t,e);if(bl(t))return Eu(t,e);if(_l(t))return Pu(t,e)}throw pl(t)}function Ou(t,e){return e?Au(t,e):cn(t)}function _e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=pu(t);return Ou(t,n)}function Tu(t,e){return Mt(function(n,r){var s=0;n.subscribe(jt(r,function(i){r.next(t.call(e,i,s++))}))})}function Iu(t,e,n,r,s,i,a,l){var o=[],c=0,u=0,d=!1,h=function(){d&&!o.length&&!c&&e.complete()},b=function(g){return c<r?_(g):o.push(g)},_=function(g){i&&e.next(g),c++;var p=!1;cn(n(g,u++)).subscribe(jt(e,function(y){s?.(y),i?b(y):e.next(y)},function(){p=!0},void 0,function(){if(p)try{c--;for(var y=function(){var v=o.shift();a?_t(e,a,function(){return _(v)}):_(v)};o.length&&c<r;)y();h()}catch(v){e.error(v)}}))};return t.subscribe(jt(e,b,function(){d=!0,h()})),function(){l?.()}}function Os(t,e,n){return n===void 0&&(n=1/0),Ce(e)?Os(function(r,s){return Tu(function(i,a){return e(r,i,s,a)})(cn(t(r,s)))},n):(typeof e=="number"&&(n=e),Mt(function(r,s){return Iu(r,s,t,n)}))}function qt(t){return Mt(function(e,n){var r=null,s=!1,i;r=e.subscribe(jt(n,void 0,void 0,function(a){i=cn(t(a,qt(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function be(t,e){return Ce(e)?Os(t,e,1):Os(t,1)}function ee(t){return t<=0?function(){return fu}:Mt(function(e,n){var r=0;e.subscribe(jt(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Ee(t,e,n){var r=Ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?Mt(function(s,i){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var l=!0;s.subscribe(jt(i,function(o){var c;(c=r.next)===null||c===void 0||c.call(r,o),i.next(o)},function(){var o;l=!1,(o=r.complete)===null||o===void 0||o.call(r),i.complete()},function(o){var c;l=!1,(c=r.error)===null||c===void 0||c.call(r,o),i.error(o)},function(){var o,c;l&&((o=r.unsubscribe)===null||o===void 0||o.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ul}class Bu{loggedIn=I({});tokenValue=I("");set token(e){this.tokenValue[1](e),this.loggedIn[1]({Authorization:`Bearer ${e}`})}get token(){return this.tokenValue[0]}clearToken(){this.loggedIn[1]({Authorization:""})}toObservable(e){return new Ke(n=>{e.then(r=>{n.next(r)}).catch(r=>n.error(r)).finally(()=>n.complete())})}post(e,n,r){return new Ke(s=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r?.headers,...this.loggedIn[0]()},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{s.next(i)}).catch(i=>s.error(i)).finally(()=>s.complete())})}get(e,n){return new Ke(r=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...n?.headers,...this.loggedIn[0]()}}).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{r.next(s)}).catch(s=>r.error(s)).finally(()=>r.complete())})}}const Q=new Bu,ge=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xe=Object.keys,Ne=Array.isArray;function Me(t,e){return typeof e!="object"||xe(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||ge.Promise||(ge.Promise=Promise);const En=Object.getPrototypeOf,Ru={}.hasOwnProperty;function We(t,e){return Ru.call(t,e)}function an(t,e){typeof e=="function"&&(e=e(En(t))),(typeof Reflect>"u"?xe:Reflect.ownKeys)(e).forEach(n=>{ot(t,n,e[n])})}const xl=Object.defineProperty;function ot(t,e,n,r){xl(t,e,Me(n&&We(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Zt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ot(t.prototype,"constructor",t),{extend:an.bind(null,t.prototype)}}}}const Lu=Object.getOwnPropertyDescriptor;function hi(t,e){let n;return Lu(t,e)||(n=En(t))&&hi(n,e)}const Nu=[].slice;function Sr(t,e,n){return Nu.call(t,e,n)}function kl(t,e){return e(t)}function _n(t){if(!t)throw new Error("Assertion Failed")}function El(t){ge.setImmediate?setImmediate(t):setTimeout(t,0)}function Pl(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function ct(t,e){if(We(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=ct(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(a!==-1){var l=t[e.substr(0,a)];return l===void 0?void 0:ct(l,e.substr(a+1))}}function Ge(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){_n(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)Ge(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var a=e.substr(0,i),l=e.substr(i+1);if(l==="")n===void 0?Ne(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var o=t[a];o&&We(t,a)||(o=t[a]={}),Ge(o,l,n)}}else n===void 0?Ne(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Al(t){var e={};for(var n in t)We(t,n)&&(e[n]=t[n]);return e}const Du=[].concat;function Ol(t){return Du.apply([],t)}const Tl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ol([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>ge[t]),ju=Tl.map(t=>ge[t]);Pl(Tl,t=>[t,!0]);let vt=null;function Nn(t){vt=typeof WeakMap<"u"&&new WeakMap;const e=Ts(t);return vt=null,e}function Ts(t){if(!t||typeof t!="object")return t;let e=vt&&vt.get(t);if(e)return e;if(Ne(t)){e=[],vt&&vt.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Ts(t[n]))}else if(ju.indexOf(t.constructor)>=0)e=t;else{const i=En(t);for(var s in e=i===Object.prototype?{}:Object.create(i),vt&&vt.set(t,e),t)We(t,s)&&(e[s]=Ts(t[s]))}return e}const{toString:Fu}={};function Is(t){return Fu.call(t).slice(8,-1)}const Bs=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ku=typeof Bs=="symbol"?function(t){var e;return t!=null&&(e=t[Bs])&&e.apply(t)}:function(){return null},Gt={};function it(t){var e,n,r,s;if(arguments.length===1){if(Ne(t))return t.slice();if(this===Gt&&typeof t=="string")return[t];if(s=Ku(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const di=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var et=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Il(t,e){et=t,Bl=e}var Bl=()=>!0;const Mu=!new Error("").stack;function Ut(){if(Mu)try{throw Ut.arguments,new Error}catch(t){return t}return new Error}function Rs(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Bl).map(r=>`
`+r).join("")):""}var Rl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Rl),qu={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function en(t,e){this._e=Ut(),this.name=t,this.message=e}function Ll(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Cr(t,e,n,r){this._e=Ut(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Ll(t,e)}function $n(t,e){this._e=Ut(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Ll(t,e)}Zt(en).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Rs(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Zt(Cr).from(en),Zt($n).from(en);var mi=fi.reduce((t,e)=>(t[e]=e+"Error",t),{});const Uu=en;var z=fi.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=Ut(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=qu[e]||n,this.inner=null)}return Zt(r).from(Uu),t[e]=r,t},{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var ia=Rl.reduce((t,e)=>(t[e+"Error"]=z[e],t),{}),ar=fi.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=z[e]),t),{});function ce(){}function Pn(t){return t}function Vu(t,e){return t==null||t===Pn?e:function(n){return e(t(n))}}function Ft(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Wu(t,e){return t===ce?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ft(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Ft(s,this.onerror):s),i!==void 0?i:n}}function Hu(t,e){return t===ce?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ft(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ft(r,this.onerror):r)}}function Ju(t,e){return t===ce?e:function(n){var r=t.apply(this,arguments);Me(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Ft(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Ft(i,this.onerror):i),r===void 0?a===void 0?void 0:a:Me(r,a)}}function zu(t,e){return t===ce?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function gi(t,e){return t===ce?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}ar.ModifyError=Cr,ar.DexieError=en,ar.BulkError=$n;var An={};const Nl=100,[Ls,xr,Ns]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,En(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,En(e),t]})(),Dl=xr&&xr.then,lr=Ls&&Ls.constructor,pi=!!Ns;var Ds=!1,Yu=Ns?()=>{Ns.then(Jn)}:ge.setImmediate?setImmediate.bind(null,Jn):ge.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Jn(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Jn,0)},Sn=function(t,e){wn.push([t,e]),kr&&(Yu(),kr=!1)},js=!0,kr=!0,Rt=[],or=[],Fs=null,Ks=Pn,tn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oa,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{oa(t[0],t[1])}catch{}})}},H=tn,wn=[],Lt=0,cr=[];function K(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ce,this._lib=!1;var e=this._PSD=H;if(et&&(this._stackHolder=Ut(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==An)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&qs(this,this._value))}this._state=null,this._value=null,++e.ref,Fl(this,t)}const Ms={get:function(){var t=H,e=Er;function n(r,s){var i=!t.global&&(t!==H||e!==Er);const a=i&&!ht();var l=new K((o,c)=>{vi(this,new jl(Pr(r,t,i,a),Pr(s,t,i,a),o,c,t))});return et&&ql(l,this),l}return n.prototype=An,n},set:function(t){ot(this,"then",t&&t.prototype===An?Ms:{get:function(){return t},set:Ms.set})}};function jl(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function Fl(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Dn();n&&typeof n.then=="function"?Fl(t,(s,i)=>{n instanceof K?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,Kl(t)),r&&jn()}},qs.bind(null,t))}catch(n){qs(t,n)}}function qs(t,e){if(or.push(e),t._state===null){var n=t._lib&&Dn();e=Ks(e),t._state=!1,t._value=e,et&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(a){s&&s(a)}}(()=>{var r=hi(e,"stack");e._promise=t,ot(e,"stack",{get:()=>Ds?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Rt.some(s=>s._value===r._value)||Rt.push(r)}(t),Kl(t),n&&jn()}}function Kl(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)vi(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),Lt===0&&(++Lt,Sn(()=>{--Lt==0&&bi()},[]))}function vi(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Lt,Sn(Gu,[n,t,e])}else t._listeners.push(e)}function Gu(t,e,n){try{Fs=e;var r,s=e._value;e._state?r=t(s):(or.length&&(or=[]),r=t(s),or.indexOf(s)===-1&&function(i){for(var a=Rt.length;a;)if(Rt[--a]._value===i._value)return void Rt.splice(a,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{Fs=null,--Lt==0&&bi(),--n.psd.ref||n.psd.finalize()}}function Ml(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,a=t._value;a!=null?(s=a.name||"Error",i=a.message||a,r=Rs(a,0)):(s=a,i=""),e.push(s+(i?": "+i:"")+r)}return et&&((r=Rs(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Ml(t._prev,e,n)),e}function ql(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Jn(){Dn()&&jn()}function Dn(){var t=js;return js=!1,kr=!1,t}function jn(){var t,e,n;do for(;wn.length>0;)for(t=wn,wn=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(wn.length>0);js=!0,kr=!0}function bi(){var t=Rt;Rt=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=cr.slice(0),n=e.length;n;)e[--n]()}function zn(t){return new K(An,!1,t)}function ye(t,e){var n=H;return function(){var r=Dn(),s=H;try{return $t(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{$t(s,!1),r&&jn()}}}an(K.prototype,{then:Ms,_then:function(t,e){vi(this,new jl(null,null,t,e,H))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):zn(r)):this.then(null,r=>r&&r.name===e?n(r):zn(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),zn(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Ds=!0;var t=Ml(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Ds=!1}}},timeout:function(t,e){return t<1/0?new K((n,r)=>{var s=setTimeout(()=>r(new z.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ot(K.prototype,Symbol.toStringTag,"Dexie.Promise"),tn.env=Ul(),an(K,{all:function(){var t=it.apply(null,arguments).map(Yn);return new K(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>K.resolve(s).then(a=>{t[i]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof K)return t;if(t&&typeof t.then=="function")return new K((n,r)=>{t.then(n,r)});var e=new K(An,!0,t);return ql(e,Fs),e},reject:zn,race:function(){var t=it.apply(null,arguments).map(Yn);return new K((e,n)=>{t.map(r=>K.resolve(r).then(e,n))})},PSD:{get:()=>H,set:t=>H=t},totalEchoes:{get:()=>Er},newPSD:wt,usePSD:hn,scheduler:{get:()=>Sn,set:t=>{Sn=t}},rejectionMapper:{get:()=>Ks,set:t=>{Ks=t}},follow:(t,e)=>new K((n,r)=>wt((s,i)=>{var a=H;a.unhandleds=[],a.onunhandled=i,a.finalize=Ft(function(){(function(l){function o(){l(),cr.splice(cr.indexOf(o),1)}cr.push(o),++Lt,Sn(()=>{--Lt==0&&bi()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},a.finalize),t()},e,n,r))}),lr&&(lr.allSettled&&ot(K,"allSettled",function(){const t=it.apply(null,arguments).map(Yn);return new K(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>K.resolve(s).then(a=>r[i]={status:"fulfilled",value:a},a=>r[i]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),lr.any&&typeof AggregateError<"u"&&ot(K,"any",function(){const t=it.apply(null,arguments).map(Yn);return new K((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,a)=>K.resolve(i).then(l=>e(l),l=>{s[a]=l,--r||n(new AggregateError(s))}))})}));const Le={awaits:0,echoes:0,id:0};var Xu=0,ur=[],ns=0,Er=0,Qu=0;function wt(t,e,n,r){var s=H,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Qu;var a=tn.env;i.env=pi?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject,nthen:aa(a.nthen,i),gthen:aa(a.gthen,i)}:{},e&&Me(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=hn(i,t,n,r);return i.ref===0&&i.finalize(),l}function un(){return Le.id||(Le.id=++Xu),++Le.awaits,Le.echoes+=Nl,Le.id}function ht(){return!!Le.awaits&&(--Le.awaits==0&&(Le.id=0),Le.echoes=Le.awaits*Nl,!0)}function Yn(t){return Le.echoes&&t&&t.constructor===lr?(un(),t.then(e=>(ht(),e),e=>(ht(),Pe(e)))):t}function Zu(t){++Er,Le.echoes&&--Le.echoes!=0||(Le.echoes=Le.id=0),ur.push(H),$t(t,!0)}function eh(){var t=ur[ur.length-1];ur.pop(),$t(t,!1)}function $t(t,e){var n=H;if((e?!Le.echoes||ns++&&t===H:!ns||--ns&&t===H)||Vl(e?Zu.bind(null,t):eh),t!==H&&(H=t,n===tn&&(tn.env=Ul()),pi)){var r=tn.env.Promise,s=t.env;xr.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(ge,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function Ul(){var t=ge.Promise;return pi?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ge,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:xr.then,gthen:t.prototype.then}:{}}function hn(t,e,n,r,s){var i=H;try{return $t(t,!0),e(n,r,s)}finally{$t(i,!1)}}function Vl(t){Dl.call(Ls,t)}function Pr(t,e,n,r){return typeof t!="function"?t:function(){var s=H;n&&un(),$t(e,!0);try{return t.apply(this,arguments)}finally{$t(s,!1),r&&Vl(ht)}}}function aa(t,e){return function(n,r){return t.call(this,Pr(n,e),Pr(r,e))}}(""+Dl).indexOf("[native code]")===-1&&(un=ht=ce);const la="unhandledrejection";function oa(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(ge.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(la,!0,!0),Me(r,s)):ge.CustomEvent&&Me(r=new CustomEvent(la,{detail:s}),s),r&&ge.dispatchEvent&&(dispatchEvent(r),!ge.PromiseRejectionEvent&&ge.onunhandledrejection))try{ge.onunhandledrejection(r)}catch{}et&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Pe=K.reject;function Us(t,e,n,r){if(t.idbdb&&(t._state.openComplete||H.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===mi.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Us(t,e,n,r))):Pe(i)}return s._promise(e,(i,a)=>wt(()=>(H.trans=s,r(i,a,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return Pe(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Pe(new z.DatabaseClosed);t.open().catch(ce)}return t._state.dbReadyPromise.then(()=>Us(t,e,n,r))}const ca="3.2.4",It="￿",Vs=-1/0,nt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wl="String expected.",Cn=[],Fr=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),th=Fr,nh=Fr,Hl=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Kr="__dbnames",rs="readonly",ss="readwrite";function Kt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Jl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Nn(e))[t],e)}class rh{_trans(e,n,r){const s=this._tx||H.trans,i=this.name;function a(o,c,u){if(!u.schema[i])throw new z.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const l=Dn();try{return s&&s.db===this.db?s===H.trans?s._promise(e,a,r):wt(()=>s._promise(e,a,r),{trans:s,transless:H.transless||H}):Us(this.db,e,[this.name],a)}finally{l&&jn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Ne(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=xe(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==It)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&et&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function a(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[l,o]=n.reduce(([c,u],d)=>{const h=s[d],b=e[d];return[c||h,c||!h?Kt(u,h&&h.multi?_=>{const g=ct(_,d);return Ne(g)&&g.some(p=>a(b,p))}:_=>a(b,ct(_,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(o):r?this.filter(o):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Ne(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(We(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Me(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[i]})).then(a=>a.numFailures?K.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Ge(e,s,a)}catch{}return a})}update(e,n){if(typeof e!="object"||Ne(e))return this.where(":id").equals(e).modify(n);{const r=ct(e,this.schema.primKey.keyPath);if(r===void 0)return Pe(new z.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?xe(n).forEach(s=>{Ge(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[i],keys:n!=null?[n]:null})).then(a=>a.numFailures?K.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Ge(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?K.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Jl})).then(e=>e.numFailures?K.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:l,keyPath:o}=this.schema.primKey;if(o&&s)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=o&&l?e.map(Gn(o)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:b,failures:_})=>{if(d===0)return i?h:b;throw new $n(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,_)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:l,keyPath:o}=this.schema.primKey;if(o&&s)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=o&&l?e.map(Gn(o)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:b,failures:_})=>{if(d===0)return i?h:b;throw new $n(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,_)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new $n(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function xn(t){var e={},n=function(a,l){if(l){for(var o=arguments.length,c=new Array(o-1);--o;)c[o-1]=arguments[o];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(a,l,o){if(typeof a!="object"){var c;l||(l=zu),o||(o=ce);var u={subscribers:[],fire:o,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,o)}};return e[a]=n[a]=u,u}xe(c=a).forEach(function(d){var h=c[d];if(Ne(h))i(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new z.InvalidArgument("Invalid event config");var b=i(d,Pn,function(){for(var _=arguments.length,g=new Array(_);_--;)g[_]=arguments[_];b.subscribers.forEach(function(p){El(function(){p.apply(null,g)})})})}})}}function mn(t,e){return Zt(e).from({prototype:t}),e}function Wt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function is(t,e){t.filter=Kt(t.filter,e)}function as(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Kt(r(),e()):e,t.justLimit=n&&!r}function hr(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ua(t,e,n){const r=hr(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Xn(t,e,n,r){const s=t.replayFilter?Kt(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},a=(l,o,c)=>{if(!s||s(o,c,h=>o.stop(h),h=>o.fail(h))){var u=o.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),We(i,d)||(i[d]=!0,e(l,o,c))}};return Promise.all([t.or._iterate(a,n),ha(ua(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return ha(ua(t,r,n),Kt(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function ha(t,e,n,r){var s=ye(r?(i,a,l)=>n(r(i),a,l):n);return t.then(i=>{if(i)return i.start(()=>{var a=()=>i.continue();e&&!e(i,l=>a=l,l=>{i.stop(l),a=ce},l=>{i.fail(l),a=ce})||s(i.value,i,l=>a=l),a()})})}function Fe(t,e){try{const n=da(t),r=da(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const a=s.length,l=i.length,o=a<l?a:l;for(let c=0;c<o;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return a===l?0:a<l?-1:1}(fa(t),fa(e));case"Array":return function(s,i){const a=s.length,l=i.length,o=a<l?a:l;for(let c=0;c<o;++c){const u=Fe(s[c],i[c]);if(u!==0)return u}return a===l?0:a<l?-1:1}(t,e)}}catch{}return NaN}function da(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Is(t);return n==="ArrayBuffer"?"binary":n}function fa(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class sh{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Pe.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Pe.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Kt(n.algorithm,e)}_iterate(e,n){return Xn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Me(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Xn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(Wt(r,!0))return s.count({trans:n,query:{index:hr(r,s.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var i=0;return Xn(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function a(c,u){return u?a(c[r[u]],u-1):c[s]}var l=this._ctx.dir==="next"?1:-1;function o(c,u){var d=a(c,i),h=a(u,i);return d<h?-l:d>h?l:0}return this.toArray(function(c){return c.sort(o)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Wt(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=hr(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return Xn(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Wt(n)?as(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):as(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),as(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return is(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return is(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=Kt(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Wt(n,!0)&&n.limit>0)return this._read(s=>{var i=hr(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return is(this._ctx,function(s){var i=s.primaryKey.toString(),a=We(r,i);return r[i]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=xe(e),a=i.length;s=function(g){for(var p=!1,y=0;y<a;++y){var v=i[y],w=e[v];ct(g,v)!==w&&(Ge(g,v,w),p=!0)}return p}}const l=n.table.core,{outbound:o,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const b=[],_=(g,p)=>{const{failures:y,numFailures:v}=p;h+=g-v;for(let w of xe(y))d.push(y[w])};return this.clone().primaryKeys().then(g=>{const p=y=>{const v=Math.min(u,g.length-y);return l.getMany({trans:r,keys:g.slice(y,y+v),cache:"immutable"}).then(w=>{const x=[],S=[],E=o?[]:null,C=[];for(let k=0;k<v;++k){const O=w[k],P={value:Nn(O),primKey:g[y+k]};s.call(P,P.value,P)!==!1&&(P.value==null?C.push(g[y+k]):o||Fe(c(O),c(P.value))===0?(S.push(P.value),o&&E.push(g[y+k])):(C.push(g[y+k]),x.push(P.value)))}const D=Wt(n)&&n.limit===1/0&&(typeof e!="function"||e===ls)&&{index:n.index,range:n.range};return Promise.resolve(x.length>0&&l.mutate({trans:r,type:"add",values:x}).then(k=>{for(let O in k.failures)C.splice(parseInt(O),1);_(x.length,k)})).then(()=>(S.length>0||D&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:E,values:S,criteria:D,changeSpec:typeof e!="function"&&e}).then(k=>_(S.length,k))).then(()=>(C.length>0||D&&e===ls)&&l.mutate({trans:r,type:"delete",keys:C,criteria:D}).then(k=>_(C.length,k))).then(()=>g.length>y+v&&p(y+u))})};return p(0).then(()=>{if(d.length>0)throw new Cr("Error modifying one or more objects",d,h,b);return g.length})})})}delete(){var e=this._ctx,n=e.range;return Wt(e)&&(e.isPrimKey&&!nh||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:o,results:c,numFailures:u})=>{if(u)throw new Cr("Could not delete some values",Object.keys(l).map(d=>l[d]),a-u);return a-u}))}):this.modify(ls)}}const ls=(t,e)=>e.value=null;function ih(t,e){return t<e?-1:t===e?0:1}function ah(t,e){return t>e?-1:t===e?0:1}function Ve(t,e,n){var r=t instanceof Yl?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ht(t){return new t.Collection(t,()=>zl("")).limit(0)}function lh(t,e,n,r,s,i){for(var a=Math.min(t.length,r.length),l=-1,o=0;o<a;++o){var c=e[o];if(c!==r[o])return s(t[o],n[o])<0?t.substr(0,o)+n[o]+n.substr(o+1):s(t[o],r[o])<0?t.substr(0,o)+r[o]+n.substr(o+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;s(t[o],c)<0&&(l=o)}return a<r.length&&i==="next"?t+n.substr(t.length):a<t.length&&i==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Qn(t,e,n,r){var s,i,a,l,o,c,u,d=n.length;if(!n.every(g=>typeof g=="string"))return Ve(t,Wl);function h(g){s=function(y){return y==="next"?v=>v.toUpperCase():v=>v.toLowerCase()}(g),i=function(y){return y==="next"?v=>v.toLowerCase():v=>v.toUpperCase()}(g),a=g==="next"?ih:ah;var p=n.map(function(y){return{lower:i(y),upper:s(y)}}).sort(function(y,v){return a(y.lower,v.lower)});l=p.map(function(y){return y.upper}),o=p.map(function(y){return y.lower}),c=g,u=g==="next"?"":r}h("next");var b=new t.Collection(t,()=>pt(l[0],o[d-1]+r));b._ondirectionchange=function(g){h(g)};var _=0;return b._addAlgorithm(function(g,p,y){var v=g.key;if(typeof v!="string")return!1;var w=i(v);if(e(w,o,_))return!0;for(var x=null,S=_;S<d;++S){var E=lh(v,w,l[S],o[S],a,c);E===null&&x===null?_=S+1:(x===null||a(x,E)>0)&&(x=E)}return p(x!==null?function(){g.continue(x+u)}:y),!1}),b}function pt(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function zl(t){return{type:1,lower:t,upper:t}}class Yl{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?Ht(this):new this.Collection(this,()=>pt(e,n,!r,!s))}catch{return Ve(this,nt)}}equals(e){return e==null?Ve(this,nt):new this.Collection(this,()=>zl(e))}above(e){return e==null?Ve(this,nt):new this.Collection(this,()=>pt(e,void 0,!0))}aboveOrEqual(e){return e==null?Ve(this,nt):new this.Collection(this,()=>pt(e,void 0,!1))}below(e){return e==null?Ve(this,nt):new this.Collection(this,()=>pt(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Ve(this,nt):new this.Collection(this,()=>pt(void 0,e))}startsWith(e){return typeof e!="string"?Ve(this,Wl):this.between(e,e+It,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Qn(this,(n,r)=>n.indexOf(r[0])===0,[e],It)}equalsIgnoreCase(e){return Qn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=it.apply(Gt,arguments);return e.length===0?Ht(this):Qn(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=it.apply(Gt,arguments);return e.length===0?Ht(this):Qn(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,It)}anyOf(){const e=it.apply(Gt,arguments);let n=this._cmp;try{e.sort(n)}catch{return Ve(this,nt)}if(e.length===0)return Ht(this);const r=new this.Collection(this,()=>pt(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,a,l)=>{const o=i.key;for(;n(o,e[s])>0;)if(++s,s===e.length)return a(l),!1;return n(o,e[s])===0||(a(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[Vs,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=it.apply(Gt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ve(this,nt)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[Vs,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,a=this._min,l=this._max;if(e.length===0)return Ht(this);if(!e.every(v=>v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0))return Ve(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);const o=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=s;function h(v,w){return d(v[0],w[0])}try{u=e.reduce(function(v,w){let x=0,S=v.length;for(;x<S;++x){const E=v[x];if(r(w[0],E[1])<0&&r(w[1],E[0])>0){E[0]=a(E[0],w[0]),E[1]=l(E[1],w[1]);break}}return x===S&&v.push(w),v},[]),u.sort(h)}catch{return Ve(this,nt)}let b=0;const _=c?v=>s(v,u[b][1])>0:v=>s(v,u[b][1])>=0,g=o?v=>i(v,u[b][0])>0:v=>i(v,u[b][0])>=0;let p=_;const y=new this.Collection(this,()=>pt(u[0][0],u[u.length-1][1],!o,!c));return y._ondirectionchange=v=>{v==="next"?(p=_,d=s):(p=g,d=i),u.sort(h)},y._addAlgorithm((v,w,x)=>{for(var S=v.key;p(S);)if(++b,b===u.length)return w(x),!1;return!!function(E){return!_(E)&&!g(E)}(S)||(this._cmp(S,u[b][1])===0||this._cmp(S,u[b][0])===0||w(()=>{d===s?v.continue(u[b][0]):v.continue(u[b][1])}),!1)}),y}startsWithAnyOf(){const e=it.apply(Gt,arguments);return e.every(n=>typeof n=="string")?e.length===0?Ht(this):this.inAnyRange(e.map(n=>[n,n+It])):Ve(this,"startsWithAnyOf() only works with strings")}}function Qe(t){return ye(function(e){return On(e),t(e.target.error),!1})}function On(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Tn="storagemutated",bt="x-storagemutated-1",St=xn(null,Tn);class oh{_lock(){return _n(!H.global),++this._reculock,this._reculock!==1||H.global||(H.lockOwnerFor=this),this}_unlock(){if(_n(!H.global),--this._reculock==0)for(H.global||(H.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{hn(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&H.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(_n(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new z.DatabaseClosed(r);case"MissingAPIError":throw new z.MissingAPI(r.message,r);default:throw new z.OpenFailed(r)}if(!this.active)throw new z.TransactionInactive;return _n(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ye(s=>{On(s),this._reject(e.error)}),e.onabort=ye(s=>{On(s),this.active&&this._reject(new z.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=ye(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&St.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Pe(new z.ReadOnly("Transaction is readonly"));if(!this.active)return Pe(new z.TransactionInactive);if(this._locked())return new K((i,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,a)},H])});if(r)return wt(()=>{var i=new K((a,l)=>{this._lock();const o=n(a,l,this);o&&o.then&&o.then(a,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new K((i,a)=>{var l=n(i,a,this);l&&l.then&&l.then(i,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=K.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var i=n._waitingFor;return new K((a,l)=>{r.then(o=>n._waitingQueue.push(ye(a.bind(null,o))),o=>n._waitingQueue.push(ye(l.bind(null,o)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(We(n,e))return n[e];const r=this.schema[e];if(!r)throw new z.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function Ws(t,e,n,r,s,i,a){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(s?"++":"")+Gl(e)}}function Gl(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xl(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Pl(n,r=>[r.name,r])}}let In=t=>{try{return t.only([[]]),In=()=>[[]],[[]]}catch{return In=()=>It,It}};function Hs(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>ct(r,e)}(t):e=>ct(e,t)}function ma(t){return[].slice.call(t)}let ch=0;function kn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function uh(t,e,n){function r(o){if(o.type===3)return null;if(o.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=o;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:s,hasGetAll:i}=function(o,c){const u=ma(o.objectStoreNames);return{schema:{name:o.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:b}=d,_=Ne(h),g=h==null,p={},y={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:_,keyPath:h,autoIncrement:b,unique:!0,extractKey:Hs(h)},indexes:ma(d.indexNames).map(v=>d.index(v)).map(v=>{const{name:w,unique:x,multiEntry:S,keyPath:E}=v,C={name:w,compound:Ne(E),keyPath:E,unique:x,multiEntry:S,extractKey:Hs(E)};return p[kn(E)]=C,C}),getIndexByKeyPath:v=>p[kn(v)]};return p[":id"]=y.primaryKey,h!=null&&(p[kn(h)]=y.primaryKey),y})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=s.tables.map(o=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:b,values:_,range:g}){return new Promise((p,y)=>{p=ye(p);const v=d.objectStore(u),w=v.keyPath==null,x=h==="put"||h==="add";if(!x&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:S}=b||_||{length:1};if(b&&_&&b.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if(S===0)return p({numFailures:0,failures:{},results:[],lastResult:void 0});let E;const C=[],D=[];let k=0;const O=R=>{++k,On(R)};if(h==="deleteRange"){if(g.type===4)return p({numFailures:k,failures:D,results:[],lastResult:void 0});g.type===3?C.push(E=v.clear()):C.push(E=v.delete(r(g)))}else{const[R,N]=x?w?[_,b]:[_,null]:[b,null];if(x)for(let j=0;j<S;++j)C.push(E=N&&N[j]!==void 0?v[h](R[j],N[j]):v[h](R[j])),E.onerror=O;else for(let j=0;j<S;++j)C.push(E=v[h](R[j])),E.onerror=O}const P=R=>{const N=R.target.result;C.forEach((j,J)=>j.error!=null&&(D[J]=j.error)),p({numFailures:k,failures:D,results:h==="delete"?b:C.map(j=>j.result),lastResult:N})};E.onerror=R=>{O(R),P(R)},E.onsuccess=P})},getMany:({trans:d,keys:h})=>new Promise((b,_)=>{b=ye(b);const g=d.objectStore(u),p=h.length,y=new Array(p);let v,w=0,x=0;const S=C=>{const D=C.target;y[D._pos]=D.result,++x===w&&b(y)},E=Qe(_);for(let C=0;C<p;++C)h[C]!=null&&(v=g.get(h[C]),v._pos=C,v.onsuccess=S,v.onerror=E,++w);w===0&&b(y)}),get:({trans:d,key:h})=>new Promise((b,_)=>{b=ye(b);const g=d.objectStore(u).get(h);g.onsuccess=p=>b(p.target.result),g.onerror=Qe(_)}),query:function(d){return h=>new Promise((b,_)=>{b=ye(b);const{trans:g,values:p,limit:y,query:v}=h,w=y===1/0?void 0:y,{index:x,range:S}=v,E=g.objectStore(u),C=x.isPrimaryKey?E:E.index(x.name),D=r(S);if(y===0)return b({result:[]});if(d){const k=p?C.getAll(D,w):C.getAllKeys(D,w);k.onsuccess=O=>b({result:O.target.result}),k.onerror=Qe(_)}else{let k=0;const O=p||!("openKeyCursor"in C)?C.openCursor(D):C.openKeyCursor(D),P=[];O.onsuccess=R=>{const N=O.result;return N?(P.push(p?N.value:N.primaryKey),++k===y?b({result:P}):void N.continue()):b({result:P})},O.onerror=Qe(_)}})}(i),openCursor:function({trans:d,values:h,query:b,reverse:_,unique:g}){return new Promise((p,y)=>{p=ye(p);const{index:v,range:w}=b,x=d.objectStore(u),S=v.isPrimaryKey?x:x.index(v.name),E=_?g?"prevunique":"prev":g?"nextunique":"next",C=h||!("openKeyCursor"in S)?S.openCursor(r(w),E):S.openKeyCursor(r(w),E);C.onerror=Qe(y),C.onsuccess=ye(D=>{const k=C.result;if(!k)return void p(null);k.___id=++ch,k.done=!1;const O=k.continue.bind(k);let P=k.continuePrimaryKey;P&&(P=P.bind(k));const R=k.advance.bind(k),N=()=>{throw new Error("Cursor not stopped")};k.trans=d,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=ye(y),k.next=function(){let j=1;return this.start(()=>j--?this.continue():this.stop()).then(()=>this)},k.start=j=>{const J=new Promise((B,G)=>{B=ye(B),C.onerror=Qe(G),k.fail=G,k.stop=re=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=N,B(re)}}),V=()=>{if(C.result)try{j()}catch(B){k.fail(B)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return C.onsuccess=ye(B=>{C.onsuccess=V,V()}),k.continue=O,k.continuePrimaryKey=P,k.advance=R,V(),J},p(k)},y)})},count({query:d,trans:h}){const{index:b,range:_}=d;return new Promise((g,p)=>{const y=h.objectStore(u),v=b.isPrimaryKey?y:y.index(b.name),w=r(_),x=w?v.count(w):v.count();x.onsuccess=ye(S=>g(S.target.result)),x.onerror=Qe(p)})}}}(o)),l={};return a.forEach(o=>l[o.name]=o),{stack:"dbcore",transaction:t.transaction.bind(t),table(o){if(!l[o])throw new Error(`Table '${o}' not found`);return l[o]},MIN_KEY:-1/0,MAX_KEY:In(e),schema:s}}function Js({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:a,indexedDB:l},o){return{dbcore:function(u,d){return d.reduce((h,{create:b})=>({...h,...b(h)}),u)}(uh(i,a,o),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(a=>a.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function Ar({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(a=>{const l=hi(a,s);(!l||"value"in l&&l.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?ot(a,s,{get(){return this.table(s)},set(o){xl(this,s,{value:o,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,i))})})}function zs({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function hh(t,e){return t._cfg.version-e._cfg.version}function dh(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const a=i._reject.bind(i),l=H.transless||H;wt(()=>{H.trans=i,H.transless=l,e===0?(xe(s).forEach(o=>{os(n,o,s[o].primKey,s[o].indexes)}),Js(t,n),K.follow(()=>t.on.populate.fire(i)).catch(a)):function({_novip:o},c,u,d){const h=[],b=o._versions;let _=o._dbSchema=Gs(o,o.idbdb,d),g=!1;const p=b.filter(v=>v._cfg.version>=c);function y(){return h.length?K.resolve(h.shift()(u.idbtrans)).then(y):K.resolve()}return p.forEach(v=>{h.push(()=>{const w=_,x=v._cfg.dbschema;Xs(o,w,d),Xs(o,x,d),_=o._dbSchema=x;const S=Ql(w,x);S.add.forEach(C=>{os(d,C[0],C[1].primKey,C[1].indexes)}),S.change.forEach(C=>{if(C.recreate)throw new z.Upgrade("Not yet support for changing primary key");{const D=d.objectStore(C.name);C.add.forEach(k=>Ys(D,k)),C.change.forEach(k=>{D.deleteIndex(k.name),Ys(D,k)}),C.del.forEach(k=>D.deleteIndex(k))}});const E=v._cfg.contentUpgrade;if(E&&v._cfg.version>c){Js(o,d),u._memoizedTables={},g=!0;let C=Al(x);S.del.forEach(P=>{C[P]=w[P]}),zs(o,[o.Transaction.prototype]),Ar(o,[o.Transaction.prototype],xe(C),C),u.schema=C;const D=di(E);let k;D&&un();const O=K.follow(()=>{if(k=E(u),k&&D){var P=ht.bind(null,null);k.then(P,P)}});return k&&typeof k.then=="function"?K.resolve(k):O.then(()=>k)}}),h.push(w=>{(!g||!th)&&function(x,S){[].slice.call(S.db.objectStoreNames).forEach(E=>x[E]==null&&S.db.deleteObjectStore(E))}(v._cfg.dbschema,w),zs(o,[o.Transaction.prototype]),Ar(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),u.schema=o._dbSchema})}),y().then(()=>{var v,w;w=d,xe(v=_).forEach(x=>{w.db.objectStoreNames.contains(x)||os(w,x,v[x].primKey,v[x].indexes)})})}(t,e,i,n).catch(a)})}function Ql(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!Fr)a.recreate=!0,n.change.push(a);else{const l=s.idxByName,o=i.idxByName;let c;for(c in l)o[c]||a.del.push(c);for(c in o){const u=l[c],d=o[c];u?u.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}function os(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Ys(s,i)),s}function Ys(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Gs(t,e,n){const r={};return Sr(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let a=i.keyPath;const l=Ws(Gl(a),a||"",!1,!1,!!i.autoIncrement,a&&typeof a!="string",!0),o=[];for(let u=0;u<i.indexNames.length;++u){const d=i.index(i.indexNames[u]);a=d.keyPath;var c=Ws(d.name,a,!!d.unique,!!d.multiEntry,!1,a&&typeof a!="string",!1);o.push(c)}r[s]=Xl(s,l,o)}),r}function Xs({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],a=n.objectStore(i);t._hasGetAll="getAll"in a;for(let l=0;l<a.indexNames.length;++l){const o=a.indexNames[l],c=a.index(o).keyPath,u=typeof c=="string"?c:"["+Sr(c).join("+")+"]";if(e[i]){const d=e[i].idxByName[u];d&&(d.name=o,delete e[i].idxByName[u],e[i].idxByName[o]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ge.WorkerGlobalScope&&ge instanceof ge.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class fh{_parseStoresSpec(e,n){xe(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((a,l)=>{const o=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return Ws(o,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),Ne(c),l===0)}),i=s.shift();if(i.multi)throw new z.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")}),n[r]=Xl(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Me(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(a=>{Me(s,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(s,i)}),n._dbSchema=i,zs(n,[n._allTables,n,n.Transaction.prototype]),Ar(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],xe(i),i),n._storeNames=xe(i),this}upgrade(e){return this._cfg.contentUpgrade=gi(this._cfg.contentUpgrade||ce,e),this}}function yi(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Nt(Kr,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function _i(t){return t&&typeof t.databases=="function"}function Qs(t){return wt(function(){return H.letThrough=!0,t()})}function mh(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function gh(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Pe(e.dbOpenError):t);et&&(e.openCanceller._stackHolder=Ut()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new z.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,a=null,l=!1;return K.race([r,(typeof navigator>"u"?K.resolve():mh()).then(()=>new K((o,c)=>{if(s(),!n)throw new z.MissingAPI;const u=t.name,d=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!d)throw new z.MissingAPI;d.onerror=Qe(c),d.onblocked=ye(t._fireOnBlocked),d.onupgradeneeded=ye(h=>{if(a=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=On,a.abort(),d.result.close();const _=n.deleteDatabase(u);_.onsuccess=_.onerror=ye(()=>{c(new z.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{a.onerror=Qe(c);var b=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;l=b<1,t._novip.idbdb=d.result,dh(t,b/10,a,c)}},c),d.onsuccess=ye(()=>{a=null;const h=t._novip.idbdb=d.result,b=Sr(h.objectStoreNames);if(b.length>0)try{const g=h.transaction((_=b).length===1?_[0]:_,"readonly");e.autoSchema?function({_novip:p},y,v){p.verno=y.version/10;const w=p._dbSchema=Gs(0,y,v);p._storeNames=Sr(y.objectStoreNames,0),Ar(p,[p._allTables],xe(w),w)}(t,h,g):(Xs(t,t._dbSchema,g),function(p,y){const v=Ql(Gs(0,p.idbdb,y),p._dbSchema);return!(v.add.length||v.change.some(w=>w.add.length||w.change.length))}(t,g)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Js(t,g)}catch{}var _;Cn.push(t),h.onversionchange=ye(g=>{e.vcFired=!0,t.on("versionchange").fire(g)}),h.onclose=ye(g=>{t.on("close").fire(g)}),l&&function({indexedDB:g,IDBKeyRange:p},y){!_i(g)&&y!==Kr&&yi(g,p).put({name:y}).catch(ce)}(t._deps,u),o()},c)}))]).then(()=>(s(),e.onReadyBeingFired=[],K.resolve(Qs(()=>t.on.ready.fire(t.vip))).then(function o(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(gi,ce);return e.onReadyBeingFired=[],K.resolve(Qs(()=>c(t.vip))).then(o)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(o=>{e.dbOpenError=o;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),Pe(o)}).finally(()=>{e.openComplete=!0,i()})}function Zs(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return a=>{var l=i(a),o=l.value;return l.done?o:o&&typeof o.then=="function"?o.then(n,r):Ne(o)?Promise.all(o).then(n,r):n(o)}}return s(e)()}function ph(t,e,n){var r=arguments.length;if(r<2)throw new z.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Ol(s),n]}function Zl(t,e,n,r,s){return K.resolve().then(()=>{const i=H.transless||H,a=t._createTransaction(e,n,t._dbSchema,r),l={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===mi.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Zl(t,e,n,null,s))):Pe(d)}const o=di(s);let c;o&&un();const u=K.follow(()=>{if(c=s.call(a,a),c)if(o){var d=ht.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Zs(c))},l);return(c&&typeof c.then=="function"?K.resolve(c).then(d=>a.active?d:Pe(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&a._resolve(),a._completion.then(()=>d))).catch(d=>(a._reject(d),Pe(d)))})}function Zn(t,e,n){const r=Ne(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const vh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function a(u,d,h){const b=kn(u),_=s[b]=s[b]||[],g=u==null?0:typeof u=="string"?1:u.length,p=d>0,y={...h,isVirtual:p,keyTail:d,keyLength:g,extractKey:Hs(u),unique:!p&&h.unique};return _.push(y),y.isPrimaryKey||i.push(y),g>1&&a(g===2?u[0]:u.slice(0,g-1),d+1,h),_.sort((v,w)=>v.keyTail-w.keyTail),y}const l=a(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(const u of r.indexes)a(u.keyPath,0,u);function o(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,b=d.keyTail,{type:h.type===1?2:h.type,lower:Zn(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,b),lowerOpen:!0,upper:Zn(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,b),upperOpen:!0})}}:u;var h,b}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(u){const d=s[kn(u)];return d&&d[0]}},count:u=>n.count(o(u)),query:u=>n.query(o(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:b}=u.query.index;return h?n.openCursor(o(u)).then(_=>_&&function(g){return Object.create(g,{continue:{value:function(y){y!=null?g.continue(Zn(y,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?g.continue(g.key.slice(0,b).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):g.continue()}},continuePrimaryKey:{value(y,v){g.continuePrimaryKey(Zn(y,t.MAX_KEY,d),v)}},primaryKey:{get:()=>g.primaryKey},key:{get(){const y=g.key;return b===1?y[0]:y.slice(0,b)}},value:{get:()=>g.value}})}(_)):n.openCursor(u)}}}}}};function wi(t,e,n,r){return n=n||{},r=r||"",xe(t).forEach(s=>{if(We(e,s)){var i=t[s],a=e[s];if(typeof i=="object"&&typeof a=="object"&&i&&a){const l=Is(i);l!==Is(a)?n[r+s]=e[s]:l==="Object"?wi(i,a,n,r+s+"."):i!==a&&(n[r+s]=e[s])}else i!==a&&(n[r+s]=e[s])}else n[r+s]=void 0}),xe(e).forEach(s=>{We(t,s)||(n[r+s]=e[s])}),n}const bh={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const a=H.trans,{deleting:l,creating:o,updating:c}=a.table(e).hook;switch(i.type){case"add":if(o.fire===ce)break;return a._promise("readwrite",()=>u(i),!0);case"put":if(o.fire===ce&&c.fire===ce)break;return a._promise("readwrite",()=>u(i),!0);case"delete":if(l.fire===ce)break;return a._promise("readwrite",()=>u(i),!0);case"deleteRange":if(l.fire===ce)break;return a._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(i),!0)}return n.mutate(i);function u(h){const b=H.trans,_=h.keys||function(g,p){return p.type==="delete"?p.keys:p.keys||p.values.map(g.extractKey)}(r,h);if(!_)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:_}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(g,p,y){return p.type==="add"?Promise.resolve([]):g.getMany({trans:p.trans,keys:y,cache:"immutable"})}(n,h,_).then(g=>{const p=_.map((y,v)=>{const w=g[v],x={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(x,y,w,b);else if(h.type==="add"||w===void 0){const S=o.fire.call(x,y,h.values[v],b);y==null&&S!=null&&(y=S,h.keys[v]=y,r.outbound||Ge(h.values[v],r.keyPath,y))}else{const S=wi(w,h.values[v]),E=c.fire.call(x,S,y,w,b);if(E){const C=h.values[v];Object.keys(E).forEach(D=>{We(C,D)?C[D]=E[D]:Ge(C,D,E[D])})}}return x});return n.mutate(h).then(({failures:y,results:v,numFailures:w,lastResult:x})=>{for(let S=0;S<_.length;++S){const E=v?v[S]:_[S],C=p[S];E==null?C.onerror&&C.onerror(y[S]):C.onsuccess&&C.onsuccess(h.type==="put"&&g[S]?h.values[S]:E)}return{failures:y,results:v,numFailures:w,lastResult:x}}).catch(y=>(p.forEach(v=>v.onerror&&v.onerror(y)),Promise.reject(y)))})}function d(h,b,_){return n.query({trans:h,values:!1,query:{index:r,range:b},limit:_}).then(({result:g})=>u({type:"delete",keys:g,trans:h}).then(p=>p.numFailures>0?Promise.reject(p.failures[0]):g.length<_?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...b,lower:g[g.length-1],lowerOpen:!0},_)))}}}}})};function eo(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)Fe(e.keys[s],t[i])===0&&(r.push(n?Nn(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const yh={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=eo(r.keys,r.trans._cache,r.cache==="clone");return s?K.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Nn(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function $i(t){return!("from"in t)}const st=function(t,e){if(!this){const n=new st;return t&&"d"in t&&Me(n,t),n}Me(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Bn(t,e,n){const r=Fe(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if($i(t))return Me(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(Fe(n,t.from)<0)return s?Bn(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},ga(t);if(Fe(e,t.to)>0)return i?Bn(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},ga(t);Fe(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),Fe(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&Or(t,s),i&&a&&Or(t,i)}function Or(t,e){$i(e)||function n(r,{from:s,to:i,l:a,r:l}){Bn(r,s,i),a&&n(r,a),l&&n(r,l)}(t,e)}function _h(t,e){const n=ei(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=ei(t);let a=i.next(s.from),l=a.value;for(;!r.done&&!a.done;){if(Fe(l.from,s.to)<=0&&Fe(l.to,s.from)>=0)return!0;Fe(s.from,l.from)<0?s=(r=n.next(l.from)).value:l=(a=i.next(s.from)).value}return!1}function ei(t){let e=$i(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Fe(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Fe(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function ga(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",a={...t},l=t[s];t.from=l.from,t.to=l.to,t[s]=l[s],a[s]=l[i],t[i]=a,a.d=pa(a)}t.d=pa(t)}function pa({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}an(st.prototype,{add(t){return Or(this,t),this},addKey(t){return Bn(this,t,t),this},addKeys(t){return t.forEach(e=>Bn(this,e,e)),this},[Bs](){return ei(this)}});const wh={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new st(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:a}=i,{extractKey:l,outbound:o}=a,c={...s,mutate:h=>{const b=h.trans,_=b.mutatedParts||(b.mutatedParts={}),g=E=>{const C=`idb://${e}/${r}/${E}`;return _[C]||(_[C]=new st)},p=g(""),y=g(":dels"),{type:v}=h;let[w,x]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const S=h.trans._cache;return s.mutate(h).then(E=>{if(Ne(w)){v!=="delete"&&(w=E.results),p.addKeys(w);const C=eo(w,S);C||v==="add"||y.addKeys(w),(C||x)&&function(D,k,O,P){function R(N){const j=D(N.name||"");function J(B){return B!=null?N.extractKey(B):null}const V=B=>N.multiEntry&&Ne(B)?B.forEach(G=>j.addKey(G)):j.addKey(B);(O||P).forEach((B,G)=>{const re=O&&J(O[G]),pe=P&&J(P[G]);Fe(re,pe)!==0&&(re!=null&&V(re),pe!=null&&V(pe))})}k.indexes.forEach(R)}(g,i,C,x)}else if(w){const C={from:w.lower,to:w.upper};y.add(C),p.add(C)}else p.add(n),y.add(n),i.indexes.forEach(C=>g(C.name).add(n));return E})}},u=({query:{index:h,range:b}})=>{var _,g;return[h,new st((_=b.lower)!==null&&_!==void 0?_:t.MIN_KEY,(g=b.upper)!==null&&g!==void 0?g:t.MAX_KEY)]},d={get:h=>[a,new st(h.key)],getMany:h=>[a,new st().addKeys(h.keys)],count:u,query:u,openCursor:u};return xe(d).forEach(h=>{c[h]=function(b){const{subscr:_}=H;if(_){const g=x=>{const S=`idb://${e}/${r}/${x}`;return _[S]||(_[S]=new st)},p=g(""),y=g(":dels"),[v,w]=d[h](b);if(g(v.name||"").add(w),!v.isPrimaryKey){if(h!=="count"){const x=h==="query"&&o&&b.values&&s.query({...b,values:!1});return s[h].apply(this,arguments).then(S=>{if(h==="query"){if(o&&b.values)return x.then(({result:C})=>(p.addKeys(C),S));const E=b.values?S.result.map(l):S.result;b.values?p.addKeys(E):y.addKeys(E)}else if(h==="openCursor"){const E=S,C=b.values;return E&&Object.create(E,{key:{get:()=>(y.addKey(E.primaryKey),E.key)},primaryKey:{get(){const D=E.primaryKey;return y.addKey(D),D}},value:{get:()=>(C&&p.addKey(E.primaryKey),E.value)}})}return S})}y.add(n)}}return s[h].apply(this,arguments)}}),c}}}};class Nt{constructor(e,n){this._middlewares={},this.verno=0;const r=Nt.dependencies;this._options=n={addons:Nt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ce,dbReadyPromise:null,cancelOpen:ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new K(l=>{i.dbReadyResolve=l}),i.openCanceller=new K((l,o)=>{i.cancelOpen=o}),this._state=i,this.name=e,this.on=xn(this,"populate","blocked","versionchange","close",{ready:[gi,ce]}),this.on.ready.subscribe=kl(this.on.ready.subscribe,l=>(o,c)=>{Nt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||K.resolve().then(o),c&&l(o);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(o),c&&l(o);else{l(o);const d=this;c||l(function h(){d.on.ready.unsubscribe(o),d.on.ready.unsubscribe(h)})}})}),this.Collection=(a=this,mn(sh.prototype,function(l,o){this.db=a;let c=Jl,u=null;if(o)try{c=o()}catch(_){u=_}const d=l._ctx,h=d.table,b=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:b!==Pn?b:null}})),this.Table=function(l){return mn(rh.prototype,function(o,c,u){this.db=l,this._tx=u,this.name=o,this.schema=c,this.hook=l._allTables[o]?l._allTables[o].hook:xn(null,{creating:[Wu,ce],reading:[Vu,Pn],updating:[Ju,ce],deleting:[Hu,ce]})})}(this),this.Transaction=function(l){return mn(oh.prototype,function(o,c,u,d,h){this.db=l,this.mode=o,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=xn(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K((b,_)=>{this._resolve=b,this._reject=_}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},b=>{var _=this.active;return this.active=!1,this.on.error.fire(b),this.parent?this.parent._reject(b):_&&this.idbtrans&&this.idbtrans.abort(),Pe(b)})})}(this),this.Version=function(l){return mn(fh.prototype,function(o){this.db=l,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return mn(Yl.prototype,function(o,c,u){this.db=l,this._ctx={table:o,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new z.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,b)=>d.cmp(b,h),this._max=(h,b)=>d.cmp(h,b)>0?h:b,this._min=(h,b)=>d.cmp(h,b)<0?h:b,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=In(n.IDBKeyRange),this._createTransaction=(l,o,c,u)=>new this.Transaction(l,o,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Cn.filter(o=>o.name===this.name&&o!==this&&!o._state.vcFired).map(o=>o.on("versionchange").fire(l))},this.use(vh),this.use(bh),this.use(wh),this.use(yh),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(hh),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?e():new K((n,r)=>{if(this._state.openComplete)return r(new z.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new z.DatabaseClosed);this.open().catch(ce)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((a,l)=>a.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return gh(this)}_close(){const e=this._state,n=Cn.indexOf(this);if(n>=0&&Cn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new K(r=>{e.dbReadyResolve=r}),e.openCanceller=new K((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new z.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new K((r,s)=>{const i=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ye(()=>{(function({indexedDB:l,IDBKeyRange:o},c){!_i(l)&&c!==Kr&&yi(l,o).delete(c).catch(ce)})(this._deps,this.name),r()}),a.onerror=Qe(s),a.onblocked=this._fireOnBlocked};if(e)throw new z.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return xe(this._allTables).map(e=>this._allTables[e])}transaction(){const e=ph.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=H.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let a,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===rs)a=rs;else{if(e!="rw"&&e!=ss)throw new z.InvalidArgument("Invalid transaction mode: "+e);a=ss}if(s){if(s.mode===rs&&a===ss){if(!i)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new z.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(u,d)=>{d(c)}):Pe(c)}const o=Zl.bind(null,this,a,l,s,r);return s?s._promise(a,o,"lock"):H.trans?hn(H.transless,()=>this._whenReady(o)):this._whenReady(o)}table(e){if(!We(this._allTables,e))throw new z.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const $h=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Sh{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[$h](){return this}}function to(t,e){return xe(e).forEach(n=>{Or(t[n]||(t[n]=new st),e[n])}),t}function Ch(t){let e,n=!1;const r=new Sh(s=>{const i=di(t);let a=!1,l={},o={};const c={get closed(){return a},unsubscribe:()=>{a=!0,St.storagemutated.unsubscribe(b)}};s.start&&s.start(c);let u=!1,d=!1;function h(){return xe(o).some(g=>l[g]&&_h(l[g],o[g]))}const b=g=>{to(l,g),h()&&_()},_=()=>{if(u||a)return;l={};const g={},p=function(y){i&&un();const v=()=>wt(t,{subscr:y,trans:null}),w=H.trans?hn(H.transless,v):v();return i&&w.then(ht,ht),w}(g);d||(St(Tn,b),d=!0),u=!0,Promise.resolve(p).then(y=>{n=!0,e=y,u=!1,a||(h()?_():(l={},o=g,s.next&&s.next(y)))},y=>{u=!1,n=!1,s.error&&s.error(y),c.unsubscribe()})};return _(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let ti;try{ti={indexedDB:ge.indexedDB||ge.mozIndexedDB||ge.webkitIndexedDB||ge.msIndexedDB,IDBKeyRange:ge.IDBKeyRange||ge.webkitIDBKeyRange}}catch{ti={indexedDB:null,IDBKeyRange:null}}const Et=Nt;function dr(t){let e=at;try{at=!0,St.storagemutated.fire(t)}finally{at=e}}an(Et,{...ar,delete:t=>new Et(t,{addons:[]}).delete(),exists:t=>new Et(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return _i(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==Kr)):yi(e,n).toCollection().primaryKeys()}(Et.dependencies).then(t)}catch{return Pe(new z.MissingAPI)}},defineClass:()=>function(t){Me(this,t)},ignoreTransaction:t=>H.trans?hn(H.transless,t):t(),vip:Qs,async:function(t){return function(){try{var e=Zs(t.apply(this,arguments));return e&&typeof e.then=="function"?e:K.resolve(e)}catch(n){return Pe(n)}}},spawn:function(t,e,n){try{var r=Zs(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:K.resolve(r)}catch(s){return Pe(s)}},currentTransaction:{get:()=>H.trans||null},waitFor:function(t,e){const n=K.resolve(typeof t=="function"?Et.ignoreTransaction(t):t).timeout(e||6e4);return H.trans?H.trans.waitFor(n):n},Promise:K,debug:{get:()=>et,set:t=>{Il(t,t==="dexie"?()=>!0:Hl)}},derive:Zt,extend:Me,props:an,override:kl,Events:xn,on:St,liveQuery:Ch,extendObservabilitySet:to,getByKeyPath:ct,setByKeyPath:Ge,delByKeyPath:function(t,e){typeof e=="string"?Ge(t,e,void 0):"length"in e&&[].map.call(e,function(n){Ge(t,n,void 0)})},shallowClone:Al,deepClone:Nn,getObjectDiff:wi,cmp:Fe,asap:El,minKey:Vs,addons:[],connections:Cn,errnames:mi,dependencies:ti,semVer:ca,version:ca.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Et.maxKey=In(Et.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(St(Tn,t=>{if(!at){let e;Fr?(e=document.createEvent("CustomEvent"),e.initCustomEvent(bt,!0,!0,t)):e=new CustomEvent(bt,{detail:t}),at=!0,dispatchEvent(e),at=!1}}),addEventListener(bt,({detail:t})=>{at||dr(t)}));let at=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(bt);typeof t.unref=="function"&&t.unref(),St(Tn,e=>{at||t.postMessage(e)}),t.onmessage=e=>{e.data&&dr(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){St(Tn,e=>{try{at||(typeof localStorage<"u"&&localStorage.setItem(bt,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:bt,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===bt){const n=JSON.parse(e.newValue);n&&dr(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===bt&&dr(e.changedParts)})}K.rejectionMapper=function(t,e){if(!t||t instanceof en||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ia[t.name])return t;var n=new ia[t.name](e||t.message,t);return"stack"in t&&ot(n,"stack",{get:function(){return this.inner.stack}}),n},Il(et,Hl);class no extends Nt{spells;classes;races;backgrounds;items;feats;constructor(e){super(e),this.version(1).stores({spells:"name",classes:"name",races:"name",backgrounds:"name",items:"name",feats:"name"})}}const Ye=new no("dndSrd"),[va,xh]=I([]);function ro(){const t=Q.toObservable(Ye.classes.toArray());return va().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Classes",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.classes.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?xh(e):null)).subscribe(),va}const kh="_primary_f8d3l_1",Eh="_accent_f8d3l_12",Ph="_tertiary_f8d3l_65",Ah="_warn_f8d3l_70",Oh="_hover_f8d3l_74",Th="_popup_f8d3l_88",Ih="_table_f8d3l_100",Pt={primary:kh,accent:Eh,tertiary:Ph,warn:Ah,hover:Oh,popup:Th,table:Ih},Bh="_primary_1mnvm_1",Rh="_accent_1mnvm_7",Lh="_warn_1mnvm_13",Nh="_hover_1mnvm_17",Dh="_popup_1mnvm_28",jh="_table_1mnvm_41",Fh="_tBody_1mnvm_55",Kh="_THead_1mnvm_60",At={primary:Bh,accent:Rh,warn:Lh,hover:Nh,popup:Dh,table:jh,tBody:Fh,THead:Kh},Mh={primary:At.primary,accent:At.accent,tertiary:At.tertiary,warn:At.warn,hover:At.hover,popup:At.popup,table:At.table},ba={primary:Pt.primary,accent:Pt.accent,tertiary:Pt.tertiary,warn:Pt.warn,hover:Pt.hover,popup:Pt.popup,table:Pt.table};function ue(t="dark"){switch(t.toLowerCase()){case"light":return Mh;case"dark":return document.body.style.backgroundColor="#212121",ba;default:return ba}}const[ya,qh]=I([]);function so(){const t=Q.toObservable(Ye.spells.toArray());return ya().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Spells",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.spells.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?qh(e):null)).subscribe(),ya}const[_a,Uh]=I([]);function io(){const t=Q.toObservable(Ye.feats.toArray());return _a().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Feats",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.feats.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?Uh(e):null)).subscribe(),_a}const[wa,Vh]=I([]);function ao(){const t=Q.toObservable(Ye.races.toArray());return wa().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Races",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.races.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?Vh(e):null)).subscribe(),wa}const[$a,Wh]=I([]);function lo(){const t=Q.toObservable(Ye.backgrounds.toArray());return $a().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Backgrounds",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.backgrounds.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?Wh(e):null)).subscribe(),$a}const[Sa,Hh]=I([]);function oo(){const t=Q.toObservable(Ye.items.toArray());return Sa().length===0&&t.pipe(ee(1),be(e=>e.length>0?_e(e):_e([])),be(e=>e.length===0?Q.post("/api/DnDInfo/Items",{}).pipe(ee(1),qt(n=>(console.error("Error: ",n),_e(null))),Ee(n=>{n&&Ye.items.bulkAdd(n)})):_e(e)),Ee(e=>e&&e.length>0?Hh(e):null)).subscribe(),Sa}const Jh="_AppBody_1ckpc_1",zh={AppBody:Jh};function Yh(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=t;let l,o;const c=async(d=!0)=>{await o};async function u(){if("serviceWorker"in navigator){if(l=await Ir(()=>import("./workbox-window.prod.es5-HOwwy-x7.js"),__vite__mapDeps([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{a?.(d)}),!l)return;l.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),l.addEventListener("installed",d=>{d.isUpdate||r?.()}),l.register({immediate:e}).then(d=>{i?i("/sw.js",d):s?.(d)}).catch(d=>{a?.(d)})}}return o=u(),c}function co(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=t,[l,o]=I(!1),[c,u]=I(!1),d=Yh({immediate:e,onOfflineReady(){u(!0),r?.()},onNeedRefresh(){o(!0),n?.()},onRegistered:s,onRegisteredSW:i,onRegisterError:a});return{needRefresh:[l,o],offlineReady:[c,u],updateServiceWorker:d}}const Gh="_Container_8liaz_1",Xh="_Toast_8liaz_15",Qh="_ToastMessage_8liaz_43",Zh="_ToastButton_8liaz_51",gn={Container:Gh,Toast:Xh,ToastMessage:Qh,ToastButton:Zh};var ed=$("<span>App ready to work offline"),td=$("<button>Reload"),nd=$("<div><div></div><button>Close"),rd=$("<div>"),sd=$("<span>New content available, click on reload button to update.");const id=()=>{const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:s}=co({onRegistered(a){console.log("SW Registered: ",a)},onRegisterError(a){console.log("SW registration error",a)}}),i=()=>{e(!1),r(!1)};return(()=>{var a=rd();return m(a,f(q,{get when(){return t()||n()},get children(){var l=nd(),o=l.firstChild,c=o.nextSibling;return m(o,f(q,{get fallback(){return sd()},get when(){return t()},get children(){return ed()}})),m(l,f(q,{get when(){return n()},get children(){var u=td();return u.$$click=()=>s(!0),L(()=>T(u,gn.ToastButton)),u}}),c),c.$$click=()=>i(),L(u=>{var d=gn.Toast,h=gn.Message,b=gn.ToastButton;return d!==u.e&&T(l,u.e=d),h!==u.t&&T(o,u.t=h),b!==u.a&&T(c,u.a=b),u},{e:void 0,t:void 0,a:void 0}),l}})),L(()=>T(a,gn.Container)),a})()};Te(["click"]);const ad="_header_q7g3p_1",ld="_body_q7g3p_17",od="_totalPanel_q7g3p_22",cs={header:ad,body:ld,totalPanel:od};var cd=$("<div>"),ud=$("<div><div><span></span><span>");const nn=t=>{const[e,n]=I(!1),r=ue();return(()=>{var s=ud(),i=s.firstChild,a=i.firstChild,l=a.nextSibling;return ft(s,Xe({get class(){return`${cs.totalPanel} ${t.styles}`}},t),!1,!0),m(a,()=>t.children[0]),l.$$click=()=>{n(o=>!o),t.extraLogic&&t.extraLogic()},m(l,f(q,{get when(){return!e()},children:"↓"}),null),m(l,f(q,{get when(){return e()},children:"↑"}),null),m(s,f(q,{get when(){return e()},get children(){var o=cd();return m(o,()=>t.children[1]),L(()=>T(o,`${r.accent} ${cs.body}`)),o}}),null),L(o=>{var c=`${r.accent} ${cs.header}`,u=`${r.hover}`;return c!==o.e&&T(i,o.e=c),u!==o.t&&T(l,o.t=u),o},{e:void 0,t:void 0}),s})()};Te(["click"]);var hd=$("<div>Welcome to my app. This is a work in progress."),dd=$("<div>It'll be great eventually."),fd=$("<div><h1>Home</h1><div>");const md=()=>{const t=ue();return ro(),so(),io(),ao(),oo(),lo(),(()=>{var e=fd(),n=e.firstChild,r=n.nextSibling;return r.style.setProperty("width","30%"),m(r,f(nn,{get children(){return[hd(),(()=>{var s=dd();return s.style.setProperty("padding","15px"),s})()]}})),m(e,f(id,{}),null),L(()=>T(e,`${t.accent} ${zh.AppBody}`)),e})()},gd="_active_8eb29_1",pd="_inactive_8eb29_6",vd="_navbar_8eb29_11",pn={active:gd,inactive:pd,navbar:vd};var fr=(t=>(t[t.DnD5e=0]="DnD5e",t[t.TOValient=1]="TOValient",t))(fr||{});function bd(t){const[e,n]=I([]),r=fr.DnD5e;return L(()=>{switch(!0){case t().startsWith("/info"):const s=[{Name:"All",Link:"/info"},{Name:"Races",Link:"/info/races"},{Name:"Items",Link:"/info/items"},{Name:"Spells",Link:"/info/spells"},{Name:"Feats",Link:"/info/feats"},{Name:"Classes",Link:"/info/classes"}];r===fr.DnD5e?s.push({Name:"Backgrounds",Link:"/info/backgrounds"}):r===fr.TOValient&&s.push({Name:"Heritages",Link:"/info/heritages"}),n(s);break;case t().startsWith("/characters"):n([{Name:"All",Link:"/characters"},{Name:"View",Link:"/characters/view"},{Name:"Create",Link:"/characters/create"}]);break;case t().startsWith("/homebrew"):n([{Name:"All",Link:"/homebrew"},{Name:"View",Link:"/homebrew/view"},{Name:"Create",Link:"/homebrew/create"}]);break;default:n([]);break}}),e}const yd="_menuButtons_1tfvq_1",_d="_menuButton_1tfvq_1",Ca={menuButtons:yd,menuButton:_d};function wd(t,e){const n=document.getElementById("root"),r=s=>!t.contains(s.target)&&e()?.();n.addEventListener("click",r),Dt(()=>{n.removeEventListener("click",r)})}var $d=$("<button>"),Sd=$("<div><ul>"),Cd=$("<li><button>");const Ue=t=>{const[e,n]=I({show:!1,lastX:0,lastY:0}),r=W(()=>!!t.menuItems),s=W(()=>t.menuItems?.filter(c=>c.condition?c.condition():!0)??[]),i=ue(),a=W(()=>({position:"absolute",top:t.overrideY??`${e().lastY}px`,left:t.overrideX??`${e().lastX}px`,display:`${e().show?"block":"none"}`}));let l;const o=()=>wd(l,()=>n({show:!1,lastX:0,lastY:0}));return t.enableBackgroundClick&&document.body.addEventListener("click",o),Dt(()=>{document.body.removeEventListener("click",o)}),[(()=>{var c=$d();return c.$$click=u=>n(d=>({show:!d.show,lastX:u.clientX,lastY:u.clientY})),Yi(u=>u,c),ft(c,Xe(t,{get class(){return`${i.accent} ${i.hover} ${t.class??""}`}}),!1,!0),m(c,()=>t.children),c})(),f(_c,{get mount(){return document.getElementById("root")},get children(){return f(q,{get when(){return W(()=>!!e())()&&r()},get children(){var c=Sd(),u=c.firstChild;return Yi(d=>l=d,c),m(u,f(F,{get each(){return t.menuItems},children:d=>f(q,{get when(){return W(()=>!!((!d.condition||d.condition())&&e()))()&&r()},get children(){var h=Cd(),b=h.firstChild;return b.addEventListener("click",d.action),m(b,()=>d.name),L(_=>{var g=`${100/s().length}%`,p=`${i.hover}`,y=`${i.accent} ${Ca.menuButton}`;return g!==_.e&&((_.e=g)!=null?h.style.setProperty("height",g):h.style.removeProperty("height")),p!==_.t&&T(h,_.t=p),y!==_.a&&T(b,_.a=y),_},{e:void 0,t:void 0,a:void 0}),h}})})),L(d=>{var h=`${i.popup} ${i.primary} ${t.menuStyle??""}`,b=a(),_=`${Ca.menuButtons}`;return h!==d.e&&T(c,d.e=h),d.t=$r(c,b,d.t),_!==d.a&&T(u,d.a=_),d},{e:void 0,t:void 0,a:void 0}),c}})}})]};Te(["click"]);var xd=$("<span>MySite"),kd=$("<li><div>MySite"),Ed=$('<svg width=32pt height=32pt version=1.1 viewBox="0 0 128 128"xmlns=http://www.w3.org/2000/svg><path d="m113.15 40.062c4.9922 0 8.5742-3.5859 8.5742-8.4492s-3.5859-8.7031-8.5742-8.7031h-98.176c-4.8633 0-8.7031 3.8398-8.7031 8.7031s3.8398 8.4492 8.7031 8.4492zm-98.176 47.875c-4.8633 0-8.7031 3.8398-8.7031 8.5742s3.8398 8.7031 8.7031 8.7031h98.305c4.9922 0 8.5742-3.9688 8.5742-8.7031s-3.5859-8.5742-8.5742-8.5742zm0-32.641c-4.8633 0-8.7031 3.8398-8.7031 8.7031s3.8398 8.7031 8.7031 8.7031h98.305c4.9922 0 8.5742-3.8398 8.5742-8.7031s-3.5859-8.7031-8.5742-8.7031z">'),Pd=$("<div><ul>"),Ad=$("<div><div><ul>"),Od=$("<button>"),xa=$("<li>");const Td=t=>{const e=ue();I(!1);const[n,r]=I(!1),[s,i]=I(window.location.pathname),a=[{Name:"Home",Link:"/"},{Name:"Characters",Link:"/characters"},{Name:"Info",Link:"/info"},{Name:"Homebrew",Link:"/homebrew"}],l=[{name:"Login",condition:()=>!n(),action:()=>{r(!0)}},{name:"Register",condition:()=>!n(),action:()=>{}},{name:"Logout",condition:n,action:()=>{r(!1)}},{name:"Profile",condition:n,action:()=>{}},{name:"Settings",condition:()=>!0,action:()=>{}}];let o=bd(s);const[c,u]=t.list,[d,h]=I(!1);return L(()=>{h(!c())}),(()=>{var b=Ad(),_=b.firstChild,g=_.firstChild;return m(_,f(q,{get when(){return!c()},get children(){return xd()}}),g),m(g,f(q,{get when(){return c()},get children(){return kd()}}),null),m(g,f(F,{each:a,children:(p,y)=>f(q,{get when(){return!c()||y()===0||d()},get children(){var v=xa();return m(v,f(ea,{onClick:()=>i(p.Link),get href(){return p.Link},get children(){return p.Name}}),null),m(v,f(q,{get when(){return W(()=>!!c())()&&y()===0},get children(){var w=Od();return w.$$click=()=>h(!d()),w.style.setProperty("background","none"),w.style.setProperty("color","white"),w.style.setProperty("font-size","1.5rem"),w.style.setProperty("padding","0 10px"),w.style.setProperty("width","min-content"),w.style.setProperty("margin-right","0"),m(w,()=>d()?"↑":"↓"),w}}),null),L(()=>T(v,`${e.hover} ${s()==="/"&&p.Link==="/"||s().startsWith(p.Link)&&s()!=="/"&&p.Link!=="/"?pn.active:pn.inactive}`)),v}})}),null),m(_,f(Ue,{menuItems:l,overrideX:"93vw",overrideY:"8vh",get children(){return Ed()}}),null),m(b,f(q,{get when(){return o().length>0},get children(){var p=Pd(),y=p.firstChild;return m(y,f(F,{get each(){return o()},children:v=>(()=>{var w=xa();return m(w,f(ea,{onClick:()=>i(v.Link),get href(){return v.Link},get children(){return v.Name}})),L(()=>T(w,`${e.hover} ${s()===v.Link?pn.active:pn.inactive}`)),w})()})),L(()=>T(p,t.style)),p}}),null),L(p=>{var y=pn.navbar,v=c()?{margin:"0 auto",width:"100%"}:{},w=`${t.style}`,x=c()?{margin:"0 auto",width:"min-content"}:{};return y!==p.e&&T(b,p.e=y),p.t=$r(_,v,p.t),w!==p.a&&T(_,p.a=w),p.o=$r(g,x,p.o),p},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()};Te(["click"]);const Id="_carouselHeader_1qtqp_1",Bd="_carousel_1qtqp_1",Rd="_carouselSlides_1qtqp_24",Ld="_carouselSlide_1qtqp_24",Nd="_carouselButton_1qtqp_37",gt={carouselHeader:Id,carousel:Bd,carouselSlides:Rd,carouselSlide:Ld,carouselButton:Nd};var Dd=$("<div>No <!> Found"),jd=$("<div>No Elements Found"),Fd=$("<div><div><div><div></div></div></div><div>");const Fn=t=>{const[e,n]=I(0),r=()=>{e()!==t.elements.length-1?n(l=>l+1):n(0)},s=()=>{e()!==0?n(l=>l-1):n(t.elements.length-1)},i=W(()=>t.elements.length>0?t.elements[e()].name:t.notFoundName?`No ${t.notFoundName} Found`:"No Elements Found"),a=W(()=>t.elements.length>0?t.elements[e()].element:t.notFoundName?(()=>{var l=Dd(),o=l.firstChild,c=o.nextSibling;return c.nextSibling,m(l,()=>t.notFoundName,c),l})():jd());return(()=>{var l=Fd(),o=l.firstChild,c=o.firstChild,u=c.firstChild,d=o.nextSibling;return m(o,f(Ue,{get class(){return`${gt.carouselButton}`},"on:click":s,children:"❮"}),c),m(u,i),m(o,f(Ue,{get class(){return`${gt.carouselButton} `},"on:click":r,children:"❯"}),null),m(d,a),L(h=>{var b=`${gt.carousel}`,_=`${gt.carouselHeader}`,g=`${gt.carouselSlides} ${gt.header}`,p=`${gt.carouselSlide}`,y=`${gt.carouselSlide}`;return b!==h.e&&T(l,h.e=b),_!==h.t&&T(o,h.t=_),g!==h.a&&T(c,h.a=g),p!==h.o&&T(u,h.o=p),y!==h.i&&T(d,h.i=y),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()};var Kd=$("<div>Element 1"),Md=$("<div>Element 2"),qd=$("<div>Element 3"),Ud=$("<div>Element 4"),Vd=$("<div><h1>Homebrew");const Wd=()=>{const t=ue(),e=[{name:"Element A",element:Kd()},{name:"Element 2",element:Md()},{name:"Element fred",element:qd()},{name:"Elem fff",element:Ud()}];return(()=>{var n=Vd();return n.firstChild,m(n,f(Fn,{elements:e}),null),L(()=>T(n,`${t.accent}`)),n})()},Hd="_sidebar_j9t1v_1",Jd="_body_j9t1v_33",zd="_bodyMenu_j9t1v_57",ni={sidebar:Hd,body:Jd,bodyMenu:zd};var Yd=$("<div><ul>"),Gd=$("<li><a>");const Ct=()=>{const t=ue(),[e,n]=I([]);return n([{Name:"Classes",Link:"/homebrew/create/classes"},{Name:"Subclasses",Link:"/homebrew/create/subclasses"},{Name:"Race",Link:"/homebrew/create/races"},{Name:"Backgrounds",Link:"/homebrew/create/backgrounds"},{Name:"Feats",Link:"/homebrew/create/feats"},{Name:"Spell",Link:"/homebrew/create/spells"},{Name:"Items",Link:"/homebrew/create/items"}]),(()=>{var r=Yd(),s=r.firstChild;return m(s,f(F,{get each(){return e()},children:i=>(()=>{var a=Gd(),l=a.firstChild;return m(l,()=>i.Name),L(o=>{var c=`${t.hover}`,u=i.Link;return c!==o.e&&T(a,o.e=c),u!==o.t&&je(l,"href",o.t=u),o},{e:void 0,t:void 0}),a})()})),L(()=>T(r,`${t.accent} ${ni.sidebar}`)),r})()};var Xd=$("<div><h1>Create</h1><div>"),Qd=$("<a><div><p>"),Zd=$("<div>");const ef=()=>{const t=ue(),e=[{name:"Classes"},{name:"Races"},{name:"Backgrounds"},{name:"Feats"},{name:"Spells"},{name:"Items"}],[n,r]=I(e);return[f(Ct,{}),(()=>{var s=Xd(),i=s.firstChild,a=i.nextSibling;return m(a,f(F,{get each(){return n()},children:(l,o)=>[(()=>{var c=Qd(),u=c.firstChild,d=u.firstChild;return m(d,()=>l.name),L(h=>{var b=`${t.accent}`,_=`/homebrew/create/${l.name.toLowerCase()}`,g=`${t.hover}`;return b!==h.e&&T(c,h.e=b),_!==h.t&&je(c,"href",h.t=_),g!==h.a&&T(u,h.a=g),h},{e:void 0,t:void 0,a:void 0}),c})(),f(q,{get when(){return o()===2},get children(){var c=Zd();return c.style.setProperty("height","0"),c.style.setProperty("flex-basis","100%"),c}})]})),L(l=>{var o=`${t.accent} ${ni.body}`,c=`${ni.bodyMenu} `;return o!==l.e&&T(s,l.e=o),c!==l.t&&T(a,l.t=c),l},{e:void 0,t:void 0}),s})()]},tf="_body_kewl4_1",nf={body:tf};function mr(t){return t.replace(/[_-]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}var rf=$("<div><button>←←</button><button>←</button><select></select><span> / </span><button>→</button><button>→→"),sf=$("<option>");const Si=t=>{const[e,n]=I(1),[r,s]=I(10),i=t.setPaginatedItems,a=ue(),l=W(()=>t.items().slice((e()-1)*r(),e()*r())),o=W(()=>Math.ceil(t.items().length/r())),c=t.itemsPerPage??[10,20,50,100];return L(()=>{e()>o()&&n(o())}),L(()=>{i(l())}),(()=>{var u=rf(),d=u.firstChild,h=d.nextSibling,b=h.nextSibling,_=b.nextSibling,g=_.firstChild,p=_.nextSibling,y=p.nextSibling;return d.$$click=()=>n(1),h.$$click=()=>n(e()-1),b.addEventListener("change",v=>s(+v.currentTarget.value)),m(b,f(F,{each:c,children:v=>(()=>{var w=sf();return w.value=v,m(w,v),w})()})),m(_,e,g),m(_,o,null),p.$$click=()=>n(e()+1),y.$$click=()=>n(o()),L(v=>{var w=`${a.accent} `,x=e()===1,S=e()===1,E=e()===o(),C=e()===o();return w!==v.e&&T(u,v.e=w),x!==v.t&&(d.disabled=v.t=x),S!==v.a&&(h.disabled=v.a=S),E!==v.o&&(p.disabled=v.o=E),C!==v.i&&(y.disabled=v.i=C),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u})()};Te(["click"]);var af=$("<td>Options"),lf=$("<table><thead><tr></tr></thead><tbody>"),of=$("<th>"),cf=$('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M0 0h24v24H0z"fill=none></path><path d="M12 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4z">'),uf=$("<tr>"),hf=$("<td>");const Jt=t=>{const[e,n]=I(t.data);return I([]),[(()=>{var r=lf(),s=r.firstChild,i=s.firstChild,a=s.nextSibling;return m(i,f(F,{get each(){return t.keys??[]},children:l=>(()=>{var o=of();return m(o,()=>mr(l.toString())),o})()}),null),m(i,f(q,{get when(){return t.button},get children(){return af()}}),null),m(a,f(F,{get each(){return e()},children:l=>(()=>{var o=uf();return m(o,f(F,{get each(){return t.keys},children:c=>(()=>{var u=hf();return m(u,()=>`${l[c]}`),u})()}),null),m(o,f(q,{get when(){return t.button},get children(){return f(Ue,{get enableBackgroundClick(){return t.button?.backgroundClick},get overrideX(){return t.button?.overideX},get overrideY(){return t.button?.overideY},get menuItems(){return W(()=>!!t.button)()?t.button.generateMenuButtons(l):void 0},get children(){return cf()}})}}),null),o})()})),r})(),f(q,{get when(){return t.paginator},get children(){return f(Si,{setPaginatedItems:n,items:e,get itemsPerPage(){return t.paginator}})}})]},ie=new no("homebrew");class df{classes;setClasses;homebrewClasses$=Q.toObservable(ie.classes.toArray());items;setItems;homebrewItems$=Q.toObservable(ie.items.toArray());feats;setFeats;homebrewFeats$=Q.toObservable(ie.feats.toArray());spells;setSpells;homebrewSpells$=Q.toObservable(ie.spells.toArray());backgrounds;setBackgrounds;homebrewBackgrounds$=Q.toObservable(ie.backgrounds.toArray());races;setRaces;homebrewRaces$=Q.toObservable(ie.races.toArray());constructor(e=[],n=[],r=[],s=[],i=[],a=[]){[this.classes,this.setClasses]=I(e),[this.items,this.setItems]=I(n),[this.feats,this.setFeats]=I(r),[this.spells,this.setSpells]=I(s),[this.backgrounds,this.setBackgrounds]=I(i),[this.races,this.setRaces]=I(a),this.homebrewClasses$.pipe(ee(1),Ee(l=>this.setClasses(o=>[...o,...l]))).subscribe(),this.homebrewItems$.pipe(ee(1),Ee(l=>this.setItems(o=>[...o,...l]))).subscribe(),this.homebrewFeats$.pipe(ee(1),Ee(l=>this.setFeats(o=>[...o,...l]))).subscribe(),this.homebrewSpells$.pipe(ee(1),Ee(l=>this.setSpells(o=>[...o,...l]))).subscribe(),this.homebrewBackgrounds$.pipe(ee(1),Ee(l=>this.setBackgrounds(o=>[...o,...l]))).subscribe(),this.homebrewRaces$.pipe(ee(1),Ee(l=>this.setRaces(o=>[...o,...l]))).subscribe()}addClass=e=>{this.classes().findIndex(n=>n.name===e.name)===-1&&(this.setClasses(n=>[...n,e]),this.addClassToDB(e).subscribe())};addClassToDB=e=>Q.toObservable(ie.classes.add(e)).pipe(ee(1));updateClass(e){const n=this.classes().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.classes();r[n]=e,this.setClasses([...r])}updateClassesInDB=()=>{this.homebrewClasses$.pipe(ee(1),be(e=>Q.toObservable(ie.classes.bulkPut(this.classes())))).subscribe()};removeClass=e=>{const n=this.classes().findIndex(s=>s.name===e);if(n===-1)return;const r=this.classes();r.splice(n,1),this.setClasses([...r]),Q.toObservable(ie.classes.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.classes.bulkAdd(this.classes())))).subscribe()};addItem=e=>{this.items().findIndex(n=>n.name===e.name)===-1&&(this.setItems(n=>[...n,e]),this.addItemToDB(e).subscribe())};addItemToDB=e=>Q.toObservable(ie.items.add(e)).pipe(ee(1));updateItem=e=>{const n=this.items().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.items();r[n]=e,this.setItems([...r])};updateItemsInDB=()=>{this.homebrewItems$.pipe(ee(1),be(e=>Q.toObservable(ie.items.bulkPut(this.items())))).subscribe()};removeItem=e=>{const n=this.items().findIndex(s=>s.name===e);if(n===-1)return;const r=this.items();r.splice(n,1),this.setItems([...r]),Q.toObservable(ie.items.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.items.bulkAdd(this.items())))).subscribe()};addFeat=e=>{this.feats().findIndex(n=>n.name===e.name)===-1&&(this.setFeats(n=>[...n,e]),this.addFeatToDB(e).subscribe())};addFeatToDB=e=>Q.toObservable(ie.feats.add(e)).pipe(ee(1));updateFeat=e=>{const n=this.feats().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.feats();r[n]=e,this.setFeats([...r])};updateFeatsInDB=()=>{this.homebrewFeats$.pipe(ee(1),be(e=>Q.toObservable(ie.feats.bulkPut(this.feats())))).subscribe()};removeFeat=e=>{const n=this.feats().findIndex(s=>s.name===e);if(n===-1)return;const r=this.feats();r.splice(n,1),this.setFeats([...r]),Q.toObservable(ie.feats.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.feats.bulkAdd(this.feats())))).subscribe()};addSpell=e=>{this.spells().findIndex(n=>n.name===e.name)===-1&&(this.setSpells(n=>[...n,e]),this.addSpellToDB(e).subscribe())};addSpellToDB=e=>Q.toObservable(ie.spells.add(e)).pipe(ee(1));updateSpell=e=>{const n=this.spells().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.spells();r[n]=e,this.setSpells([...r])};updateSpellsInDB=()=>{this.homebrewSpells$.pipe(ee(1),be(e=>Q.toObservable(ie.spells.bulkPut(this.spells())))).subscribe()};removeSpell=e=>{const n=this.spells().findIndex(s=>s.name===e);if(n===-1)return;const r=this.spells();r.splice(n,1),this.setSpells([...r]),Q.toObservable(ie.spells.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.spells.bulkAdd(this.spells())))).subscribe()};addBackground=e=>{this.backgrounds().findIndex(n=>n.name===e.name)===-1&&(this.setBackgrounds(n=>[...n,e]),this.addBackgroundToDB(e).subscribe())};addBackgroundToDB=e=>Q.toObservable(ie.backgrounds.add(e)).pipe(ee(1));updateBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.backgrounds();r[n]=e,this.setBackgrounds([...r]),this.updateBackgroundsInDB()};updateBackgroundsInDB=()=>{this.homebrewBackgrounds$.pipe(ee(1),be(e=>Q.toObservable(ie.backgrounds.bulkPut(this.backgrounds())))).subscribe()};removeBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e);if(n===-1)return;const r=this.backgrounds();r.splice(n,1),this.setBackgrounds([...r]),Q.toObservable(ie.backgrounds.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.backgrounds.bulkAdd(this.backgrounds())))).subscribe()};addRace=e=>{this.races().findIndex(n=>n.name===e.name)===-1&&(this.setRaces(n=>[...n,e]),this.addRaceToDB(e).subscribe())};addRaceToDB=e=>Q.toObservable(ie.races.add(e)).pipe(ee(1));updateRace=e=>{const n=this.races().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.races();r[n]=e,this.setRaces([...r]),this.updateRacesInDB().subscribe()};updateRacesInDB=()=>this.homebrewRaces$.pipe(ee(1),be(e=>Q.toObservable(ie.races.bulkPut(this.races()))));removeRace=e=>{const n=this.races().findIndex(s=>s.name===e);if(n===-1)return;const r=this.races().splice(n,1);this.setRaces([...r]),Q.toObservable(ie.races.clear()).pipe(ee(1),be(()=>Q.toObservable(ie.races.bulkAdd(this.races())))).subscribe()}}const Ze=new df;var ff=$("<div><h1>View</h1><div>");const mf=()=>{const t=ue();return(()=>{var e=ff(),n=e.firstChild,r=n.nextSibling;return r.style.setProperty("text-align","left"),m(r,f(Fn,{get elements(){return[{name:"Spells",element:f(Jt,{get data(){return Ze.spells()},keys:["name","level"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})},{name:"Classes",element:f(Jt,{get data(){return Ze.classes()},keys:["name","hitDie"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})},{name:"Feats",element:f(Jt,{get data(){return Ze.feats()},keys:["name"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})},{name:"Items",element:f(Jt,{get data(){return Ze.items()},keys:["name"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})},{name:"Backgrounds",element:f(Jt,{get data(){return Ze.backgrounds()},keys:["name"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})},{name:"Races",element:f(Jt,{get data(){return Ze.races()},keys:["name"],button:{generateMenuButtons:s=>[{name:"Edit",onClick:()=>{console.log("Edit",s)}},{name:"Delete",onClick:()=>{console.log("Delete",s)}}]}})}]}})),L(()=>T(e,`${t.accent} ${nf.body}`)),e})()},gf="_body_1dnbq_1",pf="_textArea_1dnbq_20",vf="_hasCasting_1dnbq_28",bf="_hasCastingMain_1dnbq_44",yf="_subclassLevels_1dnbq_64",_f="_itemStuff_1dnbq_70",wf="_otherStuff_1dnbq_90",$f="_buttons_1dnbq_101",Sf="_statProf_1dnbq_111",Cf="_toolProf_1dnbq_124",xf="_Tools_1dnbq_136",kf="_Columns_1dnbq_141",Ef="_Column_1dnbq_141",ke={body:gf,textArea:pf,hasCasting:vf,hasCastingMain:bf,subclassLevels:yf,itemStuff:_f,otherStuff:wf,buttons:$f,statProf:Sf,toolProf:Cf,Tools:xf,Columns:kf,Column:Ef},Pf="_input_104f5_1",Af="_error_104f5_12",Of="_success_104f5_15",Tf="_warning_104f5_18",If="_info_104f5_21",Bf="_disabled_104f5_24",Rf={input:Pf,error:Af,success:Of,warning:Tf,info:If,disabled:Bf};var Lf=$("<input>");const me=t=>(()=>{var e=Lf();return ft(e,Xe(t,{get class(){return`${Rf.input} ${t.class??""}`}}),!1,!1),e})(),Nf="_Chip_16zia_1",Df="_removeChipButton_16zia_9",ka={Chip:Nf,removeChipButton:Df};var jf=$("<button>X"),Ff=$("<span> : ");const Tr=t=>{const e=ue();return(()=>{var n=Ff(),r=n.firstChild;return m(n,()=>t.key,r),m(n,()=>t.value,null),m(n,f(q,{get when(){return!!t.remove},get children(){var s=jf();return Dr(s,"click",t.remove,!0),L(()=>T(s,`${e.hover} ${ka.removeChipButton}`)),s}}),null),L(()=>T(n,`${e.tertiary} ${ka.Chip} ${t.class??""}`)),n})()};Te(["click"]);const uo={};var Kf=$("<option>");const ae=t=>(()=>{var e=Kf();return ft(e,Xe(t,{get class(){return`${uo.option} ${t.class??""}`}}),!1,!1),e})();var Mf=$("<select>");const Je=t=>(()=>{var e=Mf();return ft(e,Xe(t,{get class(){return`${uo.select} ${t.class??""}`}}),!1,!0),m(e,f(q,{get when(){return!t.disableUnselected},get children(){return f(ae,{children:"--------"})}}),null),m(e,()=>t.children,null),e})(),qf="_searchBar_md17x_1",Ea={searchBar:qf};var Uf=$("<div><input type=text><button>"),Vf=$('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const ho=t=>{const[e,n]=I(""),r=()=>{const s=e().toLowerCase(),i=t.dataSource().filter(a=>s.trim().length===0?!0:JSON.stringify(a).toLowerCase().includes(s.trim()));t.setResults(i)};return(()=>{var s=Uf(),i=s.firstChild,a=i.nextSibling;return i.addEventListener("submit",()=>r()),i.addEventListener("change",l=>n(l.currentTarget.value)),ft(i,Xe(t,{get class(){return`${Ea.input} ${t.class??""}`}}),!1,!1),a.$$click=r,m(a,f(Wf,{})),L(l=>{var o=Ea.searchBar,c=t.tooltip??"Search!";return o!==l.e&&T(s,l.e=o),c!==l.t&&je(a,"title",l.t=c),l},{e:void 0,t:void 0}),s})()},Wf=t=>(()=>{var e=Vf();return ft(e,Xe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();Te(["click"]);const Ci=()=>{const t=ro();return W(()=>[...t(),...Ze.classes()])},Hf=()=>{const t=oo();return W(()=>[...t()])};var Jf=$("<div><div><h4>Spells Slots: </h4></div><div>"),zf=$("<div>No Features Found!"),Yf=$("<div><h3>Level </h3><h3>Info</h3><div><div>Proficency Bonus: </div></div><div></div><h3>Features</h3><h3>New Class Specific <i>(like barbarian rages)</i></h3><div><br><br>"),Gf=$("<label>"),Xf=$("<span>"),Qf=$("<div><div><h4>Name</h4></div><div><h4>Value</h4><textarea></textarea></div><div>"),Zf=$("<div><h4>");const em=t=>{const[{setClassLevels:e,level:n,features:r,setFeatures:s,name:i,hasSpellCasting:a,classLevels:l,casterType:o,setCasterType:c}]=Ha(t,["level","features","setFeatures","name","hasSpellCasting","classLevels","setClassLevels","casterType","setCasterType"]),u=p=>{const y=JSON.parse(JSON.stringify(p));return typeof y=="string"?y:Array.isArray(y)?y.join(`
`):"-unknown-"},[d,h]=I(""),[b,_]=I(""),g=p=>l()[n-1]?.spellcasting?p===0?`${l()[n-1]?.spellcasting?.cantrips_known}`:l()[n-1]?.spellcasting?.[`spell_slots_level_${p}`]?`${l()[n-1]?.spellcasting?.[`spell_slots_level_${p}`]}`:"":"";return(()=>{var p=Yf(),y=p.firstChild;y.firstChild;var v=y.nextSibling,w=v.nextSibling,x=w.firstChild;x.firstChild;var S=w.nextSibling,E=S.nextSibling,C=E.nextSibling,D=C.nextSibling,k=D.firstChild,O=k.nextSibling;return m(y,n,null),m(x,()=>Math.ceil(n/4)+1,null),m(p,f(q,{get when(){return a()},get children(){var P=Jf(),R=P.firstChild;R.firstChild;var N=R.nextSibling;return m(R,f(F,{each:[0,1,2,3,4,5,6,7,8,9],children:j=>[(()=>{var J=Gf();return je(J,"for",`spell_slots_level_${j}`),m(J,j>0?`Level ${j} `:"Cantrips "),J})(),(()=>{var J=Xf();return m(J,f(me,{get value(){return g(j)},type:"number",name:`spell_slots_level_${j}`,onChange:V=>{e(B=>{switch(j){case 0:B[n-1].spellcasting={...B[n-1]?.spellcasting,cantrips_known:+V.currentTarget.value};break;case 1:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_1:+V.currentTarget.value};break;case 2:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_2:+V.currentTarget.value};break;case 3:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_3:+V.currentTarget.value};break;case 4:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_4:+V.currentTarget.value};break;case 5:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_5:+V.currentTarget.value};break;case 6:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_6:+V.currentTarget.value};break;case 7:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_7:+V.currentTarget.value};break;case 8:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_8:+V.currentTarget.value};break;case 9:B[n-1].spellcasting={...B[n-1]?.spellcasting,spell_slots_level_9:+V.currentTarget.value};break}return JSON.parse(JSON.stringify(B))})}})),J})()]}),null),m(N,f(me,{placeholder:"Spells Known"}),null),m(N,f(Je,{get value(){return o()},onChange:j=>{c(j.currentTarget.value)},disableUnselected:!0,get children(){return[f(ae,{value:"",children:"None"}),f(ae,{value:"full",children:"Full Caster"}),f(ae,{value:"halfUp",children:"Half Caster Round Up"}),f(ae,{value:"halfDown",children:"Half Caster Round Down"}),f(ae,{value:"thirdUp",children:"Third Caster Round Up"}),f(ae,{value:"thirdDown",children:"Third Caster Round Down"})]}}),null),L(()=>T(R,`${ke.hasCasting}`)),P}}),S),m(S,f(Ue,{onClick:P=>{s(R=>(R.push({name:`New Feature${R.filter(N=>N.info.level===n).length+1}`,value:"new feature description",info:{className:i(),subclassName:"",level:n,type:"Class Feature",other:""}}),JSON.parse(JSON.stringify(R))))},children:"Add New Feature"}),null),m(S,f(Ue,{children:"Add Existing Feature"}),null),m(p,f(F,{get each(){return r().filter(P=>P.info.level===n)},children:(P,R)=>(()=>{var N=Qf(),j=N.firstChild;j.firstChild;var J=j.nextSibling,V=J.firstChild,B=V.nextSibling,G=J.nextSibling;return m(j,f(me,{get value(){return P.name},onChange:re=>{s(pe=>(pe[n-1]={name:re.currentTarget.value,value:P.value,info:P.info},JSON.parse(JSON.stringify(pe))))}}),null),B.addEventListener("change",re=>{s(pe=>(pe[n-1]={name:P.name,value:re.currentTarget.value,info:P.info},JSON.parse(JSON.stringify(pe))))}),m(G,f(Ue,{onClick:()=>{s(re=>{const pe=re.findIndex(U=>U.name===P.name&&U.info.level===n);return re.splice(pe,1),JSON.parse(JSON.stringify(re))})},children:"Remove"})),L(()=>T(B,`${ke.textArea}`)),L(()=>B.value=u(P.value)),N})()}),C),m(p,f(q,{get when(){return r().filter(P=>P.info.level===n).length===0},get children(){return zf()}}),C),m(D,f(me,{get value(){return d()},onChange:P=>{h(P.currentTarget.value)},placeholder:"Name"}),k),m(D,f(me,{get value(){return b()},onChange:P=>{_(P.currentTarget.value)},type:"number",placeholder:"Value"}),k),m(D,f(Ue,{get disabled(){return d().length<1},onClick:P=>{e(R=>(R[n-1].classSpecific[d()]=b(),h(""),_(""),JSON.parse(JSON.stringify(R))))},children:"Add New"}),k),m(D,f(F,{get each(){return Object.keys(l()[n-1].classSpecific)},children:(P,R)=>(()=>{var N=Zf(),j=N.firstChild;return m(j,P),m(N,f(me,{get class(){return`${l()[n-1].classSpecific[P]?"error ":""}`},value:P,onChange:J=>{e(V=>(V[n-1].classSpecific[J.currentTarget.value]=V[n-1].classSpecific[P],JSON.parse(JSON.stringify(V))))}}),null),m(N,f(me,{type:"number",get value(){return l()[n-1].classSpecific[P]},onChange:J=>{e(V=>(V[n-1].classSpecific[P]=J.currentTarget.value,JSON.parse(JSON.stringify(V))))}}),null),m(N,f(Ue,{onClick:J=>{e(V=>(delete V[n-1].classSpecific[P],JSON.parse(JSON.stringify(V))))},children:"Remove"}),null),N})()}),O),L(P=>{var R=`${ke.otherStuff}`,N=`${ke.buttons}`;return R!==P.e&&T(w,P.e=R),N!==P.t&&T(S,P.t=N),P},{e:void 0,t:void 0}),p})()};var tm=$("<div><div><label for=spellList>Spell List</label></div><div><label for=spellAbility>Spellcasting Ability </label></div><div><label for=levelGained>Gained at Level: "),nm=$("<div>"),rm=$("<div><h1>Classes</h1><div><div><h3>Name</h3><h3>Hit Die</h3><h3>Stat Proficiency</h3><div><div></div><div></div></div><h3>Armor Proficiency</h3><div></div><h3>Weapon Proficiency</h3><div></div></div><div><h3>Skill Proficiency</h3><div><div><h3><label for=SkillChoice>Choose: </label></h3></div></div><h3>Starting Equipment</h3><div><div><div></div><div></div></div><div><div><div><h4>Choices </h4></div><div></div></div></div></div></div></div><h3>Tool Proficiency</h3><div><h3><label for=ToolChoice>Choose: </label></h3><div><label for=all> All</label></div></div><div><h3>Subclass Levels</h3><div></div></div><div><h4>Spellcasting</h4><label for=HasSpellCasting>Has SpellCasting?</label><h3>Level up Features</h3></div><div>"),Pa=$("<div><label>:"),Aa=$("<div><label>"),sm=$("<label> "),im=$("<div><div><span>Choose : <!> </span></div><div>"),am=$("<label>"),lm=$("<p>"),om=$('<p><textarea placeholder="Enter Section Description...">');const cm=()=>{const[t,e]=I(""),[n,r]=I(0);I([]);const[s,i]=I([]),[a,l]=I([]),[o,c]=I(1),[u,d]=I([]),[h,b]=I([]),[_,g]=I([]),[p,y]=I(1),[v,w]=I([]),[x,S]=I(0),[E,C]=I(""),[D,k]=I(1),[O,P]=I(-1),[R,N]=I(1),[j,J]=I(1),[V,B]=I([]),[G,re]=I(""),[pe,U]=I(1),[de,Z]=I(""),[X,we]=I(!1),[Ie,qe]=I(""),Se=ue(),[tt,Mr]=I(new Array(20).fill(0).map((Be,fe)=>fe+1)),vo=["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"],xi=Hf(),ki=Ci(),Ei=W(()=>xi().filter(Be=>Be.equipmentCategory==="Tools")),[mt,qr]=I({class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]}),[Pi,Ai]=I(new Array(20).fill({info:{className:"",subclassName:"",level:0,type:"",other:""},level:0,profBonus:0,features:[],classSpecific:{},spellcasting:{}}).map((Be,fe)=>({...Be,info:{...Be.info,level:fe+1},level:fe+1,profBonus:Math.ceil((fe+1)/4)+1}))),[Ur,Oi]=I(new Array(20).fill({info:{className:t(),subclassName:"",level:0,type:"",other:""},name:"",value:""}).map((Be,fe)=>({...Be,info:{...Be.info,level:fe+1}}))),[bo,yo]=I([]),Ti=W(()=>{switch(D()){case 1:return mt().choice1;case 2:return mt().choice2;case 3:return mt().choice3;case 4:return mt().choice4;default:return mt().choice1}}),Ii=W(()=>({name:t(),hitDie:n(),proficiencies:a(),proficiencyChoices:u().length>0?[{choose:o(),type:"Skill",choices:u()}]:[],savingThrows:s(),startingEquipment:mt(),classLevels:Pi().map(fe=>({...fe,info:{...fe.info,className:t()},features:Ur().filter(Re=>Re.info.level===fe.info.level)})),features:Ur(),subclasses:bo(),spellcasting:X()?{level:pe(),name:de(),spellcastingAbility:G(),casterType:Ie(),info:V()}:void 0,id:0})),_o=Be=>{const fe=mt();let Re=[];switch(Be){case 1:Re=fe.choice1;break;case 2:Re=fe.choice2;break;case 3:Re=fe.choice3;break;case 4:Re=fe.choice4;break}switch(O()>=0?O()>=0&&O()<fe.choice1.length&&Re[O()].choices.push({item:E(),quantity:R(),desc:[]}):Re.push({choose:j(),type:"",choices:[{item:E(),quantity:R(),desc:[]}]}),Be){case 1:fe.choice1=Re;break;case 2:fe.choice2=Re;break;case 3:fe.choice3=Re;break;case 4:fe.choice4=Re;break}console.log("Adding Item: ",fe),qr(()=>JSON.parse(JSON.stringify(fe))),console.log("Starting Equipment: ",mt())};return L(()=>{console.log("Class: ",Ii())}),[f(Ct,{}),(()=>{var Be=rm(),fe=Be.firstChild,Re=fe.nextSibling,dn=Re.firstChild,wo=dn.firstChild,Bi=wo.nextSibling,Ri=Bi.nextSibling,Vr=Ri.nextSibling,Li=Vr.firstChild,$o=Li.nextSibling,So=Vr.nextSibling,Wr=So.nextSibling,Co=Wr.nextSibling,Ni=Co.nextSibling,Di=dn.nextSibling,xo=Di.firstChild,Hr=xo.nextSibling,Jr=Hr.firstChild,ko=Jr.firstChild,Eo=Hr.nextSibling,Po=Eo.nextSibling,ji=Po.firstChild,Kn=ji.firstChild,Fi=Kn.nextSibling,Ao=ji.nextSibling,Oo=Ao.firstChild,To=Oo.firstChild,Io=To.nextSibling,Bo=Re.nextSibling,zr=Bo.nextSibling,Ki=zr.firstChild,Mn=Ki.nextSibling,Mi=Mn.firstChild,Ro=Mi.firstChild,qn=zr.nextSibling,Lo=qn.firstChild,Un=Lo.nextSibling,fn=qn.nextSibling,No=fn.firstChild,Do=No.nextSibling,qi=Do.nextSibling,jo=fn.nextSibling;return m(dn,f(me,{get value(){return t()},placeholder:"What is the class name?",onInput:A=>e(A.currentTarget.value)}),Bi),m(dn,f(Je,{get value(){return n()},onChange:A=>r(+A.currentTarget.value),get children(){return[f(ae,{value:4,children:"d4"}),f(ae,{value:6,children:"d6"}),f(ae,{value:8,children:"d8"}),f(ae,{value:10,children:"d10"}),f(ae,{value:12,children:"d12"})]}}),Ri),m(Li,f(F,{each:["STR","DEX","CON"],children:A=>(()=>{var M=Pa(),te=M.firstChild,le=te.firstChild;return je(te,"for",A),m(te,A,le),m(M,f(me,{type:"checkbox",onChange:Y=>Y.currentTarget.checked?i(he=>[...he,A]):i(he=>he.filter(He=>He!==A))}),null),M})()})),m($o,f(F,{each:["INT","WIS","CHA"],children:A=>(()=>{var M=Pa(),te=M.firstChild,le=te.firstChild;return je(te,"for",A),m(te,A,le),m(M,f(me,{type:"checkbox",onChange:Y=>Y.currentTarget.checked?i(he=>[...he,A]):i(he=>he.filter(He=>He!==A))}),null),M})()})),m(Wr,f(F,{each:["Light Armor","Medium Armor","Shields","Heavy Armor"],children:A=>(()=>{var M=Aa(),te=M.firstChild;return je(te,"for",A),m(te,A),m(M,f(me,{type:"checkbox",get value(){return`${a().includes(A)}`},onChange:le=>le.currentTarget.checked?l(Y=>JSON.parse(JSON.stringify([...Y,A]))):l(Y=>(Y=Y.filter(he=>he!==A),JSON.parse(JSON.stringify(Y))))}),null),M})()})),m(Ni,f(F,{each:["Simple Weapons","Martial Weapons"],children:A=>(()=>{var M=Aa(),te=M.firstChild;return je(te,"for",A),m(te,A),m(M,f(me,{type:"checkbox",get value(){return`${a().includes(A)}`},onChange:le=>le.currentTarget.checked?l(Y=>JSON.parse(JSON.stringify([...Y,A]))):l(Y=>JSON.parse(JSON.stringify(Y.filter(he=>he!==A))))}),null),M})()})),m(Jr,f(me,{type:"number",name:"SkillChoice",placeholder:"Can choose how many?",get value(){return o()},onInput:A=>c(+A.currentTarget.value)}),null),m(Jr,f(F,{each:vo,children:A=>(()=>{var M=sm(),te=M.firstChild;return je(M,"for",A),m(M,A,te),m(M,f(me,{type:"checkbox",onChange:le=>le.currentTarget.checked?d(Y=>JSON.parse(JSON.stringify([...Y,A]))):d(Y=>JSON.parse(JSON.stringify(Y.filter(he=>he!==A))))}),null),M})()}),null),m(Kn,f(Je,{onChange:A=>k(+A.currentTarget.value),disableUnselected:!0,get children(){return f(F,{each:[1,2,3,4],children:A=>f(ae,{value:A,get children(){return["Choice ",A]}})})}}),null),m(Kn,f(Je,{onChange:A=>P(+A.currentTarget.value),get children(){return f(F,{get each(){return Ti()},children:(A,M)=>f(ae,{get value(){return M()},get children(){return["Item ",W(()=>M()+1)]}})})}}),null),m(Kn,f(Ue,{onClick:A=>_o(D()),children:"+"}),null),m(Fi,f(me,{placeholder:"AMNT",type:"number",style:{width:"14%"},get value(){return R()},onInput:A=>N(+A.currentTarget.value)}),null),m(Fi,f(Je,{onChange:A=>{C(A.currentTarget.value)},get children(){return f(F,{get each(){return xi()},children:A=>f(ae,{get value(){return A.name},get children(){return A.name}})})}}),null),m(Io,f(F,{get each(){return Ti()},children:(A,M)=>(()=>{var te=im(),le=te.firstChild,Y=le.firstChild,he=Y.firstChild,He=he.nextSibling;He.nextSibling;var Vn=le.nextSibling;return m(Y,f(me,{type:"number",placeholder:"How many can be chosen?",onInput:xt=>J(+xt.currentTarget.value)}),He),m(Vn,f(F,{get each(){return A.choices},children:(xt,kt)=>f(Tr,{get key(){return xt.item},get value(){return`${xt.quantity}`},remove:()=>{qr(ve=>{switch(D()){case 1:ve.choice1[M()].choices.splice(kt(),1),ve.choice1[M()].choices.length===0&&ve.choice1.splice(M(),1),ve.choice1=[...ve.choice1];break;case 2:ve.choice2[M()].choices.splice(kt(),1),ve.choice2[M()].choices.length===0&&ve.choice2.splice(M(),1),ve.choice2=[...ve.choice2];break;case 3:ve.choice3[M()].choices.splice(kt(),1),ve.choice3[M()].choices.length===0&&ve.choice3.splice(M(),1),ve.choice3=[...ve.choice3];break;case 4:ve.choice4[M()].choices.splice(kt(),1),ve.choice4[M()].choices.length===0&&ve.choice4.splice(M(),1),ve.choice4=[...ve.choice4];break}return JSON.parse(JSON.stringify(ve))})}})})),L(()=>T(te,ke.itemStuff)),te})()})),m(zr,f(me,{type:"number",name:"ToolChoice",placeholder:"Can choose how many?",get value(){return p()},onInput:A=>y(+A.currentTarget.value)}),Mn),m(Mi,f(me,{type:"checkbox",onChange:A=>A.currentTarget.checked?g(Ei().map(M=>M.name)):g([])}),Ro),m(Mn,f(F,{get each(){return Ei()},children:A=>(()=>{var M=am();return m(M,f(me,{type:"checkbox",get checked(){return _().includes(A.name)},onChange:te=>te.currentTarget.checked?g(le=>[...le,A.name]):g(le=>le.filter(Y=>Y!==A.name))}),null),m(M,()=>A.name,null),L(()=>je(M,"for",A.name)),M})()}),null),m(qn,f(Je,{disableUnselected:!0,onChange:A=>{S(+A.currentTarget.value)},get children(){return[f(ae,{value:0,children:"None"}),f(F,{get each(){return tt()},children:A=>f(ae,{value:A,get children(){return["Level ",A]}})})]}}),Un),m(qn,f(Ue,{onClick:A=>{w(M=>M.includes(x())?M:[...M,x()])},children:"Add Subclass Level"}),Un),m(Un,f(F,{get each(){return v()},children:A=>f(Tr,{key:"Level",get value(){return A.toString()},remove:()=>{w(M=>M.filter(te=>te!==A))}})})),m(fn,f(me,{type:"checkbox",style:{width:"min-content"},get checked(){return X()},onChange:A=>we(A.currentTarget.checked)}),qi),m(fn,f(q,{get when(){return X()},get children(){return[(()=>{var A=tm(),M=A.firstChild;M.firstChild;var te=M.nextSibling;te.firstChild;var le=te.nextSibling;return le.firstChild,m(M,f(Je,{onChange:Y=>Z(Y.currentTarget.value),name:"spellList",disableUnselected:!0,get children(){return[f(F,{get each(){return ki().filter(Y=>Y.classLevels.flatMap(he=>he.spellcasting?Object.keys(he.spellcasting).length>0:!1).includes(!0))},children:Y=>f(ae,{get value(){return Y.name.trim()},get children(){return Y.name.trim()}})}),f(ae,{get value(){return W(()=>t().trim()!=="")()?t():"CurrentClass"},get children(){return W(()=>t().trim()!=="")()?t():"CurrentClass"}})]}}),null),m(te,f(Je,{onChange:Y=>re(Y.currentTarget.value),name:"spellAbility",disableUnselected:!0,get children(){return f(F,{each:["Intelligence","Wisdom","Charisma"],children:Y=>f(ae,{value:Y,children:Y})})}}),null),m(le,f(me,{onChange:Y=>U(+Y.currentTarget.value),min:1,max:20,type:"number",name:"levelGained"}),null),L(()=>T(A,ke.hasCastingMain)),A})(),(()=>{var A=nm();return m(A,f(Ue,{onClick:M=>{B(te=>[...te,{name:"",desc:[""]}])},children:"Add Spellcasting Info Section"}),null),m(A,f(F,{get each(){return V()},children:(M,te)=>[(()=>{var le=lm();return m(le,f(me,{onChange:Y=>B(he=>(he[te()].name=Y.currentTarget.value,[...he])),placeholder:"Enter Section Title..."})),le})(),(()=>{var le=om(),Y=le.firstChild;return Y.addEventListener("change",he=>B(He=>(He[te()].desc=[he.currentTarget.value],[...He]))),L(()=>T(Y,ke.textArea)),le})(),f(Ue,{onClick:le=>{B(Y=>(Y.splice(te(),1),[...Y]))},children:"Remove"})]}),null),A})()]}}),qi),m(fn,f(Fn,{get elements(){return tt().map(A=>({name:`Level ${A}`,element:f(em,{setClassLevels:Ai,classLevels:Pi,hasSpellCasting:X,allClasses:ki,features:Ur,setFeatures:Oi,name:t,level:A,casterType:Ie,setCasterType:qe})}))}}),null),m(jo,f(Ue,{onClick:()=>{Ze.classes().map(A=>A.name).includes(t())||(Ze.addClass(Ii()),qe(""),re(""),U(1),Z(""),we(!1),B([]),e(""),r(0),i([]),l([]),c(1),d([]),b([]),g([]),y(1),w([]),S(0),qr({class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]}),Ai(new Array(20).fill({info:{className:"",subclassName:"",level:0,type:"",other:""},level:0,profBonus:0,features:[],classSpecific:{}}).map((A,M)=>({...A,info:{...A.info,level:M+1},level:M+1,profBonus:Math.ceil((M+1)/4)+1}))),Oi(new Array(20).fill({info:{className:t(),subclassName:"",level:0,type:"",other:""},name:"",value:""}).map((A,M)=>({...A,info:{...A.info,level:M+1}}))),yo([]))},children:"Save Class"})),L(A=>{var M=`${Se.accent} ${ke.body}`,te=ke.Columns,le=`${ke.Column}`,Y=`${ke.statProf}`,he=`${ke.statProf}`,He=`${ke.statProf}`,Vn=`${ke.Column}`,xt=`${ke.statProf}`,kt=ke.Tools,ve=ke.Tools,Ui=`${ke.toolProf}`,Vi=`${ke.subclassLevels}`;return M!==A.e&&T(Be,A.e=M),te!==A.t&&T(Re,A.t=te),le!==A.a&&T(dn,A.a=le),Y!==A.o&&T(Vr,A.o=Y),he!==A.i&&T(Wr,A.i=he),He!==A.n&&T(Ni,A.n=He),Vn!==A.s&&T(Di,A.s=Vn),xt!==A.h&&T(Hr,A.h=xt),kt!==A.r&&T(ko,A.r=kt),ve!==A.d&&T(Ki,A.d=ve),Ui!==A.l&&T(Mn,A.l=Ui),Vi!==A.u&&T(Un,A.u=Vi),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),Be})()]},um="_body_w200b_1",hm={body:um};var dm=$("<div><h1>Items</h1><h2>Item Types</h2><div>"),fm=$("<div><p>damage</p><p>properties</p><p>description</p><p>cost</p><p>weight</p><p>description"),mm=$("<div><p>armor class</p><p>strength requirement</p><p>stealth disadvantage</p><p>description</p><p>cost</p><p>weight"),gm=$("<div><p>description</p><p>cost</p><p>weight</p><p>consumable");const pm=()=>{const t=ue();return[f(Ct,{}),(()=>{var e=dm(),n=e.firstChild,r=n.nextSibling,s=r.nextSibling;return m(s,f(Fn,{get elements(){return[{name:"Weapon",element:fm()},{name:"Armor",element:mm()},{name:"Item",element:gm()}]}})),L(()=>T(e,`${t.accent} ${hm.body}`)),e})()]},vm="_body_kihnl_1",bm="_name_kihnl_24",ym="_featHomebrew_kihnl_28",_m="_featName_kihnl_1",wm="_removeChipButton_kihnl_42",$m="_preRequisites_kihnl_49",Sm="_Description_kihnl_63",Cm="_chipBar_kihnl_77",zt={body:vm,name:bm,featHomebrew:ym,featName:_m,removeChipButton:wm,preRequisites:$m,Description:Sm,chipBar:Cm},[Oa,xm]=I([]),fo=()=>{const t=io(),e=Q.toObservable(ie.feats.toArray());return Oa().length===0&&e.pipe(ee(1),Ee(r=>{r.length>0&&xm(r)})).subscribe(),W(()=>[...t(),...Oa()])};var us=$("<div>"),km=$("<div><h1>Feats</h1><div class=featHomebrew><div><h2>Add Name</h2></div><div><h2>Add Pre-Requisites</h2><div><button>Add</button></div><div></div></div><div><h2>Description</h2><textarea id=featDescription name=featDescription></textarea></div><button>Add Feat"),yt=(t=>(t[t.AbilityScore=0]="AbilityScore",t[t.Class=1]="Class",t[t.CharacterLevel=2]="CharacterLevel",t))(yt||{});const Em=()=>{const t=ue(),e=Ci();fo();const n=Ze,r=new du({}),[s,i]=I([]),[a,l]=I(0),[o,c]=I(""),[u,d]=I("str"),[h,b]=I("0"),[_,g]=I(""),[p,y]=I(!1),v=()=>{i([]),l(0),c(""),d("str"),b("0"),g("")},w=x=>{switch(a()){case 0:i(S=>[...S,{info:{className:"",subclassName:"",level:0,type:yt[0],other:""},name:u(),value:h()}]);break;case 1:i(S=>[...S,{info:{className:"",subclassName:"",level:0,type:yt[1],other:""},name:u(),value:h()}]);break;case 2:i(S=>[...S,{info:{className:"",subclassName:"",level:0,type:yt[2],other:""},name:u(),value:h()}]);break}};return L(()=>{switch(a()){case 0:d("STR"),b("0");break;case 1:d("Class"),b("Barbarian");break;case 2:d("Barbarian"),b("0");break}}),L(()=>{const x={};x.name=o(),x.preReqs=s(),x.desc=[_()],r.next(x)}),L(()=>{p()&&(n.addFeat(r.value),y(!1),v())}),[f(Ct,{}),(()=>{var x=km(),S=x.firstChild,E=S.nextSibling,C=E.firstChild;C.firstChild;var D=C.nextSibling,k=D.firstChild,O=k.nextSibling,P=O.firstChild,R=O.nextSibling,N=D.nextSibling,j=N.firstChild,J=j.nextSibling,V=N.nextSibling;return m(C,f(me,{type:"text",id:"featName",get value(){return o()},onChange:B=>c(B.currentTarget.value)}),null),m(O,f(Je,{get value(){return a()},onChange:B=>l(()=>+B.currentTarget.value),disableUnselected:!0,get children(){return[f(ae,{get value(){return 0},children:"Ability Score"}),f(ae,{get value(){return 1},children:"Class"}),f(ae,{get value(){return 2},children:"Class Level"})]}}),P),m(O,f(wr,{get children(){return[f(ze,{get when(){return a()===0},get children(){var B=us();return m(B,f(Je,{onChange:G=>d(G.currentTarget.value),get children(){return[f(ae,{value:"STR",children:"Strength"}),f(ae,{value:"DEX",children:"Dexterity"}),f(ae,{value:"CON",children:"Constitution"}),f(ae,{value:"INT",children:"Intelligence"}),f(ae,{value:"WIS",children:"Wisdom"}),f(ae,{value:"CHA",children:"Charisma"})]}}),null),m(B,f(me,{type:"number",onChange:G=>b(G.currentTarget.value)}),null),B}}),f(ze,{get when(){return a()===1},get children(){var B=us();return m(B,f(Je,{onChange:G=>{d("Class"),b(G.currentTarget.value)},get children(){return f(F,{get each(){return e()},children:G=>f(ae,{get value(){return G.name},get children(){return G.name}})})}})),B}}),f(ze,{get when(){return a()===2},get children(){var B=us();return m(B,f(Je,{onChange:G=>d(G.currentTarget.value),get children(){return f(F,{get each(){return e()},children:G=>f(ae,{get value(){return G.name},get children(){return G.name}})})}}),null),m(B,f(me,{type:"number",onChange:G=>b(G.currentTarget.value)}),null),B}})]}}),P),P.$$click=w,m(R,f(Tr,{get key(){return u()},get value(){return h()}}),null),m(R,f(F,{get each(){return s()},children:(B,G)=>f(Tr,{get key(){return B.name},get value(){return B.value},remove:()=>i(re=>re.filter((pe,U)=>U!==G()))})}),null),J.addEventListener("change",B=>g(B.currentTarget.value)),V.$$click=()=>y(!0),L(B=>{var G=`${t.accent} ${zt.body}`,re=`${zt.name}`,pe=`${zt.preRequisites}`,U=s().length>=10,de=`${zt.chipBar}`,Z=`${zt.Description}`,X=`${zt.addButton}`;return G!==B.e&&T(x,B.e=G),re!==B.t&&T(C,B.t=re),pe!==B.a&&T(D,B.a=pe),U!==B.o&&(P.disabled=B.o=U),de!==B.i&&T(R,B.i=de),Z!==B.n&&T(N,B.n=Z),X!==B.s&&T(V,B.s=X),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),L(()=>J.value=_()),x})()]};Te(["click"]);const Pm="_body_w200b_1",Am={body:Pm};var Om=$("<div><h1>backgrounds</h1><div><p>ideals</p><p>bonds</p><p>flaws</p><p>personality traits</p><p>background features</p><p>languages</p><p>skills</p><p>tools");const Tm=()=>{const t=ue();return[f(Ct,{}),(()=>{var e=Om();return L(()=>T(e,`${t.accent} ${Am.body}`)),e})()]},Im="_body_w200b_1",Bm={body:Im};var Rm=$("<div><h1>spells</h1><p>name</p><p>level</p><p>school</p><p>casting time</p><p>range</p><p>components</p><p>duration</p><p>description</p><p>classes list");const Lm=()=>{const t=ue();return[f(Ct,{}),(()=>{var e=Rm();return L(()=>T(e,`${t.accent} ${Bm.body}`)),e})()]},Nm="_body_w200b_1",Dm={body:Nm};var jm=$("<div><h1>races</h1><div><p>name</p><p>size</p><p>speed</p><p>ability score increase</p><p>age range</p><p>features");const Fm=()=>{const t=ue();return[f(Ct,{}),(()=>{var e=jm();return L(()=>T(e,`${t.accent} ${Dm.body}`)),e})()]},Km="_SpellsBody_ump1u_1",Mm="_materials_needed_ump1u_1",qm="_TableRow_ump1u_32",Um="_headerBar_ump1u_64",hs={SpellsBody:Km,materials_needed:Mm,TableRow:qm,headerBar:Um},Vm="_TableRow_40ek1_1",Wm="_wrap_40ek1_5",Hm="_maxWidth_40ek1_8",ds={TableRow:Vm,wrap:Wm,maxWidth:Hm};var Jm=$("<td><strong>Materials:</strong> "),zm=$("<td><strong>higher levels:"),Ym=$("<td><textarea></textarea>"),Gm=$("<tr><td><h2><strong></strong></h2></td><td><strong>Level:</strong> </td><td><strong>School:</strong> </td><td><strong>Casting time:</strong> </td><td><strong>Range:</strong> </td><td><strong>Components:</strong> </td><td><strong>Duration:</strong> </td><td><strong>Classes:</strong> </td><td><strong>Subclasses:</strong> </td><td><strong>Description:</strong></td><td><textarea name=spell_desc>");const Xm=t=>{const e=t.spell.isMaterial,n=t.spell.isSomatic,r=t.spell.isVerbal;function s(){let a=[],l=[];return r&&a.push("V"),n&&a.push("S"),e&&a.push("M"),l.push(a.join(", ")),e&&l.push(t.spell.materials_Needed),l}let i=s();return(()=>{var a=Gm(),l=a.firstChild,o=l.firstChild,c=o.firstChild,u=l.nextSibling,d=u.firstChild;d.nextSibling;var h=u.nextSibling,b=h.firstChild;b.nextSibling;var _=h.nextSibling,g=_.firstChild;g.nextSibling;var p=_.nextSibling,y=p.firstChild;y.nextSibling;var v=p.nextSibling,w=v.firstChild;w.nextSibling;var x=v.nextSibling,S=x.firstChild;S.nextSibling;var E=x.nextSibling,C=E.firstChild;C.nextSibling;var D=E.nextSibling,k=D.firstChild;k.nextSibling;var O=D.nextSibling,P=O.nextSibling,R=P.firstChild;return m(c,()=>t.spell.name),m(u,()=>t.spell.level,null),m(h,()=>t.spell.school,null),m(_,()=>t.spell.castingTime,null),m(p,()=>t.spell.range,null),m(v,()=>i[0],null),m(a,f(q,{when:e,get children(){var N=Jm(),j=N.firstChild;return j.nextSibling,m(N,()=>i[1],null),L(()=>T(N,`${ds.wrap} ${ds.maxWidth}`)),N}}),x),m(x,()=>t.spell.duration,null),m(E,()=>t.spell.classes.join(", "),null),m(D,()=>t.spell.subClasses.join(", "),null),m(R,()=>t.spell.desc),m(a,f(q,{get when(){return!!t.spell.higherLevel},get children(){return zm()}}),null),m(a,f(q,{get when(){return!!t.spell.higherLevel},get children(){var N=Ym(),j=N.firstChild;return m(j,()=>t.spell.higherLevel),N}}),null),L(()=>T(a,`${ds.TableRow}`)),a})()},Qm="_chip_1bifh_1",Zm={chip:Qm};var eg=$("<span> : <!> <button>x");const tg=t=>{const e=ue();return(()=>{var n=eg(),r=n.firstChild,s=r.nextSibling,i=s.nextSibling,a=i.nextSibling;return m(n,()=>t.key,r),m(n,()=>t.value,s),Dr(a,"click",t.clear,!0),L(()=>T(n,`${e.tertiary} ${Zm.chip}`)),n})()};Te(["click"]);const ng="_searchBar_176b5_1",rg="_booleanSelect_176b5_39",sg="_chipBar_176b5_67",fs={searchBar:ng,booleanSelect:rg,chipBar:sg};var ig=$("<button>Clear All");const ag=t=>{const e=ue();return(()=>{var n=ig();return Dr(n,"click",t.clear,!0),L(()=>T(n,`${e.accent}`)),n})()};Te(["click"]);var lg=$("<select>"),og=$("<select><option value=0>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option><option value=9>9"),Ta=$('<input id=searchBar placeholder="Search Spells..."type=text>'),cg=$("<div id=booleanBar><span><label for=falsebox></label><input type=checkbox id=booleanCheckbox>"),ug=$("<div>"),hg=$("<div><div><span><select id=chipDropdown>"),Ia=$("<option>"),dg=$('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const fg=t=>{const[e,n]=I({key:"",value:""}),[r,s]=I("name"),[i,a]=I(""),[l,o]=I(!1),[c,u]=I([]);I(!1),ue(),document.getElementById("booleanCheckbox");const d=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"];L(()=>{t.setSearchResults(t.spellsSrd().filter(b=>b&&c().length>0?!c().map(g=>{const p=b[g.key];if(p)switch(!0){case typeof p=="string":return p.toLowerCase().includes(g.value.toLowerCase());case Array.isArray(p):return p.join(" ").toLowerCase().includes(g.value.toLowerCase());case typeof p=="boolean":return` ${p} `.toLowerCase().includes(g.value.toLowerCase())}return!1}).includes(!1):!0))}),L(()=>{t.spellsSrd().length>0&&typeof t.spellsSrd()[0][r()]=="boolean"&&a(`${l()}`)}),L(()=>{u(b=>e().key?[...b,e()]:b),a(""),document.getElementById("searchBar")&&(document.getElementById("searchBar").value="")});const h=b=>{switch(b){case"name":return"Name";case"level":return"Level";case"school":return"School";case"castingTime":return"Casting Time";case"range":return"Range";case"duration":return"Duration";case"concentration":return"Conc";case"ritual":return"Ritual";case"damageType":return"Dmg Type";case"isMaterial":return"Material";case"isSomatic":return"Somatic";case"isVerbal":return"Verbal";case"classes":return"Classes";case"desc":return"Desc";case"subClasses":return"Subclasses"}};return(()=>{var b=hg(),_=b.firstChild,g=_.firstChild,p=g.firstChild;return m(_,f(mg,{onClick:()=>n(y=>({key:r(),value:mr(i())}))}),g),p.addEventListener("change",y=>s(y.target.value)),m(p,f(F,{get each(){return Object.keys(t.spellsSrd()[0]).filter(y=>!["materials_Needed","higherLevel","page"].includes(y))},children:y=>(()=>{var v=Ia();return v.value=y,m(v,()=>h(y)),v})()})),m(_,f(wr,{get children(){return[f(ze,{get when(){return typeof t.spellsSrd()[0][r()]=="string"},get children(){return f(wr,{get fallback(){return(()=>{var y=Ta();return y.$$keydown=v=>{v.key==="Enter"&&n(w=>({key:r(),value:mr(v.currentTarget.value)}))},y.addEventListener("change",v=>a(v.currentTarget.value)),L(()=>y.value=i()),y})()},get children(){return[f(ze,{get when(){return r()==="school"},get children(){var y=lg();return y.addEventListener("change",v=>a(v.currentTarget.value)),m(y,f(F,{each:d,children:v=>(()=>{var w=Ia();return w.value=v,m(w,v),w})()})),y}}),f(ze,{get when(){return r()==="level"},get children(){var y=og();return y.addEventListener("change",v=>a(v.currentTarget.value)),y}})]}})}}),f(ze,{get when(){return Array.isArray(t.spellsSrd()[0][r()])},get children(){var y=Ta();return y.$$keydown=v=>{v.key==="Enter"&&n(w=>({key:r(),value:mr(v.currentTarget.value)}))},y.addEventListener("change",v=>a(v.currentTarget.value)),L(()=>y.value=i()),y}}),f(ze,{get when(){return typeof t.spellsSrd()[0][r()]=="boolean"},get children(){var y=cg(),v=y.firstChild,w=v.firstChild,x=w.nextSibling;return m(w,f(q,{get when(){return l()===!1},children:"false"}),null),m(w,f(q,{get when(){return l()===!0},children:"true"}),null),x.addEventListener("change",()=>{o(!l()),a(`${l()}`)}),L(()=>T(y,`${fs.booleanSelect}`)),L(()=>x.checked=l()),y}})]}}),null),m(b,f(q,{get when(){return c().length>0},get children(){var y=ug();return m(y,f(ag,{clear:()=>u([])}),null),m(y,f(F,{get each(){return c()},children:(v,w)=>f(tg,{get key(){return h(v.key)??""},get value(){return v.value},clear:()=>u(x=>x.filter((S,E)=>E!==w()))})}),null),L(()=>T(y,`${fs.chipBar}`)),y}}),null),L(()=>T(_,`${fs.searchBar}`)),b})()},mg=t=>(()=>{var e=dg();return ft(e,Xe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();Te(["keydown"]);const gg=()=>{const t=so();return W(()=>[...t()])};var pg=$("<div><h1>Spells</h1><table><tbody></tbody></table><div>"),vg=$("<span><i>"),bg=$("<tr><td><span><span></span><span><i></i></span></span><span></span></td><td><button>"),yg=$("<hr>");const _g=()=>{const t=ue(),e=gg(),[n,r]=Ln();n.name||r({name:e()[0]?.name});const s=e().filter(p=>p.name?.toLowerCase()===(n?.name||e()[0]?.name).toLowerCase())[0],[i,a]=I(s),[l,o]=I([]),[c,u]=I([]),[d,h]=I([]),b=p=>_(p)?o(l().filter(y=>y!==p)):o([...l(),p]),_=p=>l().includes(p),g=p=>{switch(p){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${p}th`}};return L(()=>{r({name:i()?.name??""})}),(()=>{var p=pg(),y=p.firstChild,v=y.nextSibling,w=v.firstChild,x=v.nextSibling;return m(p,f(fg,{searchResults:d,setSearchResults:h,spellsSrd:e}),v),m(w,f(F,{get each(){return c()},children:(S,E)=>[(()=>{var C=bg(),D=C.firstChild,k=D.firstChild,O=k.firstChild,P=O.nextSibling,R=P.firstChild,N=k.nextSibling,j=D.nextSibling,J=j.firstChild;return m(O,()=>S.name),m(R,()=>S.school),m(k,f(q,{get when(){return S.concentration},get children(){var V=vg(),B=V.firstChild;return m(B,()=>S.duration),V}}),null),m(N,()=>g(S.level)),J.$$click=()=>{b(E()),a(()=>S)},m(J,()=>_(E())?"↑":"↓"),L(V=>{var B=`${hs.TableRow}`,G=hs.headerBar;return B!==V.e&&T(C,V.e=B),G!==V.t&&T(D,V.t=G),V},{e:void 0,t:void 0}),C})(),f(q,{get when(){return _(E())},get children(){return f(Xm,{get spell(){return i()}})}}),yg()]})),m(x,f(Si,{items:d,setPaginatedItems:u})),L(S=>{var E=`${t.accent} ${hs.SpellsBody}`,C=`${t.table}`;return E!==S.e&&T(p,S.e=E),C!==S.t&&T(v,S.t=C),S},{e:void 0,t:void 0}),p})()};Te(["click"]);const wg="_featsList_1hcnd_1",$g="_PreReqsBar_1hcnd_17",Sg="_body_1hcnd_29",ms={featsList:wg,PreReqsBar:$g,body:Sg};var Cg=$("<div><div><h1>Feats</h1><div></div><ol>"),xg=$("<li> <button></button>"),Ba=$("<div>"),Ra=$("<br>"),kg=$("<div>Description:"),gs=$("<span>"),Eg=$("<div>Ability Score Requirement: "),Pg=$("<span> of "),Ag=$("<div>Class Requirement:"),Og=$("<div>class level Requirement:"),Tg=$("<span> "),Ig=$("<div>classes Requirement:");const Bg=()=>{const[t,e]=I([]),[n,r]=I([]),s=W(()=>n().length===0?t():n()),[i,a]=I([]),l=p=>i().includes(p),o=p=>l(p)?a(i().filter(y=>y!==p)):a([...i(),p]),c=ue(),u=fo(),[d,h]=Ln();d.name||h({name:u()[0]?.name});const b=u().filter(p=>p.name?.toLowerCase()===(d.name||u()[0]?.name).toLowerCase())[0],[_,g]=I(b);return L(()=>{h({name:_()?.name})}),(()=>{var p=Cg(),y=p.firstChild,v=y.firstChild,w=v.nextSibling,x=w.nextSibling;return w.style.setProperty("height","5vh"),w.style.setProperty("width","35%"),m(w,f(ho,{placeholder:"Search Feats...",dataSource:u,setResults:r})),m(x,f(F,{get each(){return s()},children:(S,E)=>[(()=>{var C=xg(),D=C.firstChild,k=D.nextSibling;return m(C,()=>S.name,D),k.$$click=()=>{o(E()),g(S)},m(k,()=>l(E())?"↑":"↓"),C})(),f(q,{get when(){return l(E())},get children(){return[(()=>{var C=Ba();return m(C,f(F,{get each(){return _().preReqs},children:D=>(()=>{var k=Ba();return m(k,f(wr,{get children(){return[f(ze,{get when(){return D.info.type===yt[0]},get children(){return[Eg(),(()=>{var O=Pg(),P=O.firstChild;return m(O,()=>D.name,P),m(O,()=>D.value,null),O})()]}}),f(ze,{get when(){return D.info.type===yt[1]},get children(){return[Ag(),(()=>{var O=gs();return m(O,()=>D.value),O})()]}}),f(ze,{get when(){return D.info.type===yt[2]},get children(){return[Og(),(()=>{var O=Tg(),P=O.firstChild;return m(O,()=>D.name,P),m(O,()=>D.value,null),O})()]}}),f(ze,{get when(){return D.info.type===yt[3]},get children(){return[Ig(),(()=>{var O=gs();return m(O,()=>D.name),O})()]}})]}})),k})()})),L(()=>T(C,`${ms.PreReqsBar}`)),C})(),Ra(),kg(),(()=>{var C=gs();return m(C,f(F,{get each(){return _().desc},children:(D,k)=>[D,Ra()]})),C})()]}})]})),m(y,f(Si,{items:u,setPaginatedItems:e}),null),L(S=>{var E=`${c.accent} ${ms.featsList}`,C=`${ms.body}`;return E!==S.e&&T(p,S.e=E),C!==S.t&&T(y,S.t=C),S},{e:void 0,t:void 0}),p})()};Te(["click"]);const Rg=()=>{const t=ao();return W(()=>[...t()])},Lg="_sidebar_58thj_9",Ng="_sidebar_shown_58thj_37",Dg="_wrapper_58thj_43",jg="_thePage_58thj_48",Fg="_outerStyles_58thj_59",Kg="_SelectorBar_58thj_67",Mg="_fixed_58thj_78",qg="_flexrow_58thj_92",Ug="_wrap_58thj_43",Vg="_abilityscore_58thj_102",Wg="_sideBarBtn_58thj_109",Hg="_animate_58thj_123",Jg="_slidein_58thj_1",er={sidebar:Lg,sidebar_shown:Ng,wrapper:Dg,thePage:jg,outerStyles:Fg,SelectorBar:Kg,fixed:Mg,flexrow:qg,wrap:Ug,abilityscore:Vg,sideBarBtn:Wg,animate:Hg,slidein:Jg},zg="_subrace_1t2pp_1",Yg={subrace:zg};var Gg=$("<div><h3>Sub Races"),Ot=$("<br>"),La=$("<div>"),Xg=$("<span>languages:"),ps=$("<span>"),Qg=$("<h3>languages to choose from"),Zg=$("<div><span>name: </span><br><br><span>Ability Score increases:</span><br>"),ep=$("<span><br><span></span> <span></span><br>"),tp=$("<span>: ");const np=t=>{ue();let e=t.race;return f(q,{get when(){return e?.subRaces?.length>0},get children(){return f(nn,{get children(){return[Gg(),(()=>{var n=La();return m(n,f(q,{get when(){return e?.subRaces.length>0},get children(){return[Ot(),(()=>{var r=La();return m(r,f(F,{get each(){return e?.subRaces},children:s=>[(()=>{var i=Zg(),a=i.firstChild;a.firstChild;var l=a.nextSibling,o=l.nextSibling,c=o.nextSibling,u=c.nextSibling;return m(a,()=>s.name,null),m(i,f(q,{get when(){return s.abilityBonuses.length>0},get children(){return f(F,{get each(){return s.abilityBonuses},children:d=>(()=>{var h=ep(),b=h.firstChild,_=b.nextSibling,g=_.nextSibling,p=g.nextSibling;return m(_,()=>d.name),m(p,()=>d.value),h})()})}}),u),m(i,f(q,{get when(){return s.traits.length>0},get children(){return f(F,{get each(){return s.traits},children:d=>[Ot(),(()=>{var h=tp(),b=h.firstChild;return m(h,()=>d.name,b),h})(),Ot(),(()=>{var h=ps();return m(h,()=>d.value),h})(),Ot()]})}}),u),m(i,f(q,{get when(){return s.languages.length>0},get children(){return[Xg(),Ot(),(()=>{var d=ps();return m(d,()=>s.languages.join(", ")),d})()]}}),null),m(i,f(q,{get when(){return s.languageChoice.choices.length>0},get children(){return[Qg(),f(F,{get each(){return s.languageChoice.choices},children:d=>[(()=>{var h=ps();return m(h,d),h})(),Ot()]})]}}),null),L(d=>{var h=`${s.name}`,b=`${Yg.subrace}`;return h!==d.e&&je(i,"id",d.e=h),b!==d.t&&T(i,d.t=b),d},{e:void 0,t:void 0}),i})(),Ot()]})),r})()]}})),n})()]}})}})};var rp=$("<div><div><h1></h1><h2> traits</h2><div><h3>Ability Score Increases: </h3><div></div><h3>Age:</h3><span></span><h3>Alignment:</h3><span></span><h3>Size:</h3><span></span><h3>Speed:</h3><span>ft</span><h3>Race Specific Traits:</h3><span></span><h3>Proficiencies</h3><div></div><h3>Languages:</h3><br>"),vs=$("<br>"),bs=$("<span>"),sp=$("<div>: ");const ip=t=>{let e=t.styles,n=t.dndSrdRace;return(()=>{var r=rp(),s=r.firstChild,i=s.firstChild,a=i.nextSibling,l=a.firstChild,o=a.nextSibling,c=o.firstChild,u=c.nextSibling,d=u.nextSibling,h=d.nextSibling,b=h.nextSibling,_=b.nextSibling,g=_.nextSibling,p=g.nextSibling,y=p.nextSibling,v=y.nextSibling,w=v.firstChild,x=v.nextSibling,S=x.nextSibling,E=S.nextSibling,C=E.nextSibling,D=C.nextSibling,k=D.nextSibling;return m(i,()=>n().name),m(a,()=>n().name,l),m(u,f(F,{get each(){return n().abilityBonuses},children:O=>[vs(),(()=>{var P=bs();return m(P,()=>O.name),P})()," ",(()=>{var P=bs();return m(P,()=>O.value),P})(),vs()]})),m(h,()=>n()?.age),m(_,()=>n()?.alignment),m(p,()=>n()?.sizeDescription),m(v,()=>n()?.speed,w),m(S,f(F,{get each(){return n()?.traits},children:O=>[(()=>{var P=sp(),R=P.firstChild;return m(P,()=>O?.name,R),m(P,f(F,{get each(){return O?.value},children:N=>(()=>{var j=bs();return m(j,N),L(()=>T(j,`${e.wrap}`)),j})()}),null),P})(),vs()]})),m(C,()=>n()?.startingProficencies?.map(O=>O?.value)?.join(`
`)),m(o,()=>n()?.languageDesc,k),m(o,f(np,{styles:e,get race(){return n()}}),null),L(O=>{var P=`${e.thePage}`,R=`${n().name}`,N=`${e.abilityscore}`,j=`${e.wrap}`,J=`${e.wrap}`,V=`${e.wrap}`;return P!==O.e&&T(r,O.e=P),R!==O.t&&je(i,"id",O.t=R),N!==O.a&&T(u,O.a=N),j!==O.o&&T(h,O.o=j),J!==O.i&&T(_,O.i=J),V!==O.n&&T(p,O.n=V),O},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};var ap=$("<div id=racesComp><h1>Races</h1><div><button>←</button><span></span><button>→</button></div><div>");const lp=()=>{const t=Rg(),e=ue();I([]);const[n,r]=Ln(),s=t()?.findIndex(o=>o.name?.toLowerCase()===n?.name?.toLowerCase()),[i,a]=I(s>=0?s:0);n.name||r({name:t().length>0?t()[i()].name:"dragonborn"});const l=W(()=>t().length>0&&i()>=0&&i()<t().length?t()[i()]:{});return L(()=>{r({name:t().length>0?l()?.name:"Dragonborn"})}),(()=>{var o=ap(),c=o.firstChild,u=c.nextSibling,d=u.firstChild,h=d.nextSibling,b=h.nextSibling,_=u.nextSibling;return d.$$click=()=>i()===0?a(g=>t().length-1):a(g=>g-1),m(h,()=>l().name),b.$$click=()=>i()===t().length-1?a(g=>0):a(g=>g+1),m(_,f(ip,{styles:er,dndSrdRace:l})),L(g=>{var p=`${e.accent} ${er.outerStyles}`,y=`${er.SelectorBar}`,v=`${er.wrapper}`;return p!==g.e&&T(o,g.e=p),y!==g.t&&T(u,g.t=y),v!==g.a&&T(_,g.a=v),g},{e:void 0,t:void 0,a:void 0}),o})()};Te(["click"]);const op=()=>{const t=lo();return W(()=>[...t()])},cp="_allBackgrounds_sz14l_1",up="_backgrounds_sz14l_12",hp="_feature_sz14l_17",dp="_totalPanel_sz14l_21",fp="_body_sz14l_25",vn={allBackgrounds:cp,backgrounds:up,feature:hp,totalPanel:dp,body:fp};var mp=$("<div><h1>Backgrounds</h1><div></div><div></div>"),gp=$("<div>"),pp=$("<div><h2></h2><div></div><h3></h3><h3>choose: </h3><div></div><br><h3>Starting Equipment</h3><div></div><br><div></div><h3>Skill Proficiencies</h3><div>"),vp=$("<span><h3></h3><br><span>"),bn=$("<br>"),ys=$("<span>"),bp=$("<h3>Choose: "),yp=$("<span> ");const _p=()=>{const t=ue(),e=op(),[n,r]=I(e()||[]),s=W(()=>n().length===0?e():n()),[i,a]=Ln();i.name||a({name:e()[0]?.name});const l=e().filter(d=>d.name?.toLowerCase()===(i?.name||e()[0]?.name).toLowerCase())[0],[o,c]=I(l);L(()=>{a({name:o()?.name})});const u=d=>{c(d)};return(()=>{var d=mp(),h=d.firstChild,b=h.nextSibling,_=b.nextSibling;return b.style.setProperty("width","35%"),b.style.setProperty("height","5vh"),b.style.setProperty("margin","0 auto"),m(b,f(ho,{placeholder:"Search Backgrounds...",dataSource:e,setResults:r})),_.style.setProperty("width","50%"),m(_,f(F,{get each(){return s()},children:g=>f(nn,{get extraSetter(){return u(g)},styles:vn,get children(){return[(()=>{var p=gp();return m(p,()=>o().name),p})(),(()=>{var p=pp(),y=p.firstChild,v=y.nextSibling,w=v.nextSibling,x=w.nextSibling;x.firstChild;var S=x.nextSibling,E=S.nextSibling,C=E.nextSibling,D=C.nextSibling,k=D.nextSibling,O=k.nextSibling,P=O.nextSibling,R=P.nextSibling;return m(y,()=>o().name),m(v,f(F,{get each(){return o().feature},children:N=>[(()=>{var j=vp(),J=j.firstChild,V=J.nextSibling,B=V.nextSibling;return m(J,()=>N.name),m(B,()=>N.value),L(()=>T(B,`${vn.feature}`)),j})(),bn()]})),m(w,()=>o().languageChoice.type),m(x,()=>o().languageChoice.choose,null),m(S,f(F,{get each(){return o().languageChoice.choices},children:N=>[(()=>{var j=ys();return m(j,N),j})(),bn()]})),m(D,f(F,{get each(){return o().startingEquipment},children:N=>[(()=>{var j=ys();return m(j,()=>N.item),j})(),bn()]})),m(O,f(F,{get each(){return o().startingEquipmentChoices},children:N=>[(()=>{var j=bp();return j.firstChild,m(j,()=>N.choose,null),j})(),f(F,{get each(){return N.choices},children:j=>[(()=>{var J=yp(),V=J.firstChild;return m(J,()=>j.quantity,V),m(J,()=>j.item,null),J})(),bn()]})]})),m(R,f(F,{get each(){return o().startingProficiencies},children:N=>[(()=>{var j=ys();return m(j,()=>N.value),j})(),bn()]})),L(()=>T(p,`${vn.body}`)),p})()]}})})),L(g=>{var p=`${t.accent} ${vn.allBackgrounds}`,y=`${vn.backgrounds}`;return p!==g.e&&T(d,g.e=p),y!==g.t&&T(_,g.t=y),g},{e:void 0,t:void 0}),d})()};function wp(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const $p="_feature_fg9e7_1",Sp="_table_fg9e7_5",Cp="_tableRow_fg9e7_9",xp="_tableCell_fg9e7_13",tr={feature:$p,table:Sp,tableRow:Cp,tableCell:xp};var kp=$("<table><thead><tr><th>Level</th><th>PB</th><th>Features</th></tr></thead><tbody>"),Ep=$("<th>"),Pp=$("<tr><td></td><td></td><td>"),Ap=$("<td><span>");const Op=t=>{const e=t.Class,n=i=>{switch(t.Class().name.toLowerCase()){case"rogue":case"monk":if(!Number.isNaN(+i))return i;const a=JSON.parse(i);return`${JSON.parse(a).DiceCount}d${JSON.parse(a).DiceValue}`}return i},r=i=>t.Class().name.toLowerCase()==="sorcerer"?i.slice(1):i,s=()=>t.Class()?.classLevels?.sort((l,o)=>Object.keys(o.classSpecific).length-Object.keys(l.classSpecific).length);return(()=>{var i=kp(),a=i.firstChild,l=a.firstChild,o=l.firstChild,c=o.nextSibling;c.nextSibling;var u=a.nextSibling;return m(l,f(F,{get each(){return r(Object.keys(s()[0].classSpecific))},children:d=>(()=>{var h=Ep();return m(h,()=>wp(d)),h})()}),null),m(u,f(F,{get each(){return e().classLevels.sort((d,h)=>d.info.level-h.info.level)},children:d=>(()=>{var h=Pp(),b=h.firstChild,_=b.nextSibling,g=_.nextSibling;return h.style.setProperty("border","1px solid white"),m(b,()=>d.info.level),m(_,()=>d.profBonus),m(g,()=>d.features.map(p=>p.name).join(", ")),m(h,f(F,{get each(){return r(Object.keys(d.classSpecific))},children:p=>(()=>{var y=Ap(),v=y.firstChild;return m(v,()=>n(d.classSpecific[p])),y})()}),null),L(p=>{var y=`${tr.tableRow}`,v=`${tr.feature}`;return y!==p.e&&T(h,p.e=y),v!==p.t&&T(g,p.t=v),p},{e:void 0,t:void 0}),h})()})),L(d=>{var h=`${tr.table}`,b=`${tr.tableRow}`;return h!==d.e&&T(i,d.e=h),b!==d.t&&T(l,d.t=b),d},{e:void 0,t:void 0}),i})()},Tp="_CenterPage_h7g95_1",Ip="_eachPage_h7g95_8",Bp="_Center_h7g95_1",Rp="_CenterTable_h7g95_18",Lp="_subClasses_h7g95_28",Tt={CenterPage:Tp,eachPage:Ip,Center:Bp,CenterTable:Rp,subClasses:Lp};var Np=$("<h4>Spells Gained"),Yt=$("<span>"),Oe=$("<br>"),Dp=$("<div><h3></h3><span></span><br><span></span><br><span>"),jp=$("<h5> <!> "),Fp=$("<span> <!> "),Kp=$("<div><h2>Skills"),Na=$("<div><br>"),Mp=$("<div><h2>Starting Equipment"),qp=$("<div><h2>Features"),Up=$("<div>"),Vp=$("<div><div><button>←</button><span></span><button>→</button></div><hr><div><h1></h1><div></div><h2>Proficiencies</h2><span>Armor: </span><span></span><br><span>Weapons: <!> </span><br><span>Tools:</span><br><br><span>Saving Throws: </span><br><br><br><br><div>"),Wp=$("<span>Choose: "),Hp=$("<h3>choice 1"),nr=$("<span>choose: "),rr=$("<span>or"),_s=$("<div><br><br><span>"),Jp=$("<h3>choice 2"),zp=$("<h3>choice 3"),Yp=$("<h3>choice 4"),Gp=$("<div><br><span>"),Xp=$("<div><h3></h3><span>");const Qp=()=>{const t=ue(),e=Ci(),[n,r]=Ln(),s=e().findIndex(d=>d.name?.toLowerCase()===n?.name?.toLowerCase()),[i,a]=I(s>=0?s:0);n.name||r({name:e().length>0?e()[i()].name:"barbarian"});const l=W(()=>e().length>0&&i()>=0&&i()<e().length?e()[i()]:{}),o=W(()=>l().subclasses?.length>0?l().subclasses:[]);L(()=>{r({name:e().length>0?l().name:"barbarian"}),console.table(l())});const c=d=>{const h=JSON.parse(JSON.stringify(d));return typeof h=="string"?h:Array.isArray(h)?h.join(`
 
`):"-unknown-"},u=d=>d().map(h=>({name:h.name,element:(()=>{var b=Dp(),_=b.firstChild,g=_.nextSibling,p=g.nextSibling,y=p.nextSibling,v=y.nextSibling,w=v.nextSibling;return m(_,()=>h.name),m(g,()=>h.desc?.join(` 
`)),m(y,()=>h.subclassFlavor),m(b,f(q,{get when(){return h.spells?.length>=1},get children(){return[Np(),(()=>{var x=Yt();return m(x,()=>h.spells?.join(`
`)),x})(),Oe()]}}),w),m(w,f(F,{get each(){return h.features},children:x=>[(()=>{var S=jp(),E=S.firstChild,C=E.nextSibling;return C.nextSibling,m(S,()=>x.name,C),S})(),(()=>{var S=Fp(),E=S.firstChild,C=E.nextSibling;return C.nextSibling,m(S,()=>c(x?.value),C),S})()]})),b})()}));return(()=>{var d=Vp(),h=d.firstChild,b=h.firstChild,_=b.nextSibling,g=_.nextSibling,p=h.nextSibling,y=p.nextSibling,v=y.firstChild,w=v.nextSibling,x=w.nextSibling,S=x.nextSibling;S.firstChild;var E=S.nextSibling,C=E.nextSibling,D=C.nextSibling,k=D.firstChild,O=k.nextSibling;O.nextSibling;var P=D.nextSibling,R=P.nextSibling;R.firstChild;var N=R.nextSibling,j=N.nextSibling,J=j.nextSibling;J.firstChild;var V=J.nextSibling,B=V.nextSibling,G=B.nextSibling,re=G.nextSibling,pe=re.nextSibling;return b.$$click=()=>i()===0?a(U=>e().length-1):a(U=>U-1),m(_,()=>l().name),g.$$click=()=>i()===e().length-1?a(U=>0):a(U=>U+1),p.style.setProperty("width","100%"),m(v,()=>l().name),m(w,f(Op,{Class:()=>l()})),m(S,()=>l().proficiencies.filter(U=>U.toLowerCase().includes("armor")).join(", "),null),m(E,f(q,{get when(){return!!l().proficiencies.filter(U=>U.toLowerCase()==="shields").length},children:", Shields"})),m(D,()=>l().proficiencies.filter(U=>U.toLowerCase().includes("weapons")).join(", "),O),m(R,f(q,{get when(){return W(()=>!l().proficiencies.map(U=>U.toLowerCase()).includes("tools"))()&&!l().proficiencies.map(U=>U.toLowerCase()).includes("kit")},children:"None"}),null),m(R,f(q,{get when(){return!l().proficiencies.map(U=>U.toLowerCase()).includes("kit")},get children(){return l().proficiencies.filter(U=>U.toLowerCase().includes("kit"))}}),null),m(R,f(q,{get when(){return!l().proficiencies.map(U=>U.toLowerCase()).includes("tools")},get children(){return l().proficiencies.filter(U=>U.toLowerCase().includes("tools")).join(", ")}}),null),m(J,()=>l().savingThrows.join(", "),null),m(y,f(nn,{get class(){return`${Tt.Center}`},style:{width:"50%"},get children(){return[Kp(),(()=>{var U=Na(),de=U.firstChild;return m(U,f(q,{get when(){return l().proficiencyChoices.length>0},get children(){return f(F,{get each(){return l().proficiencyChoices},children:Z=>[Oe(),(()=>{var X=Wp();return X.firstChild,m(X,()=>Z.choose,null),X})(),Oe(),f(F,{get each(){return Z.choices},children:X=>[(()=>{var we=Yt();return m(we,X),we})(),Oe()]})]})}}),de),U})()]}}),G),m(y,f(nn,{get class(){return`${Tt.Center}`},style:{width:"50%"},get children(){return[Mp(),(()=>{var U=Na();return U.firstChild,m(U,f(q,{get when(){return l().startingEquipment.choice1.length>=1},get children(){return f(F,{get each(){return l().startingEquipment.choice1},children:(de,Z)=>(()=>{var X=_s(),we=X.firstChild,Ie=we.nextSibling,qe=Ie.nextSibling;return m(X,f(q,{get when(){return Z()<1},get children(){return Hp()}}),we),m(X,f(q,{get when(){return Z()<1},get children(){var Se=nr();return Se.firstChild,m(Se,()=>de.choose,null),Se}}),Ie),m(qe,f(F,{get each(){return de.choices},children:(Se,tt)=>[Oe(),(()=>{var Mr=Yt();return m(Mr,()=>Se.item),Mr})(),Oe()]})),m(X,f(q,{get when(){return Z()<=0},get children(){return[Oe(),rr()]}}),null),X})()})}}),null),m(U,f(q,{get when(){return l().startingEquipment.choice2},get children(){return f(F,{get each(){return l().startingEquipment.choice2},children:(de,Z)=>(()=>{var X=_s(),we=X.firstChild,Ie=we.nextSibling,qe=Ie.nextSibling;return m(X,f(q,{get when(){return Z()<1},get children(){return Jp()}}),we),m(X,f(q,{get when(){return Z()<1},get children(){var Se=nr();return Se.firstChild,m(Se,()=>de.choose,null),Se}}),Ie),m(qe,f(F,{get each(){return de.choices},children:Se=>[Oe(),(()=>{var tt=Yt();return m(tt,()=>Se.item),tt})(),Oe()]})),m(X,f(q,{get when(){return Z()<=0},get children(){return[Oe(),rr()]}}),null),X})()})}}),null),m(U,f(q,{get when(){return l().startingEquipment.choice3},get children(){return f(F,{get each(){return l().startingEquipment.choice3},children:(de,Z)=>(()=>{var X=_s(),we=X.firstChild,Ie=we.nextSibling,qe=Ie.nextSibling;return m(X,f(q,{get when(){return Z()<1},get children(){return zp()}}),we),m(X,f(q,{get when(){return Z()<1},get children(){var Se=nr();return Se.firstChild,m(Se,()=>de.choose,null),Se}}),Ie),m(qe,f(F,{get each(){return de.choices},children:Se=>[Oe(),(()=>{var tt=Yt();return m(tt,()=>Se.item),tt})(),Oe()]})),m(X,f(q,{get when(){return Z()<=0},get children(){return[Oe(),rr()]}}),null),X})()})}}),null),m(U,f(q,{get when(){return l().startingEquipment.choice4},get children(){return f(F,{get each(){return l().startingEquipment.choice4},children:(de,Z)=>(()=>{var X=Gp(),we=X.firstChild,Ie=we.nextSibling;return m(X,f(q,{get when(){return Z()<1},get children(){return Yp()}}),we),m(X,f(q,{get when(){return Z()<1},get children(){var qe=nr();return qe.firstChild,m(qe,()=>de.choose,null),qe}}),Ie),m(Ie,f(F,{get each(){return de.choices},children:qe=>[Oe(),(()=>{var Se=Yt();return m(Se,()=>qe.item),Se})(),Oe()]})),m(X,f(q,{get when(){return Z()<=0},get children(){return[Oe(),rr()]}}),null),X})()})}}),null),U})()]}}),re),m(y,f(nn,{get class(){return`${Tt.Center}`},style:{width:"50%"},get children(){return[qp(),(()=>{var U=Up();return m(U,f(F,{get each(){return l().classLevels},children:de=>[f(q,{get when(){return de.features.filter(Z=>!!Z.name.trim()||!!Z.value).length>0},get children(){return Oe()}}),f(F,{get each(){return de.features},children:Z=>f(q,{get when(){return!!Z.name.trim()||!!Z.value.trim()},get children(){var X=Xp(),we=X.firstChild,Ie=we.nextSibling;return m(we,()=>Z.name),m(Ie,()=>c(JSON.parse(JSON.stringify(Z.value))&&typeof JSON.parse(JSON.stringify(Z.value))=="object"&&JSON.parse(JSON.stringify(Z.value))!==void 0?JSON.stringify(Z.value):Z.value)),X}})}),f(q,{get when(){return de.features.filter(Z=>!!Z.name.trim()||!!Z.value).length>0},get children(){return Oe()}})]})),U})()]}}),pe),m(pe,f(Fn,{notFoundName:"Subclasses",get elements(){return u(o)}})),L(U=>{var de=`${t.accent} ${Tt.CenterPage}`,Z=`${Tt.eachPage}`,X=`${Tt.CenterTable}`,we=`${Tt.subClasses}`;return de!==U.e&&T(d,U.e=de),Z!==U.t&&T(y,U.t=Z),X!==U.a&&T(w,U.a=X),we!==U.o&&T(pe,U.o=we),U},{e:void 0,t:void 0,a:void 0,o:void 0}),d})()};Te(["click"]);const Zp="_body_w200b_1",ev={body:Zp};var tv=$("<div><h1>subclasses</h1><div><p>Level up features</p><p>Potentially spellcasting");const nv=()=>{const t=ue();return[f(Ct,{}),(()=>{var e=tv();return L(()=>T(e,`${t.accent} ${ev.body}`)),e})()]};var rv=$("<div>");const mo=ai(()=>Ir(()=>import("./characters-CwGOhKep.js"),__vite__mapDeps([0,1,2]))),go=ai(()=>Ir(()=>import("./create-lSFG9RcR.js"),__vite__mapDeps([3,2]))),po=ai(()=>Ir(()=>import("./view-h--HY_PN.js"),__vite__mapDeps([4,1,5]))),sv=document.getElementById("root"),iv=60*1e3,{needRefresh:av,offlineReady:lv,updateServiceWorker:uv}=co({onRegisteredSW(t,e){e&&setInterval(()=>{mo.preload(),go.preload(),po.preload(),e.update()},iv)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){console.log("onNeedRefresh")},onOfflineReady(){console.log("onOfflineReady")}}),ov=t=>{const e=ue(),n=function(){let a=!1;return function(l){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(l)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(l.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor),a},r=()=>i(window.matchMedia("only screen and (max-width: 768px)").matches);window.addEventListener("resize",r),L(()=>{console.log("updateServiceWorker.needRefresh: ",av[0]())}),L(()=>{console.log("updateServiceWorker.offlineReady: ",lv[0]())});const[s,i]=I(n());return L(()=>{const a=!!(n()||window.innerWidth<=768);i(a)}),(()=>{var a=rv();return a.style.setProperty("height","100vh"),m(a,f(Td,{list:[s,i],get style(){return e.accent}}),null),m(a,()=>t.children,null),L(()=>T(a,e.primary)),a})()};hc(()=>f(Xc,{root:ov,get children(){return[f($e,{path:"/",component:md}),f($e,{path:"/characters",get children(){return[f($e,{path:"/",component:mo}),f($e,{path:"/view",component:po}),f($e,{path:"/create",component:go})]}}),f($e,{path:"/info",get children(){return[f($e,{path:"/races",component:lp}),f($e,{path:"/spells",component:_g}),f($e,{path:"/feats",component:Bg}),f($e,{path:"/classes",component:Qp}),f($e,{path:"/backgrounds",component:_p})]}}),f($e,{path:"/homebrew",get children(){return[f($e,{path:"/",component:Wd}),f($e,{path:"/view",component:mf}),f($e,{path:"/create",get children(){return[f($e,{path:"/",component:ef}),f($e,{path:"/classes",component:cm}),f($e,{path:"/subclasses",component:nv}),f($e,{path:"/items",component:pm}),f($e,{path:"/feats",component:Em}),f($e,{path:"/backgrounds",component:Tm}),f($e,{path:"/spells",component:Lm}),f($e,{path:"/races",component:Fm})]}})]}})]}}),sv);export{Ue as B,F,L as a,T as b,f as c,I as d,W as e,Ci as f,gg as g,fo as h,m as i,Rg as j,Hf as k,op as l,cv as m,Ln as n,je as s,$ as t,ue as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/characters-CwGOhKep.js","assets/useCharacters-q3EoJJ0k.js","assets/characters-i2fzY9Kk.css","assets/create-lSFG9RcR.js","assets/view-h--HY_PN.js","assets/view-aa-IgBHj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
