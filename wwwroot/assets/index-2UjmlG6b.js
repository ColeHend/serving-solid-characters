(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const va="modulepreload",ya=function(t){return"/"+t},Ws={},or=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=ya(o),o in Ws)return;Ws[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":va,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},G={context:void 0,registry:void 0};function Zt(t){G.context=t}const ba=(t,e)=>t===e,Un=Symbol("solid-proxy"),_a=Symbol("solid-track"),Wn={equals:ba};let Di=qi;const Je=1,zn=2,ji={owned:null,cleanups:null,context:null,owner:null},pr={};var X=null;let gr=null,wa=null,Z=null,we=null,We=null,ar=0;function It(t,e){const n=Z,r=X,s=t.length===0,i=e===void 0?r:e,o=s?ji:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?t:()=>t(()=>ge(()=>ur(o)));X=o,Z=null;try{return Ye(a,!0)}finally{Z=n,X=r}}function L(t,e){e=e?Object.assign({},Wn,e):Wn;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),Mi(n,s));return[Fi.bind(n),r]}function zs(t,e,n){const r=cr(t,e,!0,Je);qt(r)}function O(t,e,n){const r=cr(t,e,!1,Je);qt(r)}function $a(t,e,n){Di=Aa;const r=cr(t,e,!1,Je);(!n||!n.render)&&(r.user=!0),We?We.push(r):qt(r)}function V(t,e,n){n=n?Object.assign({},Wn,n):Wn;const r=cr(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,qt(r),Fi.bind(r)}function Sa(t){return t&&typeof t=="object"&&"then"in t}function xa(t,e,n){let r,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,s=t,i=e||{}):(r=t,s=e,i=n||{});let o=null,a=pr,l=null,c=!1,u="initialValue"in i,h=typeof r=="function"&&V(r);const d=new Set,[m,_]=(i.storage||L)(i.initialValue),[g,v]=L(void 0),[p,f]=L(void 0,{equals:!1}),[w,x]=L(u?"ready":"unresolved");if(G.context){l=`${G.context.id}${G.context.count++}`;let C;i.ssrLoadFrom==="initial"?a=i.initialValue:G.load&&(C=G.load(l))&&(a=C)}function $(C,D,B,A){return o===C&&(o=null,A!==void 0&&(u=!0),(C===a||D===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:D})),a=pr,E(D,B)),D}function E(C,D){Ye(()=>{D===void 0&&_(()=>C),x(D!==void 0?"errored":u?"ready":"unresolved"),v(D);for(const B of d.keys())B.decrement();d.clear()},!1)}function k(){const C=Ca,D=m(),B=g();if(B!==void 0&&!o)throw B;return Z&&!Z.user&&C&&zs(()=>{p(),o&&(C.resolved||d.has(C)||(C.increment(),d.add(C)))}),D}function R(C=!0){if(C!==!1&&c)return;c=!1;const D=h?h():r;if(D==null||D===!1){$(o,ge(m));return}const B=a!==pr?a:ge(()=>s(D,{value:m(),refetching:C}));return Sa(B)?(o=B,"value"in B?(B.status==="success"?$(o,B.value,void 0,D):$(o,void 0,void 0,D),B):(c=!0,queueMicrotask(()=>c=!1),Ye(()=>{x(u?"refreshing":"pending"),f()},!1),B.then(A=>$(B,A,void 0,D),A=>$(B,void 0,Ui(A),D)))):($(o,B,void 0,D),B)}return Object.defineProperties(k,{state:{get:()=>w()},error:{get:()=>g()},loading:{get(){const C=w();return C==="pending"||C==="refreshing"}},latest:{get(){if(!u)return k();const C=g();if(C&&!o)throw C;return m()}}}),h?zs(()=>R(!1)):R(!1),[k,{refetch:R,mutate:_}]}function ge(t){if(Z===null)return t();const e=Z;Z=null;try{return t()}finally{Z=e}}function Ni(t,e,n){const r=Array.isArray(t);let s,i=n&&n.defer;return o=>{let a;if(r){a=Array(t.length);for(let c=0;c<t.length;c++)a[c]=t[c]()}else a=t();if(i){i=!1;return}const l=ge(()=>e(a,s,o));return s=a,l}}function yt(t){return X===null||(X.cleanups===null?X.cleanups=[t]:X.cleanups.push(t)),t}function Hn(){return X}function xs(t,e){const n=X,r=Z;X=t,Z=null;try{return Ye(e,!0)}catch(s){Cs(s)}finally{X=n,Z=r}}function ka(t){const e=Z,n=X;return Promise.resolve().then(()=>{Z=e,X=n;let r;return Ye(t,!1),Z=X=null,r?r.done:void 0})}function Ki(t,e){const n=Symbol("context");return{id:n,Provider:Oa(n),defaultValue:t}}function ks(t){return X&&X.context&&X.context[t.id]!==void 0?X.context[t.id]:t.defaultValue}function lr(t){const e=V(t),n=V(()=>Mr(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Ca;function Fi(){if(this.sources&&this.state)if(this.state===Je)qt(this);else{const t=we;we=null,Ye(()=>Gn(this),!1),we=t}if(Z){const t=this.observers?this.observers.length:0;Z.sources?(Z.sources.push(this),Z.sourceSlots.push(t)):(Z.sources=[this],Z.sourceSlots=[t]),this.observers?(this.observers.push(Z),this.observerSlots.push(Z.sources.length-1)):(this.observers=[Z],this.observerSlots=[Z.sources.length-1])}return this.value}function Mi(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Ye(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],o=gr&&gr.running;o&&gr.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?we.push(i):We.push(i),i.observers&&Vi(i)),o||(i.state=Je)}if(we.length>1e6)throw we=[],new Error},!1)),e}function qt(t){if(!t.fn)return;ur(t);const e=ar;Ea(t,t.value,e)}function Ea(t,e,n){let r;const s=X,i=Z;Z=X=t;try{r=t.fn(e)}catch(o){return t.pure&&(t.state=Je,t.owned&&t.owned.forEach(ur),t.owned=null),t.updatedAt=n+1,Cs(o)}finally{Z=i,X=s}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Mi(t,r):t.value=r,t.updatedAt=n)}function cr(t,e,n,r=Je,s){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:X,context:X?X.context:null,pure:n};return X===null||X!==ji&&(X.owned?X.owned.push(i):X.owned=[i]),i}function Yn(t){if(t.state===0)return;if(t.state===zn)return Gn(t);if(t.suspense&&ge(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ar);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Je)qt(t);else if(t.state===zn){const r=we;we=null,Ye(()=>Gn(t,e[0]),!1),we=r}}function Ye(t,e){if(we)return t();let n=!1;e||(we=[]),We?n=!0:We=[],ar++;try{const r=t();return Pa(n),r}catch(r){n||(We=null),we=null,Cs(r)}}function Pa(t){if(we&&(qi(we),we=null),t)return;const e=We;We=null,e.length&&Ye(()=>Di(e),!1)}function qi(t){for(let e=0;e<t.length;e++)Yn(t[e])}function Aa(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:Yn(r)}if(G.context){if(G.count){G.effects||(G.effects=[]),G.effects.push(...t.slice(0,n));return}else G.effects&&(t=[...G.effects,...t],n+=G.effects.length,delete G.effects);Zt()}for(e=0;e<n;e++)Yn(t[e])}function Gn(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const s=r.state;s===Je?r!==e&&(!r.updatedAt||r.updatedAt<ar)&&Yn(r):s===zn&&Gn(r,e)}}}function Vi(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=zn,n.pure?we.push(n):We.push(n),n.observers&&Vi(n))}}function ur(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ur(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ui(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Cs(t,e=X){throw Ui(t)}function Mr(t){if(typeof t=="function"&&!t.length)return Mr(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=Mr(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function Oa(t,e){return function(r){let s;return O(()=>s=ge(()=>(X.context={...X.context,[t]:r.value},lr(()=>r.children))),void 0),s}}const Ra=Symbol("fallback");function Hs(t){for(let e=0;e<t.length;e++)t[e]()}function Ba(t,e,n={}){let r=[],s=[],i=[],o=0,a=e.length>1?[]:null;return yt(()=>Hs(i)),()=>{let l=t()||[],c,u;return l[_a],ge(()=>{let d=l.length,m,_,g,v,p,f,w,x,$;if(d===0)o!==0&&(Hs(i),i=[],r=[],s=[],o=0,a&&(a=[])),n.fallback&&(r=[Ra],s[0]=It(E=>(i[0]=E,n.fallback())),o=1);else if(o===0){for(s=new Array(d),u=0;u<d;u++)r[u]=l[u],s[u]=It(h);o=d}else{for(g=new Array(d),v=new Array(d),a&&(p=new Array(d)),f=0,w=Math.min(o,d);f<w&&r[f]===l[f];f++);for(w=o-1,x=d-1;w>=f&&x>=f&&r[w]===l[x];w--,x--)g[x]=s[w],v[x]=i[w],a&&(p[x]=a[w]);for(m=new Map,_=new Array(x+1),u=x;u>=f;u--)$=l[u],c=m.get($),_[u]=c===void 0?-1:c,m.set($,u);for(c=f;c<=w;c++)$=r[c],u=m.get($),u!==void 0&&u!==-1?(g[u]=s[c],v[u]=i[c],a&&(p[u]=a[c]),u=_[u],m.set($,u)):i[c]();for(u=f;u<d;u++)u in g?(s[u]=g[u],i[u]=v[u],a&&(a[u]=p[u],a[u](u))):s[u]=It(h);s=s.slice(0,o=d),r=l.slice(0)}return s});function h(d){if(i[u]=d,a){const[m,_]=L(u);return a[u]=_,e(l[u],m)}return e(l[u])}}}function b(t,e){return ge(()=>t(e||{}))}function bn(){return!0}const qr={get(t,e,n){return e===Un?n:t.get(e)},has(t,e){return e===Un?!0:t.has(e)},set:bn,deleteProperty:bn,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:bn,deleteProperty:bn}},ownKeys(t){return t.keys()}};function vr(t){return(t=typeof t=="function"?t():t)?t:{}}function Ia(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function De(...t){let e=!1;for(let o=0;o<t.length;o++){const a=t[o];e=e||!!a&&Un in a,t[o]=typeof a=="function"?(e=!0,V(a)):a}if(e)return new Proxy({get(o){for(let a=t.length-1;a>=0;a--){const l=vr(t[a])[o];if(l!==void 0)return l}},has(o){for(let a=t.length-1;a>=0;a--)if(o in vr(t[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<t.length;a++)o.push(...Object.keys(vr(t[a])));return[...new Set(o)]}},qr);const n={},r=Object.create(null);for(let o=t.length-1;o>=0;o--){const a=t[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=h.get?{enumerable:!0,configurable:!0,get:Ia.bind(n[u]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const d=n[u];d&&(h.get?d.push(h.get.bind(a)):h.value!==void 0&&d.push(()=>h.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function Ta(t,...e){if(Un in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(a){return o.includes(a)?t[a]:void 0},has(a){return o.includes(a)&&a in t},keys(){return o.filter(a=>a in t)}},qr));return i.push(new Proxy({get(o){return s.has(o)?void 0:t[o]},has(o){return s.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!s.has(o))}},qr)),i}const n={},r=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of e)c.includes(s)&&(a=!0,o?r[l][s]=i.value:Object.defineProperty(r[l],s,i)),++l;a||(o?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}function Es(t){let e,n;const r=s=>{const i=G.context;if(i){const[a,l]=L();G.count||(G.count=0),G.count++,(n||(n=t())).then(c=>{Zt(i),G.count--,l(()=>c.default),Zt()}),e=a}else if(!e){const[a]=xa(()=>(n||(n=t())).then(l=>l.default));e=a}let o;return V(()=>(o=e())&&ge(()=>{if(!i)return o(s);const a=G.context;Zt(i);const l=o(s);return Zt(a),l}))};return r.preload=()=>n||((n=t()).then(s=>e=()=>s.default),n),r}const Wi=t=>`Stale read from <${t}>.`;function F(t){const e="fallback"in t&&{fallback:()=>t.fallback};return V(Ba(()=>t.each,t.children,e||void 0))}function N(t){const e=t.keyed,n=V(()=>t.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return V(()=>{const r=n();if(r){const s=t.children;return typeof s=="function"&&s.length>0?ge(()=>s(e?r:()=>{if(!ge(n))throw Wi("Show");return t.when})):s}return t.fallback},void 0,void 0)}function Xn(t){let e=!1;const n=(i,o)=>(e?i[1]===o[1]:!i[1]==!o[1])&&i[2]===o[2],r=lr(()=>t.children),s=V(()=>{let i=r();Array.isArray(i)||(i=[i]);for(let o=0;o<i.length;o++){const a=i[o].when;if(a)return e=!!i[o].keyed,[o,a,i[o]]}return[-1]},void 0,{equals:n});return V(()=>{const[i,o,a]=s();if(i<0)return t.fallback;const l=a.children;return typeof l=="function"&&l.length>0?ge(()=>l(e?o:()=>{if(ge(s)[0]!==i)throw Wi("Match");return a.when})):l},void 0,void 0)}function Oe(t){return t}const La=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Da=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...La]),ja=new Set(["innerHTML","textContent","innerText","children"]),Na=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ka=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Fa(t,e){const n=Ka[t];return typeof n=="object"?n[e]?n.$:void 0:n}const Ma=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),qa={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Va(t,e,n){let r=n.length,s=e.length,i=r,o=0,a=0,l=e[s-1].nextSibling,c=null;for(;o<s||a<i;){if(e[o]===n[a]){o++,a++;continue}for(;e[s-1]===n[i-1];)s--,i--;if(s===o){const u=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)t.insertBefore(n[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[a]===e[s-1]){const u=e[--s].nextSibling;t.insertBefore(n[a++],e[o++].nextSibling),t.insertBefore(n[--i],u),e[s]=n[i]}else{if(!c){c=new Map;let h=a;for(;h<i;)c.set(n[h],h++)}const u=c.get(e[o]);if(u!=null)if(a<u&&u<i){let h=o,d=1,m;for(;++h<s&&h<i&&!((m=c.get(e[h]))==null||m!==u+d);)d++;if(d>u-a){const _=e[o];for(;a<u;)t.insertBefore(n[a++],_)}else t.replaceChild(n[a++],e[o++])}else o++;else e[o++].remove()}}}const Ys="_$DX_DELEGATE";function Ua(t,e,n,r={}){let s;return It(i=>{s=i,e===document?t():y(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{s(),e.textContent=""}}function S(t,e,n){let r;const s=()=>{const o=document.createElement("template");return o.innerHTML=t,n?o.content.firstChild.firstChild:o.content.firstChild},i=e?()=>ge(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function $e(t,e=window.document){const n=e[Ys]||(e[Ys]=new Set);for(let r=0,s=t.length;r<s;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,Ga))}}function Ge(t,e,n){G.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function Wa(t,e,n,r){G.context||(r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r))}function P(t,e){G.context||(e==null?t.removeAttribute("class"):t.className=e)}function hr(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const s=n[0];t.addEventListener(e,n[0]=i=>s.call(t,n[1],i))}else t.addEventListener(e,n)}function za(t,e,n={}){const r=Object.keys(e||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||e[a]||(Xs(t,a,!1),delete n[a])}for(i=0,o=r.length;i<o;i++){const a=r[i],l=!!e[a];!a||a==="undefined"||n[a]===l||!l||(Xs(t,a,!0),n[a]=l)}return n}function Jn(t,e,n){if(!e)return n?Ge(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let s,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)s=e[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Qe(t,e={},n,r){const s={};return r||O(()=>s.children=Kt(t,e.children,s.children)),O(()=>e.ref&&e.ref(t)),O(()=>Ha(t,e,n,!0,s,!0)),s}function Gs(t,e,n){return ge(()=>t(e,n))}function y(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return Kt(t,e,r,n);O(s=>Kt(t,e(),s,n),r)}function Ha(t,e,n,r,s={},i=!1){e||(e={});for(const o in s)if(!(o in e)){if(o==="children")continue;s[o]=Js(t,o,null,s[o],n,i)}for(const o in e){if(o==="children"){r||Kt(t,e.children);continue}const a=e[o];s[o]=Js(t,o,a,s[o],n,i)}}function Ya(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Xs(t,e,n){const r=e.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)t.classList.toggle(r[s],n)}function Js(t,e,n,r,s,i){let o,a,l,c,u;if(e==="style")return Jn(t,n,r);if(e==="classList")return za(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);r&&t.removeEventListener(h,r),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);r&&t.removeEventListener(h,r,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=Ma.has(h);if(!d&&r){const m=Array.isArray(r)?r[0]:r;t.removeEventListener(h,m)}(d||n)&&(hr(t,h,n,d),d&&$e([h]))}else if(e.slice(0,5)==="attr:")Ge(t,e.slice(5),n);else if((u=e.slice(0,5)==="prop:")||(l=ja.has(e))||!s&&((c=Fa(e,t.tagName))||(a=Da.has(e)))||(o=t.nodeName.includes("-"))){if(u)e=e.slice(5),a=!0;else if(G.context)return n;e==="class"||e==="className"?P(t,n):o&&!a&&!l?t[Ya(e)]=n:t[c||e]=n}else{const h=s&&e.indexOf(":")>-1&&qa[e.split(":")[0]];h?Wa(t,h,e,n):Ge(t,Na[e]||e,n)}return n}function Ga(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),G.registry&&!G.done&&(G.done=_$HY.done=!0);n;){const r=n[e];if(r&&!n.disabled){const s=n[`${e}Data`];if(s!==void 0?r.call(n,s,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Kt(t,e,n,r,s){if(G.context){!n&&(n=[...t.childNodes]);let a=[];for(let l=0;l<n.length;l++){const c=n[l];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():a.push(c)}n=a}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=r!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(G.context)return n;if(i==="number"&&(e=e.toString()),o){let a=n[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),n=Et(t,n,r,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(G.context)return n;n=Et(t,n,r)}else{if(i==="function")return O(()=>{let a=e();for(;typeof a=="function";)a=a();n=Kt(t,a,n,r)}),()=>n;if(Array.isArray(e)){const a=[],l=n&&Array.isArray(n);if(Vr(a,e,n,s))return O(()=>n=Kt(t,a,n,r,!0)),()=>n;if(G.context){if(!a.length)return n;if(r===void 0)return[...t.childNodes];let c=a[0],u=[c];for(;(c=c.nextSibling)!==r;)u.push(c);return n=u}if(a.length===0){if(n=Et(t,n,r),o)return n}else l?n.length===0?Qs(t,a,r):Va(t,n,a):(n&&Et(t),Qs(t,a));n=a}else if(e.nodeType){if(G.context&&e.parentNode)return n=o?[e]:e;if(Array.isArray(n)){if(o)return n=Et(t,n,r,e);Et(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Vr(t,e,n,r){let s=!1;for(let i=0,o=e.length;i<o;i++){let a=e[i],l=n&&n[i],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))s=Vr(t,a,l)||s;else if(c==="function")if(r){for(;typeof a=="function";)a=a();s=Vr(t,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else t.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?t.push(l):t.push(document.createTextNode(u))}}return s}function Qs(t,e,n=null){for(let r=0,s=e.length;r<s;r++)t.insertBefore(e[r],n)}function Et(t,e,n,r){if(n===void 0)return t.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(s!==a){const l=a.parentNode===t;!i&&!o?l?t.replaceChild(s,a):t.insertBefore(s,n):l&&a.remove()}else i=!0}}else t.insertBefore(s,n);return[s]}const Xa=!1,Ja="http://www.w3.org/2000/svg";function Qa(t,e=!1){return e?document.createElementNS(Ja,t):document.createElement(t)}function Za(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,s=Hn();let i,o=!!G.context;return $a(()=>{o&&(Hn().user=o=!1),i||(i=xs(s,()=>V(()=>t.children)));const a=r();if(a instanceof HTMLHeadElement){const[l,c]=L(!1),u=()=>c(!0);It(h=>y(a,()=>l()?h():i(),null)),yt(u)}else{const l=Qa(t.isSVG?"g":"div",t.isSVG),c=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),y(c,i),a.appendChild(l),t.ref&&t.ref(l),yt(()=>a.removeChild(l))}},void 0,{render:!o}),n}function zi(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of t)a.listener({...o,from:a.location,retry:l=>{l&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:r}}let Ur;function Ps(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ur=window.history.state._depth}Ps();function el(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function tl(t,e){let n=!1;return()=>{const r=Ur;Ps();const s=r==null?null:Ur-r;if(n){n=!1;return}s&&e(s)?(n=!0,window.history.go(-s)):t()}}const nl=/^(?:[a-z0-9]+:)?\/\//i,rl=/^\/+|(\/)\/+$/g,Hi="http://sr";function mt(t,e=!1){const n=t.replace(rl,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function Tn(t,e,n){if(nl.test(e))return;const r=mt(t),s=n&&mt(n);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+mt(e,!i)}function sl(t,e){if(t==null)throw new Error(e);return t}function il(t,e){return mt(t).replace(/\/*(\*.*)?$/g,"")+mt(e)}function Yi(t){const e={};return t.searchParams.forEach((n,r)=>{e[r]=n}),e}function ol(t,e,n){const[r,s]=t.split("/*",2),i=r.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:o?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const m=i[d],_=l[d],g=m[0]===":",v=g?m.slice(1):m;if(g&&yr(_,h(v)))u.params[v]=_;else if(g||!yr(_,m))return null;u.path+=`/${_}`}if(s){const d=c?l.slice(-c).join("/"):"";if(yr(d,h(s)))u.params[s]=d;else return null}return u}}function yr(t,e){const n=r=>r.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function al(t){const[e,n]=t.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Gi(t){const e=new Map,n=Hn();return new Proxy({},{get(r,s){return e.has(s)||xs(n,()=>e.set(s,V(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function ll(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([s,i])=>{i==null||i===""?n.delete(s):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function Xi(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),r=t.slice(e.index+e[0].length);const s=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=e[1]),r=r.slice(e[0].length);return Xi(r).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const cl=100,Ji=Ki(),As=Ki(),pn=()=>sl(ks(Ji),"<A> and 'use' router primitives can be only used inside a Route."),ul=()=>ks(As)||pn().base,hl=t=>{const e=ul();return V(()=>e.resolvePath(t()))},dl=t=>{const e=pn();return V(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},fl=()=>pn().navigatorFactory(),Qi=()=>pn().location,cp=()=>pn().params,ml=()=>{const t=Qi(),e=fl(),n=(r,s)=>{const i=ge(()=>t.pathname+ll(t.search,r)+t.hash);e(i,{scroll:!1,resolve:!1,...s})};return[t.query,n]};function pl(t,e=""){const{component:n,load:r,children:s,info:i}=t,o=!s||Array.isArray(s)&&!s.length,a={key:t,component:n,load:r,info:i};return Zi(t.path).reduce((l,c)=>{for(const u of Xi(c)){const h=il(e,u);let d=o?h:h.split("/*",1)[0];d=d.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),l.push({...a,originalPath:c,pattern:d,matcher:ol(d,!o,t.matchFilters)})}return l},[])}function gl(t,e=0){return{routes:t,score:al(t[t.length-1])*1e4-e,matcher(n){const r=[];for(let s=t.length-1;s>=0;s--){const i=t[s],o=i.matcher(n);if(!o)return null;r.unshift({...o,route:i})}return r}}}function Zi(t){return Array.isArray(t)?t:[t]}function eo(t,e="",n=[],r=[]){const s=Zi(t);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=pl(a,e);for(const c of l){n.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)eo(a.children,c.pattern,n,r);else{const h=gl([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((i,o)=>o.score-i.score)}function br(t,e){for(let n=0,r=t.length;n<r;n++){const s=t[n].matcher(e);if(s)return s}return[]}function vl(t,e){const n=new URL(Hi),r=V(l=>{const c=t();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),l}},n,{equals:(l,c)=>l.href===c.href}),s=V(()=>r().pathname),i=V(()=>r().search,!0),o=V(()=>r().hash),a=()=>"";return{get pathname(){return s()},get search(){return i()},get hash(){return o()},get state(){return e()},get key(){return a()},query:Gi(Ni(i,()=>Yi(r())))}}let Me;function yl(){return Me}function bl(t,e,n,r={}){const{signal:[s,i],utils:o={}}=t,a=o.parsePath||(A=>A),l=o.renderPath||(A=>A),c=o.beforeLeave||zi(),u=Tn("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[h,d]=L(!1),m=async A=>{d(!0);try{await ka(A)}finally{d(!1)}},[_,g]=L(s().value),[v,p]=L(s().state),f=vl(_,v),w=[],x=L([]),$=V(()=>typeof r.transformUrl=="function"?br(e(),r.transformUrl(f.pathname)):br(e(),f.pathname)),E=Gi(()=>{const A=$(),I={};for(let q=0;q<A.length;q++)Object.assign(I,A[q].params);return I}),k={pattern:u,path:()=>u,outlet:()=>null,resolvePath(A){return Tn(u,A)}};return O(()=>{const{value:A,state:I}=s();ge(()=>{m(()=>{Me="native",A!==_()&&g(A),p(I),x[1]([])}).then(()=>{Me=void 0})})}),{base:k,location:f,params:E,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:C,matches:$,beforeLeave:c,preloadRoute:B,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:x};function R(A,I,q){ge(()=>{if(typeof I=="number"){I&&(o.go?o.go(I):console.warn("Router integration does not support relative routing"));return}const{replace:re,resolve:ae,scroll:j,state:z}={replace:!1,resolve:!0,scroll:!0,...q},ce=ae?A.resolvePath(I):Tn("",I);if(ce===void 0)throw new Error(`Path '${I}' is not a routable path`);if(w.length>=cl)throw new Error("Too many redirects");const Be=_();if((ce!==Be||z!==v())&&!Xa){if(c.confirm(ce,q)){const Ke=w.push({value:Be,replace:re,scroll:j,state:v()});m(()=>{Me="navigate",g(ce),p(z),x[1]([])}).then(()=>{w.length===Ke&&(Me=void 0,D({value:ce,state:z}))})}}})}function C(A){return A=A||ks(As)||k,(I,q)=>R(A,I,q)}function D(A){const I=w[0];I&&((A.value!==I.value||A.state!==I.state)&&i({...A,replace:I.replace,scroll:I.scroll}),w.length=0)}function B(A,I){const q=br(e(),A.pathname),re=Me;Me="preload";for(let ae in q){const{route:j,params:z}=q[ae];j.component&&j.component.preload&&j.component.preload();const{load:ce}=j;I&&ce&&xs(n(),()=>ce({params:z,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:Yi(A),state:null,key:""},intent:"preload"}))}Me=re}}function _l(t,e,n,r){const{base:s,location:i,params:o}=t,{pattern:a,component:l,load:c}=r().route,u=V(()=>r().path);l&&l.preload&&l.preload();const h=c?c({params:o,location:i,intent:Me||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>l?b(l,{params:o,location:i,data:h,get children(){return n()}}):n(),resolvePath(m){return Tn(s.path(),m,u())}}}const wl=t=>e=>{const{base:n}=e,r=lr(()=>e.children),s=V(()=>eo(r(),e.base||""));let i;const o=bl(t,s,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(o),b(Ji.Provider,{value:o,get children(){return b($l,{routerState:o,get root(){return e.root},get load(){return e.rootLoad},get children(){return[V(()=>(i=Hn())&&null),b(Sl,{routerState:o,get branches(){return s()}})]}})}})};function $l(t){const e=t.routerState.location,n=t.routerState.params,r=V(()=>t.load&&ge(()=>{t.load({params:n,location:e,intent:yl()||"initial"})}));return b(N,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>b(s,{params:n,location:e,get data(){return r()},get children(){return t.children}})})}function Sl(t){const e=[];let n;const r=V(Ni(t.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const h=i&&i[c],d=s[c];o&&h&&d.route.key===h.route.key?l[c]=o[c]:(a=!1,e[c]&&e[c](),It(m=>{e[c]=m,l[c]=_l(t.routerState,l[c-1]||t.routerState.base,Zs(()=>r()[c+1]),()=>t.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),o&&a?o:(n=l[0],l)}));return Zs(()=>r()&&n)()}const Zs=t=>()=>b(N,{get when(){return t()},keyed:!0,children:e=>b(As.Provider,{value:e,get children(){return e.outlet()}})}),le=t=>{const e=lr(()=>t.children);return De(t,{get children(){return e()}})};function xl([t,e],n,r){return[n?()=>n(t()):t,r?s=>e(r(s)):e]}function kl(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function Cl(t){let e=!1;const n=s=>typeof s=="string"?{value:s}:s,r=xl(L(n(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),s));return t.init&&yt(t.init((s=t.get())=>{e=!0,r[1](n(s)),e=!1})),wl({signal:r,create:t.create,utils:t.utils})}function El(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Pl(t,e){const n=kl(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const Al=new Map;function Ol(t=!0,e=!1,n="/_server",r){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a={};function l(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function c(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const v=g.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!v||e&&!v.hasAttribute("link"))return;const p=l(v),f=p?v.href.baseVal:v.href;if((p?v.target.baseVal:v.target)||!f&&!v.hasAttribute("state"))return;const x=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||x&&x.includes("external"))return;const $=p?new URL(f,document.baseURI):new URL(f);if(!($.origin!==window.location.origin||i&&$.pathname&&!$.pathname.toLowerCase().startsWith(i.toLowerCase())))return[v,$]}function u(g){const v=c(g);if(!v)return;const[p,f]=v,w=s.parsePath(f.pathname+f.search+f.hash),x=p.getAttribute("state");g.preventDefault(),o(w,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function h(g){const v=c(g);if(!v)return;const[p,f]=v;typeof r=="function"&&(f.pathname=r(f.pathname)),a[f.pathname]||s.preloadRoute(f,p.getAttribute("preload")!=="false")}function d(g){const v=c(g);if(!v)return;const[p,f]=v;typeof r=="function"&&(f.pathname=r(f.pathname)),!a[f.pathname]&&(a[f.pathname]=setTimeout(()=>{s.preloadRoute(f,p.getAttribute("preload")!=="false"),delete a[f.pathname]},200))}function m(g){const v=c(g);if(!v)return;const[,p]=v;typeof r=="function"&&(p.pathname=r(p.pathname)),a[p.pathname]&&(clearTimeout(a[p.pathname]),delete a[p.pathname])}function _(g){if(g.defaultPrevented)return;let v=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const f=new URL(v,Hi);if(v=s.parsePath(f.pathname+f.search),!v.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=Al.get(v);if(p){g.preventDefault();const f=new FormData(g.target);g.submitter&&g.submitter.name&&f.append(g.submitter.name,g.submitter.value),p.call({r:s,f:g.target},f)}}$e(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",d),document.addEventListener("mouseout",m),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",_),yt(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",d),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",_)})}}function Rl(t){const e=()=>{const r=window.location.pathname+window.location.search;return{value:t.transformUrl?t.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},n=zi();return Cl({get:e,set({value:r,replace:s,scroll:i,state:o}){s?window.history.replaceState(el(o),"",r):window.history.pushState(o,"",r),Pl(window.location.hash.slice(1),i),Ps()},init:r=>El(window,"popstate",tl(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:Ol(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(t)}var Bl=S("<a>");function ei(t){t=De({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=Ta(t,["href","state","class","activeClass","inactiveClass","end"]),n=hl(()=>t.href),r=dl(n),s=Qi(),i=V(()=>{const o=n();if(o===void 0)return[!1,!1];const a=mt(o.split(/[?#]/,1)[0]).toLowerCase(),l=mt(s.pathname).toLowerCase();return[t.end?a===l:l.startsWith(a),a===l]});return(()=>{var o=Bl();return Qe(o,De(e,{get href(){return r()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}var Wr=function(t,e){return Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Wr(t,e)};function Vt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wr(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Il(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function to(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ft(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Hr(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Tt(t){return this instanceof Tt?(this.v=t,this):new Tt(t)}function Tl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){r[d]&&(s[d]=function(m){return new Promise(function(_,g){i.push([d,m,_,g])>1||a(d,m)})})}function a(d,m){try{l(r[d](m))}catch(_){h(i[0][3],_)}}function l(d){d.value instanceof Tt?Promise.resolve(d.value.v).then(c,u):h(i[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,m){d(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Ll(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ft=="function"?Ft(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function ue(t){return typeof t=="function"}function no(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var _r=no(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Yr(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var dr=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Ft(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(ue(u))try{u()}catch(g){i=g instanceof _r?g.errors:[g]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=Ft(h),m=d.next();!m.done;m=d.next()){var _=m.value;try{ti(_)}catch(g){i=i??[],g instanceof _r?i=Hr(Hr([],zr(i)),zr(g.errors)):i.push(g)}}}catch(g){r={error:g}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}}if(i)throw new _r(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ti(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Yr(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Yr(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),ro=dr.EMPTY;function so(t){return t instanceof dr||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function ti(t){ue(t)?t():t.unsubscribe()}var io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oo={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Hr([t,e],zr(n)))},clearTimeout:function(t){var e=oo.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ao(t){oo.setTimeout(function(){throw t})}function ni(){}function Ln(t){t()}var Os=function(t){Vt(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,so(n)&&n.add(r)):r.destination=Kl,r}return e.create=function(n,r,s){return new Gr(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(dr),Dl=Function.prototype.bind;function wr(t,e){return Dl.call(t,e)}var jl=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){_n(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){_n(r)}else _n(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){_n(n)}},t}(),Gr=function(t){Vt(e,t);function e(n,r,s){var i=t.call(this)||this,o;if(ue(n)||!n)o={next:n??void 0,error:r??void 0,complete:s??void 0};else{var a;i&&io.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},o={next:n.next&&wr(n.next,a),error:n.error&&wr(n.error,a),complete:n.complete&&wr(n.complete,a)}):o=n}return i.destination=new jl(o),i}return e}(Os);function _n(t){ao(t)}function Nl(t){throw t}var Kl={closed:!0,next:ni,error:Nl,complete:ni},Rs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function lo(t){return t}function Fl(t){return t.length===0?lo:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var xe=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=ql(e)?e:new Gr(e,n,r);return Ln(function(){var o=s,a=o.operator,l=o.source;i.add(a?a.call(i,l):l?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=ri(n),new n(function(s,i){var o=new Gr({next:function(a){try{e(a)}catch(l){i(l),o.unsubscribe()}},error:i,complete:s});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Rs]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Fl(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=ri(e),new e(function(r,s){var i;n.subscribe(function(o){return i=o},function(o){return s(o)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function ri(t){var e;return(e=t??io.Promise)!==null&&e!==void 0?e:Promise}function Ml(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}function ql(t){return t&&t instanceof Os||Ml(t)&&so(t)}function Vl(t){return ue(t?.lift)}function $t(t){return function(e){if(Vl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(t,e,n,r,s){return new Ul(t,e,n,r,s)}var Ul=function(t){Vt(e,t);function e(n,r,s,i,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=i?function(c){try{i(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Os),Wl=no(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),co=function(t){Vt(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new si(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Wl},e.prototype.next=function(n){var r=this;Ln(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Ft(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(c){s={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Ln(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Ln(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,o=s.isStopped,a=s.observers;return i||o?ro:(this.currentObservers=null,a.push(n),new dr(function(){r.currentObservers=null,Yr(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,o=r.isStopped;s?n.error(i):o&&n.complete()},e.prototype.asObservable=function(){var n=new xe;return n.source=this,n},e.create=function(n,r){return new si(n,r)},e}(xe),si=function(t){Vt(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:ro},e}(co),zl=function(t){Vt(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,i=n._value;if(r)throw s;return this._throwIfClosed(),i},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(co),Hl=new xe(function(t){return t.complete()});function Yl(t){return t&&ue(t.schedule)}function Gl(t){return t[t.length-1]}function Xl(t){return Yl(Gl(t))?t.pop():void 0}var uo=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function ho(t){return ue(t?.then)}function fo(t){return ue(t[Rs])}function mo(t){return Symbol.asyncIterator&&ue(t?.[Symbol.asyncIterator])}function po(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Jl(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var go=Jl();function vo(t){return ue(t?.[go])}function yo(t){return Tl(this,arguments,function(){var n,r,s,i;return to(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Tt(n.read())];case 3:return r=o.sent(),s=r.value,i=r.done,i?[4,Tt(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Tt(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function bo(t){return ue(t?.getReader)}function Ut(t){if(t instanceof xe)return t;if(t!=null){if(fo(t))return Ql(t);if(uo(t))return Zl(t);if(ho(t))return ec(t);if(mo(t))return _o(t);if(vo(t))return tc(t);if(bo(t))return nc(t)}throw po(t)}function Ql(t){return new xe(function(e){var n=t[Rs]();if(ue(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Zl(t){return new xe(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ec(t){return new xe(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,ao)})}function tc(t){return new xe(function(e){var n,r;try{for(var s=Ft(t),i=s.next();!i.done;i=s.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function _o(t){return new xe(function(e){rc(t,e).catch(function(n){return e.error(n)})})}function nc(t){return _o(yo(t))}function rc(t,e){var n,r,s,i;return Il(this,void 0,void 0,function(){var o,a;return to(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ll(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function st(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function wo(t,e){return e===void 0&&(e=0),$t(function(n,r){n.subscribe(bt(r,function(s){return st(r,t,function(){return r.next(s)},e)},function(){return st(r,t,function(){return r.complete()},e)},function(s){return st(r,t,function(){return r.error(s)},e)}))})}function $o(t,e){return e===void 0&&(e=0),$t(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function sc(t,e){return Ut(t).pipe($o(e),wo(e))}function ic(t,e){return Ut(t).pipe($o(e),wo(e))}function oc(t,e){return new xe(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ac(t,e){return new xe(function(n){var r;return st(n,e,function(){r=t[go](),st(n,e,function(){var s,i,o;try{s=r.next(),i=s.value,o=s.done}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),function(){return ue(r?.return)&&r.return()}})}function So(t,e){if(!t)throw new Error("Iterable cannot be null");return new xe(function(n){st(n,e,function(){var r=t[Symbol.asyncIterator]();st(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function lc(t,e){return So(yo(t),e)}function cc(t,e){if(t!=null){if(fo(t))return sc(t,e);if(uo(t))return oc(t,e);if(ho(t))return ic(t,e);if(mo(t))return So(t,e);if(vo(t))return ac(t,e);if(bo(t))return lc(t,e)}throw po(t)}function uc(t,e){return e?cc(t,e):Ut(t)}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Xl(t);return uc(t,n)}function hc(t,e){return $t(function(n,r){var s=0;n.subscribe(bt(r,function(i){r.next(t.call(e,i,s++))}))})}function dc(t,e,n,r,s,i,o,a){var l=[],c=0,u=0,h=!1,d=function(){h&&!l.length&&!c&&e.complete()},m=function(g){return c<r?_(g):l.push(g)},_=function(g){i&&e.next(g),c++;var v=!1;Ut(n(g,u++)).subscribe(bt(e,function(p){s?.(p),i?m(p):e.next(p)},function(){v=!0},void 0,function(){if(v)try{c--;for(var p=function(){var f=l.shift();o?st(e,o,function(){return _(f)}):_(f)};l.length&&c<r;)p();d()}catch(f){e.error(f)}}))};return t.subscribe(bt(e,m,function(){h=!0,d()})),function(){a?.()}}function Xr(t,e,n){return n===void 0&&(n=1/0),ue(e)?Xr(function(r,s){return hc(function(i,o){return e(r,i,s,o)})(Ut(t(r,s)))},n):(typeof e=="number"&&(n=e),$t(function(r,s){return dc(r,s,t,n)}))}function Ae(t){return $t(function(e,n){var r=null,s=!1,i;r=e.subscribe(bt(n,void 0,void 0,function(o){i=Ut(t(o,Ae(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function ie(t,e){return ue(e)?Xr(t,e,1):Xr(t,1)}function H(t){return t<=0?function(){return Hl}:$t(function(e,n){var r=0;e.subscribe(bt(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function me(t,e,n){var r=ue(t)||e||n?{next:t,error:e,complete:n}:t;return r?$t(function(s,i){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;s.subscribe(bt(i,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):lo}class fc{loggedIn=L({});tokenValue=L("");set token(e){this.tokenValue[1](e),this.loggedIn[1]({Authorization:`Bearer ${e}`})}get token(){return this.tokenValue[0]}clearToken(){this.loggedIn[1]({Authorization:""})}toObservable(e){return new xe(n=>{e.then(r=>{n.next(r)}).catch(r=>n.error(r)).finally(()=>n.complete())})}post(e,n,r){return new xe(s=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r?.headers,...this.loggedIn[0]()},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{s.next(i)}).catch(i=>s.error(i)).finally(()=>s.complete())})}get(e,n){return new xe(r=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...n?.headers,...this.loggedIn[0]()}}).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{r.next(s)}).catch(s=>r.error(s)).finally(()=>r.complete())})}}const U=new fc,ne=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fe=Object.keys,_e=Array.isArray;function ke(t,e){return typeof e!="object"||fe(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||ne.Promise||(ne.Promise=Promise);const ln=Object.getPrototypeOf,mc={}.hasOwnProperty;function Re(t,e){return mc.call(t,e)}function Mt(t,e){typeof e=="function"&&(e=e(ln(t))),(typeof Reflect>"u"?fe:Reflect.ownKeys)(e).forEach(n=>{ze(t,n,e[n])})}const xo=Object.defineProperty;function ze(t,e,n,r){xo(t,e,ke(n&&Re(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Lt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ze(t.prototype,"constructor",t),{extend:Mt.bind(null,t.prototype)}}}}const pc=Object.getOwnPropertyDescriptor;function Bs(t,e){let n;return pc(t,e)||(n=ln(t))&&Bs(n,e)}const gc=[].slice;function Qn(t,e,n){return gc.call(t,e,n)}function ko(t,e){return e(t)}function en(t){if(!t)throw new Error("Assertion Failed")}function Co(t){ne.setImmediate?setImmediate(t):setTimeout(t,0)}function Eo(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function He(t,e){if(Re(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=He(t,e[r]);n.push(i)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:He(a,e.substr(o+1))}}function Le(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){en(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)Le(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var o=e.substr(0,i),a=e.substr(i+1);if(a==="")n===void 0?_e(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&Re(t,o)||(l=t[o]={}),Le(l,a,n)}}else n===void 0?_e(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Po(t){var e={};for(var n in t)Re(t,n)&&(e[n]=t[n]);return e}const vc=[].concat;function Ao(t){return vc.apply([],t)}const Oo="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ao([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>ne[t]),yc=Oo.map(t=>ne[t]);Eo(Oo,t=>[t,!0]);let tt=null;function gn(t){tt=typeof WeakMap<"u"&&new WeakMap;const e=Jr(t);return tt=null,e}function Jr(t){if(!t||typeof t!="object")return t;let e=tt&&tt.get(t);if(e)return e;if(_e(t)){e=[],tt&&tt.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Jr(t[n]))}else if(yc.indexOf(t.constructor)>=0)e=t;else{const i=ln(t);for(var s in e=i===Object.prototype?{}:Object.create(i),tt&&tt.set(t,e),t)Re(t,s)&&(e[s]=Jr(t[s]))}return e}const{toString:bc}={};function Qr(t){return bc.call(t).slice(8,-1)}const Zr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_c=typeof Zr=="symbol"?function(t){var e;return t!=null&&(e=t[Zr])&&e.apply(t)}:function(){return null},Bt={};function Ve(t){var e,n,r,s;if(arguments.length===1){if(_e(t))return t.slice();if(this===Bt&&typeof t=="string")return[t];if(s=_c(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Is=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ro(t,e){Ne=t,Bo=e}var Bo=()=>!0;const wc=!new Error("").stack;function St(){if(wc)try{throw St.arguments,new Error}catch(t){return t}return new Error}function es(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Bo).map(r=>`
`+r).join("")):""}var Io=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ts=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Io),$c={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Dt(t,e){this._e=St(),this.name=t,this.message=e}function To(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Zn(t,e,n,r){this._e=St(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=To(t,e)}function nn(t,e){this._e=St(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=To(t,e)}Lt(Dt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+es(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Lt(Zn).from(Dt),Lt(nn).from(Dt);var Ls=Ts.reduce((t,e)=>(t[e]=e+"Error",t),{});const Sc=Dt;var M=Ts.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=St(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=$c[e]||n,this.inner=null)}return Lt(r).from(Sc),t[e]=r,t},{});M.Syntax=SyntaxError,M.Type=TypeError,M.Range=RangeError;var ii=Io.reduce((t,e)=>(t[e+"Error"]=M[e],t),{}),Dn=Ts.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=M[e]),t),{});function ee(){}function cn(t){return t}function xc(t,e){return t==null||t===cn?e:function(n){return e(t(n))}}function _t(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function kc(t,e){return t===ee?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_t(r,this.onsuccess):r),s&&(this.onerror=this.onerror?_t(s,this.onerror):s),i!==void 0?i:n}}function Cc(t,e){return t===ee?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?_t(n,this.onsuccess):n),r&&(this.onerror=this.onerror?_t(r,this.onerror):r)}}function Ec(t,e){return t===ee?e:function(n){var r=t.apply(this,arguments);ke(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?_t(s,this.onsuccess):s),i&&(this.onerror=this.onerror?_t(i,this.onerror):i),r===void 0?o===void 0?void 0:o:ke(r,o)}}function Pc(t,e){return t===ee?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Ds(t,e){return t===ee?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}Dn.ModifyError=Zn,Dn.DexieError=Dt,Dn.BulkError=nn;var un={};const Lo=100,[ts,er,ns]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,ln(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,ln(e),t]})(),Do=er&&er.then,jn=ts&&ts.constructor,js=!!ns;var rs=!1,Ac=ns?()=>{ns.then(wn)}:ne.setImmediate?setImmediate.bind(null,wn):ne.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{wn(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(wn,0)},rn=function(t,e){tn.push([t,e]),tr&&(Ac(),tr=!1)},ss=!0,tr=!0,pt=[],Nn=[],is=null,os=cn,jt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:li,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{li(t[0],t[1])}catch{}})}},K=jt,tn=[],gt=0,Kn=[];function T(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var e=this._PSD=K;if(Ne&&(this._stackHolder=St(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==un)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ls(this,this._value))}this._state=null,this._value=null,++e.ref,No(this,t)}const as={get:function(){var t=K,e=nr;function n(r,s){var i=!t.global&&(t!==K||e!==nr);const o=i&&!Xe();var a=new T((l,c)=>{Ns(this,new jo(rr(r,t,i,o),rr(s,t,i,o),l,c,t))});return Ne&&Mo(a,this),a}return n.prototype=un,n},set:function(t){ze(this,"then",t&&t.prototype===un?as:{get:function(){return t},set:as.set})}};function jo(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function No(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&vn();n&&typeof n.then=="function"?No(t,(s,i)=>{n instanceof T?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,Ko(t)),r&&yn()}},ls.bind(null,t))}catch(n){ls(t,n)}}function ls(t,e){if(Nn.push(e),t._state===null){var n=t._lib&&vn();e=os(e),t._state=!1,t._value=e,Ne&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){s&&s(o)}}(()=>{var r=Bs(e,"stack");e._promise=t,ze(e,"stack",{get:()=>rs?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){pt.some(s=>s._value===r._value)||pt.push(r)}(t),Ko(t),n&&yn()}}function Ko(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Ns(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),gt===0&&(++gt,rn(()=>{--gt==0&&Ks()},[]))}function Ns(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++gt,rn(Oc,[n,t,e])}else t._listeners.push(e)}function Oc(t,e,n){try{is=e;var r,s=e._value;e._state?r=t(s):(Nn.length&&(Nn=[]),r=t(s),Nn.indexOf(s)===-1&&function(i){for(var o=pt.length;o;)if(pt[--o]._value===i._value)return void pt.splice(o,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{is=null,--gt==0&&Ks(),--n.psd.ref||n.psd.finalize()}}function Fo(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,o=t._value;o!=null?(s=o.name||"Error",i=o.message||o,r=es(o,0)):(s=o,i=""),e.push(s+(i?": "+i:"")+r)}return Ne&&((r=es(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Fo(t._prev,e,n)),e}function Mo(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function wn(){vn()&&yn()}function vn(){var t=ss;return ss=!1,tr=!1,t}function yn(){var t,e,n;do for(;tn.length>0;)for(t=tn,tn=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(tn.length>0);ss=!0,tr=!0}function Ks(){var t=pt;pt=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Kn.slice(0),n=e.length;n;)e[--n]()}function $n(t){return new T(un,!1,t)}function oe(t,e){var n=K;return function(){var r=vn(),s=K;try{return ot(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{ot(s,!1),r&&yn()}}}Mt(T.prototype,{then:as,_then:function(t,e){Ns(this,new jo(null,null,t,e,K))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):$n(r)):this.then(null,r=>r&&r.name===e?n(r):$n(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),$n(e)))},stack:{get:function(){if(this._stack)return this._stack;try{rs=!0;var t=Fo(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{rs=!1}}},timeout:function(t,e){return t<1/0?new T((n,r)=>{var s=setTimeout(()=>r(new M.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ze(T.prototype,Symbol.toStringTag,"Dexie.Promise"),jt.env=qo(),Mt(T,{all:function(){var t=Ve.apply(null,arguments).map(Sn);return new T(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>T.resolve(s).then(o=>{t[i]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof T)return t;if(t&&typeof t.then=="function")return new T((n,r)=>{t.then(n,r)});var e=new T(un,!0,t);return Mo(e,is),e},reject:$n,race:function(){var t=Ve.apply(null,arguments).map(Sn);return new T((e,n)=>{t.map(r=>T.resolve(r).then(e,n))})},PSD:{get:()=>K,set:t=>K=t},totalEchoes:{get:()=>nr},newPSD:it,usePSD:zt,scheduler:{get:()=>rn,set:t=>{rn=t}},rejectionMapper:{get:()=>os,set:t=>{os=t}},follow:(t,e)=>new T((n,r)=>it((s,i)=>{var o=K;o.unhandleds=[],o.onunhandled=i,o.finalize=_t(function(){(function(a){function l(){a(),Kn.splice(Kn.indexOf(l),1)}Kn.push(l),++gt,rn(()=>{--gt==0&&Ks()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),jn&&(jn.allSettled&&ze(T,"allSettled",function(){const t=Ve.apply(null,arguments).map(Sn);return new T(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>T.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),jn.any&&typeof AggregateError<"u"&&ze(T,"any",function(){const t=Ve.apply(null,arguments).map(Sn);return new T((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,o)=>T.resolve(i).then(a=>e(a),a=>{s[o]=a,--r||n(new AggregateError(s))}))})}));const be={awaits:0,echoes:0,id:0};var Rc=0,Fn=[],$r=0,nr=0,Bc=0;function it(t,e,n,r){var s=K,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Bc;var o=jt.env;i.env=js?{Promise:T,PromiseProp:{value:T,configurable:!0,writable:!0},all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject,nthen:oi(o.nthen,i),gthen:oi(o.gthen,i)}:{},e&&ke(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=zt(i,t,n,r);return i.ref===0&&i.finalize(),a}function Wt(){return be.id||(be.id=++Rc),++be.awaits,be.echoes+=Lo,be.id}function Xe(){return!!be.awaits&&(--be.awaits==0&&(be.id=0),be.echoes=be.awaits*Lo,!0)}function Sn(t){return be.echoes&&t&&t.constructor===jn?(Wt(),t.then(e=>(Xe(),e),e=>(Xe(),pe(e)))):t}function Ic(t){++nr,be.echoes&&--be.echoes!=0||(be.echoes=be.id=0),Fn.push(K),ot(t,!0)}function Tc(){var t=Fn[Fn.length-1];Fn.pop(),ot(t,!1)}function ot(t,e){var n=K;if((e?!be.echoes||$r++&&t===K:!$r||--$r&&t===K)||Vo(e?Ic.bind(null,t):Tc),t!==K&&(K=t,n===jt&&(jt.env=qo()),js)){var r=jt.env.Promise,s=t.env;er.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(ne,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function qo(){var t=ne.Promise;return js?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ne,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:er.then,gthen:t.prototype.then}:{}}function zt(t,e,n,r,s){var i=K;try{return ot(t,!0),e(n,r,s)}finally{ot(i,!1)}}function Vo(t){Do.call(ts,t)}function rr(t,e,n,r){return typeof t!="function"?t:function(){var s=K;n&&Wt(),ot(e,!0);try{return t.apply(this,arguments)}finally{ot(s,!1),r&&Vo(Xe)}}}function oi(t,e){return function(n,r){return t.call(this,rr(n,e),rr(r,e))}}(""+Do).indexOf("[native code]")===-1&&(Wt=Xe=ee);const ai="unhandledrejection";function li(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(ne.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ai,!0,!0),ke(r,s)):ne.CustomEvent&&ke(r=new CustomEvent(ai,{detail:s}),s),r&&ne.dispatchEvent&&(dispatchEvent(r),!ne.PromiseRejectionEvent&&ne.onunhandledrejection))try{ne.onunhandledrejection(r)}catch{}Ne&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var pe=T.reject;function cs(t,e,n,r){if(t.idbdb&&(t._state.openComplete||K.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Ls.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>cs(t,e,n,r))):pe(i)}return s._promise(e,(i,o)=>it(()=>(K.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return pe(new M.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return pe(new M.DatabaseClosed);t.open().catch(ee)}return t._state.dbReadyPromise.then(()=>cs(t,e,n,r))}const ci="3.2.4",ft="",us=-1/0,Fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Uo="String expected.",sn=[],fr=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Lc=fr,Dc=fr,Wo=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),mr="__dbnames",Sr="readonly",xr="readwrite";function wt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const zo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=gn(e))[t],e)}class jc{_trans(e,n,r){const s=this._tx||K.trans,i=this.name;function o(l,c,u){if(!u.schema[i])throw new M.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const a=vn();try{return s&&s.db===this.db?s===K.trans?s._promise(e,o,r):it(()=>s._promise(e,o,r),{trans:s,transless:K.transless||K}):cs(this.db,e,[this.name],o)}finally{a&&yn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(_e(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=fe(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==ft)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Ne&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[a,l]=n.reduce(([c,u],h)=>{const d=s[h],m=e[h];return[c||d,c||!d?wt(u,d&&d.multi?_=>{const g=He(_,h);return _e(g)&&g.some(v=>o(m,v))}:_=>o(m,He(_,h))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,_e(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(Re(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ke(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=xn(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?T.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{Le(e,s,o)}catch{}return o})}update(e,n){if(typeof e!="object"||_e(e))return this.where(":id").equals(e).modify(n);{const r=He(e,this.schema.primKey.keyPath);if(r===void 0)return pe(new M.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?fe(n).forEach(s=>{Le(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=xn(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?T.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{Le(e,s,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?T.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:zo})).then(e=>e.numFailures?T.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new M.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(xn(l)):e;return this.core.mutate({trans:o,type:"add",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:d,lastResult:m,failures:_})=>{if(h===0)return i?d:m;throw new nn(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,_)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new M.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(xn(l)):e;return this.core.mutate({trans:o,type:"put",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:d,lastResult:m,failures:_})=>{if(h===0)return i?d:m;throw new nn(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,_)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new nn(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function on(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[o].subscribe.apply(null,c),t}if(typeof o=="string")return e[o]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(o,a,l){if(typeof o!="object"){var c;a||(a=Pc),l||(l=ee);var u={subscribers:[],fire:l,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=a(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(d){return d!==h}),u.fire=u.subscribers.reduce(a,l)}};return e[o]=n[o]=u,u}fe(c=o).forEach(function(h){var d=c[h];if(_e(d))i(h,c[h][0],c[h][1]);else{if(d!=="asap")throw new M.InvalidArgument("Invalid event config");var m=i(h,cn,function(){for(var _=arguments.length,g=new Array(_);_--;)g[_]=arguments[_];m.subscribers.forEach(function(v){Co(function(){v.apply(null,g)})})})}})}}function Yt(t,e){return Lt(e).from({prototype:t}),e}function Pt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function kr(t,e){t.filter=wt(t.filter,e)}function Cr(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>wt(r(),e()):e,t.justLimit=n&&!r}function Mn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new M.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ui(t,e,n){const r=Mn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function kn(t,e,n,r){const s=t.replayFilter?wt(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},o=(a,l,c)=>{if(!s||s(l,c,d=>l.stop(d),d=>l.fail(d))){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),Re(i,h)||(i[h]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),hi(ui(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return hi(ui(t,r,n),wt(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function hi(t,e,n,r){var s=oe(r?(i,o,a)=>n(r(i),o,a):n);return t.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();e&&!e(i,a=>o=a,a=>{i.stop(a),o=ee},a=>{i.fail(a),o=ee})||s(i.value,i,a=>o=a),o()})})}function Se(t,e){try{const n=di(t),r=di(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let c=0;c<l;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return o===a?0:o<a?-1:1}(fi(t),fi(e));case"Array":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let c=0;c<l;++c){const u=Se(s[c],i[c]);if(u!==0)return u}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function di(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Qr(t);return n==="ArrayBuffer"?"binary":n}function fi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Nc{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,pe.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,pe.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=wt(n.algorithm,e)}_iterate(e,n){return kn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ke(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>kn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(Pt(r,!0))return s.count({trans:n,query:{index:Mn(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return kn(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[s]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var h=o(c,i),d=o(u,i);return h<d?-a:h>d?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Pt(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=Mn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return kn(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Pt(n)?Cr(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):Cr(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Cr(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return kr(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return kr(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=wt(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Pt(n,!0)&&n.limit>0)return this._read(s=>{var i=Mn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return kr(this._ctx,function(s){var i=s.primaryKey.toString(),o=Re(r,i);return r[i]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=fe(e),o=i.length;s=function(g){for(var v=!1,p=0;p<o;++p){var f=i[p],w=e[f];He(g,f)!==w&&(Le(g,f,w),v=!0)}return v}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let d=0;const m=[],_=(g,v)=>{const{failures:p,numFailures:f}=v;d+=g-f;for(let w of fe(p))h.push(p[w])};return this.clone().primaryKeys().then(g=>{const v=p=>{const f=Math.min(u,g.length-p);return a.getMany({trans:r,keys:g.slice(p,p+f),cache:"immutable"}).then(w=>{const x=[],$=[],E=l?[]:null,k=[];for(let C=0;C<f;++C){const D=w[C],B={value:gn(D),primKey:g[p+C]};s.call(B,B.value,B)!==!1&&(B.value==null?k.push(g[p+C]):l||Se(c(D),c(B.value))===0?($.push(B.value),l&&E.push(g[p+C])):(k.push(g[p+C]),x.push(B.value)))}const R=Pt(n)&&n.limit===1/0&&(typeof e!="function"||e===Er)&&{index:n.index,range:n.range};return Promise.resolve(x.length>0&&a.mutate({trans:r,type:"add",values:x}).then(C=>{for(let D in C.failures)k.splice(parseInt(D),1);_(x.length,C)})).then(()=>($.length>0||R&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:E,values:$,criteria:R,changeSpec:typeof e!="function"&&e}).then(C=>_($.length,C))).then(()=>(k.length>0||R&&e===Er)&&a.mutate({trans:r,type:"delete",keys:k,criteria:R}).then(C=>_(k.length,C))).then(()=>g.length>p+f&&v(p+u))})};return v(0).then(()=>{if(h.length>0)throw new Zn("Error modifying one or more objects",h,d,m);return g.length})})})}delete(){var e=this._ctx,n=e.range;return Pt(e)&&(e.isPrimKey&&!Dc||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new Zn("Could not delete some values",Object.keys(a).map(h=>a[h]),o-u);return o-u}))}):this.modify(Er)}}const Er=(t,e)=>e.value=null;function Kc(t,e){return t<e?-1:t===e?0:1}function Fc(t,e){return t>e?-1:t===e?0:1}function Ee(t,e,n){var r=t instanceof Yo?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function At(t){return new t.Collection(t,()=>Ho("")).limit(0)}function Mc(t,e,n,r,s,i){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return s(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):s(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;s(t[l],c)<0&&(a=l)}return o<r.length&&i==="next"?t+n.substr(t.length):o<t.length&&i==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Cn(t,e,n,r){var s,i,o,a,l,c,u,h=n.length;if(!n.every(g=>typeof g=="string"))return Ee(t,Uo);function d(g){s=function(p){return p==="next"?f=>f.toUpperCase():f=>f.toLowerCase()}(g),i=function(p){return p==="next"?f=>f.toLowerCase():f=>f.toUpperCase()}(g),o=g==="next"?Kc:Fc;var v=n.map(function(p){return{lower:i(p),upper:s(p)}}).sort(function(p,f){return o(p.lower,f.lower)});a=v.map(function(p){return p.upper}),l=v.map(function(p){return p.lower}),c=g,u=g==="next"?"":r}d("next");var m=new t.Collection(t,()=>et(a[0],l[h-1]+r));m._ondirectionchange=function(g){d(g)};var _=0;return m._addAlgorithm(function(g,v,p){var f=g.key;if(typeof f!="string")return!1;var w=i(f);if(e(w,l,_))return!0;for(var x=null,$=_;$<h;++$){var E=Mc(f,w,a[$],l[$],o,c);E===null&&x===null?_=$+1:(x===null||o(x,E)>0)&&(x=E)}return v(x!==null?function(){g.continue(x+u)}:p),!1}),m}function et(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ho(t){return{type:1,lower:t,upper:t}}class Yo{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?At(this):new this.Collection(this,()=>et(e,n,!r,!s))}catch{return Ee(this,Fe)}}equals(e){return e==null?Ee(this,Fe):new this.Collection(this,()=>Ho(e))}above(e){return e==null?Ee(this,Fe):new this.Collection(this,()=>et(e,void 0,!0))}aboveOrEqual(e){return e==null?Ee(this,Fe):new this.Collection(this,()=>et(e,void 0,!1))}below(e){return e==null?Ee(this,Fe):new this.Collection(this,()=>et(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Ee(this,Fe):new this.Collection(this,()=>et(void 0,e))}startsWith(e){return typeof e!="string"?Ee(this,Uo):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Cn(this,(n,r)=>n.indexOf(r[0])===0,[e],ft)}equalsIgnoreCase(e){return Cn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Ve.apply(Bt,arguments);return e.length===0?At(this):Cn(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ve.apply(Bt,arguments);return e.length===0?At(this):Cn(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,ft)}anyOf(){const e=Ve.apply(Bt,arguments);let n=this._cmp;try{e.sort(n)}catch{return Ee(this,Fe)}if(e.length===0)return At(this);const r=new this.Collection(this,()=>et(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,o,a)=>{const l=i.key;for(;n(l,e[s])>0;)if(++s,s===e.length)return o(a),!1;return n(l,e[s])===0||(o(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[us,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ve.apply(Bt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ee(this,Fe)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[us,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,a=this._max;if(e.length===0)return At(this);if(!e.every(f=>f[0]!==void 0&&f[1]!==void 0&&s(f[0],f[1])<=0))return Ee(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",M.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,h=s;function d(f,w){return h(f[0],w[0])}try{u=e.reduce(function(f,w){let x=0,$=f.length;for(;x<$;++x){const E=f[x];if(r(w[0],E[1])<0&&r(w[1],E[0])>0){E[0]=o(E[0],w[0]),E[1]=a(E[1],w[1]);break}}return x===$&&f.push(w),f},[]),u.sort(d)}catch{return Ee(this,Fe)}let m=0;const _=c?f=>s(f,u[m][1])>0:f=>s(f,u[m][1])>=0,g=l?f=>i(f,u[m][0])>0:f=>i(f,u[m][0])>=0;let v=_;const p=new this.Collection(this,()=>et(u[0][0],u[u.length-1][1],!l,!c));return p._ondirectionchange=f=>{f==="next"?(v=_,h=s):(v=g,h=i),u.sort(d)},p._addAlgorithm((f,w,x)=>{for(var $=f.key;v($);)if(++m,m===u.length)return w(x),!1;return!!function(E){return!_(E)&&!g(E)}($)||(this._cmp($,u[m][1])===0||this._cmp($,u[m][0])===0||w(()=>{h===s?f.continue(u[m][0]):f.continue(u[m][1])}),!1)}),p}startsWithAnyOf(){const e=Ve.apply(Bt,arguments);return e.every(n=>typeof n=="string")?e.length===0?At(this):this.inAnyRange(e.map(n=>[n,n+ft])):Ee(this,"startsWithAnyOf() only works with strings")}}function je(t){return oe(function(e){return hn(e),t(e.target.error),!1})}function hn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const dn="storagemutated",nt="x-storagemutated-1",at=on(null,dn);class qc{_lock(){return en(!K.global),++this._reculock,this._reculock!==1||K.global||(K.lockOwnerFor=this),this}_unlock(){if(en(!K.global),--this._reculock==0)for(K.global||(K.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{zt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&K.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(en(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new M.DatabaseClosed(r);case"MissingAPIError":throw new M.MissingAPI(r.message,r);default:throw new M.OpenFailed(r)}if(!this.active)throw new M.TransactionInactive;return en(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=oe(s=>{hn(s),this._reject(e.error)}),e.onabort=oe(s=>{hn(s),this.active&&this._reject(new M.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=oe(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&at.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return pe(new M.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new M.TransactionInactive);if(this._locked())return new T((i,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,o)},K])});if(r)return it(()=>{var i=new T((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new T((i,o)=>{var a=n(i,o,this);a&&a.then&&a.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=T.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new T((o,a)=>{r.then(l=>n._waitingQueue.push(oe(o.bind(null,l))),l=>n._waitingQueue.push(oe(a.bind(null,l)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new M.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Re(n,e))return n[e];const r=this.schema[e];if(!r)throw new M.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function hs(t,e,n,r,s,i,o){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+Go(e)}}function Go(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xo(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Eo(n,r=>[r.name,r])}}let fn=t=>{try{return t.only([[]]),fn=()=>[[]],[[]]}catch{return fn=()=>ft,ft}};function ds(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>He(r,e)}(t):e=>He(e,t)}function mi(t){return[].slice.call(t)}let Vc=0;function an(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Uc(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:h,upperOpen:d}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!d):u===void 0?e.lowerBound(c,!!h):e.bound(c,u,!!h,!!d)}const{schema:s,hasGetAll:i}=function(l,c){const u=mi(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(h=>c.objectStore(h)).map(h=>{const{keyPath:d,autoIncrement:m}=h,_=_e(d),g=d==null,v={},p={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:_,keyPath:d,autoIncrement:m,unique:!0,extractKey:ds(d)},indexes:mi(h.indexNames).map(f=>h.index(f)).map(f=>{const{name:w,unique:x,multiEntry:$,keyPath:E}=f,k={name:w,compound:_e(E),keyPath:E,unique:x,multiEntry:$,extractKey:ds(E)};return v[an(E)]=k,k}),getIndexByKeyPath:f=>v[an(f)]};return v[":id"]=p.primaryKey,d!=null&&(v[an(d)]=p.primaryKey),p})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=s.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:h,type:d,keys:m,values:_,range:g}){return new Promise((v,p)=>{v=oe(v);const f=h.objectStore(u),w=f.keyPath==null,x=d==="put"||d==="add";if(!x&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:$}=m||_||{length:1};if(m&&_&&m.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if($===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let E;const k=[],R=[];let C=0;const D=A=>{++C,hn(A)};if(d==="deleteRange"){if(g.type===4)return v({numFailures:C,failures:R,results:[],lastResult:void 0});g.type===3?k.push(E=f.clear()):k.push(E=f.delete(r(g)))}else{const[A,I]=x?w?[_,m]:[_,null]:[m,null];if(x)for(let q=0;q<$;++q)k.push(E=I&&I[q]!==void 0?f[d](A[q],I[q]):f[d](A[q])),E.onerror=D;else for(let q=0;q<$;++q)k.push(E=f[d](A[q])),E.onerror=D}const B=A=>{const I=A.target.result;k.forEach((q,re)=>q.error!=null&&(R[re]=q.error)),v({numFailures:C,failures:R,results:d==="delete"?m:k.map(q=>q.result),lastResult:I})};E.onerror=A=>{D(A),B(A)},E.onsuccess=B})},getMany:({trans:h,keys:d})=>new Promise((m,_)=>{m=oe(m);const g=h.objectStore(u),v=d.length,p=new Array(v);let f,w=0,x=0;const $=k=>{const R=k.target;p[R._pos]=R.result,++x===w&&m(p)},E=je(_);for(let k=0;k<v;++k)d[k]!=null&&(f=g.get(d[k]),f._pos=k,f.onsuccess=$,f.onerror=E,++w);w===0&&m(p)}),get:({trans:h,key:d})=>new Promise((m,_)=>{m=oe(m);const g=h.objectStore(u).get(d);g.onsuccess=v=>m(v.target.result),g.onerror=je(_)}),query:function(h){return d=>new Promise((m,_)=>{m=oe(m);const{trans:g,values:v,limit:p,query:f}=d,w=p===1/0?void 0:p,{index:x,range:$}=f,E=g.objectStore(u),k=x.isPrimaryKey?E:E.index(x.name),R=r($);if(p===0)return m({result:[]});if(h){const C=v?k.getAll(R,w):k.getAllKeys(R,w);C.onsuccess=D=>m({result:D.target.result}),C.onerror=je(_)}else{let C=0;const D=v||!("openKeyCursor"in k)?k.openCursor(R):k.openKeyCursor(R),B=[];D.onsuccess=A=>{const I=D.result;return I?(B.push(v?I.value:I.primaryKey),++C===p?m({result:B}):void I.continue()):m({result:B})},D.onerror=je(_)}})}(i),openCursor:function({trans:h,values:d,query:m,reverse:_,unique:g}){return new Promise((v,p)=>{v=oe(v);const{index:f,range:w}=m,x=h.objectStore(u),$=f.isPrimaryKey?x:x.index(f.name),E=_?g?"prevunique":"prev":g?"nextunique":"next",k=d||!("openKeyCursor"in $)?$.openCursor(r(w),E):$.openKeyCursor(r(w),E);k.onerror=je(p),k.onsuccess=oe(R=>{const C=k.result;if(!C)return void v(null);C.___id=++Vc,C.done=!1;const D=C.continue.bind(C);let B=C.continuePrimaryKey;B&&(B=B.bind(C));const A=C.advance.bind(C),I=()=>{throw new Error("Cursor not stopped")};C.trans=h,C.stop=C.continue=C.continuePrimaryKey=C.advance=()=>{throw new Error("Cursor not started")},C.fail=oe(p),C.next=function(){let q=1;return this.start(()=>q--?this.continue():this.stop()).then(()=>this)},C.start=q=>{const re=new Promise((j,z)=>{j=oe(j),k.onerror=je(z),C.fail=z,C.stop=ce=>{C.stop=C.continue=C.continuePrimaryKey=C.advance=I,j(ce)}}),ae=()=>{if(k.result)try{q()}catch(j){C.fail(j)}else C.done=!0,C.start=()=>{throw new Error("Cursor behind last entry")},C.stop()};return k.onsuccess=oe(j=>{k.onsuccess=ae,ae()}),C.continue=D,C.continuePrimaryKey=B,C.advance=A,ae(),re},v(C)},p)})},count({query:h,trans:d}){const{index:m,range:_}=h;return new Promise((g,v)=>{const p=d.objectStore(u),f=m.isPrimaryKey?p:p.index(m.name),w=r(_),x=w?f.count(w):f.count();x.onsuccess=oe($=>g($.target.result)),x.onerror=je(v)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:fn(e),schema:s}}function fs({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(u,h){return h.reduce((d,{create:m})=>({...d,...m(d)}),u)}(Uc(i,o,l),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(o=>o.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function sr({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(o=>{const a=Bs(o,s);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?ze(o,s,{get(){return this.table(s)},set(l){xo(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new t.Table(s,i))})})}function ms({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Wc(t,e){return t._cfg.version-e._cfg.version}function zc(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),a=K.transless||K;it(()=>{K.trans=i,K.transless=a,e===0?(fe(s).forEach(l=>{Pr(n,l,s[l].primKey,s[l].indexes)}),fs(t,n),T.follow(()=>t.on.populate.fire(i)).catch(o)):function({_novip:l},c,u,h){const d=[],m=l._versions;let _=l._dbSchema=gs(l,l.idbdb,h),g=!1;const v=m.filter(f=>f._cfg.version>=c);function p(){return d.length?T.resolve(d.shift()(u.idbtrans)).then(p):T.resolve()}return v.forEach(f=>{d.push(()=>{const w=_,x=f._cfg.dbschema;vs(l,w,h),vs(l,x,h),_=l._dbSchema=x;const $=Jo(w,x);$.add.forEach(k=>{Pr(h,k[0],k[1].primKey,k[1].indexes)}),$.change.forEach(k=>{if(k.recreate)throw new M.Upgrade("Not yet support for changing primary key");{const R=h.objectStore(k.name);k.add.forEach(C=>ps(R,C)),k.change.forEach(C=>{R.deleteIndex(C.name),ps(R,C)}),k.del.forEach(C=>R.deleteIndex(C))}});const E=f._cfg.contentUpgrade;if(E&&f._cfg.version>c){fs(l,h),u._memoizedTables={},g=!0;let k=Po(x);$.del.forEach(B=>{k[B]=w[B]}),ms(l,[l.Transaction.prototype]),sr(l,[l.Transaction.prototype],fe(k),k),u.schema=k;const R=Is(E);let C;R&&Wt();const D=T.follow(()=>{if(C=E(u),C&&R){var B=Xe.bind(null,null);C.then(B,B)}});return C&&typeof C.then=="function"?T.resolve(C):D.then(()=>C)}}),d.push(w=>{(!g||!Lc)&&function(x,$){[].slice.call($.db.objectStoreNames).forEach(E=>x[E]==null&&$.db.deleteObjectStore(E))}(f._cfg.dbschema,w),ms(l,[l.Transaction.prototype]),sr(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),p().then(()=>{var f,w;w=h,fe(f=_).forEach(x=>{w.db.objectStoreNames.contains(x)||Pr(w,x,f[x].primKey,f[x].indexes)})})}(t,e,i,n).catch(o)})}function Jo(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!fr)o.recreate=!0,n.change.push(o);else{const a=s.idxByName,l=i.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const u=a[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function Pr(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>ps(s,i)),s}function ps(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function gs(t,e,n){const r={};return Qn(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const a=hs(Go(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),l=[];for(let u=0;u<i.indexNames.length;++u){const h=i.index(i.indexNames[u]);o=h.keyPath;var c=hs(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);l.push(c)}r[s]=Xo(s,a,l)}),r}function vs({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+Qn(c).join("+")+"]";if(e[i]){const h=e[i].idxByName[u];h&&(h.name=l,delete e[i].idxByName[u],e[i].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ne.WorkerGlobalScope&&ne instanceof ne.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Hc{_parseStoresSpec(e,n){fe(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return hs(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),_e(c),a===0)}),i=s.shift();if(i.multi)throw new M.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new M.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new M.Schema("Index must have a name and cannot be an empty string")}),n[r]=Xo(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ke(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(o=>{ke(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,ms(n,[n._allTables,n,n.Transaction.prototype]),sr(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],fe(i),i),n._storeNames=fe(i),this}upgrade(e){return this._cfg.contentUpgrade=Ds(this._cfg.contentUpgrade||ee,e),this}}function Fs(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new vt(mr,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ms(t){return t&&typeof t.databases=="function"}function ys(t){return it(function(){return K.letThrough=!0,t()})}function Yc(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Gc(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?pe(e.dbOpenError):t);Ne&&(e.openCanceller._stackHolder=St()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new M.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,o=null,a=!1;return T.race([r,(typeof navigator>"u"?T.resolve():Yc()).then(()=>new T((l,c)=>{if(s(),!n)throw new M.MissingAPI;const u=t.name,h=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!h)throw new M.MissingAPI;h.onerror=je(c),h.onblocked=oe(t._fireOnBlocked),h.onupgradeneeded=oe(d=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=hn,o.abort(),h.result.close();const _=n.deleteDatabase(u);_.onsuccess=_.onerror=oe(()=>{c(new M.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{o.onerror=je(c);var m=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=m<1,t._novip.idbdb=h.result,zc(t,m/10,o,c)}},c),h.onsuccess=oe(()=>{o=null;const d=t._novip.idbdb=h.result,m=Qn(d.objectStoreNames);if(m.length>0)try{const g=d.transaction((_=m).length===1?_[0]:_,"readonly");e.autoSchema?function({_novip:v},p,f){v.verno=p.version/10;const w=v._dbSchema=gs(0,p,f);v._storeNames=Qn(p.objectStoreNames,0),sr(v,[v._allTables],fe(w),w)}(t,d,g):(vs(t,t._dbSchema,g),function(v,p){const f=Jo(gs(0,v.idbdb,p),v._dbSchema);return!(f.add.length||f.change.some(w=>w.add.length||w.change.length))}(t,g)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fs(t,g)}catch{}var _;sn.push(t),d.onversionchange=oe(g=>{e.vcFired=!0,t.on("versionchange").fire(g)}),d.onclose=oe(g=>{t.on("close").fire(g)}),a&&function({indexedDB:g,IDBKeyRange:v},p){!Ms(g)&&p!==mr&&Fs(g,v).put({name:p}).catch(ee)}(t._deps,u),l()},c)}))]).then(()=>(s(),e.onReadyBeingFired=[],T.resolve(ys(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(Ds,ee);return e.onReadyBeingFired=[],T.resolve(ys(()=>c(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),pe(l)}).finally(()=>{e.openComplete=!0,i()})}function bs(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return o=>{var a=i(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):_e(l)?Promise.all(l).then(n,r):n(l)}}return s(e)()}function Xc(t,e,n){var r=arguments.length;if(r<2)throw new M.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Ao(s),n]}function Qo(t,e,n,r,s){return T.resolve().then(()=>{const i=K.transless||K,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===Ls.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Qo(t,e,n,null,s))):pe(h)}const l=Is(s);let c;l&&Wt();const u=T.follow(()=>{if(c=s.call(o,o),c)if(l){var h=Xe.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=bs(c))},a);return(c&&typeof c.then=="function"?T.resolve(c).then(h=>o.active?h:pe(new M.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),pe(h)))})}function En(t,e,n){const r=_e(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const Jc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function o(u,h,d){const m=an(u),_=s[m]=s[m]||[],g=u==null?0:typeof u=="string"?1:u.length,v=h>0,p={...d,isVirtual:v,keyTail:h,keyLength:g,extractKey:ds(u),unique:!v&&d.unique};return _.push(p),p.isPrimaryKey||i.push(p),g>1&&o(g===2?u[0]:u.slice(0,g-1),h+1,d),_.sort((f,w)=>f.keyTail-w.keyTail),p}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[a];for(const u of r.indexes)o(u.keyPath,0,u);function l(u){const h=u.query.index;return h.isVirtual?{...u,query:{index:h,range:(d=u.query.range,m=h.keyTail,{type:d.type===1?2:d.type,lower:En(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:En(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var d,m}return{...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(u){const h=s[an(u)];return h&&h[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:h,isVirtual:d,keyLength:m}=u.query.index;return d?n.openCursor(l(u)).then(_=>_&&function(g){return Object.create(g,{continue:{value:function(p){p!=null?g.continue(En(p,u.reverse?t.MAX_KEY:t.MIN_KEY,h)):u.unique?g.continue(g.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,h)):g.continue()}},continuePrimaryKey:{value(p,f){g.continuePrimaryKey(En(p,t.MAX_KEY,h),f)}},primaryKey:{get:()=>g.primaryKey},key:{get(){const p=g.key;return m===1?p[0]:p.slice(0,m)}},value:{get:()=>g.value}})}(_)):n.openCursor(u)}}}}}};function qs(t,e,n,r){return n=n||{},r=r||"",fe(t).forEach(s=>{if(Re(e,s)){var i=t[s],o=e[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const a=Qr(i);a!==Qr(o)?n[r+s]=e[s]:a==="Object"?qs(i,o,n,r+s+"."):i!==o&&(n[r+s]=e[s])}else i!==o&&(n[r+s]=e[s])}else n[r+s]=void 0}),fe(e).forEach(s=>{Re(t,s)||(n[r+s]=e[s])}),n}const Qc={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=K.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(i.type){case"add":if(l.fire===ee)break;return o._promise("readwrite",()=>u(i),!0);case"put":if(l.fire===ee&&c.fire===ee)break;return o._promise("readwrite",()=>u(i),!0);case"delete":if(a.fire===ee)break;return o._promise("readwrite",()=>u(i),!0);case"deleteRange":if(a.fire===ee)break;return o._promise("readwrite",()=>function(d){return h(d.trans,d.range,1e4)}(i),!0)}return n.mutate(i);function u(d){const m=K.trans,_=d.keys||function(g,v){return v.type==="delete"?v.keys:v.keys||v.values.map(g.extractKey)}(r,d);if(!_)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:_}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(g,v,p){return v.type==="add"?Promise.resolve([]):g.getMany({trans:v.trans,keys:p,cache:"immutable"})}(n,d,_).then(g=>{const v=_.map((p,f)=>{const w=g[f],x={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(x,p,w,m);else if(d.type==="add"||w===void 0){const $=l.fire.call(x,p,d.values[f],m);p==null&&$!=null&&(p=$,d.keys[f]=p,r.outbound||Le(d.values[f],r.keyPath,p))}else{const $=qs(w,d.values[f]),E=c.fire.call(x,$,p,w,m);if(E){const k=d.values[f];Object.keys(E).forEach(R=>{Re(k,R)?k[R]=E[R]:Le(k,R,E[R])})}}return x});return n.mutate(d).then(({failures:p,results:f,numFailures:w,lastResult:x})=>{for(let $=0;$<_.length;++$){const E=f?f[$]:_[$],k=v[$];E==null?k.onerror&&k.onerror(p[$]):k.onsuccess&&k.onsuccess(d.type==="put"&&g[$]?d.values[$]:E)}return{failures:p,results:f,numFailures:w,lastResult:x}}).catch(p=>(v.forEach(f=>f.onerror&&f.onerror(p)),Promise.reject(p)))})}function h(d,m,_){return n.query({trans:d,values:!1,query:{index:r,range:m},limit:_}).then(({result:g})=>u({type:"delete",keys:g,trans:d}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):g.length<_?{failures:[],numFailures:0,lastResult:void 0}:h(d,{...m,lower:g[g.length-1],lowerOpen:!0},_)))}}}}})};function Zo(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)Se(e.keys[s],t[i])===0&&(r.push(n?gn(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const Zc={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=Zo(r.keys,r.trans._cache,r.cache==="clone");return s?T.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?gn(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Vs(t){return!("from"in t)}const qe=function(t,e){if(!this){const n=new qe;return t&&"d"in t&&ke(n,t),n}ke(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function mn(t,e,n){const r=Se(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vs(t))return ke(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(Se(n,t.from)<0)return s?mn(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},pi(t);if(Se(e,t.to)>0)return i?mn(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},pi(t);Se(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),Se(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;s&&!t.l&&ir(t,s),i&&o&&ir(t,i)}function ir(t,e){Vs(e)||function n(r,{from:s,to:i,l:o,r:a}){mn(r,s,i),o&&n(r,o),a&&n(r,a)}(t,e)}function eu(t,e){const n=_s(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=_s(t);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(Se(a.from,s.to)<=0&&Se(a.to,s.from)>=0)return!0;Se(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function _s(t){let e=Vs(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Se(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Se(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function pi(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o={...t},a=t[s];t.from=a.from,t.to=a.to,t[s]=a[s],o[s]=a[i],t[i]=o,o.d=gi(o)}t.d=gi(t)}function gi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Mt(qe.prototype,{add(t){return ir(this,t),this},addKey(t){return mn(this,t,t),this},addKeys(t){return t.forEach(e=>mn(this,e,e)),this},[Zr](){return _s(this)}});const tu={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new qe(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:a,outbound:l}=o,c={...s,mutate:d=>{const m=d.trans,_=m.mutatedParts||(m.mutatedParts={}),g=E=>{const k=`idb://${e}/${r}/${E}`;return _[k]||(_[k]=new qe)},v=g(""),p=g(":dels"),{type:f}=d;let[w,x]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const $=d.trans._cache;return s.mutate(d).then(E=>{if(_e(w)){f!=="delete"&&(w=E.results),v.addKeys(w);const k=Zo(w,$);k||f==="add"||p.addKeys(w),(k||x)&&function(R,C,D,B){function A(I){const q=R(I.name||"");function re(j){return j!=null?I.extractKey(j):null}const ae=j=>I.multiEntry&&_e(j)?j.forEach(z=>q.addKey(z)):q.addKey(j);(D||B).forEach((j,z)=>{const ce=D&&re(D[z]),Be=B&&re(B[z]);Se(ce,Be)!==0&&(ce!=null&&ae(ce),Be!=null&&ae(Be))})}C.indexes.forEach(A)}(g,i,k,x)}else if(w){const k={from:w.lower,to:w.upper};p.add(k),v.add(k)}else v.add(n),p.add(n),i.indexes.forEach(k=>g(k.name).add(n));return E})}},u=({query:{index:d,range:m}})=>{var _,g;return[d,new qe((_=m.lower)!==null&&_!==void 0?_:t.MIN_KEY,(g=m.upper)!==null&&g!==void 0?g:t.MAX_KEY)]},h={get:d=>[o,new qe(d.key)],getMany:d=>[o,new qe().addKeys(d.keys)],count:u,query:u,openCursor:u};return fe(h).forEach(d=>{c[d]=function(m){const{subscr:_}=K;if(_){const g=x=>{const $=`idb://${e}/${r}/${x}`;return _[$]||(_[$]=new qe)},v=g(""),p=g(":dels"),[f,w]=h[d](m);if(g(f.name||"").add(w),!f.isPrimaryKey){if(d!=="count"){const x=d==="query"&&l&&m.values&&s.query({...m,values:!1});return s[d].apply(this,arguments).then($=>{if(d==="query"){if(l&&m.values)return x.then(({result:k})=>(v.addKeys(k),$));const E=m.values?$.result.map(a):$.result;m.values?v.addKeys(E):p.addKeys(E)}else if(d==="openCursor"){const E=$,k=m.values;return E&&Object.create(E,{key:{get:()=>(p.addKey(E.primaryKey),E.key)},primaryKey:{get(){const R=E.primaryKey;return p.addKey(R),R}},value:{get:()=>(k&&v.addKey(E.primaryKey),E.value)}})}return $})}p.add(n)}}return s[d].apply(this,arguments)}}),c}}}};class vt{constructor(e,n){this._middlewares={},this.verno=0;const r=vt.dependencies;this._options=n={addons:vt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new T(a=>{i.dbReadyResolve=a}),i.openCanceller=new T((a,l)=>{i.cancelOpen=l}),this._state=i,this.name=e,this.on=on(this,"populate","blocked","versionchange","close",{ready:[Ds,ee]}),this.on.ready.subscribe=ko(this.on.ready.subscribe,a=>(l,c)=>{vt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||T.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const h=this;c||a(function d(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,Yt(Nc.prototype,function(a,l){this.db=o;let c=zo,u=null;if(l)try{c=l()}catch(_){u=_}const h=a._ctx,d=h.table,m=d.hook.reading.fire;this._ctx={table:d,index:h.index,isPrimKey:!h.index||d.schema.primKey.keyPath&&h.index===d.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:h.or,valueMapper:m!==cn?m:null}})),this.Table=function(a){return Yt(jc.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:on(null,{creating:[kc,ee],reading:[xc,cn],updating:[Ec,ee],deleting:[Cc,ee]})})}(this),this.Transaction=function(a){return Yt(qc.prototype,function(l,c,u,h,d){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=on(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new T((m,_)=>{this._resolve=m,this._reject=_}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var _=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):_&&this.idbtrans&&this.idbtrans.abort(),pe(m)})})}(this),this.Version=function(a){return Yt(Hc.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Yt(Yo.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:u};const h=a._deps.indexedDB;if(!h)throw new M.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(d,m)=>h.cmp(m,d),this._max=(d,m)=>h.cmp(d,m)>0?d:m,this._min=(d,m)=>h.cmp(d,m)<0?d:m,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=fn(n.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),sn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Jc),this.use(Qc),this.use(tu),this.use(Zc),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new M.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new M.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Wc),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||K.letThrough||this._vip)?e():new T((n,r)=>{if(this._state.openComplete)return r(new M.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new M.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Gc(this)}_close(){const e=this._state,n=sn.indexOf(this);if(n>=0&&sn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new T(r=>{e.dbReadyResolve=r}),e.openCanceller=new T((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new M.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new T((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=oe(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!Ms(a)&&c!==mr&&Fs(a,l).delete(c).catch(ee)})(this._deps,this.name),r()}),o.onerror=je(s),o.onblocked=this._fireOnBlocked};if(e)throw new M.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return fe(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Xc.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=K.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===Sr)o=Sr;else{if(e!="rw"&&e!=xr)throw new M.InvalidArgument("Invalid transaction mode: "+e);o=xr}if(s){if(s.mode===Sr&&o===xr){if(!i)throw new M.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new M.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(u,h)=>{h(c)}):pe(c)}const l=Qo.bind(null,this,o,a,s,r);return s?s._promise(o,l,"lock"):K.trans?zt(K.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!Re(this._allTables,e))throw new M.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const nu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ru{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[nu](){return this}}function ea(t,e){return fe(e).forEach(n=>{ir(t[n]||(t[n]=new qe),e[n])}),t}function su(t){let e,n=!1;const r=new ru(s=>{const i=Is(t);let o=!1,a={},l={};const c={get closed(){return o},unsubscribe:()=>{o=!0,at.storagemutated.unsubscribe(m)}};s.start&&s.start(c);let u=!1,h=!1;function d(){return fe(l).some(g=>a[g]&&eu(a[g],l[g]))}const m=g=>{ea(a,g),d()&&_()},_=()=>{if(u||o)return;a={};const g={},v=function(p){i&&Wt();const f=()=>it(t,{subscr:p,trans:null}),w=K.trans?zt(K.transless,f):f();return i&&w.then(Xe,Xe),w}(g);h||(at(dn,m),h=!0),u=!0,Promise.resolve(v).then(p=>{n=!0,e=p,u=!1,o||(d()?_():(a={},l=g,s.next&&s.next(p)))},p=>{u=!1,n=!1,s.error&&s.error(p),c.unsubscribe()})};return _(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let ws;try{ws={indexedDB:ne.indexedDB||ne.mozIndexedDB||ne.webkitIndexedDB||ne.msIndexedDB,IDBKeyRange:ne.IDBKeyRange||ne.webkitIDBKeyRange}}catch{ws={indexedDB:null,IDBKeyRange:null}}const lt=vt;function qn(t){let e=Ue;try{Ue=!0,at.storagemutated.fire(t)}finally{Ue=e}}Mt(lt,{...Dn,delete:t=>new lt(t,{addons:[]}).delete(),exists:t=>new lt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Ms(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==mr)):Fs(e,n).toCollection().primaryKeys()}(lt.dependencies).then(t)}catch{return pe(new M.MissingAPI)}},defineClass:()=>function(t){ke(this,t)},ignoreTransaction:t=>K.trans?zt(K.transless,t):t(),vip:ys,async:function(t){return function(){try{var e=bs(t.apply(this,arguments));return e&&typeof e.then=="function"?e:T.resolve(e)}catch(n){return pe(n)}}},spawn:function(t,e,n){try{var r=bs(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:T.resolve(r)}catch(s){return pe(s)}},currentTransaction:{get:()=>K.trans||null},waitFor:function(t,e){const n=T.resolve(typeof t=="function"?lt.ignoreTransaction(t):t).timeout(e||6e4);return K.trans?K.trans.waitFor(n):n},Promise:T,debug:{get:()=>Ne,set:t=>{Ro(t,t==="dexie"?()=>!0:Wo)}},derive:Lt,extend:ke,props:Mt,override:ko,Events:on,on:at,liveQuery:su,extendObservabilitySet:ea,getByKeyPath:He,setByKeyPath:Le,delByKeyPath:function(t,e){typeof e=="string"?Le(t,e,void 0):"length"in e&&[].map.call(e,function(n){Le(t,n,void 0)})},shallowClone:Po,deepClone:gn,getObjectDiff:qs,cmp:Se,asap:Co,minKey:us,addons:[],connections:sn,errnames:Ls,dependencies:ws,semVer:ci,version:ci.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),lt.maxKey=fn(lt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(at(dn,t=>{if(!Ue){let e;fr?(e=document.createEvent("CustomEvent"),e.initCustomEvent(nt,!0,!0,t)):e=new CustomEvent(nt,{detail:t}),Ue=!0,dispatchEvent(e),Ue=!1}}),addEventListener(nt,({detail:t})=>{Ue||qn(t)}));let Ue=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(nt);typeof t.unref=="function"&&t.unref(),at(dn,e=>{Ue||t.postMessage(e)}),t.onmessage=e=>{e.data&&qn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){at(dn,e=>{try{Ue||(typeof localStorage<"u"&&localStorage.setItem(nt,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:nt,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===nt){const n=JSON.parse(e.newValue);n&&qn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===nt&&qn(e.changedParts)})}T.rejectionMapper=function(t,e){if(!t||t instanceof Dt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ii[t.name])return t;var n=new ii[t.name](e||t.message,t);return"stack"in t&&ze(n,"stack",{get:function(){return this.inner.stack}}),n},Ro(Ne,Wo);class ta extends vt{spells;classes;races;backgrounds;items;feats;constructor(e){super(e),this.version(1).stores({spells:"name",classes:"name",races:"name",backgrounds:"name",items:"name",feats:"name"})}}const Ie=new ta("dndSrd"),[vi,iu]=L([]);function na(){const t=U.toObservable(Ie.classes.toArray());return vi().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Classes",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.classes.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?iu(e):null)).subscribe(),vi}const ou="_primary_f8d3l_1",au="_accent_f8d3l_12",lu="_tertiary_f8d3l_65",cu="_warn_f8d3l_70",uu="_hover_f8d3l_74",hu="_popup_f8d3l_88",du="_table_f8d3l_100",ct={primary:ou,accent:au,tertiary:lu,warn:cu,hover:uu,popup:hu,table:du},fu="_primary_1mnvm_1",mu="_accent_1mnvm_7",pu="_warn_1mnvm_13",gu="_hover_1mnvm_17",vu="_popup_1mnvm_28",yu="_table_1mnvm_41",bu="_tBody_1mnvm_55",_u="_THead_1mnvm_60",ut={primary:fu,accent:mu,warn:pu,hover:gu,popup:vu,table:yu,tBody:bu,THead:_u},wu={primary:ut.primary,accent:ut.accent,tertiary:ut.tertiary,warn:ut.warn,hover:ut.hover,popup:ut.popup,table:ut.table},yi={primary:ct.primary,accent:ct.accent,tertiary:ct.tertiary,warn:ct.warn,hover:ct.hover,popup:ct.popup,table:ct.table};function te(t="dark"){switch(t.toLowerCase()){case"light":return wu;case"dark":return document.body.style.backgroundColor="#212121",yi;default:return yi}}const[bi,$u]=L([]);function ra(){const t=U.toObservable(Ie.spells.toArray());return bi().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Spells",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.spells.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?$u(e):null)).subscribe(),bi}const[_i,Su]=L([]);function sa(){const t=U.toObservable(Ie.feats.toArray());return _i().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Feats",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.feats.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?Su(e):null)).subscribe(),_i}const[wi,xu]=L([]);function ia(){const t=U.toObservable(Ie.races.toArray());return wi().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Races",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.races.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?xu(e):null)).subscribe(),wi}const[$i,ku]=L([]);function oa(){const t=U.toObservable(Ie.backgrounds.toArray());return $i().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Backgrounds",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.backgrounds.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?ku(e):null)).subscribe(),$i}const[Si,Cu]=L([]);function Eu(){const t=U.toObservable(Ie.items.toArray());return Si().length===0&&t.pipe(H(1),ie(e=>e.length>0?Q(e):Q([])),ie(e=>e.length===0?U.post("/api/DnDInfo/Items",{}).pipe(H(1),Ae(n=>(console.error("Error: ",n),Q(null))),me(n=>{n&&Ie.items.bulkAdd(n)})):Q(e)),me(e=>e&&e.length>0?Cu(e):null)).subscribe(),Si}const Pu="_AppBody_1ckpc_1",Au={AppBody:Pu};function Ou(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(h=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await or(()=>import("./workbox-window.prod.es5-HOwwy-x7.js"),__vite__mapDeps([])).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o?.(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r?.()}),a.register({immediate:e}).then(h=>{i?i("/sw.js",h):s?.(h)}).catch(h=>{o?.(h)})}}return l=u(),c}function aa(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t,[a,l]=L(!1),[c,u]=L(!1),h=Ou({immediate:e,onOfflineReady(){u(!0),r?.()},onNeedRefresh(){l(!0),n?.()},onRegistered:s,onRegisteredSW:i,onRegisterError:o});return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:h}}const Ru="_Container_8liaz_1",Bu="_Toast_8liaz_15",Iu="_ToastMessage_8liaz_43",Tu="_ToastButton_8liaz_51",Gt={Container:Ru,Toast:Bu,ToastMessage:Iu,ToastButton:Tu};var Lu=S("<span>App ready to work offline"),Du=S("<button>Reload"),ju=S("<div><div></div><button>Close"),Nu=S("<div>"),Ku=S("<span>New content available, click on reload button to update.");const Fu=()=>{const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:s}=aa({onRegistered(o){console.log("SW Registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}}),i=()=>{e(!1),r(!1)};return(()=>{var o=Nu();return y(o,b(N,{get when(){return t()||n()},get children(){var a=ju(),l=a.firstChild,c=l.nextSibling;return y(l,b(N,{get fallback(){return Ku()},get when(){return t()},get children(){return Lu()}})),y(a,b(N,{get when(){return n()},get children(){var u=Du();return u.$$click=()=>s(!0),O(()=>P(u,Gt.ToastButton)),u}}),c),c.$$click=()=>i(),O(u=>{var h=Gt.Toast,d=Gt.Message,m=Gt.ToastButton;return h!==u.e&&P(a,u.e=h),d!==u.t&&P(l,u.t=d),m!==u.a&&P(c,u.a=m),u},{e:void 0,t:void 0,a:void 0}),a}})),O(()=>P(o,Gt.Container)),o})()};$e(["click"]);const Mu="_header_q7g3p_1",qu="_body_q7g3p_17",Vu="_totalPanel_q7g3p_22",Ar={header:Mu,body:qu,totalPanel:Vu};var Uu=S("<div>"),Wu=S("<div><div><span></span><span>");const Nt=t=>{const[e,n]=L(!1),r=te();return(()=>{var s=Wu(),i=s.firstChild,o=i.firstChild,a=o.nextSibling;return Qe(s,De({get class(){return`${Ar.totalPanel} ${t.styles}`}},t),!1,!0),y(o,()=>t.children[0]),a.$$click=()=>n(l=>!l),y(a,b(N,{get when(){return!e()},children:""}),null),y(a,b(N,{get when(){return e()},children:""}),null),y(s,b(N,{get when(){return e()},get children(){var l=Uu();return y(l,()=>t.children[1]),O(()=>P(l,`${r.accent} ${Ar.body}`)),l}}),null),O(l=>{var c=`${r.accent} ${Ar.header}`,u=`${r.hover}`;return c!==l.e&&P(i,l.e=c),u!==l.t&&P(a,l.t=u),l},{e:void 0,t:void 0}),s})()};$e(["click"]);var zu=S("<div>Welcome to my app. This is a work in progress."),Hu=S("<div>It'll be great eventually."),Yu=S("<div><h1>Home</h1><div>");const Gu=()=>{const t=te();return na(),ra(),sa(),ia(),Eu(),oa(),(()=>{var e=Yu(),n=e.firstChild,r=n.nextSibling;return r.style.setProperty("width","30%"),y(r,b(Nt,{get children(){return[zu(),(()=>{var s=Hu();return s.style.setProperty("padding","15px"),s})()]}})),y(e,b(Fu,{}),null),O(()=>P(e,`${t.accent} ${Au.AppBody}`)),e})()},Xu="_active_8eb29_1",Ju="_inactive_8eb29_6",Qu="_navbar_8eb29_11",Xt={active:Xu,inactive:Ju,navbar:Qu};var Vn=(t=>(t[t.DnD5e=0]="DnD5e",t[t.TOValient=1]="TOValient",t))(Vn||{});function Zu(t){const[e,n]=L([]),r=Vn.DnD5e;return O(()=>{switch(!0){case t().startsWith("/info"):const s=[{Name:"All",Link:"/info"},{Name:"Races",Link:"/info/races"},{Name:"Items",Link:"/info/items"},{Name:"Spells",Link:"/info/spells"},{Name:"Feats",Link:"/info/feats"},{Name:"Classes",Link:"/info/classes"}];r===Vn.DnD5e?s.push({Name:"Backgrounds",Link:"/info/backgrounds"}):r===Vn.TOValient&&s.push({Name:"Heritages",Link:"/info/heritages"}),n(s);break;case t().startsWith("/characters"):n([{Name:"All",Link:"/characters"},{Name:"View",Link:"/characters/view"},{Name:"Create",Link:"/characters/create"}]);break;case t().startsWith("/homebrew"):n([{Name:"All",Link:"/homebrew"},{Name:"View",Link:"/homebrew/view"},{Name:"Create",Link:"/homebrew/create"}]);break;default:n([]);break}}),e}const eh="_menuButtons_1tfvq_1",th="_menuButton_1tfvq_1",xi={menuButtons:eh,menuButton:th};function nh(t,e){const n=document.getElementById("root"),r=s=>!t.contains(s.target)&&e()?.();n.addEventListener("click",r),yt(()=>{n.removeEventListener("click",r)})}var rh=S("<button>"),sh=S("<div><ul>"),ih=S("<li><button>");const $s=t=>{const[e,n]=L({show:!1,lastX:0,lastY:0}),r=V(()=>!!t.menuItems),s=V(()=>t.menuItems?.filter(c=>c.condition?c.condition():!0)??[]),i=te(),o=V(()=>({position:"absolute",top:t.overrideY??`${e().lastY}px`,left:t.overrideX??`${e().lastX}px`,display:`${e().show?"block":"none"}`}));let a;const l=()=>nh(a,()=>n({show:!1,lastX:0,lastY:0}));return t.enableBackgroundClick&&document.body.addEventListener("click",l),yt(()=>{document.body.removeEventListener("click",l)}),[(()=>{var c=rh();return Gs(u=>u,c),Qe(c,De(t,{get class(){return`${i.accent} ${i.hover} ${t.class??""}`},onClick:u=>n(h=>({show:!h.show,lastX:u.clientX,lastY:u.clientY}))}),!1,!0),y(c,()=>t.children),c})(),b(Za,{get mount(){return document.getElementById("root")},get children(){return b(N,{get when(){return V(()=>!!e())()&&r()},get children(){var c=sh(),u=c.firstChild;return Gs(h=>a=h,c),y(u,b(F,{get each(){return t.menuItems},children:h=>b(N,{get when(){return V(()=>!!((!h.condition||h.condition())&&e()))()&&r()},get children(){var d=ih(),m=d.firstChild;return m.addEventListener("click",h.action),y(m,()=>h.name),O(_=>{var g=`${100/s().length}%`,v=`${i.hover}`,p=`${i.accent} ${xi.menuButton}`;return g!==_.e&&((_.e=g)!=null?d.style.setProperty("height",g):d.style.removeProperty("height")),v!==_.t&&P(d,_.t=v),p!==_.a&&P(m,_.a=p),_},{e:void 0,t:void 0,a:void 0}),d}})})),O(h=>{var d=`${i.popup} ${i.primary} ${t.menuStyle??""}`,m=o(),_=`${xi.menuButtons}`;return d!==h.e&&P(c,h.e=d),h.t=Jn(c,m,h.t),_!==h.a&&P(u,h.a=_),h},{e:void 0,t:void 0,a:void 0}),c}})}})]};var oh=S("<span>MySite"),ah=S("<li><div>MySite"),lh=S('<svg width=32pt height=32pt version=1.1 viewBox="0 0 128 128"xmlns=http://www.w3.org/2000/svg><path d="m113.15 40.062c4.9922 0 8.5742-3.5859 8.5742-8.4492s-3.5859-8.7031-8.5742-8.7031h-98.176c-4.8633 0-8.7031 3.8398-8.7031 8.7031s3.8398 8.4492 8.7031 8.4492zm-98.176 47.875c-4.8633 0-8.7031 3.8398-8.7031 8.5742s3.8398 8.7031 8.7031 8.7031h98.305c4.9922 0 8.5742-3.9688 8.5742-8.7031s-3.5859-8.5742-8.5742-8.5742zm0-32.641c-4.8633 0-8.7031 3.8398-8.7031 8.7031s3.8398 8.7031 8.7031 8.7031h98.305c4.9922 0 8.5742-3.8398 8.5742-8.7031s-3.5859-8.7031-8.5742-8.7031z">'),ch=S("<div><ul>"),uh=S("<div><div><ul>"),hh=S("<button>"),ki=S("<li>");const dh=t=>{const e=te();L(!1);const[n,r]=L(!1),[s,i]=L(window.location.pathname),o=[{Name:"Home",Link:"/"},{Name:"Characters",Link:"/characters"},{Name:"Info",Link:"/info"},{Name:"Homebrew",Link:"/homebrew"}],a=[{name:"Login",condition:()=>!n(),action:()=>{r(!0)}},{name:"Register",condition:()=>!n(),action:()=>{}},{name:"Logout",condition:n,action:()=>{r(!1)}},{name:"Profile",condition:n,action:()=>{}},{name:"Settings",condition:()=>!0,action:()=>{}}];let l=Zu(s);const[c,u]=t.list,[h,d]=L(!1);return O(()=>{d(!c())}),(()=>{var m=uh(),_=m.firstChild,g=_.firstChild;return y(_,b(N,{get when(){return!c()},get children(){return oh()}}),g),y(g,b(N,{get when(){return c()},get children(){return ah()}}),null),y(g,b(F,{each:o,children:(v,p)=>b(N,{get when(){return!c()||p()===0||h()},get children(){var f=ki();return y(f,b(ei,{onClick:()=>i(v.Link),get href(){return v.Link},get children(){return v.Name}}),null),y(f,b(N,{get when(){return V(()=>!!c())()&&p()===0},get children(){var w=hh();return w.$$click=()=>d(!h()),w.style.setProperty("background","none"),w.style.setProperty("color","white"),w.style.setProperty("font-size","1.5rem"),w.style.setProperty("padding","0 10px"),w.style.setProperty("width","min-content"),w.style.setProperty("margin-right","0"),y(w,()=>h()?"":""),w}}),null),O(()=>P(f,`${e.hover} ${s()==="/"&&v.Link==="/"||s().startsWith(v.Link)&&s()!=="/"&&v.Link!=="/"?Xt.active:Xt.inactive}`)),f}})}),null),y(_,b($s,{menuItems:a,overrideX:"93vw",overrideY:"8vh",get children(){return lh()}}),null),y(m,b(N,{get when(){return l().length>0},get children(){var v=ch(),p=v.firstChild;return y(p,b(F,{get each(){return l()},children:f=>(()=>{var w=ki();return y(w,b(ei,{onClick:()=>i(f.Link),get href(){return f.Link},get children(){return f.Name}})),O(()=>P(w,`${e.hover} ${s()===f.Link?Xt.active:Xt.inactive}`)),w})()})),O(()=>P(v,t.style)),v}}),null),O(v=>{var p=Xt.navbar,f=c()?{margin:"0 auto",width:"100%"}:{},w=`${t.style}`,x=c()?{margin:"0 auto",width:"min-content"}:{};return p!==v.e&&P(m,v.e=p),v.t=Jn(_,f,v.t),w!==v.a&&P(_,v.a=w),v.o=Jn(g,x,v.o),v},{e:void 0,t:void 0,a:void 0,o:void 0}),m})()};$e(["click"]);const fh="_carouselHeader_1qtqp_1",mh="_carousel_1qtqp_1",ph="_carouselSlides_1qtqp_24",gh="_carouselSlide_1qtqp_24",vh="_carouselButton_1qtqp_37",Ze={carouselHeader:fh,carousel:mh,carouselSlides:ph,carouselSlide:gh,carouselButton:vh};var yh=S("<div>No Elements Found"),bh=S("<div><div><div><div></div></div></div><div>");const la=t=>{const[e,n]=L(0),r=()=>{e()!==t.elements.length-1?n(a=>a+1):n(0)},s=()=>{e()!==0?n(a=>a-1):n(t.elements.length-1)},i=V(()=>t.elements.length>0?t.elements[e()].name:"No Elements Found"),o=V(()=>t.elements.length>0?t.elements[e()].element:yh());return(()=>{var a=bh(),l=a.firstChild,c=l.firstChild,u=c.firstChild,h=l.nextSibling;return y(l,b($s,{get class(){return`${Ze.carouselButton}`},"on:click":s,children:""}),c),y(u,i),y(l,b($s,{get class(){return`${Ze.carouselButton} `},"on:click":r,children:""}),null),y(h,o),O(d=>{var m=`${Ze.carousel}`,_=`${Ze.carouselHeader}`,g=`${Ze.carouselSlides} ${Ze.header}`,v=`${Ze.carouselSlide}`,p=`${Ze.carouselSlide}`;return m!==d.e&&P(a,d.e=m),_!==d.t&&P(l,d.t=_),g!==d.a&&P(c,d.a=g),v!==d.o&&P(u,d.o=v),p!==d.i&&P(h,d.i=p),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a})()};var _h=S("<div>Element 1"),wh=S("<div>Element 2"),$h=S("<div>Element 3"),Sh=S("<div>Element 4"),xh=S("<div><h1>Homebrew");const kh=()=>{const t=te(),e=[{name:"Element A",element:_h()},{name:"Element 2",element:wh()},{name:"Element fred",element:$h()},{name:"Elem fff",element:Sh()}];return(()=>{var n=xh();return n.firstChild,y(n,b(la,{elements:e}),null),O(()=>P(n,`${t.accent}`)),n})()},Ch="_sidebar_kzjue_1",Eh="_body_kzjue_27",Ph="_bodyMenu_kzjue_48",Ss={sidebar:Ch,body:Eh,bodyMenu:Ph};var Ah=S("<div><ul>"),Oh=S("<li><a>");const xt=()=>{const t=te(),[e,n]=L([]);return n([{Name:"Classes",Link:"/homebrew/create/classes"},{Name:"Race",Link:"/homebrew/create/races"},{Name:"Backgrounds",Link:"/homebrew/create/backgrounds"},{Name:"Feats",Link:"/homebrew/create/feats"},{Name:"Spell",Link:"/homebrew/create/spells"},{Name:"Items",Link:"/homebrew/create/items"}]),(()=>{var r=Ah(),s=r.firstChild;return y(s,b(F,{get each(){return e()},children:i=>(()=>{var o=Oh(),a=o.firstChild;return y(a,()=>i.Name),O(l=>{var c=`${t.hover}`,u=i.Link;return c!==l.e&&P(o,l.e=c),u!==l.t&&Ge(a,"href",l.t=u),l},{e:void 0,t:void 0}),o})()})),O(()=>P(r,`${t.accent} ${Ss.sidebar}`)),r})()};var Rh=S("<div><h1>Create</h1><div>"),Bh=S("<a><div><p>"),Ih=S("<div>");const Th=()=>{const t=te(),e=[{name:"Classes"},{name:"Races"},{name:"Backgrounds"},{name:"Feats"},{name:"Spells"},{name:"Items"}],[n,r]=L(e);return[b(xt,{}),(()=>{var s=Rh(),i=s.firstChild,o=i.nextSibling;return y(o,b(F,{get each(){return n()},children:(a,l)=>[(()=>{var c=Bh(),u=c.firstChild,h=u.firstChild;return y(h,()=>a.name),O(d=>{var m=`${t.accent}`,_=`/homebrew/create/${a.name.toLowerCase()}`,g=`${t.hover}`;return m!==d.e&&P(c,d.e=m),_!==d.t&&Ge(c,"href",d.t=_),g!==d.a&&P(u,d.a=g),d},{e:void 0,t:void 0,a:void 0}),c})(),b(N,{get when(){return l()===2},get children(){var c=Ih();return c.style.setProperty("height","0"),c.style.setProperty("flex-basis","100%"),c}})]})),O(a=>{var l=`${t.accent} ${Ss.body}`,c=`${Ss.bodyMenu} `;return l!==a.e&&P(s,a.e=l),c!==a.t&&P(o,a.t=c),a},{e:void 0,t:void 0}),s})()]};var Lh=S("<div><h1>View");const Dh=()=>{const t=te();return(()=>{var e=Lh();return O(()=>P(e,`${t.accent}`)),e})()},jh="_body_p2t3d_1",Nh={body:jh};var Kh=S("<div><h1>classes");const Fh=()=>{const t=te();return[b(xt,{}),(()=>{var e=Kh();return O(()=>P(e,`${t.accent} ${Nh.body}`)),e})()]},Mh="_body_p2t3d_1",qh={body:Mh};var Vh=S("<div><h1>items");const Uh=()=>{const t=te();return[b(xt,{}),(()=>{var e=Vh();return O(()=>P(e,`${t.accent} ${qh.body}`)),e})()]},Wh="_body_1vcxj_1",zh="_name_1vcxj_22",Hh="_featHomebrew_1vcxj_26",Yh="_featName_1vcxj_1",Gh="_removeChipButton_1vcxj_40",Xh="_preRequisites_1vcxj_47",Jh="_Description_1vcxj_61",Qh="_chipBar_1vcxj_75",Ot={body:Wh,name:zh,featHomebrew:Hh,featName:Yh,removeChipButton:Gh,preRequisites:Xh,Description:Jh,chipBar:Qh},ca=()=>{const t=na();return V(()=>[...t()])},J=new ta("homebrew"),[Ci,Zh]=L([]),ua=()=>{const t=sa(),e=U.toObservable(J.feats.toArray());return Ci().length===0&&e.pipe(H(1),me(r=>{r.length>0&&Zh(r)})).subscribe(),V(()=>[...t(),...Ci()])};class ed{classes;setClasses;homebrewClasses$=U.toObservable(J.classes.toArray());items;setItems;homebrewItems$=U.toObservable(J.items.toArray());feats;setFeats;homebrewFeats$=U.toObservable(J.feats.toArray());spells;setSpells;homebrewSpells$=U.toObservable(J.spells.toArray());backgrounds;setBackgrounds;homebrewBackgrounds$=U.toObservable(J.backgrounds.toArray());races;setRaces;homebrewRaces$=U.toObservable(J.races.toArray());constructor(e=[],n=[],r=[],s=[],i=[],o=[]){[this.classes,this.setClasses]=L(e),[this.items,this.setItems]=L(n),[this.feats,this.setFeats]=L(r),[this.spells,this.setSpells]=L(s),[this.backgrounds,this.setBackgrounds]=L(i),[this.races,this.setRaces]=L(o),this.homebrewClasses$.pipe(H(1),me(a=>this.setClasses(l=>[...l,...a]))).subscribe(),this.homebrewItems$.pipe(H(1),me(a=>this.setItems(l=>[...l,...a]))).subscribe(),this.homebrewFeats$.pipe(H(1),me(a=>this.setFeats(l=>[...l,...a]))).subscribe(),this.homebrewSpells$.pipe(H(1),me(a=>this.setSpells(l=>[...l,...a]))).subscribe(),this.homebrewBackgrounds$.pipe(H(1),me(a=>this.setBackgrounds(l=>[...l,...a]))).subscribe(),this.homebrewRaces$.pipe(H(1),me(a=>this.setRaces(l=>[...l,...a]))).subscribe()}addClass=e=>{this.classes().findIndex(n=>n.name===e.name)===-1&&(this.setClasses(n=>[...n,e]),this.addClassToDB(e).subscribe())};addClassToDB=e=>U.toObservable(J.classes.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add class to LocalDb",n),Q(null))));updateClass(e){const n=this.classes().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.classes();r[n]=e,this.setClasses([...r])}updateClassesInDB=()=>{this.homebrewClasses$.pipe(H(1),ie(e=>U.toObservable(J.classes.bulkPut(this.classes())))).subscribe()};removeClass=e=>{const n=this.classes().findIndex(s=>s.name===e);if(n===-1)return;const r=this.classes();r.splice(n,1),this.setClasses([...r]),U.toObservable(J.classes.clear()).pipe(H(1),ie(()=>U.toObservable(J.classes.bulkAdd(this.classes())))).subscribe()};addItem=e=>{this.items().findIndex(n=>n.name===e.name)===-1&&(this.setItems(n=>[...n,e]),this.addItemToDB(e).subscribe())};addItemToDB=e=>U.toObservable(J.items.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add item to LocalDb",n),Q(null))));updateItem=e=>{const n=this.items().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.items();r[n]=e,this.setItems([...r])};updateItemsInDB=()=>{this.homebrewItems$.pipe(H(1),ie(e=>U.toObservable(J.items.bulkPut(this.items())))).subscribe()};removeItem=e=>{const n=this.items().findIndex(s=>s.name===e);if(n===-1)return;const r=this.items();r.splice(n,1),this.setItems([...r]),U.toObservable(J.items.clear()).pipe(H(1),ie(()=>U.toObservable(J.items.bulkAdd(this.items())))).subscribe()};addFeat=e=>{this.feats().findIndex(n=>n.name===e.name)===-1&&(this.setFeats(n=>[...n,e]),this.addFeatToDB(e).subscribe())};addFeatToDB=e=>U.toObservable(J.feats.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add feat to LocalDb",n),Q(null))));updateFeat=e=>{const n=this.feats().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.feats();r[n]=e,this.setFeats([...r])};updateFeatsInDB=()=>{this.homebrewFeats$.pipe(H(1),ie(e=>U.toObservable(J.feats.bulkPut(this.feats())))).subscribe()};removeFeat=e=>{const n=this.feats().findIndex(s=>s.name===e);if(n===-1)return;const r=this.feats();r.splice(n,1),this.setFeats([...r]),U.toObservable(J.feats.clear()).pipe(H(1),ie(()=>U.toObservable(J.feats.bulkAdd(this.feats())))).subscribe()};addSpell=e=>{this.spells().findIndex(n=>n.name===e.name)===-1&&(this.setSpells(n=>[...n,e]),this.addSpellToDB(e).subscribe())};addSpellToDB=e=>U.toObservable(J.spells.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add spell to LocalDb",n),Q(null))));updateSpell=e=>{const n=this.spells().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.spells();r[n]=e,this.setSpells([...r])};updateSpellsInDB=()=>{this.homebrewSpells$.pipe(H(1),ie(e=>U.toObservable(J.spells.bulkPut(this.spells())))).subscribe()};removeSpell=e=>{const n=this.spells().findIndex(s=>s.name===e);if(n===-1)return;const r=this.spells();r.splice(n,1),this.setSpells([...r]),U.toObservable(J.spells.clear()).pipe(H(1),ie(()=>U.toObservable(J.spells.bulkAdd(this.spells())))).subscribe()};addBackground=e=>{this.backgrounds().findIndex(n=>n.name===e.name)===-1&&(this.setBackgrounds(n=>[...n,e]),this.addBackgroundToDB(e).subscribe())};addBackgroundToDB=e=>U.toObservable(J.backgrounds.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add background to LocalDb",n),Q(null))));updateBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.backgrounds();r[n]=e,this.setBackgrounds([...r]),this.updateBackgroundsInDB()};updateBackgroundsInDB=()=>{this.homebrewBackgrounds$.pipe(H(1),ie(e=>U.toObservable(J.backgrounds.bulkPut(this.backgrounds())))).subscribe()};removeBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e);if(n===-1)return;const r=this.backgrounds();r.splice(n,1),this.setBackgrounds([...r]),U.toObservable(J.backgrounds.clear()).pipe(H(1),ie(()=>U.toObservable(J.backgrounds.bulkAdd(this.backgrounds())))).subscribe()};addRace=e=>{this.races().findIndex(n=>n.name===e.name)===-1&&(this.setRaces(n=>[...n,e]),this.addRaceToDB(e).subscribe())};addRaceToDB=e=>U.toObservable(J.races.add(e)).pipe(H(1),Ae(n=>(console.error("Failed to add race to db",n),Q(null))));updateRace=e=>{const n=this.races().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.races();r[n]=e,this.setRaces([...r]),this.updateRacesInDB().subscribe()};updateRacesInDB=()=>this.homebrewRaces$.pipe(H(1),ie(e=>U.toObservable(J.races.bulkPut(this.races()))));removeRace=e=>{const n=this.races().findIndex(s=>s.name===e);if(n===-1)return;const r=this.races().splice(n,1);this.setRaces([...r]),U.toObservable(J.races.clear()).pipe(H(1),ie(()=>U.toObservable(J.races.bulkAdd(this.races())))).subscribe()}}const td="_input_104f5_1",nd="_error_104f5_12",rd="_success_104f5_15",sd="_warning_104f5_18",id="_info_104f5_21",od="_disabled_104f5_24",ad={input:td,error:nd,success:rd,warning:sd,info:id,disabled:od};var ld=S("<input>");const Or=t=>(()=>{var e=ld();return Qe(e,De(t,{get class(){return`${ad.input} ${t.class??""}`}}),!1,!1),e})(),ha={};var cd=S("<option>");const Pe=t=>(()=>{var e=cd();return Qe(e,De(t,{get class(){return`${ha.option} ${t.class??""}`}}),!1,!1),e})();var ud=S("<select>");const Pn=t=>(()=>{var e=ud();return Qe(e,De(t,{get class(){return`${ha.select} ${t.class??""}`}}),!1,!0),y(e,b(N,{get when(){return!t.disableUnselected},get children(){return b(Pe,{children:"--------"})}}),null),y(e,()=>t.children,null),e})(),hd="_Chip_16zia_1",dd="_removeChipButton_16zia_9",Ei={Chip:hd,removeChipButton:dd};var fd=S("<button>X"),md=S("<span> : ");const Pi=t=>{const e=te();return(()=>{var n=md(),r=n.firstChild;return y(n,()=>t.key,r),y(n,()=>t.value,null),y(n,b(N,{get when(){return!!t.remove},get children(){var s=fd();return hr(s,"click",t.remove,!0),O(()=>P(s,`${e.hover} ${Ei.removeChipButton}`)),s}}),null),O(()=>P(n,`${e.tertiary} ${Ei.Chip} ${t.class??""}`)),n})()};$e(["click"]);var An=S("<div>"),pd=S("<div><h1>Feats</h1><div class=featHomebrew><div><h2>Add Name</h2></div><div><h2>Add Pre-Requisites</h2><div><button>Add</button></div><div></div></div><div><h2>Description</h2><textarea id=featDescription name=featDescription></textarea></div><button>Add Feat"),rt=(t=>(t[t.AbilityScore=0]="AbilityScore",t[t.Class=1]="Class",t[t.CharacterLevel=2]="CharacterLevel",t[t.ClassArray=3]="ClassArray",t))(rt||{});const gd=()=>{const t=te(),e=ca();ua();const n=new ed,r=new zl({}),[s,i]=L([]),[o,a]=L(0),[l,c]=L(""),[u,h]=L("str"),[d,m]=L("0"),[_,g]=L(""),[v,p]=L(!1),f=()=>{i([]),a(0),c(""),h("str"),m("0"),g("")},w=x=>{switch(o()){case 0:i($=>[...$,{info:{className:"",subclassName:"",level:0,type:rt[0],other:""},name:u(),value:d()}]);break;case 1:i($=>[...$,{info:{className:"",subclassName:"",level:0,type:rt[1],other:""},name:u(),value:d()}]);break;case 2:i($=>[...$,{info:{className:"",subclassName:"",level:0,type:rt[2],other:""},name:u(),value:d()}]);break}};return O(()=>{switch(o()){case 0:h("STR"),m("0");break;case 1:h("Class"),m("Barbarian");break;case 2:h("Barbarian"),m("0");break;case 3:h(""),m("");break}}),O(()=>{const x={};x.name=l(),x.preReqs=s(),x.desc=[_()],r.next(x)}),O(()=>{v()&&(n.addFeat(r.value),p(!1),f())}),[b(xt,{}),(()=>{var x=pd(),$=x.firstChild,E=$.nextSibling,k=E.firstChild;k.firstChild;var R=k.nextSibling,C=R.firstChild,D=C.nextSibling,B=D.firstChild,A=D.nextSibling,I=R.nextSibling,q=I.firstChild,re=q.nextSibling,ae=I.nextSibling;return y(k,b(Or,{type:"text",id:"featName",get value(){return l()},onChange:j=>c(j.currentTarget.value)}),null),y(D,b(Pn,{get value(){return o()},onChange:j=>a(()=>+j.currentTarget.value),disableUnselected:!0,get children(){return[b(Pe,{get value(){return 0},children:"Ability Score"}),b(Pe,{get value(){return 1},children:"Class"}),b(Pe,{get value(){return 2},children:"Class Level"}),b(Pe,{get value(){return 3},children:"Classes"})]}}),B),y(D,b(Xn,{get children(){return[b(Oe,{get when(){return o()===0},get children(){var j=An();return y(j,b(Pn,{onChange:z=>h(z.currentTarget.value),get children(){return[b(Pe,{value:"STR",children:"Strength"}),b(Pe,{value:"DEX",children:"Dexterity"}),b(Pe,{value:"CON",children:"Constitution"}),b(Pe,{value:"INT",children:"Intelligence"}),b(Pe,{value:"WIS",children:"Wisdom"}),b(Pe,{value:"CHA",children:"Charisma"})]}}),null),y(j,b(Or,{type:"number",onChange:z=>m(z.currentTarget.value)}),null),j}}),b(Oe,{get when(){return o()===1},get children(){var j=An();return y(j,b(Pn,{onChange:z=>{h("Class"),m(z.currentTarget.value)},get children(){return b(F,{get each(){return e()},children:z=>b(Pe,{get value(){return z.name},get children(){return z.name}})})}})),j}}),b(Oe,{get when(){return o()===2},get children(){var j=An();return y(j,b(Pn,{onChange:z=>h(z.currentTarget.value),get children(){return b(F,{get each(){return e()},children:z=>b(Pe,{get value(){return z.name},get children(){return z.name}})})}}),null),y(j,b(Or,{type:"number",onChange:z=>m(z.currentTarget.value)}),null),j}}),b(Oe,{get when(){return o()===3},get children(){return An()}})]}}),B),B.$$click=w,y(A,b(Pi,{get key(){return u()},get value(){return d()}}),null),y(A,b(F,{get each(){return s()},children:(j,z)=>b(Pi,{get key(){return j.name},get value(){return j.value},remove:()=>i(ce=>ce.filter((Be,Ke)=>Ke!==z()))})}),null),re.addEventListener("change",j=>g(j.currentTarget.value)),ae.$$click=()=>p(!0),O(j=>{var z=`${t.accent} ${Ot.body}`,ce=`${Ot.name}`,Be=`${Ot.preRequisites}`,Ke=s().length>=10,Ht=`${Ot.chipBar}`,kt=`${Ot.Description}`,W=`${Ot.addButton}`;return z!==j.e&&P(x,j.e=z),ce!==j.t&&P(k,j.t=ce),Be!==j.a&&P(R,j.a=Be),Ke!==j.o&&(B.disabled=j.o=Ke),Ht!==j.i&&P(A,j.i=Ht),kt!==j.n&&P(I,j.n=kt),W!==j.s&&P(ae,j.s=W),j},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),O(()=>re.value=_()),x})()]};$e(["click"]);const vd="_body_p2t3d_1",yd={body:vd};var bd=S("<div><h1>backgrounds");const _d=()=>{const t=te();return[b(xt,{}),(()=>{var e=bd();return O(()=>P(e,`${t.accent} ${yd.body}`)),e})()]},wd="_body_p2t3d_1",$d={body:wd};var Sd=S("<div><h1>spells");const xd=()=>{const t=te();return[b(xt,{}),(()=>{var e=Sd();return O(()=>P(e,`${t.accent} ${$d.body}`)),e})()]},kd="_body_p2t3d_1",Cd={body:kd};var Ed=S("<div><h1>races");const Pd=()=>{const t=te();return[b(xt,{}),(()=>{var e=Ed();return O(()=>P(e,`${t.accent} ${Cd.body}`)),e})()]},Ad="_SpellsBody_ump1u_1",Od="_materials_needed_ump1u_1",Rd="_TableRow_ump1u_32",Bd="_headerBar_ump1u_64",Rr={SpellsBody:Ad,materials_needed:Od,TableRow:Rd,headerBar:Bd},Id="_TableRow_41syk_1",Td={TableRow:Id};var Ld=S("<td><strong>Materials:</strong> "),Dd=S("<td><strong>higher levels:"),jd=S("<td><textarea></textarea>"),Nd=S("<tr><td><h2><strong></strong></h2></td><td><strong>Level:</strong> </td><td><strong>School:</strong> </td><td><strong>Casting time:</strong> </td><td><strong>Range:</strong> </td><td><strong>Components:</strong> </td><td><strong>Duration:</strong> </td><td><strong>Classes:</strong> </td><td><strong>Subclasses:</strong> </td><td><strong>Description:</strong></td><td><textarea name=spell_desc>");const Kd=t=>{const e=t.spell.isMaterial,n=t.spell.isSomatic,r=t.spell.isVerbal;function s(){let o=[],a=[];return r&&o.push("V"),n&&o.push("S"),e&&o.push("M"),a.push(o.join(", ")),e&&a.push(t.spell.materials_Needed),a}let i=s();return(()=>{var o=Nd(),a=o.firstChild,l=a.firstChild,c=l.firstChild,u=a.nextSibling,h=u.firstChild;h.nextSibling;var d=u.nextSibling,m=d.firstChild;m.nextSibling;var _=d.nextSibling,g=_.firstChild;g.nextSibling;var v=_.nextSibling,p=v.firstChild;p.nextSibling;var f=v.nextSibling,w=f.firstChild;w.nextSibling;var x=f.nextSibling,$=x.firstChild;$.nextSibling;var E=x.nextSibling,k=E.firstChild;k.nextSibling;var R=E.nextSibling,C=R.firstChild;C.nextSibling;var D=R.nextSibling,B=D.nextSibling,A=B.firstChild;return y(c,()=>t.spell.name),y(u,()=>t.spell.level,null),y(d,()=>t.spell.school,null),y(_,()=>t.spell.castingTime,null),y(v,()=>t.spell.range,null),y(f,()=>i[0],null),y(o,b(N,{when:e,get children(){var I=Ld(),q=I.firstChild;return q.nextSibling,y(I,()=>i[1],null),I}}),x),y(x,()=>t.spell.duration,null),y(E,()=>t.spell.classes.join(", "),null),y(R,()=>t.spell.subClasses.join(", "),null),y(A,()=>t.spell.desc),y(o,b(N,{get when(){return!!t.spell.higherLevel},get children(){return Dd()}}),null),y(o,b(N,{get when(){return!!t.spell.higherLevel},get children(){var I=jd(),q=I.firstChild;return y(q,()=>t.spell.higherLevel),I}}),null),O(()=>P(o,`${Td.TableRow}`)),o})()};var Fd=S("<div><button></button><button></button><select></select><span> / </span><button></button><button>"),Md=S("<option>");const da=t=>{const[e,n]=L(1),[r,s]=L(10),i=t.setPaginatedItems,o=te(),a=V(()=>t.items().slice((e()-1)*r(),e()*r())),l=V(()=>Math.ceil(t.items().length/r())),c=[10,20,50,100];return O(()=>{e()>l()&&n(l())}),O(()=>{i(a())}),(()=>{var u=Fd(),h=u.firstChild,d=h.nextSibling,m=d.nextSibling,_=m.nextSibling,g=_.firstChild,v=_.nextSibling,p=v.nextSibling;return h.$$click=()=>n(1),d.$$click=()=>n(e()-1),m.addEventListener("change",f=>s(+f.currentTarget.value)),y(m,b(F,{each:c,children:f=>(()=>{var w=Md();return w.value=f,y(w,f),w})()})),y(_,e,g),y(_,l,null),v.$$click=()=>n(e()+1),p.$$click=()=>n(l()),O(f=>{var w=`${o.accent} `,x=e()===1,$=e()===1,E=e()===l(),k=e()===l();return w!==f.e&&P(u,f.e=w),x!==f.t&&(h.disabled=f.t=x),$!==f.a&&(d.disabled=f.a=$),E!==f.o&&(v.disabled=f.o=E),k!==f.i&&(p.disabled=f.i=k),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u})()};$e(["click"]);const qd="_chip_1bifh_1",Vd={chip:qd};var Ud=S("<span> : <!> <button>x");const Wd=t=>{const e=te();return(()=>{var n=Ud(),r=n.firstChild,s=r.nextSibling,i=s.nextSibling,o=i.nextSibling;return y(n,()=>t.key,r),y(n,()=>t.value,s),hr(o,"click",t.clear,!0),O(()=>P(n,`${e.tertiary} ${Vd.chip}`)),n})()};$e(["click"]);const zd="_searchBar_176b5_1",Hd="_booleanSelect_176b5_39",Yd="_chipBar_176b5_67",Br={searchBar:zd,booleanSelect:Hd,chipBar:Yd};var Gd=S("<button>Clear All");const Xd=t=>{const e=te();return(()=>{var n=Gd();return hr(n,"click",t.clear,!0),O(()=>P(n,`${e.accent}`)),n})()};$e(["click"]);function Ir(t){return t.replace(/[_-]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}var Jd=S("<select>"),Qd=S("<select><option value=0>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option><option value=9>9"),Ai=S('<input id=searchBar placeholder="Search Spells..."type=text>'),Zd=S("<div id=booleanBar><span><label for=falsebox></label><input type=checkbox id=booleanCheckbox>"),ef=S("<div>"),tf=S("<div><div><span><select id=chipDropdown>"),Oi=S("<option>"),nf=S('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const rf=t=>{const[e,n]=L({key:"",value:""}),[r,s]=L("name"),[i,o]=L(""),[a,l]=L(!1),[c,u]=L([]);L(!1),te(),document.getElementById("booleanCheckbox");const h=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"];O(()=>{t.setSearchResults(t.spellsSrd().filter(m=>m&&c().length>0?!c().map(g=>{const v=m[g.key];if(v)switch(!0){case typeof v=="string":return v.toLowerCase().includes(g.value.toLowerCase());case Array.isArray(v):return v.join(" ").toLowerCase().includes(g.value.toLowerCase());case typeof v=="boolean":return` ${v} `.toLowerCase().includes(g.value.toLowerCase())}return!1}).includes(!1):!0))}),O(()=>{typeof t.spellsSrd()[0][r()]=="boolean"&&o(`${a()}`)}),O(()=>{u(m=>e().key?[...m,e()]:m),o(""),document.getElementById("searchBar")&&(document.getElementById("searchBar").value="")});const d=m=>{switch(m){case"name":return"Name";case"level":return"Level";case"school":return"School";case"castingTime":return"Casting Time";case"range":return"Range";case"duration":return"Duration";case"concentration":return"Conc";case"ritual":return"Ritual";case"damageType":return"Dmg Type";case"isMaterial":return"Material";case"isSomatic":return"Somatic";case"isVerbal":return"Verbal";case"classes":return"Classes";case"desc":return"Desc";case"subClasses":return"Subclasses"}};return(()=>{var m=tf(),_=m.firstChild,g=_.firstChild,v=g.firstChild;return y(_,b(sf,{onClick:()=>n(p=>({key:r(),value:Ir(i())}))}),g),v.addEventListener("change",p=>s(p.target.value)),y(v,b(F,{get each(){return Object.keys(t.spellsSrd()[0]).filter(p=>!["materials_Needed","higherLevel","page"].includes(p))},children:p=>(()=>{var f=Oi();return f.value=p,y(f,()=>d(p)),f})()})),y(_,b(Xn,{get children(){return[b(Oe,{get when(){return typeof t.spellsSrd()[0][r()]=="string"},get children(){return b(Xn,{get fallback(){return(()=>{var p=Ai();return p.$$keydown=f=>{f.key==="Enter"&&n(w=>({key:r(),value:Ir(f.currentTarget.value)}))},p.addEventListener("change",f=>o(f.currentTarget.value)),O(()=>p.value=i()),p})()},get children(){return[b(Oe,{get when(){return r()==="school"},get children(){var p=Jd();return p.addEventListener("change",f=>o(f.currentTarget.value)),y(p,b(F,{each:h,children:f=>(()=>{var w=Oi();return w.value=f,y(w,f),w})()})),p}}),b(Oe,{get when(){return r()==="level"},get children(){var p=Qd();return p.addEventListener("change",f=>o(f.currentTarget.value)),p}})]}})}}),b(Oe,{get when(){return Array.isArray(t.spellsSrd()[0][r()])},get children(){var p=Ai();return p.$$keydown=f=>{f.key==="Enter"&&n(w=>({key:r(),value:Ir(f.currentTarget.value)}))},p.addEventListener("change",f=>o(f.currentTarget.value)),O(()=>p.value=i()),p}}),b(Oe,{get when(){return typeof t.spellsSrd()[0][r()]=="boolean"},get children(){var p=Zd(),f=p.firstChild,w=f.firstChild,x=w.nextSibling;return y(w,b(N,{get when(){return a()===!1},children:"false"}),null),y(w,b(N,{get when(){return a()===!0},children:"true"}),null),x.addEventListener("change",()=>{l(!a()),o(`${a()}`)}),O(()=>P(p,`${Br.booleanSelect}`)),O(()=>x.checked=a()),p}})]}}),null),y(m,b(N,{get when(){return c().length>0},get children(){var p=ef();return y(p,b(Xd,{clear:()=>u([])}),null),y(p,b(F,{get each(){return c()},children:(f,w)=>b(Wd,{get key(){return d(f.key)??""},get value(){return f.value},clear:()=>u(x=>x.filter(($,E)=>E!==w()))})}),null),O(()=>P(p,`${Br.chipBar}`)),p}}),null),O(()=>P(_,`${Br.searchBar}`)),m})()},sf=t=>(()=>{var e=nf();return Qe(e,De(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();$e(["keydown"]);const of=()=>{const t=ra();return V(()=>[...t()])};var af=S("<div><h1>Spells</h1><table><tbody></tbody></table><div>"),lf=S("<span><i>"),cf=S("<tr><td><span><span></span><span><i></i></span></span><span></span></td><td><button>"),uf=S("<hr>");const hf=()=>{const t=te(),e=of(),[n,r]=L([]),[s,i]=L([]),[o,a]=L([]),l=h=>c(h)?r(n().filter(d=>d!==h)):r([...n(),h]),c=h=>n().includes(h),u=h=>{switch(h){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${h}th`}};return(()=>{var h=af(),d=h.firstChild,m=d.nextSibling,_=m.firstChild,g=m.nextSibling;return y(h,b(rf,{searchResults:o,setSearchResults:a,spellsSrd:e}),m),y(_,b(F,{get each(){return s()},children:(v,p)=>[(()=>{var f=cf(),w=f.firstChild,x=w.firstChild,$=x.firstChild,E=$.nextSibling,k=E.firstChild,R=x.nextSibling,C=w.nextSibling,D=C.firstChild;return y($,()=>v.name),y(k,()=>v.school),y(x,b(N,{get when(){return v.concentration},get children(){var B=lf(),A=B.firstChild;return y(A,()=>v.duration),B}}),null),y(R,()=>u(v.level)),D.$$click=()=>l(p()),y(D,()=>c(p())?"":""),O(B=>{var A=`${Rr.TableRow}`,I=Rr.headerBar;return A!==B.e&&P(f,B.e=A),I!==B.t&&P(w,B.t=I),B},{e:void 0,t:void 0}),f})(),b(N,{get when(){return c(p())},get children(){return b(Kd,{spell:v})}}),uf()]})),y(g,b(da,{items:o,setPaginatedItems:i})),O(v=>{var p=`${t.accent} ${Rr.SpellsBody}`,f=`${t.table}`;return p!==v.e&&P(h,v.e=p),f!==v.t&&P(m,v.t=f),v},{e:void 0,t:void 0}),h})()};$e(["click"]);const df="_featsList_1hcnd_1",ff="_PreReqsBar_1hcnd_17",mf="_body_1hcnd_29",Tr={featsList:df,PreReqsBar:ff,body:mf},pf="_searchBar_md17x_1",Ri={searchBar:pf};var gf=S("<div><input type=text><button>"),vf=S('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const fa=t=>{const[e,n]=L(""),r=()=>{const s=e().toLowerCase(),i=t.dataSource().filter(o=>s.trim().length===0?!0:JSON.stringify(o).toLowerCase().includes(s.trim()));t.setResults(i)};return(()=>{var s=gf(),i=s.firstChild,o=i.nextSibling;return i.addEventListener("submit",()=>r()),i.addEventListener("change",a=>n(a.currentTarget.value)),Qe(i,De(t,{get class(){return`${Ri.input} ${t.class??""}`}}),!1,!1),o.$$click=r,y(o,b(yf,{})),O(a=>{var l=Ri.searchBar,c=t.tooltip??"Search!";return l!==a.e&&P(s,a.e=l),c!==a.t&&Ge(o,"title",a.t=c),a},{e:void 0,t:void 0}),s})()},yf=t=>(()=>{var e=vf();return Qe(e,De(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();$e(["click"]);var bf=S("<div><div><h1>Feats</h1><div></div><ol>"),_f=S("<li> <button></button>"),Bi=S("<div>"),Ii=S("<br>"),wf=S("<div>Description:"),Lr=S("<span>"),$f=S("<div>Ability Score Requirement: "),Sf=S("<span> of "),xf=S("<div>Class Requirement:"),kf=S("<div>class level Requirement:"),Cf=S("<span> "),Ef=S("<div>classes Requirement:");const Pf=()=>{const[t,e]=L([]),[n,r]=L([]),s=V(()=>n().length===0?t():n()),[i,o]=L([]),a=h=>i().includes(h),l=h=>a(h)?o(i().filter(d=>d!==h)):o([...i(),h]),c=te(),u=ua();return(()=>{var h=bf(),d=h.firstChild,m=d.firstChild,_=m.nextSibling,g=_.nextSibling;return _.style.setProperty("height","5vh"),_.style.setProperty("width","35%"),y(_,b(fa,{placeholder:"Search Feats...",dataSource:u,setResults:r})),y(g,b(F,{get each(){return s()},children:(v,p)=>[(()=>{var f=_f(),w=f.firstChild,x=w.nextSibling;return y(f,()=>v.name,w),x.$$click=()=>l(p()),y(x,()=>a(p())?"":""),f})(),b(N,{get when(){return a(p())},get children(){return[(()=>{var f=Bi();return y(f,b(F,{get each(){return v.preReqs},children:w=>(()=>{var x=Bi();return y(x,b(Xn,{get children(){return[b(Oe,{get when(){return w.info.type===rt[0]},get children(){return[$f(),(()=>{var $=Sf(),E=$.firstChild;return y($,()=>w.name,E),y($,()=>w.value,null),$})()]}}),b(Oe,{get when(){return w.info.type===rt[1]},get children(){return[xf(),(()=>{var $=Lr();return y($,()=>w.value),$})()]}}),b(Oe,{get when(){return w.info.type===rt[2]},get children(){return[kf(),(()=>{var $=Cf(),E=$.firstChild;return y($,()=>w.name,E),y($,()=>w.value,null),$})()]}}),b(Oe,{get when(){return w.info.type===rt[3]},get children(){return[Ef(),(()=>{var $=Lr();return y($,()=>w.name),$})()]}})]}})),x})()})),O(()=>P(f,`${Tr.PreReqsBar}`)),f})(),Ii(),wf(),(()=>{var f=Lr();return y(f,b(F,{get each(){return v.desc},children:(w,x)=>[w,Ii()]})),f})()]}})]})),y(d,b(da,{items:u,setPaginatedItems:e}),null),O(v=>{var p=`${c.accent} ${Tr.featsList}`,f=`${Tr.body}`;return p!==v.e&&P(h,v.e=p),f!==v.t&&P(d,v.t=f),v},{e:void 0,t:void 0}),h})()};$e(["click"]);const Af=()=>{const t=ia();return V(()=>[...t()])},Of="_sidebar_u5l8d_9",Rf="_sidebar_shown_u5l8d_37",Bf="_wrapper_u5l8d_43",If="_thePage_u5l8d_48",Tf="_outerStyles_u5l8d_59",Lf="_fixed_u5l8d_68",Df="_flexrow_u5l8d_82",jf="_wrap_u5l8d_43",Nf="_abilityscore_u5l8d_92",Kf="_sideBarBtn_u5l8d_99",Ff="_animate_u5l8d_113",Mf="_slidein_u5l8d_1",On={sidebar:Of,sidebar_shown:Rf,wrapper:Bf,thePage:If,outerStyles:Tf,fixed:Lf,flexrow:Df,wrap:jf,abilityscore:Nf,sideBarBtn:Kf,animate:Ff,slidein:Mf};var qf=S('<svg width=50 height=40 viewBox="0 0 50 50"xmlns=http://www.w3.org/2000/svg><path d="M 15 5 L 35 5 L 35 45 L 25 35 L 15 45 Z"fill=none stroke=white stroke-width=2>');const Vf=t=>{let e=t.styles;return(()=>{var n=qf();return O(()=>Ge(n,"class",`${e.banner}`)),n})()};var Uf=S("<div> "),Wf=S("<button>"),zf=S("<button>subraces"),Hf=S("<div>"),Yf=S("<div id=raceSideBar><div><span></span> <span></span><br>");const Gf=t=>{const[e,n]=L(!1),r=te();let s=t.dndSrdRaces,i=t.styles,o=t.toggleRow,a=t.hasIndex;const l=async c=>{const u=document.getElementById(c);u?u.scrollIntoView({behavior:"smooth"}):(console.log("element not found"),console.log(` found : ${u}`))};return[b(N,{get when(){return e()===!0},get children(){var c=Uf();return c.firstChild,y(c,b(F,{get each(){return s()},children:(u,h)=>(()=>{var d=Yf(),m=d.firstChild,_=m.firstChild,g=_.nextSibling,v=g.nextSibling;return _.$$click=()=>o(h()),y(_,b(Vf,{styles:i})),v.$$click=()=>l(u.name),y(v,()=>u.name),y(d,b(N,{get when(){return a(h())},get children(){return[" ",(()=>{var p=Hf();return y(p,b(N,{get when(){return u.subRaces.length>0},get children(){return[(()=>{var f=zf();return f.$$click=()=>l(u.subRaces[0].name),f})()," "]}})),O(()=>P(p,`${i.sidebar_shown}`)),p})()]}}),null),O(p=>{var f=`${i.sidebar}`,w=`${i.flexrow}`;return f!==p.e&&P(d,p.e=f),w!==p.t&&P(m,p.t=w),p},{e:void 0,t:void 0}),d})()}),null),O(()=>P(c,`${r.accent} ${i.fixed}`)),c}}),(()=>{var c=Wf();return c.$$click=()=>n(!e()),O(()=>P(c,`${i.sideBarBtn}`)),c})()]};$e(["click"]);const Xf="_subrace_1t2pp_1",Jf={subrace:Xf};var Qf=S("<div><h3>Sub Races"),ht=S("<br>"),Ti=S("<div>"),Zf=S("<span>languages:"),Dr=S("<span>"),em=S("<h3>languages to choose from"),tm=S("<div><span>name: </span><br><br><span>Ability Score increases:</span><br>"),nm=S("<span><br><span></span> <span></span><br>"),rm=S("<span>: ");const sm=t=>{te();let e=t.race;return b(N,{get when(){return e.subRaces.length>0},get children(){return b(Nt,{get children(){return[Qf(),(()=>{var n=Ti();return y(n,b(N,{get when(){return e.subRaces.length>0},get children(){return[ht(),(()=>{var r=Ti();return y(r,b(F,{get each(){return e.subRaces},children:s=>[(()=>{var i=tm(),o=i.firstChild;o.firstChild;var a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling;return y(o,()=>s.name,null),y(i,b(N,{get when(){return s.abilityBonuses.length>0},get children(){return b(F,{get each(){return s.abilityBonuses},children:h=>(()=>{var d=nm(),m=d.firstChild,_=m.nextSibling,g=_.nextSibling,v=g.nextSibling;return y(_,()=>h.name),y(v,()=>h.value),d})()})}}),u),y(i,b(N,{get when(){return s.traits.length>0},get children(){return b(F,{get each(){return s.traits},children:h=>[ht(),(()=>{var d=rm(),m=d.firstChild;return y(d,()=>h.name,m),d})(),ht(),(()=>{var d=Dr();return y(d,()=>h.value),d})(),ht()]})}}),u),y(i,b(N,{get when(){return s.languages.length>0},get children(){return[Zf(),ht(),(()=>{var h=Dr();return y(h,()=>s.languages.join(", ")),h})()]}}),null),y(i,b(N,{get when(){return s.languageChoice.choices.length>0},get children(){return[em(),b(F,{get each(){return s.languageChoice.choices},children:h=>[(()=>{var d=Dr();return y(d,h),d})(),ht()]})]}}),null),O(h=>{var d=`${s.name}`,m=`${Jf.subrace}`;return d!==h.e&&Ge(i,"id",h.e=d),m!==h.t&&P(i,h.t=m),h},{e:void 0,t:void 0}),i})(),ht()]})),r})()]}})),n})()]}})}})};var im=S("<div>"),om=S("<div><h1></h1><h2> traits</h2><div><h3>Ability Score Increases: </h3><div></div><h3>Age:</h3><span></span><h3>Alignment:</h3><span></span><h3>Size:</h3><span></span><h3>Speed:</h3><span>ft</span><h3>Race Specific Traits:</h3><span></span><h3>Proficiencies</h3><div></div><h3>Languages:</h3><br>"),am=S("<hr>"),jr=S("<br>"),Nr=S("<span>"),lm=S("<div>: ");const cm=t=>{let e=t.styles,n=t.dndSrdRaces;return(()=>{var r=im();return y(r,b(F,{get each(){return n()},children:(s,i)=>[(()=>{var o=om(),a=o.firstChild,l=a.nextSibling,c=l.firstChild,u=l.nextSibling,h=u.firstChild,d=h.nextSibling,m=d.nextSibling,_=m.nextSibling,g=_.nextSibling,v=g.nextSibling,p=v.nextSibling,f=p.nextSibling,w=f.nextSibling,x=w.nextSibling,$=x.firstChild,E=x.nextSibling,k=E.nextSibling,R=k.nextSibling,C=R.nextSibling,D=C.nextSibling,B=D.nextSibling;return y(a,()=>s.name),y(l,()=>s.name,c),y(d,b(F,{get each(){return s.abilityBonuses},children:A=>[jr(),(()=>{var I=Nr();return y(I,()=>A.name),I})()," ",(()=>{var I=Nr();return y(I,()=>A.value),I})(),jr()]})),y(_,()=>s.age),y(v,()=>s.alignment),y(f,()=>s.sizeDescription),y(x,()=>s.speed,$),y(k,b(F,{get each(){return s.traits},children:A=>[(()=>{var I=lm(),q=I.firstChild;return y(I,()=>A.name,q),y(I,b(F,{get each(){return A.value},children:re=>(()=>{var ae=Nr();return y(ae,re),O(()=>P(ae,`${e.wrap}`)),ae})()}),null),I})(),jr()]})),y(C,()=>s.startingProficencies.map(A=>A.value).join(`
`)),y(u,()=>s.languageDesc,B),y(u,b(sm,{styles:e,race:s}),null),O(A=>{var I=`${s.name}`,q=`${e.abilityscore}`,re=`${e.wrap}`,ae=`${e.wrap}`,j=`${e.wrap}`;return I!==A.e&&Ge(a,"id",A.e=I),q!==A.t&&P(d,A.t=q),re!==A.a&&P(_,A.a=re),ae!==A.o&&P(v,A.o=ae),j!==A.i&&P(f,A.i=j),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})(),b(N,{get when(){return i()!==n().length-1},get children(){var o=am();return o.style.setProperty("width","100%"),o}})]})),O(()=>P(r,`${e.thePage}`)),r})()};var um=S("<div id=racesComp><h1>Races</h1><div>");const hm=()=>{const t=Af(),e=te(),[n,r]=L([]),s=o=>i(o)?r(n().filter(a=>a!==o)):r([...n(),o]),i=o=>n().includes(o);return O(()=>{console.log(t())}),[b(Gf,{dndSrdRaces:t,styles:On,toggleRow:s,hasIndex:i}),(()=>{var o=um(),a=o.firstChild,l=a.nextSibling;return y(l,b(cm,{styles:On,dndSrdRaces:t})),O(c=>{var u=`${e.accent} ${On.outerStyles}`,h=`${On.wrapper}`;return u!==c.e&&P(o,c.e=u),h!==c.t&&P(l,c.t=h),c},{e:void 0,t:void 0}),o})()]},dm=()=>{const t=oa();return V(()=>[...t()])},fm="_allBackgrounds_sz14l_1",mm="_backgrounds_sz14l_12",pm="_feature_sz14l_17",gm="_totalPanel_sz14l_21",vm="_body_sz14l_25",Jt={allBackgrounds:fm,backgrounds:mm,feature:pm,totalPanel:gm,body:vm};var ym=S("<div><h1>Backgrounds</h1><div></div><div></div>"),bm=S("<div>"),_m=S("<div><h2></h2><div></div><h3></h3><h3>choose: </h3><div></div><br><h3>Starting Equipment</h3><div></div><br><div></div><h3>Skill Proficiencies</h3><div>"),wm=S("<span><h3></h3><br><span>"),Qt=S("<br>"),Kr=S("<span>"),$m=S("<h3>Choose: "),Sm=S("<span> ");const xm=()=>{const t=te(),e=dm(),[n,r]=L(e()||[]),s=V(()=>n().length===0?e():n());return O(()=>{console.log("backgrounds: ",e())}),(()=>{var i=ym(),o=i.firstChild,a=o.nextSibling,l=a.nextSibling;return a.style.setProperty("width","35%"),a.style.setProperty("height","5vh"),a.style.setProperty("margin","0 auto"),y(a,b(fa,{placeholder:"Search Backgrounds...",dataSource:e,setResults:r})),l.style.setProperty("width","50%"),y(l,b(F,{get each(){return s()},children:c=>b(Nt,{styles:Jt,get children(){return[(()=>{var u=bm();return y(u,()=>c.name),u})(),(()=>{var u=_m(),h=u.firstChild,d=h.nextSibling,m=d.nextSibling,_=m.nextSibling;_.firstChild;var g=_.nextSibling,v=g.nextSibling,p=v.nextSibling,f=p.nextSibling,w=f.nextSibling,x=w.nextSibling,$=x.nextSibling,E=$.nextSibling;return y(h,()=>c.name),y(d,b(F,{get each(){return c.feature},children:k=>[(()=>{var R=wm(),C=R.firstChild,D=C.nextSibling,B=D.nextSibling;return y(C,()=>k.name),y(B,()=>k.value),O(()=>P(B,`${Jt.feature}`)),R})(),Qt()]})),y(m,()=>c.languageChoice.type),y(_,()=>c.languageChoice.choose,null),y(g,b(F,{get each(){return c.languageChoice.choices},children:k=>[(()=>{var R=Kr();return y(R,k),R})(),Qt()]})),y(f,b(F,{get each(){return c.startingEquipment},children:k=>[(()=>{var R=Kr();return y(R,()=>k.item),R})(),Qt()]})),y(x,b(F,{get each(){return c.startingEquipmentChoices},children:k=>[(()=>{var R=$m();return R.firstChild,y(R,()=>k.choose,null),R})(),b(F,{get each(){return k.choices},children:R=>[(()=>{var C=Sm(),D=C.firstChild;return y(C,()=>R.quantity,D),y(C,()=>R.item,null),C})(),Qt()]})]})),y(E,b(F,{get each(){return c.startingProficiencies},children:k=>[(()=>{var R=Kr();return y(R,()=>k.value),R})(),Qt()]})),O(()=>P(u,`${Jt.body}`)),u})()]}})})),O(c=>{var u=`${t.accent} ${Jt.allBackgrounds}`,h=`${Jt.backgrounds}`;return u!==c.e&&P(i,c.e=u),h!==c.t&&P(l,c.t=h),c},{e:void 0,t:void 0}),i})()};function km(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const Cm="_feature_fg9e7_1",Em="_table_fg9e7_5",Pm="_tableRow_fg9e7_9",Am="_tableCell_fg9e7_13",Rn={feature:Cm,table:Em,tableRow:Pm,tableCell:Am};var Om=S("<table><thead><tr><th>Level</th><th>PB</th><th>Features</th></tr></thead><tbody>"),Rm=S("<th>"),Bm=S("<tr><td></td><td></td><td>"),Im=S("<td><span>");const Tm=t=>{const e=t.Class,n=s=>{switch(t.Class().name.toLowerCase()){case"rogue":case"monk":if(!Number.isNaN(+s))return s;const i=JSON.parse(s);return`${JSON.parse(i).DiceCount}d${JSON.parse(i).DiceValue}`}return s},r=s=>t.Class().name.toLowerCase()==="sorcerer"?s.slice(1):s;return(()=>{var s=Om(),i=s.firstChild,o=i.firstChild,a=o.firstChild,l=a.nextSibling;l.nextSibling;var c=i.nextSibling;return y(o,b(F,{get each(){return r(Object.keys(e().classLevels[0].classSpecific))},children:u=>(()=>{var h=Rm();return y(h,()=>km(u)),h})()}),null),y(c,b(F,{get each(){return e().classLevels.sort((u,h)=>u.info.level-h.info.level)},children:u=>(()=>{var h=Bm(),d=h.firstChild,m=d.nextSibling,_=m.nextSibling;return h.style.setProperty("border","1px solid white"),y(d,()=>u.info.level),y(m,()=>u.profBonus),y(_,()=>u.features.map(g=>g.name).join(", ")),y(h,b(F,{get each(){return r(Object.keys(u.classSpecific))},children:g=>(()=>{var v=Im(),p=v.firstChild;return y(p,()=>n(u.classSpecific[g])),v})()}),null),O(g=>{var v=`${Rn.tableRow}`,p=`${Rn.feature}`;return v!==g.e&&P(h,g.e=v),p!==g.t&&P(_,g.t=p),g},{e:void 0,t:void 0}),h})()})),O(u=>{var h=`${Rn.table}`,d=`${Rn.tableRow}`;return h!==u.e&&P(s,u.e=h),d!==u.t&&P(o,u.t=d),u},{e:void 0,t:void 0}),s})()},Lm="_CenterPage_h7g95_1",Dm="_eachPage_h7g95_8",jm="_Center_h7g95_1",Nm="_CenterTable_h7g95_18",Km="_subClasses_h7g95_28",dt={CenterPage:Lm,eachPage:Dm,Center:jm,CenterTable:Nm,subClasses:Km};var Fm=S("<h4>Spells Gained"),Rt=S("<span>"),ye=S("<br>"),Mm=S("<div><h3></h3><span></span><br><span></span><br><span>"),qm=S("<h5> <!> "),Vm=S("<span> <!> "),Um=S("<div><h2>Skills"),Li=S("<div><br>"),Wm=S("<div><h2>Starting Equipment"),zm=S("<div><h2>Features"),Hm=S("<div>"),Ym=S("<div><div><button></button><span></span><button></button></div><hr><div><h1></h1><div></div><h2>Proficiencies</h2><span>Armor: <!> </span> <span></span><br><span>Weapons: <!> </span><br><span>Tools:</span><br><br><span>Saving Throws: </span><br><br><br><br><div>"),Gm=S("<span>Choose: "),Xm=S("<h3>choice 1"),Bn=S("<span>choose: "),In=S("<span>or"),Fr=S("<div><br><br><span>"),Jm=S("<h3>choice 2"),Qm=S("<h3>choice 3"),Zm=S("<h3>choice 4"),ep=S("<div><br><span>"),tp=S("<div><h3></h3><span>");const np=()=>{const t=te(),e=ca(),[n,r]=ml(),s=e().findIndex(h=>h.name.toLowerCase()===n.name?.toLowerCase()),[i,o]=L(s>=0?s:0);n.name||r({name:e().length>0?e()[i()].name:"barbarian"});const a=V(()=>e().length>0&&i()>=0&&i()<e().length?e()[i()]:{}),l=V(()=>a().subclasses.length>0?a().subclasses:[]);O(()=>{r({name:e().length>0?a().name:"barbarian"}),console.table(a())}),a().subclasses;const c=h=>{const d=JSON.parse(JSON.stringify(h));return typeof d=="string"?d:Array.isArray(d)?d.join(`
 
`):"-unknown-"},u=h=>h().map(d=>({name:d.name,element:(()=>{var m=Mm(),_=m.firstChild,g=_.nextSibling,v=g.nextSibling,p=v.nextSibling,f=p.nextSibling,w=f.nextSibling;return y(_,()=>d.name),y(g,()=>d.desc?.join(` 
`)),y(p,()=>d.subclassFlavor),y(m,b(N,{get when(){return d.spells?.length>=1},get children(){return[Fm(),(()=>{var x=Rt();return y(x,()=>d.spells?.join(`
`)),x})(),ye()]}}),w),y(w,b(F,{get each(){return d.features},children:x=>[(()=>{var $=qm(),E=$.firstChild,k=E.nextSibling;return k.nextSibling,y($,()=>x.name,k),$})(),(()=>{var $=Vm(),E=$.firstChild,k=E.nextSibling;return k.nextSibling,y($,()=>c(x?.value),k),$})()]})),m})()}));return(()=>{var h=Ym(),d=h.firstChild,m=d.firstChild,_=m.nextSibling,g=_.nextSibling,v=d.nextSibling,p=v.nextSibling,f=p.firstChild,w=f.nextSibling,x=w.nextSibling,$=x.nextSibling,E=$.firstChild,k=E.nextSibling;k.nextSibling;var R=$.nextSibling,C=R.nextSibling,D=C.nextSibling,B=D.nextSibling,A=B.firstChild,I=A.nextSibling;I.nextSibling;var q=B.nextSibling,re=q.nextSibling;re.firstChild;var ae=re.nextSibling,j=ae.nextSibling,z=j.nextSibling;z.firstChild;var ce=z.nextSibling,Be=ce.nextSibling,Ke=Be.nextSibling,Ht=Ke.nextSibling,kt=Ht.nextSibling;return m.$$click=()=>i()===0?o(W=>e().length-1):o(W=>W-1),y(_,()=>a().name),g.$$click=()=>i()===e().length-1?o(W=>0):o(W=>W+1),v.style.setProperty("width","100%"),y(f,()=>a().name),y(w,b(Tm,{Class:()=>a()})),y($,()=>a().proficiencies.filter(W=>W.includes("armor")).join(", "),k),y(C,b(N,{get when(){return a().proficiencies.filter(W=>W==="Shields")},children:"& Shields"})),y(B,()=>a().proficiencies.filter(W=>W.includes("weapons")).join(", "),I),y(re,b(N,{get when(){return V(()=>!a().proficiencies.includes("Thieves' Tools"))()&&!a().proficiencies.includes("Herbalism Kit")},children:"None"}),null),y(re,b(N,{get when(){return!a().proficiencies.includes("Kit")},get children(){return a().proficiencies.filter(W=>W.includes("Kit"))}}),null),y(re,b(N,{get when(){return!a().proficiencies.includes("Tools")},get children(){return a().proficiencies.filter(W=>W.includes("Tools")).join(", ")}}),null),y(z,()=>a().savingThrows.join(", "),null),y(p,b(Nt,{get class(){return`${dt.Center}`},style:{width:"50%"},get children(){return[Um(),(()=>{var W=Li(),ve=W.firstChild;return y(W,b(N,{get when(){return a().proficiencyChoices.length>0},get children(){return b(F,{get each(){return a().proficiencyChoices},children:se=>[ye(),(()=>{var Y=Gm();return Y.firstChild,y(Y,()=>se.choose,null),Y})(),ye(),b(F,{get each(){return se.choices},children:Y=>[(()=>{var he=Rt();return y(he,Y),he})(),ye()]})]})}}),ve),W})()]}}),Ke),y(p,b(Nt,{get class(){return`${dt.Center}`},style:{width:"50%"},get children(){return[Wm(),(()=>{var W=Li();return W.firstChild,y(W,b(N,{get when(){return a().startingEquipment.choice1.length>=1},get children(){return b(F,{get each(){return a().startingEquipment.choice1},children:(ve,se)=>(()=>{var Y=Fr(),he=Y.firstChild,Ce=he.nextSibling,Te=Ce.nextSibling;return y(Y,b(N,{get when(){return se()<1},get children(){return Xm()}}),he),y(Y,b(N,{get when(){return se()<1},get children(){var de=Bn();return de.firstChild,y(de,()=>ve.choose,null),de}}),Ce),y(Te,b(F,{get each(){return ve.choices},children:(de,Ct)=>[ye(),(()=>{var Us=Rt();return y(Us,()=>de.item),Us})(),ye()]})),y(Y,b(N,{get when(){return se()<=0},get children(){return[ye(),In()]}}),null),Y})()})}}),null),y(W,b(N,{get when(){return a().startingEquipment.choice2},get children(){return b(F,{get each(){return a().startingEquipment.choice2},children:(ve,se)=>(()=>{var Y=Fr(),he=Y.firstChild,Ce=he.nextSibling,Te=Ce.nextSibling;return y(Y,b(N,{get when(){return se()<1},get children(){return Jm()}}),he),y(Y,b(N,{get when(){return se()<1},get children(){var de=Bn();return de.firstChild,y(de,()=>ve.choose,null),de}}),Ce),y(Te,b(F,{get each(){return ve.choices},children:de=>[ye(),(()=>{var Ct=Rt();return y(Ct,()=>de.item),Ct})(),ye()]})),y(Y,b(N,{get when(){return se()<=0},get children(){return[ye(),In()]}}),null),Y})()})}}),null),y(W,b(N,{get when(){return a().startingEquipment.choice3},get children(){return b(F,{get each(){return a().startingEquipment.choice3},children:(ve,se)=>(()=>{var Y=Fr(),he=Y.firstChild,Ce=he.nextSibling,Te=Ce.nextSibling;return y(Y,b(N,{get when(){return se()<1},get children(){return Qm()}}),he),y(Y,b(N,{get when(){return se()<1},get children(){var de=Bn();return de.firstChild,y(de,()=>ve.choose,null),de}}),Ce),y(Te,b(F,{get each(){return ve.choices},children:de=>[ye(),(()=>{var Ct=Rt();return y(Ct,()=>de.item),Ct})(),ye()]})),y(Y,b(N,{get when(){return se()<=0},get children(){return[ye(),In()]}}),null),Y})()})}}),null),y(W,b(N,{get when(){return a().startingEquipment.choice4},get children(){return b(F,{get each(){return a().startingEquipment.choice4},children:(ve,se)=>(()=>{var Y=ep(),he=Y.firstChild,Ce=he.nextSibling;return y(Y,b(N,{get when(){return se()<1},get children(){return Zm()}}),he),y(Y,b(N,{get when(){return se()<1},get children(){var Te=Bn();return Te.firstChild,y(Te,()=>ve.choose,null),Te}}),Ce),y(Ce,b(F,{get each(){return ve.choices},children:Te=>[ye(),(()=>{var de=Rt();return y(de,()=>Te.item),de})(),ye()]})),y(Y,b(N,{get when(){return se()<=0},get children(){return[ye(),In()]}}),null),Y})()})}}),null),W})()]}}),Ht),y(p,b(Nt,{get class(){return`${dt.Center}`},style:{width:"50%"},get children(){return[zm(),(()=>{var W=Hm();return y(W,b(F,{get each(){return a().classLevels},children:ve=>[ye(),b(F,{get each(){return ve.features},children:se=>(()=>{var Y=tp(),he=Y.firstChild,Ce=he.nextSibling;return y(he,()=>se.name),y(Ce,()=>c(se.value)),Y})()}),ye()]})),W})()]}}),kt),y(kt,b(la,{get elements(){return u(l)}})),O(W=>{var ve=`${t.accent} ${dt.CenterPage}`,se=`${dt.eachPage}`,Y=`${dt.CenterTable}`,he=`${dt.subClasses}`;return ve!==W.e&&P(h,W.e=ve),se!==W.t&&P(p,W.t=se),Y!==W.a&&P(w,W.a=Y),he!==W.o&&P(kt,W.o=he),W},{e:void 0,t:void 0,a:void 0,o:void 0}),h})()};$e(["click"]);var rp=S("<div>");const ma=Es(()=>or(()=>import("./characters-g_JdDNNV.js"),__vite__mapDeps([0,1,2]))),pa=Es(()=>or(()=>import("./create-shlIXeMW.js"),__vite__mapDeps([3,2]))),ga=Es(()=>or(()=>import("./view-KNCKH7ZI.js"),__vite__mapDeps([4,1,5]))),sp=document.getElementById("root"),ip=60*1e3,{needRefresh:op,offlineReady:ap,updateServiceWorker:up}=aa({onRegisteredSW(t,e){e&&setInterval(()=>{ma.preload(),pa.preload(),ga.preload(),e.update()},ip)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){console.log("onNeedRefresh")},onOfflineReady(){console.log("onOfflineReady")}}),lp=t=>{const e=te(),n=function(){let o=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(o=!0)}(navigator.userAgent||navigator.vendor),o},r=()=>i(window.matchMedia("only screen and (max-width: 768px)").matches);window.addEventListener("resize",r),O(()=>{console.log("updateServiceWorker.needRefresh: ",op[0]())}),O(()=>{console.log("updateServiceWorker.offlineReady: ",ap[0]())});const[s,i]=L(n());return O(()=>{const o=!!(n()||window.innerWidth<=768);i(o)}),(()=>{var o=rp();return o.style.setProperty("height","100vh"),y(o,b(dh,{list:[s,i],get style(){return e.accent}}),null),y(o,()=>t.children,null),O(()=>P(o,e.primary)),o})()};Ua(()=>b(Rl,{root:lp,get children(){return[b(le,{path:"/",component:Gu}),b(le,{path:"/characters",get children(){return[b(le,{path:"/",component:ma}),b(le,{path:"/view",component:ga}),b(le,{path:"/create",component:pa})]}}),b(le,{path:"/info",get children(){return[b(le,{path:"/races",component:hm}),b(le,{path:"/spells",component:hf}),b(le,{path:"/feats",component:Pf}),b(le,{path:"/classes",component:np}),b(le,{path:"/backgrounds",component:xm})]}}),b(le,{path:"/homebrew",get children(){return[b(le,{path:"/",component:kh}),b(le,{path:"/view",component:Dh}),b(le,{path:"/create",get children(){return[b(le,{path:"/",component:Th}),b(le,{path:"/classes",component:Fh}),b(le,{path:"/items",component:Uh}),b(le,{path:"/feats",component:gd}),b(le,{path:"/backgrounds",component:_d}),b(le,{path:"/spells",component:xd}),b(le,{path:"/races",component:Pd})]}})]}})]}}),sp);export{$s as B,F,O as a,P as b,b as c,L as d,V as e,Eu as f,ca as g,of as h,y as i,ua as j,Af as k,dm as l,cp as m,ml as n,Ge as s,S as t,te as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/characters-g_JdDNNV.js","assets/useCharacters-OHQxCQWP.js","assets/characters-i2fzY9Kk.css","assets/create-shlIXeMW.js","assets/view-KNCKH7ZI.js","assets/view-aa-IgBHj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
