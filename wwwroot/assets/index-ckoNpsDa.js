(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const td="modulepreload",nd=function(t){return"/"+t},vo={},Pi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(l=>{if(l=nd(l),l in vo)return;vo[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===l&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":td,a||(h.as="script",h.crossOrigin=""),h.href=l,document.head.appendChild(h),a)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})},Ee={context:void 0,registry:void 0};function Jr(t){Ee.context=t}const rd=(t,e)=>t===e,Kt=Symbol("solid-proxy"),kl=Symbol("solid-track"),ui={equals:rd};let Uc=Wc;const _n=1,hi=2,qc={owned:null,cleanups:null,context:null,owner:null},Ki={};var Pe=null;let zi=null,sd=null,Re=null,yt=null,fn=null,Oi=0;function mr(t,e){const n=Re,r=Pe,s=t.length===0,i=e===void 0?r:e,l=s?qc:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?t:()=>t(()=>ze(()=>Ri(l)));Pe=l,Re=null;try{return Jt(a,!0)}finally{Re=n,Pe=r}}function R(t,e){e=e?Object.assign({},ui,e):ui;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),Hc(n,s));return[zc.bind(n),r]}function bo(t,e,n){const r=Ii(t,e,!0,_n);Pr(r)}function V(t,e,n){const r=Ii(t,e,!1,_n);Pr(r)}function Je(t,e,n){Uc=dd;const r=Ii(t,e,!1,_n);(!n||!n.render)&&(r.user=!0),fn?fn.push(r):Pr(r)}function K(t,e,n){n=n?Object.assign({},ui,n):ui;const r=Ii(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Pr(r),zc.bind(r)}function id(t){return t&&typeof t=="object"&&"then"in t}function ld(t,e,n){let r,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,s=t,i=e||{}):(r=t,s=e,i=n||{});let l=null,a=Ki,c=null,u=!1,h="initialValue"in i,d=typeof r=="function"&&K(r);const f=new Set,[m,y]=(i.storage||R)(i.initialValue),[p,_]=R(void 0),[b,v]=R(void 0,{equals:!1}),[k,x]=R(h?"ready":"unresolved");if(Ee.context){c=`${Ee.context.id}${Ee.context.count++}`;let S;i.ssrLoadFrom==="initial"?a=i.initialValue:Ee.load&&(S=Ee.load(c))&&(a=S)}function P(S,I,O,q){return l===S&&(l=null,q!==void 0&&(h=!0),(S===a||I===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(q,{value:I})),a=Ki,U(I,O)),I}function U(S,I){Jt(()=>{I===void 0&&y(()=>S),x(I!==void 0?"errored":h?"ready":"unresolved"),_(I);for(const O of f.keys())O.decrement();f.clear()},!1)}function w(){const S=cd,I=m(),O=p();if(O!==void 0&&!l)throw O;return Re&&!Re.user&&S&&bo(()=>{b(),l&&(S.resolved||f.has(S)||(S.increment(),f.add(S)))}),I}function H(S=!0){if(S!==!1&&u)return;u=!1;const I=d?d():r;if(I==null||I===!1){P(l,ze(m));return}const O=a!==Ki?a:ze(()=>s(I,{value:m(),refetching:S}));return id(O)?(l=O,"value"in O?(O.status==="success"?P(l,O.value,void 0,I):P(l,void 0,void 0,I),O):(u=!0,queueMicrotask(()=>u=!1),Jt(()=>{x(h?"refreshing":"pending"),v()},!1),O.then(q=>P(O,q,void 0,I),q=>P(O,void 0,Gc(q),I)))):(P(l,O,void 0,I),O)}return Object.defineProperties(w,{state:{get:()=>k()},error:{get:()=>p()},loading:{get(){const S=k();return S==="pending"||S==="refreshing"}},latest:{get(){if(!h)return w();const S=p();if(S&&!l)throw S;return m()}}}),d?bo(()=>H(!1)):H(!1),[w,{refetch:H,mutate:y}]}function ad(t){return Jt(t,!1)}function ze(t){if(Re===null)return t();const e=Re;Re=null;try{return t()}finally{Re=e}}function Kc(t,e,n){const r=Array.isArray(t);let s,i=n&&n.defer;return l=>{let a;if(r){a=Array(t.length);for(let u=0;u<t.length;u++)a[u]=t[u]()}else a=t();if(i){i=!1;return}const c=ze(()=>e(a,s,l));return s=a,c}}function It(t){Je(()=>ze(t))}function bn(t){return Pe===null||(Pe.cleanups===null?Pe.cleanups=[t]:Pe.cleanups.push(t)),t}function xl(){return Re}function di(){return Pe}function ga(t,e){const n=Pe,r=Re;Pe=t,Re=null;try{return Jt(e,!0)}catch(s){pa(s)}finally{Pe=n,Re=r}}function od(t){const e=Re,n=Pe;return Promise.resolve().then(()=>{Re=e,Pe=n;let r;return Jt(t,!1),Re=Pe=null,r?r.done:void 0})}function Er(t,e){const n=Symbol("context");return{id:n,Provider:fd(n),defaultValue:t}}function Ue(t){return Pe&&Pe.context&&Pe.context[t.id]!==void 0?Pe.context[t.id]:t.defaultValue}function Lr(t){const e=K(t),n=K(()=>Tl(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let cd;function zc(){if(this.sources&&this.state)if(this.state===_n)Pr(this);else{const t=yt;yt=null,Jt(()=>gi(this),!1),yt=t}if(Re){const t=this.observers?this.observers.length:0;Re.sources?(Re.sources.push(this),Re.sourceSlots.push(t)):(Re.sources=[this],Re.sourceSlots=[t]),this.observers?(this.observers.push(Re),this.observerSlots.push(Re.sources.length-1)):(this.observers=[Re],this.observerSlots=[Re.sources.length-1])}return this.value}function Hc(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Jt(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],l=zi&&zi.running;l&&zi.disposed.has(i),(l?!i.tState:!i.state)&&(i.pure?yt.push(i):fn.push(i),i.observers&&Vc(i)),l||(i.state=_n)}if(yt.length>1e6)throw yt=[],new Error},!1)),e}function Pr(t){if(!t.fn)return;Ri(t);const e=Oi;ud(t,t.value,e)}function ud(t,e,n){let r;const s=Pe,i=Re;Re=Pe=t;try{r=t.fn(e)}catch(l){return t.pure&&(t.state=_n,t.owned&&t.owned.forEach(Ri),t.owned=null),t.updatedAt=n+1,pa(l)}finally{Re=i,Pe=s}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Hc(t,r):t.value=r,t.updatedAt=n)}function Ii(t,e,n,r=_n,s){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Pe,context:Pe?Pe.context:null,pure:n};return Pe===null||Pe!==qc&&(Pe.owned?Pe.owned.push(i):Pe.owned=[i]),i}function fi(t){if(t.state===0)return;if(t.state===hi)return gi(t);if(t.suspense&&ze(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Oi);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===_n)Pr(t);else if(t.state===hi){const r=yt;yt=null,Jt(()=>gi(t,e[0]),!1),yt=r}}function Jt(t,e){if(yt)return t();let n=!1;e||(yt=[]),fn?n=!0:fn=[],Oi++;try{const r=t();return hd(n),r}catch(r){n||(fn=null),yt=null,pa(r)}}function hd(t){if(yt&&(Wc(yt),yt=null),t)return;const e=fn;fn=null,e.length&&Jt(()=>Uc(e),!1)}function Wc(t){for(let e=0;e<t.length;e++)fi(t[e])}function dd(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:fi(r)}if(Ee.context){if(Ee.count){Ee.effects||(Ee.effects=[]),Ee.effects.push(...t.slice(0,n));return}else Ee.effects&&(t=[...Ee.effects,...t],n+=Ee.effects.length,delete Ee.effects);Jr()}for(e=0;e<n;e++)fi(t[e])}function gi(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const s=r.state;s===_n?r!==e&&(!r.updatedAt||r.updatedAt<Oi)&&fi(r):s===hi&&gi(r,e)}}}function Vc(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=hi,n.pure?yt.push(n):fn.push(n),n.observers&&Vc(n))}}function Ri(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),l=n.observerSlots.pop();r<s.length&&(i.sourceSlots[l]=r,s[r]=i,n.observerSlots[r]=l)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Ri(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Gc(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function pa(t,e=Pe){throw Gc(t)}function Tl(t){if(typeof t=="function"&&!t.length)return Tl(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=Tl(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function fd(t,e){return function(r){let s;return V(()=>s=ze(()=>(Pe.context={...Pe.context,[t]:r.value},Lr(()=>r.children))),void 0),s}}const gd=Symbol("fallback");function yo(t){for(let e=0;e<t.length;e++)t[e]()}function pd(t,e,n={}){let r=[],s=[],i=[],l=0,a=e.length>1?[]:null;return bn(()=>yo(i)),()=>{let c=t()||[],u,h;return c[kl],ze(()=>{let f=c.length,m,y,p,_,b,v,k,x,P;if(f===0)l!==0&&(yo(i),i=[],r=[],s=[],l=0,a&&(a=[])),n.fallback&&(r=[gd],s[0]=mr(U=>(i[0]=U,n.fallback())),l=1);else if(l===0){for(s=new Array(f),h=0;h<f;h++)r[h]=c[h],s[h]=mr(d);l=f}else{for(p=new Array(f),_=new Array(f),a&&(b=new Array(f)),v=0,k=Math.min(l,f);v<k&&r[v]===c[v];v++);for(k=l-1,x=f-1;k>=v&&x>=v&&r[k]===c[x];k--,x--)p[x]=s[k],_[x]=i[k],a&&(b[x]=a[k]);for(m=new Map,y=new Array(x+1),h=x;h>=v;h--)P=c[h],u=m.get(P),y[h]=u===void 0?-1:u,m.set(P,h);for(u=v;u<=k;u++)P=r[u],h=m.get(P),h!==void 0&&h!==-1?(p[h]=s[u],_[h]=i[u],a&&(b[h]=a[u]),h=y[h],m.set(P,h)):i[u]();for(h=v;h<f;h++)h in p?(s[h]=p[h],i[h]=_[h],a&&(a[h]=b[h],a[h](h))):s[h]=mr(d);s=s.slice(0,l=f),r=c.slice(0)}return s});function d(f){if(i[h]=f,a){const[m,y]=R(h);return a[h]=y,e(c[h],m)}return e(c[h])}}}function o(t,e){return ze(()=>t(e||{}))}function Ls(){return!0}const Al={get(t,e,n){return e===Kt?n:t.get(e)},has(t,e){return e===Kt?!0:t.has(e)},set:Ls,deleteProperty:Ls,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Ls,deleteProperty:Ls}},ownKeys(t){return t.keys()}};function Hi(t){return(t=typeof t=="function"?t():t)?t:{}}function md(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function Qe(...t){let e=!1;for(let l=0;l<t.length;l++){const a=t[l];e=e||!!a&&Kt in a,t[l]=typeof a=="function"?(e=!0,K(a)):a}if(e)return new Proxy({get(l){for(let a=t.length-1;a>=0;a--){const c=Hi(t[a])[l];if(c!==void 0)return c}},has(l){for(let a=t.length-1;a>=0;a--)if(l in Hi(t[a]))return!0;return!1},keys(){const l=[];for(let a=0;a<t.length;a++)l.push(...Object.keys(Hi(t[a])));return[...new Set(l)]}},Al);const n={},r=Object.create(null);for(let l=t.length-1;l>=0;l--){const a=t[l];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let u=c.length-1;u>=0;u--){const h=c[u];if(h==="__proto__"||h==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,h);if(!r[h])r[h]=d.get?{enumerable:!0,configurable:!0,get:md.bind(n[h]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[h];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const s={},i=Object.keys(r);for(let l=i.length-1;l>=0;l--){const a=i[l],c=r[a];c&&c.get?Object.defineProperty(s,a,c):s[a]=c?c.value:void 0}return s}function pt(t,...e){if(Kt in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(l=>new Proxy({get(a){return l.includes(a)?t[a]:void 0},has(a){return l.includes(a)&&a in t},keys(){return l.filter(a=>a in t)}},Al));return i.push(new Proxy({get(l){return s.has(l)?void 0:t[l]},has(l){return s.has(l)?!1:l in t},keys(){return Object.keys(t).filter(l=>!s.has(l))}},Al)),i}const n={},r=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),l=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,c=0;for(const u of e)u.includes(s)&&(a=!0,l?r[c][s]=i.value:Object.defineProperty(r[c],s,i)),++c;a||(l?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}function ma(t){let e,n;const r=s=>{const i=Ee.context;if(i){const[a,c]=R();Ee.count||(Ee.count=0),Ee.count++,(n||(n=t())).then(u=>{Jr(i),Ee.count--,c(()=>u.default),Jr()}),e=a}else if(!e){const[a]=ld(()=>(n||(n=t())).then(c=>c.default));e=a}let l;return K(()=>(l=e())&&ze(()=>{if(!i)return l(s);const a=Ee.context;Jr(i);const c=l(s);return Jr(a),c}))};return r.preload=()=>n||((n=t()).then(s=>e=()=>s.default),n),r}const Yc=t=>`Stale read from <${t}>.`;function Q(t){const e="fallback"in t&&{fallback:()=>t.fallback};return K(pd(()=>t.each,t.children,e||void 0))}function G(t){const e=t.keyed,n=K(()=>t.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return K(()=>{const r=n();if(r){const s=t.children;return typeof s=="function"&&s.length>0?ze(()=>s(e?r:()=>{if(!ze(n))throw Yc("Show");return t.when})):s}return t.fallback},void 0,void 0)}function us(t){let e=!1;const n=(i,l)=>(e?i[1]===l[1]:!i[1]==!l[1])&&i[2]===l[2],r=Lr(()=>t.children),s=K(()=>{let i=r();Array.isArray(i)||(i=[i]);for(let l=0;l<i.length;l++){const a=i[l].when;if(a)return e=!!i[l].keyed,[l,a,i[l]]}return[-1]},void 0,{equals:n});return K(()=>{const[i,l,a]=s();if(i<0)return t.fallback;const c=a.children;return typeof c=="function"&&c.length>0?ze(()=>c(e?l:()=>{if(ze(s)[0]!==i)throw Yc("Match");return a.when})):c},void 0,void 0)}function At(t){return t}const vd=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],bd=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...vd]),yd=new Set(["innerHTML","textContent","innerText","children"]),_d=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),wd=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function $d(t,e){const n=wd[t];return typeof n=="object"?n[e]?n.$:void 0:n}const Cd=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Sd={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function kd(t,e,n){let r=n.length,s=e.length,i=r,l=0,a=0,c=e[s-1].nextSibling,u=null;for(;l<s||a<i;){if(e[l]===n[a]){l++,a++;continue}for(;e[s-1]===n[i-1];)s--,i--;if(s===l){const h=i<r?a?n[a-1].nextSibling:n[i-a]:c;for(;a<i;)t.insertBefore(n[a++],h)}else if(i===a)for(;l<s;)(!u||!u.has(e[l]))&&e[l].remove(),l++;else if(e[l]===n[i-1]&&n[a]===e[s-1]){const h=e[--s].nextSibling;t.insertBefore(n[a++],e[l++].nextSibling),t.insertBefore(n[--i],h),e[s]=n[i]}else{if(!u){u=new Map;let d=a;for(;d<i;)u.set(n[d],d++)}const h=u.get(e[l]);if(h!=null)if(a<h&&h<i){let d=l,f=1,m;for(;++d<s&&d<i&&!((m=u.get(e[d]))==null||m!==h+f);)f++;if(f>h-a){const y=e[l];for(;a<h;)t.insertBefore(n[a++],y)}else t.replaceChild(n[a++],e[l++])}else l++;else e[l++].remove()}}}const _o="_$DX_DELEGATE";function xd(t,e,n,r={}){let s;return mr(i=>{s=i,e===document?t():g(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{s(),e.textContent=""}}function C(t,e,n){let r;const s=()=>{const l=document.createElement("template");return l.innerHTML=t,n?l.content.firstChild.firstChild:l.content.firstChild},i=e?()=>ze(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function zt(t,e=window.document){const n=e[_o]||(e[_o]=new Set);for(let r=0,s=t.length;r<s;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,Od))}}function Xe(t,e,n){Ee.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function Td(t,e,n,r){Ee.context||(r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r))}function z(t,e){Ee.context||(e==null?t.removeAttribute("class"):t.className=e)}function Ad(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const s=n[0];t.addEventListener(e,n[0]=i=>s.call(t,n[1],i))}else t.addEventListener(e,n)}function Ed(t,e,n={}){const r=Object.keys(e||{}),s=Object.keys(n);let i,l;for(i=0,l=s.length;i<l;i++){const a=s[i];!a||a==="undefined"||e[a]||(wo(t,a,!1),delete n[a])}for(i=0,l=r.length;i<l;i++){const a=r[i],c=!!e[a];!a||a==="undefined"||n[a]===c||!c||(wo(t,a,!0),n[a]=c)}return n}function va(t,e,n){if(!e)return n?Xe(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let s,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)s=e[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function nt(t,e={},n,r){const s={};return r||V(()=>s.children=xr(t,e.children,s.children)),V(()=>e.ref&&e.ref(t)),V(()=>Ld(t,e,n,!0,s,!0)),s}function Ln(t,e,n){return ze(()=>t(e,n))}function g(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return xr(t,e,r,n);V(s=>xr(t,e(),s,n),r)}function Ld(t,e,n,r,s={},i=!1){e||(e={});for(const l in s)if(!(l in e)){if(l==="children")continue;s[l]=$o(t,l,null,s[l],n,i)}for(const l in e){if(l==="children"){r||xr(t,e.children);continue}const a=e[l];s[l]=$o(t,l,a,s[l],n,i)}}function Pd(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function wo(t,e,n){const r=e.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)t.classList.toggle(r[s],n)}function $o(t,e,n,r,s,i){let l,a,c,u,h;if(e==="style")return va(t,n,r);if(e==="classList")return Ed(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const d=e.slice(3);r&&t.removeEventListener(d,r),n&&t.addEventListener(d,n)}else if(e.slice(0,10)==="oncapture:"){const d=e.slice(10);r&&t.removeEventListener(d,r,!0),n&&t.addEventListener(d,n,!0)}else if(e.slice(0,2)==="on"){const d=e.slice(2).toLowerCase(),f=Cd.has(d);if(!f&&r){const m=Array.isArray(r)?r[0]:r;t.removeEventListener(d,m)}(f||n)&&(Ad(t,d,n,f),f&&zt([d]))}else if(e.slice(0,5)==="attr:")Xe(t,e.slice(5),n);else if((h=e.slice(0,5)==="prop:")||(c=yd.has(e))||!s&&((u=$d(e,t.tagName))||(a=bd.has(e)))||(l=t.nodeName.includes("-"))){if(h)e=e.slice(5),a=!0;else if(Ee.context)return n;e==="class"||e==="className"?z(t,n):l&&!a&&!c?t[Pd(e)]=n:t[u||e]=n}else{const d=s&&e.indexOf(":")>-1&&Sd[e.split(":")[0]];d?Td(t,d,e,n):Xe(t,_d[e]||e,n)}return n}function Od(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),Ee.registry&&!Ee.done&&(Ee.done=_$HY.done=!0);n;){const r=n[e];if(r&&!n.disabled){const s=n[`${e}Data`];if(s!==void 0?r.call(n,s,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function xr(t,e,n,r,s){if(Ee.context){!n&&(n=[...t.childNodes]);let a=[];for(let c=0;c<n.length;c++){const u=n[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():a.push(u)}n=a}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,l=r!==void 0;if(t=l&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(Ee.context)return n;if(i==="number"&&(e=e.toString()),l){let a=n[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),n=or(t,n,r,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(Ee.context)return n;n=or(t,n,r)}else{if(i==="function")return V(()=>{let a=e();for(;typeof a=="function";)a=a();n=xr(t,a,n,r)}),()=>n;if(Array.isArray(e)){const a=[],c=n&&Array.isArray(n);if(El(a,e,n,s))return V(()=>n=xr(t,a,n,r,!0)),()=>n;if(Ee.context){if(!a.length)return n;if(r===void 0)return[...t.childNodes];let u=a[0],h=[u];for(;(u=u.nextSibling)!==r;)h.push(u);return n=h}if(a.length===0){if(n=or(t,n,r),l)return n}else c?n.length===0?Co(t,a,r):kd(t,n,a):(n&&or(t),Co(t,a));n=a}else if(e.nodeType){if(Ee.context&&e.parentNode)return n=l?[e]:e;if(Array.isArray(n)){if(l)return n=or(t,n,r,e);or(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function El(t,e,n,r){let s=!1;for(let i=0,l=e.length;i<l;i++){let a=e[i],c=n&&n[i],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))s=El(t,a,c)||s;else if(u==="function")if(r){for(;typeof a=="function";)a=a();s=El(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||s}else t.push(a),s=!0;else{const h=String(a);c&&c.nodeType===3&&c.data===h?t.push(c):t.push(document.createTextNode(h))}}return s}function Co(t,e,n=null){for(let r=0,s=e.length;r<s;r++)t.insertBefore(e[r],n)}function or(t,e,n,r){if(n===void 0)return t.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let l=e.length-1;l>=0;l--){const a=e[l];if(s!==a){const c=a.parentNode===t;!i&&!l?c?t.replaceChild(s,a):t.insertBefore(s,n):c&&a.remove()}else i=!0}}else t.insertBefore(s,n);return[s]}const Id=!1,Rd="http://www.w3.org/2000/svg";function Dd(t,e=!1){return e?document.createElementNS(Rd,t):document.createElement(t)}function ba(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,s=di();let i,l=!!Ee.context;return Je(()=>{l&&(di().user=l=!1),i||(i=ga(s,()=>K(()=>t.children)));const a=r();if(a instanceof HTMLHeadElement){const[c,u]=R(!1),h=()=>u(!0);mr(d=>g(a,()=>c()?d():i(),null)),bn(h)}else{const c=Dd(t.isSVG?"g":"div",t.isSVG),u=e&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return n.parentNode},configurable:!0}),g(u,i),a.appendChild(c),t.ref&&t.ref(c),bn(()=>a.removeChild(c))}},void 0,{render:!l}),n}function Zc(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const l={to:s,options:i,defaultPrevented:!1,preventDefault:()=>l.defaultPrevented=!0};for(const a of t)a.listener({...l,from:a.location,retry:c=>{c&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!l.defaultPrevented}return{subscribe:e,confirm:r}}let Ll;function ya(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ll=window.history.state._depth}ya();function Nd(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Md(t,e){let n=!1;return()=>{const r=Ll;ya();const s=r==null?null:Ll-r;if(n){n=!1;return}s&&e(s)?(n=!0,window.history.go(-s)):t()}}const Bd=/^(?:[a-z0-9]+:)?\/\//i,Fd=/^\/+|(\/)\/+$/g,Xc="http://sr";function Vn(t,e=!1){const n=t.replace(Fd,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function Xs(t,e,n){if(Bd.test(e))return;const r=Vn(t),s=n&&Vn(n);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Vn(e,!i)}function jd(t,e){if(t==null)throw new Error(e);return t}function Ud(t,e){return Vn(t).replace(/\/*(\*.*)?$/g,"")+Vn(e)}function Jc(t){const e={};return t.searchParams.forEach((n,r)=>{e[r]=n}),e}function qd(t,e,n){const[r,s]=t.split("/*",2),i=r.split("/").filter(Boolean),l=i.length;return a=>{const c=a.split("/").filter(Boolean),u=c.length-l;if(u<0||u>0&&s===void 0&&!e)return null;const h={path:l?"":"/",params:{}},d=f=>n===void 0?void 0:n[f];for(let f=0;f<l;f++){const m=i[f],y=c[f],p=m[0]===":",_=p?m.slice(1):m;if(p&&Wi(y,d(_)))h.params[_]=y;else if(p||!Wi(y,m))return null;h.path+=`/${y}`}if(s){const f=u?c.slice(-u).join("/"):"";if(Wi(f,d(s)))h.params[s]=f;else return null}return h}}function Wi(t,e){const n=r=>r.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function Kd(t){const[e,n]=t.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Qc(t){const e=new Map,n=di();return new Proxy({},{get(r,s){return e.has(s)||ga(n,()=>e.set(s,K(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function zd(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([s,i])=>{i==null||i===""?n.delete(s):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function eu(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),r=t.slice(e.index+e[0].length);const s=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=e[1]),r=r.slice(e[0].length);return eu(r).reduce((i,l)=>[...i,...s.map(a=>a+l)],[])}const Hd=100,tu=Er(),_a=Er(),ws=()=>jd(Ue(tu),"<A> and 'use' router primitives can be only used inside a Route."),Wd=()=>Ue(_a)||ws().base,Vd=t=>{const e=Wd();return K(()=>e.resolvePath(t()))},Gd=t=>{const e=ws();return K(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},nu=()=>ws().navigatorFactory(),ru=()=>ws().location,Q2=()=>ws().params,Qt=()=>{const t=ru(),e=nu(),n=(r,s)=>{const i=ze(()=>t.pathname+zd(t.search,r)+t.hash);e(i,{scroll:!1,resolve:!1,...s})};return[t.query,n]};function Yd(t,e=""){const{component:n,load:r,children:s,info:i}=t,l=!s||Array.isArray(s)&&!s.length,a={key:t,component:n,load:r,info:i};return su(t.path).reduce((c,u)=>{for(const h of eu(u)){const d=Ud(e,h);let f=l?d:d.split("/*",1)[0];f=f.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),c.push({...a,originalPath:u,pattern:f,matcher:qd(f,!l,t.matchFilters)})}return c},[])}function Zd(t,e=0){return{routes:t,score:Kd(t[t.length-1])*1e4-e,matcher(n){const r=[];for(let s=t.length-1;s>=0;s--){const i=t[s],l=i.matcher(n);if(!l)return null;r.unshift({...l,route:i})}return r}}}function su(t){return Array.isArray(t)?t:[t]}function iu(t,e="",n=[],r=[]){const s=su(t);for(let i=0,l=s.length;i<l;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const c=Yd(a,e);for(const u of c){n.push(u);const h=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!h)iu(a.children,u.pattern,n,r);else{const d=Zd([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((i,l)=>l.score-i.score)}function Vi(t,e){for(let n=0,r=t.length;n<r;n++){const s=t[n].matcher(e);if(s)return s}return[]}function Xd(t,e){const n=new URL(Xc),r=K(c=>{const u=t();try{return new URL(u,n)}catch{return console.error(`Invalid path ${u}`),c}},n,{equals:(c,u)=>c.href===u.href}),s=K(()=>r().pathname),i=K(()=>r().search,!0),l=K(()=>r().hash),a=()=>"";return{get pathname(){return s()},get search(){return i()},get hash(){return l()},get state(){return e()},get key(){return a()},query:Qc(Kc(i,()=>Jc(r())))}}let on;function Jd(){return on}function Qd(t,e,n,r={}){const{signal:[s,i],utils:l={}}=t,a=l.parsePath||(q=>q),c=l.renderPath||(q=>q),u=l.beforeLeave||Zc(),h=Xs("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!s().value&&i({value:h,replace:!0,scroll:!1});const[d,f]=R(!1),m=async q=>{f(!0);try{await od(q)}finally{f(!1)}},[y,p]=R(s().value),[_,b]=R(s().state),v=Xd(y,_),k=[],x=R([]),P=K(()=>typeof r.transformUrl=="function"?Vi(e(),r.transformUrl(v.pathname)):Vi(e(),v.pathname)),U=Qc(()=>{const q=P(),X={};for(let F=0;F<q.length;F++)Object.assign(X,q[F].params);return X}),w={pattern:h,path:()=>h,outlet:()=>null,resolvePath(q){return Xs(h,q)}};return V(()=>{const{value:q,state:X}=s();ze(()=>{m(()=>{on="native",q!==y()&&p(q),b(X),x[1]([])}).then(()=>{on=void 0})})}),{base:w,location:v,params:U,isRouting:d,renderPath:c,parsePath:a,navigatorFactory:S,matches:P,beforeLeave:u,preloadRoute:O,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:x};function H(q,X,F){ze(()=>{if(typeof X=="number"){X&&(l.go?l.go(X):console.warn("Router integration does not support relative routing"));return}const{replace:J,resolve:ee,scroll:oe,state:fe}={replace:!1,resolve:!0,scroll:!0,...F},A=ee?q.resolvePath(X):Xs("",X);if(A===void 0)throw new Error(`Path '${X}' is not a routable path`);if(k.length>=Hd)throw new Error("Too many redirects");const T=y();if((A!==T||fe!==_())&&!Id){if(u.confirm(A,F)){const M=k.push({value:T,replace:J,scroll:oe,state:_()});m(()=>{on="navigate",p(A),b(fe),x[1]([])}).then(()=>{k.length===M&&(on=void 0,I({value:A,state:fe}))})}}})}function S(q){return q=q||Ue(_a)||w,(X,F)=>H(q,X,F)}function I(q){const X=k[0];X&&((q.value!==X.value||q.state!==X.state)&&i({...q,replace:X.replace,scroll:X.scroll}),k.length=0)}function O(q,X){const F=Vi(e(),q.pathname),J=on;on="preload";for(let ee in F){const{route:oe,params:fe}=F[ee];oe.component&&oe.component.preload&&oe.component.preload();const{load:A}=oe;X&&A&&ga(n(),()=>A({params:fe,location:{pathname:q.pathname,search:q.search,hash:q.hash,query:Jc(q),state:null,key:""},intent:"preload"}))}on=J}}function ef(t,e,n,r){const{base:s,location:i,params:l}=t,{pattern:a,component:c,load:u}=r().route,h=K(()=>r().path);c&&c.preload&&c.preload();const d=u?u({params:l,location:i,intent:on||"initial"}):void 0;return{parent:e,pattern:a,path:h,outlet:()=>c?o(c,{params:l,location:i,data:d,get children(){return n()}}):n(),resolvePath(m){return Xs(s.path(),m,h())}}}const tf=t=>e=>{const{base:n}=e,r=Lr(()=>e.children),s=K(()=>iu(r(),e.base||""));let i;const l=Qd(t,s,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(l),o(tu.Provider,{value:l,get children(){return o(nf,{routerState:l,get root(){return e.root},get load(){return e.rootLoad},get children(){return[K(()=>(i=di())&&null),o(rf,{routerState:l,get branches(){return s()}})]}})}})};function nf(t){const e=t.routerState.location,n=t.routerState.params,r=K(()=>t.load&&ze(()=>{t.load({params:n,location:e,intent:Jd()||"initial"})}));return o(G,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>o(s,{params:n,location:e,get data(){return r()},get children(){return t.children}})})}function rf(t){const e=[];let n;const r=K(Kc(t.routerState.matches,(s,i,l)=>{let a=i&&s.length===i.length;const c=[];for(let u=0,h=s.length;u<h;u++){const d=i&&i[u],f=s[u];l&&d&&f.route.key===d.route.key?c[u]=l[u]:(a=!1,e[u]&&e[u](),mr(m=>{e[u]=m,c[u]=ef(t.routerState,c[u-1]||t.routerState.base,So(()=>r()[u+1]),()=>t.routerState.matches()[u])}))}return e.splice(s.length).forEach(u=>u()),l&&a?l:(n=c[0],c)}));return So(()=>r()&&n)()}const So=t=>()=>o(G,{get when(){return t()},keyed:!0,children:e=>o(_a.Provider,{value:e,get children(){return e.outlet()}})}),Ve=t=>{const e=Lr(()=>t.children);return Qe(t,{get children(){return e()}})};function sf([t,e],n,r){return[n?()=>n(t()):t,r?s=>e(r(s)):e]}function lf(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function af(t){let e=!1;const n=s=>typeof s=="string"?{value:s}:s,r=sf(R(n(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),s));return t.init&&bn(t.init((s=t.get())=>{e=!0,r[1](n(s)),e=!1})),tf({signal:r,create:t.create,utils:t.utils})}function of(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function cf(t,e){const n=lf(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const uf=new Map;function hf(t=!0,e=!1,n="/_server",r){return s=>{const i=s.base.path(),l=s.navigatorFactory(s.base);let a={};function c(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const _=p.composedPath().find(U=>U instanceof Node&&U.nodeName.toUpperCase()==="A");if(!_||e&&!_.hasAttribute("link"))return;const b=c(_),v=b?_.href.baseVal:_.href;if((b?_.target.baseVal:_.target)||!v&&!_.hasAttribute("state"))return;const x=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||x&&x.includes("external"))return;const P=b?new URL(v,document.baseURI):new URL(v);if(!(P.origin!==window.location.origin||i&&P.pathname&&!P.pathname.toLowerCase().startsWith(i.toLowerCase())))return[_,P]}function h(p){const _=u(p);if(!_)return;const[b,v]=_,k=s.parsePath(v.pathname+v.search+v.hash),x=b.getAttribute("state");p.preventDefault(),l(k,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function d(p){const _=u(p);if(!_)return;const[b,v]=_;typeof r=="function"&&(v.pathname=r(v.pathname)),a[v.pathname]||s.preloadRoute(v,b.getAttribute("preload")!=="false")}function f(p){const _=u(p);if(!_)return;const[b,v]=_;typeof r=="function"&&(v.pathname=r(v.pathname)),!a[v.pathname]&&(a[v.pathname]=setTimeout(()=>{s.preloadRoute(v,b.getAttribute("preload")!=="false"),delete a[v.pathname]},200))}function m(p){const _=u(p);if(!_)return;const[,b]=_;typeof r=="function"&&(b.pathname=r(b.pathname)),a[b.pathname]&&(clearTimeout(a[b.pathname]),delete a[b.pathname])}function y(p){if(p.defaultPrevented)return;let _=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const v=new URL(_,Xc);if(_=s.parsePath(v.pathname+v.search),!_.startsWith(n))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=uf.get(_);if(b){p.preventDefault();const v=new FormData(p.target);p.submitter&&p.submitter.name&&v.append(p.submitter.name,p.submitter.value),b.call({r:s,f:p.target},v)}}zt(["click","submit"]),document.addEventListener("click",h),t&&(document.addEventListener("mouseover",f),document.addEventListener("mouseout",m),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",y),bn(()=>{document.removeEventListener("click",h),t&&(document.removeEventListener("mouseover",f),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",y)})}}function df(t){const e=()=>{const r=window.location.pathname+window.location.search;return{value:t.transformUrl?t.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},n=Zc();return af({get:e,set({value:r,replace:s,scroll:i,state:l}){s?window.history.replaceState(Nd(l),"",r):window.history.pushState(l,"",r),cf(window.location.hash.slice(1),i),ya()},init:r=>of(window,"popstate",Md(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:hf(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(t)}var ff=C("<a>");function Hn(t){t=Qe({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=pt(t,["href","state","class","activeClass","inactiveClass","end"]),n=Vd(()=>t.href),r=Gd(n),s=ru(),i=K(()=>{const l=n();if(l===void 0)return[!1,!1];const a=Vn(l.split(/[?#]/,1)[0]).toLowerCase(),c=Vn(s.pathname).toLowerCase();return[t.end?a===c:c.startsWith(a),a===c]});return(()=>{var l=ff();return nt(l,Qe(e,{get href(){return r()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),l})()}const Pl=Symbol("store-raw"),vr=Symbol("store-node"),cn=Symbol("store-has"),lu=Symbol("store-self");function au(t){let e=t[Kt];if(!e&&(Object.defineProperty(t,Kt,{value:e=new Proxy(t,mf)}),!Array.isArray(t))){const n=Object.keys(t),r=Object.getOwnPropertyDescriptors(t);for(let s=0,i=n.length;s<i;s++){const l=n[s];r[l].get&&Object.defineProperty(t,l,{enumerable:r[l].enumerable,get:r[l].get.bind(e)})}}return e}function pi(t){let e;return t!=null&&typeof t=="object"&&(t[Kt]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function hs(t,e=new Set){let n,r,s,i;if(n=t!=null&&t[Pl])return n;if(!pi(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let l=0,a=t.length;l<a;l++)s=t[l],(r=hs(s,e))!==s&&(t[l]=r)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const l=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let c=0,u=l.length;c<u;c++)i=l[c],!a[i].get&&(s=t[i],(r=hs(s,e))!==s&&(t[i]=r))}return t}function mi(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function ds(t,e,n){if(t[e])return t[e];const[r,s]=R(n,{equals:!1,internal:!0});return r.$=s,t[e]=r}function gf(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===Kt||e===vr||(delete n.value,delete n.writable,n.get=()=>t[Kt][e]),n}function ou(t){xl()&&ds(mi(t,vr),lu)()}function pf(t){return ou(t),Reflect.ownKeys(t)}const mf={get(t,e,n){if(e===Pl)return t;if(e===Kt)return n;if(e===kl)return ou(t),n;const r=mi(t,vr),s=r[e];let i=s?s():t[e];if(e===vr||e===cn||e==="__proto__")return i;if(!s){const l=Object.getOwnPropertyDescriptor(t,e);xl()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(l&&l.get)&&(i=ds(r,e,i)())}return pi(i)?au(i):i},has(t,e){return e===Pl||e===Kt||e===kl||e===vr||e===cn||e==="__proto__"?!0:(xl()&&ds(mi(t,cn),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:pf,getOwnPropertyDescriptor:gf};function vi(t,e,n,r=!1){if(!r&&t[e]===n)return;const s=t[e],i=t.length;n===void 0?(delete t[e],t[cn]&&t[cn][e]&&s!==void 0&&t[cn][e].$()):(t[e]=n,t[cn]&&t[cn][e]&&s===void 0&&t[cn][e].$());let l=mi(t,vr),a;if((a=ds(l,e,s))&&a.$(()=>n),Array.isArray(t)&&t.length!==i){for(let c=t.length;c<i;c++)(a=l[c])&&a.$();(a=ds(l,"length",i))&&a.$(t.length)}(a=l[lu])&&a.$()}function cu(t,e){const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const s=n[r];vi(t,s,e[s])}}function vf(t,e){if(typeof e=="function"&&(e=e(t)),e=hs(e),Array.isArray(e)){if(t===e)return;let n=0,r=e.length;for(;n<r;n++){const s=e[n];t[n]!==s&&vi(t,n,s)}vi(t,"length",r)}else cu(t,e)}function Qr(t,e,n=[]){let r,s=t;if(e.length>1){r=e.shift();const l=typeof r,a=Array.isArray(t);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Qr(t,[r[c]].concat(e),n);return}else if(a&&l==="function"){for(let c=0;c<t.length;c++)r(t[c],c)&&Qr(t,[c].concat(e),n);return}else if(a&&l==="object"){const{from:c=0,to:u=t.length-1,by:h=1}=r;for(let d=c;d<=u;d+=h)Qr(t,[d].concat(e),n);return}else if(e.length>1){Qr(t[r],e,[r].concat(n));return}s=t[r],n=[r].concat(n)}let i=e[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=hs(i),r===void 0||pi(s)&&pi(i)&&!Array.isArray(i)?cu(s,i):vi(t,r,i))}function ns(...[t,e]){const n=hs(t||{}),r=Array.isArray(n),s=au(n);function i(...l){ad(()=>{r&&l.length===1?vf(n,l[0]):Qr(n,l)})}return[s,i]}var Ol=function(t,e){return Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Ol(t,e)};function Or(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ol(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function bf(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function a(h){try{u(r.next(h))}catch(d){l(d)}}function c(h){try{u(r.throw(h))}catch(d){l(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function uu(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(h){u=[6,h],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Tr(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bi(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],l;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){l={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return i}function yi(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function br(t){return this instanceof br?(this.v=t,this):new br(t)}function yf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(f){r[f]&&(s[f]=function(m){return new Promise(function(y,p){i.push([f,m,y,p])>1||a(f,m)})})}function a(f,m){try{c(r[f](m))}catch(y){d(i[0][3],y)}}function c(f){f.value instanceof br?Promise.resolve(f.value.v).then(u,h):d(i[0][2],f)}function u(f){a("next",f)}function h(f){a("throw",f)}function d(f,m){f(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _f(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tr=="function"?Tr(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(l){return new Promise(function(a,c){l=t[i](l),s(a,c,l.done,l.value)})}}function s(i,l,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},l)}}function tt(t){return typeof t=="function"}function hu(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gi=hu(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Il(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Di=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var a=Tr(l),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else l.remove(this);var h=this.initialTeardown;if(tt(h))try{h()}catch(p){i=p instanceof Gi?p.errors:[p]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Tr(d),m=f.next();!m.done;m=f.next()){var y=m.value;try{ko(y)}catch(p){i=i??[],p instanceof Gi?i=yi(yi([],bi(i)),bi(p.errors)):i.push(p)}}}catch(p){r={error:p}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}}if(i)throw new Gi(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ko(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Il(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Il(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),du=Di.EMPTY;function fu(t){return t instanceof Di||t&&"closed"in t&&tt(t.remove)&&tt(t.add)&&tt(t.unsubscribe)}function ko(t){tt(t)?t():t.unsubscribe()}var gu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},pu={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,yi([t,e],bi(n)))},clearTimeout:function(t){var e=pu.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function mu(t){pu.setTimeout(function(){throw t})}function xo(){}function Js(t){t()}var wa=function(t){Or(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,fu(n)&&n.add(r)):r.destination=Sf,r}return e.create=function(n,r,s){return new Rl(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Di),wf=Function.prototype.bind;function Yi(t,e){return wf.call(t,e)}var $f=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Ps(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Ps(r)}else Ps(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Ps(n)}},t}(),Rl=function(t){Or(e,t);function e(n,r,s){var i=t.call(this)||this,l;if(tt(n)||!n)l={next:n??void 0,error:r??void 0,complete:s??void 0};else{var a;i&&gu.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},l={next:n.next&&Yi(n.next,a),error:n.error&&Yi(n.error,a),complete:n.complete&&Yi(n.complete,a)}):l=n}return i.destination=new $f(l),i}return e}(wa);function Ps(t){mu(t)}function Cf(t){throw t}var Sf={closed:!0,next:xo,error:Cf,complete:xo},$a=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ni(t){return t}function kf(t){return t.length===0?Ni:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var _t=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=Tf(e)?e:new Rl(e,n,r);return Js(function(){var l=s,a=l.operator,c=l.source;i.add(a?a.call(i,c):c?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=To(n),new n(function(s,i){var l=new Rl({next:function(a){try{e(a)}catch(c){i(c),l.unsubscribe()}},error:i,complete:s});r.subscribe(l)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[$a]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return kf(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=To(e),new e(function(r,s){var i;n.subscribe(function(l){return i=l},function(l){return s(l)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function To(t){var e;return(e=t??gu.Promise)!==null&&e!==void 0?e:Promise}function xf(t){return t&&tt(t.next)&&tt(t.error)&&tt(t.complete)}function Tf(t){return t&&t instanceof wa||xf(t)&&fu(t)}function Af(t){return tt(t?.lift)}function Qn(t){return function(e){if(Af(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pn(t,e,n,r,s){return new Ef(t,e,n,r,s)}var Ef=function(t){Or(e,t);function e(n,r,s,i,l,a){var c=t.call(this,n)||this;return c.onFinalize=l,c.shouldUnsubscribe=a,c._next=r?function(u){try{r(u)}catch(h){n.error(h)}}:t.prototype._next,c._error=i?function(u){try{i(u)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=s?function(){try{s()}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(wa),Lf=hu(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),vu=function(t){Or(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Ao(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Lf},e.prototype.next=function(n){var r=this;Js(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var l=Tr(r.currentObservers),a=l.next();!a.done;a=l.next()){var c=a.value;c.next(n)}}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Js(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Js(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,l=s.isStopped,a=s.observers;return i||l?du:(this.currentObservers=null,a.push(n),new Di(function(){r.currentObservers=null,Il(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,l=r.isStopped;s?n.error(i):l&&n.complete()},e.prototype.asObservable=function(){var n=new _t;return n.source=this,n},e.create=function(n,r){return new Ao(n,r)},e}(_t),Ao=function(t){Or(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:du},e}(vu),Pf=function(t){Or(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,i=n._value;if(r)throw s;return this._throwIfClosed(),i},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(vu),Of=new _t(function(t){return t.complete()});function If(t){return t&&tt(t.schedule)}function bu(t){return t[t.length-1]}function Rf(t){return tt(bu(t))?t.pop():void 0}function yu(t){return If(bu(t))?t.pop():void 0}var _u=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function wu(t){return tt(t?.then)}function $u(t){return tt(t[$a])}function Cu(t){return Symbol.asyncIterator&&tt(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Df(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ku=Df();function xu(t){return tt(t?.[ku])}function Tu(t){return yf(this,arguments,function(){var n,r,s,i;return uu(this,function(l){switch(l.label){case 0:n=t.getReader(),l.label=1;case 1:l.trys.push([1,,9,10]),l.label=2;case 2:return[4,br(n.read())];case 3:return r=l.sent(),s=r.value,i=r.done,i?[4,br(void 0)]:[3,5];case 4:return[2,l.sent()];case 5:return[4,br(s)];case 6:return[4,l.sent()];case 7:return l.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Au(t){return tt(t?.getReader)}function Ir(t){if(t instanceof _t)return t;if(t!=null){if($u(t))return Nf(t);if(_u(t))return Mf(t);if(wu(t))return Bf(t);if(Cu(t))return Eu(t);if(xu(t))return Ff(t);if(Au(t))return jf(t)}throw Su(t)}function Nf(t){return new _t(function(e){var n=t[$a]();if(tt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Mf(t){return new _t(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Bf(t){return new _t(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,mu)})}function Ff(t){return new _t(function(e){var n,r;try{for(var s=Tr(t),i=s.next();!i.done;i=s.next()){var l=i.value;if(e.next(l),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function Eu(t){return new _t(function(e){Uf(t,e).catch(function(n){return e.error(n)})})}function jf(t){return Eu(Tu(t))}function Uf(t,e){var n,r,s,i;return bf(this,void 0,void 0,function(){var l,a;return uu(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=_f(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(l=r.value,e.next(l),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),s={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function gn(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function Lu(t,e){return e===void 0&&(e=0),Qn(function(n,r){n.subscribe(Pn(r,function(s){return gn(r,t,function(){return r.next(s)},e)},function(){return gn(r,t,function(){return r.complete()},e)},function(s){return gn(r,t,function(){return r.error(s)},e)}))})}function Pu(t,e){return e===void 0&&(e=0),Qn(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function qf(t,e){return Ir(t).pipe(Pu(e),Lu(e))}function Kf(t,e){return Ir(t).pipe(Pu(e),Lu(e))}function zf(t,e){return new _t(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Hf(t,e){return new _t(function(n){var r;return gn(n,e,function(){r=t[ku](),gn(n,e,function(){var s,i,l;try{s=r.next(),i=s.value,l=s.done}catch(a){n.error(a);return}l?n.complete():n.next(i)},0,!0)}),function(){return tt(r?.return)&&r.return()}})}function Ou(t,e){if(!t)throw new Error("Iterable cannot be null");return new _t(function(n){gn(n,e,function(){var r=t[Symbol.asyncIterator]();gn(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function Wf(t,e){return Ou(Tu(t),e)}function Vf(t,e){if(t!=null){if($u(t))return qf(t,e);if(_u(t))return zf(t,e);if(wu(t))return Kf(t,e);if(Cu(t))return Ou(t,e);if(xu(t))return Hf(t,e);if(Au(t))return Wf(t,e)}throw Su(t)}function Ca(t,e){return e?Vf(t,e):Ir(t)}function We(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=yu(t);return Ca(t,n)}function Sa(t,e){return Qn(function(n,r){var s=0;n.subscribe(Pn(r,function(i){r.next(t.call(e,i,s++))}))})}var Gf=Array.isArray;function Yf(t,e){return Gf(e)?t.apply(void 0,yi([],bi(e))):t(e)}function Zf(t){return Sa(function(e){return Yf(t,e)})}var Xf=Array.isArray,Jf=Object.getPrototypeOf,Qf=Object.prototype,eg=Object.keys;function tg(t){if(t.length===1){var e=t[0];if(Xf(e))return{args:e,keys:null};if(ng(e)){var n=eg(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function ng(t){return t&&typeof t=="object"&&Jf(t)===Qf}function rg(t,e){return t.reduce(function(n,r,s){return n[r]=e[s],n},{})}function sg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=yu(t),r=Rf(t),s=tg(t),i=s.args,l=s.keys;if(i.length===0)return Ca([],n);var a=new _t(ig(i,n,l?function(c){return rg(l,c)}:Ni));return r?a.pipe(Zf(r)):a}function ig(t,e,n){return n===void 0&&(n=Ni),function(r){Eo(e,function(){for(var s=t.length,i=new Array(s),l=s,a=s,c=function(h){Eo(e,function(){var d=Ca(t[h],e),f=!1;d.subscribe(Pn(r,function(m){i[h]=m,f||(f=!0,a--),a||r.next(n(i.slice()))},function(){--l||r.complete()}))},r)},u=0;u<s;u++)c(u)},r)}}function Eo(t,e,n){t?gn(n,t,e):e()}function lg(t,e,n,r,s,i,l,a){var c=[],u=0,h=0,d=!1,f=function(){d&&!c.length&&!u&&e.complete()},m=function(p){return u<r?y(p):c.push(p)},y=function(p){i&&e.next(p),u++;var _=!1;Ir(n(p,h++)).subscribe(Pn(e,function(b){s?.(b),i?m(b):e.next(b)},function(){_=!0},void 0,function(){if(_)try{u--;for(var b=function(){var v=c.shift();l?gn(e,l,function(){return y(v)}):y(v)};c.length&&u<r;)b();f()}catch(v){e.error(v)}}))};return t.subscribe(Pn(e,m,function(){d=!0,f()})),function(){a?.()}}function Dl(t,e,n){return n===void 0&&(n=1/0),tt(e)?Dl(function(r,s){return Sa(function(i,l){return e(r,i,s,l)})(Ir(t(r,s)))},n):(typeof e=="number"&&(n=e),Qn(function(r,s){return lg(r,s,t,n)}))}function er(t){return Qn(function(e,n){var r=null,s=!1,i;r=e.subscribe(Pn(n,void 0,void 0,function(l){i=Ir(t(l,er(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Ge(t,e){return tt(e)?Dl(t,e,1):Dl(t,1)}function we(t){return t<=0?function(){return Of}:Qn(function(e,n){var r=0;e.subscribe(Pn(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function at(t,e,n){var r=tt(t)||e||n?{next:t,error:e,complete:n}:t;return r?Qn(function(s,i){var l;(l=r.subscribe)===null||l===void 0||l.call(r);var a=!0;s.subscribe(Pn(i,function(c){var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},function(c){var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},function(){var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Ni}class ag{loggedIn=R({});tokenValue=R("");set token(e){this.tokenValue[1](e),this.loggedIn[1]({Authorization:`Bearer ${e}`})}get token(){return this.tokenValue[0]}clearToken(){this.loggedIn[1]({Authorization:""})}toObservable(e){return new _t(n=>{e.then(r=>{n.next(r)}).catch(r=>n.error(r)).finally(()=>n.complete())})}post(e,n,r){return new _t(s=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r?.headers,...this.loggedIn[0]()},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{s.next(i)}).catch(i=>s.error(i)).finally(()=>s.complete())})}get(e,n){return new _t(r=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...n?.headers,...this.loggedIn[0]()}}).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{r.next(s)}).catch(s=>r.error(s)).finally(()=>r.complete())})}}const _e=new ag,Ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ut=Object.keys,bt=Array.isArray;function St(t,e){return typeof e!="object"||ut(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ye.Promise||(Ye.Promise=Promise);const fs=Object.getPrototypeOf,og={}.hasOwnProperty;function Pt(t,e){return og.call(t,e)}function Ar(t,e){typeof e=="function"&&(e=e(fs(t))),(typeof Reflect>"u"?ut:Reflect.ownKeys)(e).forEach(n=>{pn(t,n,e[n])})}const Iu=Object.defineProperty;function pn(t,e,n,r){Iu(t,e,St(n&&Pt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function yr(t){return{from:function(e){return t.prototype=Object.create(e.prototype),pn(t.prototype,"constructor",t),{extend:Ar.bind(null,t.prototype)}}}}const cg=Object.getOwnPropertyDescriptor;function ka(t,e){let n;return cg(t,e)||(n=fs(t))&&ka(n,e)}const ug=[].slice;function _i(t,e,n){return ug.call(t,e,n)}function Ru(t,e){return e(t)}function es(t){if(!t)throw new Error("Assertion Failed")}function Du(t){Ye.setImmediate?setImmediate(t):setTimeout(t,0)}function Nu(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function mn(t,e){if(Pt(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=mn(t,e[r]);n.push(i)}return n}var l=e.indexOf(".");if(l!==-1){var a=t[e.substr(0,l)];return a===void 0?void 0:mn(a,e.substr(l+1))}}function qt(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){es(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)qt(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var l=e.substr(0,i),a=e.substr(i+1);if(a==="")n===void 0?bt(t)&&!isNaN(parseInt(l))?t.splice(l,1):delete t[l]:t[l]=n;else{var c=t[l];c&&Pt(t,l)||(c=t[l]={}),qt(c,a,n)}}else n===void 0?bt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Mu(t){var e={};for(var n in t)Pt(t,n)&&(e[n]=t[n]);return e}const hg=[].concat;function Bu(t){return hg.apply([],t)}const Fu="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Bu([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ye[t]),dg=Fu.map(t=>Ye[t]);Nu(Fu,t=>[t,!0]);let xn=null;function $s(t){xn=typeof WeakMap<"u"&&new WeakMap;const e=Nl(t);return xn=null,e}function Nl(t){if(!t||typeof t!="object")return t;let e=xn&&xn.get(t);if(e)return e;if(bt(t)){e=[],xn&&xn.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Nl(t[n]))}else if(dg.indexOf(t.constructor)>=0)e=t;else{const i=fs(t);for(var s in e=i===Object.prototype?{}:Object.create(i),xn&&xn.set(t,e),t)Pt(t,s)&&(e[s]=Nl(t[s]))}return e}const{toString:fg}={};function Ml(t){return fg.call(t).slice(8,-1)}const Bl=typeof Symbol<"u"?Symbol.iterator:"@@iterator",gg=typeof Bl=="symbol"?function(t){var e;return t!=null&&(e=t[Bl])&&e.apply(t)}:function(){return null},gr={};function hn(t){var e,n,r,s;if(arguments.length===1){if(bt(t))return t.slice();if(this===gr&&typeof t=="string")return[t];if(s=gg(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const xa=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var en=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ju(t,e){en=t,Uu=e}var Uu=()=>!0;const pg=!new Error("").stack;function tr(){if(pg)try{throw tr.arguments,new Error}catch(t){return t}return new Error}function Fl(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Uu).map(r=>`
`+r).join("")):""}var qu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ta=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(qu),mg={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _r(t,e){this._e=tr(),this.name=t,this.message=e}function Ku(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function wi(t,e,n,r){this._e=tr(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Ku(t,e)}function rs(t,e){this._e=tr(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Ku(t,e)}yr(_r).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Fl(this._e,2))}},toString:function(){return this.name+": "+this.message}}),yr(wi).from(_r),yr(rs).from(_r);var Aa=Ta.reduce((t,e)=>(t[e]=e+"Error",t),{});const vg=_r;var ye=Ta.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=tr(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=mg[e]||n,this.inner=null)}return yr(r).from(vg),t[e]=r,t},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var Lo=qu.reduce((t,e)=>(t[e+"Error"]=ye[e],t),{}),Qs=Ta.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=ye[e]),t),{});function Ke(){}function gs(t){return t}function bg(t,e){return t==null||t===gs?e:function(n){return e(t(n))}}function Zn(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function yg(t,e){return t===Ke?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Zn(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Zn(s,this.onerror):s),i!==void 0?i:n}}function _g(t,e){return t===Ke?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Zn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Zn(r,this.onerror):r)}}function wg(t,e){return t===Ke?e:function(n){var r=t.apply(this,arguments);St(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Zn(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Zn(i,this.onerror):i),r===void 0?l===void 0?void 0:l:St(r,l)}}function $g(t,e){return t===Ke?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Ea(t,e){return t===Ke?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}Qs.ModifyError=wi,Qs.DexieError=_r,Qs.BulkError=rs;var ps={};const zu=100,[jl,$i,Ul]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,fs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,fs(e),t]})(),Hu=$i&&$i.then,ei=jl&&jl.constructor,La=!!Ul;var ql=!1,Cg=Ul?()=>{Ul.then(Os)}:Ye.setImmediate?setImmediate.bind(null,Os):Ye.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Os(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Os,0)},ss=function(t,e){ts.push([t,e]),Ci&&(Cg(),Ci=!1)},Kl=!0,Ci=!0,Gn=[],ti=[],zl=null,Hl=gs,wr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Io,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Io(t[0],t[1])}catch{}})}},ve=wr,ts=[],Yn=0,ni=[];function ce(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ke,this._lib=!1;var e=this._PSD=ve;if(en&&(this._stackHolder=tr(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ps)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Vl(this,this._value))}this._state=null,this._value=null,++e.ref,Vu(this,t)}const Wl={get:function(){var t=ve,e=Si;function n(r,s){var i=!t.global&&(t!==ve||e!==Si);const l=i&&!yn();var a=new ce((c,u)=>{Pa(this,new Wu(ki(r,t,i,l),ki(s,t,i,l),c,u,t))});return en&&Zu(a,this),a}return n.prototype=ps,n},set:function(t){pn(this,"then",t&&t.prototype===ps?Wl:{get:function(){return t},set:Wl.set})}};function Wu(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function Vu(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Cs();n&&typeof n.then=="function"?Vu(t,(s,i)=>{n instanceof ce?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,Gu(t)),r&&Ss()}},Vl.bind(null,t))}catch(n){Vl(t,n)}}function Vl(t,e){if(ti.push(e),t._state===null){var n=t._lib&&Cs();e=Hl(e),t._state=!1,t._value=e,en&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(l){s&&s(l)}}(()=>{var r=ka(e,"stack");e._promise=t,pn(e,"stack",{get:()=>ql?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Gn.some(s=>s._value===r._value)||Gn.push(r)}(t),Gu(t),n&&Ss()}}function Gu(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Pa(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),Yn===0&&(++Yn,ss(()=>{--Yn==0&&Oa()},[]))}function Pa(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Yn,ss(Sg,[n,t,e])}else t._listeners.push(e)}function Sg(t,e,n){try{zl=e;var r,s=e._value;e._state?r=t(s):(ti.length&&(ti=[]),r=t(s),ti.indexOf(s)===-1&&function(i){for(var l=Gn.length;l;)if(Gn[--l]._value===i._value)return void Gn.splice(l,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{zl=null,--Yn==0&&Oa(),--n.psd.ref||n.psd.finalize()}}function Yu(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,l=t._value;l!=null?(s=l.name||"Error",i=l.message||l,r=Fl(l,0)):(s=l,i=""),e.push(s+(i?": "+i:"")+r)}return en&&((r=Fl(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Yu(t._prev,e,n)),e}function Zu(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Os(){Cs()&&Ss()}function Cs(){var t=Kl;return Kl=!1,Ci=!1,t}function Ss(){var t,e,n;do for(;ts.length>0;)for(t=ts,ts=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(ts.length>0);Kl=!0,Ci=!0}function Oa(){var t=Gn;Gn=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ni.slice(0),n=e.length;n;)e[--n]()}function Is(t){return new ce(ps,!1,t)}function Ze(t,e){var n=ve;return function(){var r=Cs(),s=ve;try{return In(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{In(s,!1),r&&Ss()}}}Ar(ce.prototype,{then:Wl,_then:function(t,e){Pa(this,new Wu(null,null,t,e,ve))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Is(r)):this.then(null,r=>r&&r.name===e?n(r):Is(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Is(e)))},stack:{get:function(){if(this._stack)return this._stack;try{ql=!0;var t=Yu(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{ql=!1}}},timeout:function(t,e){return t<1/0?new ce((n,r)=>{var s=setTimeout(()=>r(new ye.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&pn(ce.prototype,Symbol.toStringTag,"Dexie.Promise"),wr.env=Xu(),Ar(ce,{all:function(){var t=hn.apply(null,arguments).map(Rs);return new ce(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>ce.resolve(s).then(l=>{t[i]=l,--r||e(t)},n))})},resolve:t=>{if(t instanceof ce)return t;if(t&&typeof t.then=="function")return new ce((n,r)=>{t.then(n,r)});var e=new ce(ps,!0,t);return Zu(e,zl),e},reject:Is,race:function(){var t=hn.apply(null,arguments).map(Rs);return new ce((e,n)=>{t.map(r=>ce.resolve(r).then(e,n))})},PSD:{get:()=>ve,set:t=>ve=t},totalEchoes:{get:()=>Si},newPSD:On,usePSD:Dr,scheduler:{get:()=>ss,set:t=>{ss=t}},rejectionMapper:{get:()=>Hl,set:t=>{Hl=t}},follow:(t,e)=>new ce((n,r)=>On((s,i)=>{var l=ve;l.unhandleds=[],l.onunhandled=i,l.finalize=Zn(function(){(function(a){function c(){a(),ni.splice(ni.indexOf(c),1)}ni.push(c),++Yn,ss(()=>{--Yn==0&&Oa()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},l.finalize),t()},e,n,r))}),ei&&(ei.allSettled&&pn(ce,"allSettled",function(){const t=hn.apply(null,arguments).map(Rs);return new ce(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>ce.resolve(s).then(l=>r[i]={status:"fulfilled",value:l},l=>r[i]={status:"rejected",reason:l}).then(()=>--n||e(r)))})}),ei.any&&typeof AggregateError<"u"&&pn(ce,"any",function(){const t=hn.apply(null,arguments).map(Rs);return new ce((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,l)=>ce.resolve(i).then(a=>e(a),a=>{s[l]=a,--r||n(new AggregateError(s))}))})}));const vt={awaits:0,echoes:0,id:0};var kg=0,ri=[],Zi=0,Si=0,xg=0;function On(t,e,n,r){var s=ve,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++xg;var l=wr.env;i.env=La?{Promise:ce,PromiseProp:{value:ce,configurable:!0,writable:!0},all:ce.all,race:ce.race,allSettled:ce.allSettled,any:ce.any,resolve:ce.resolve,reject:ce.reject,nthen:Po(l.nthen,i),gthen:Po(l.gthen,i)}:{},e&&St(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Dr(i,t,n,r);return i.ref===0&&i.finalize(),a}function Rr(){return vt.id||(vt.id=++kg),++vt.awaits,vt.echoes+=zu,vt.id}function yn(){return!!vt.awaits&&(--vt.awaits==0&&(vt.id=0),vt.echoes=vt.awaits*zu,!0)}function Rs(t){return vt.echoes&&t&&t.constructor===ei?(Rr(),t.then(e=>(yn(),e),e=>(yn(),dt(e)))):t}function Tg(t){++Si,vt.echoes&&--vt.echoes!=0||(vt.echoes=vt.id=0),ri.push(ve),In(t,!0)}function Ag(){var t=ri[ri.length-1];ri.pop(),In(t,!1)}function In(t,e){var n=ve;if((e?!vt.echoes||Zi++&&t===ve:!Zi||--Zi&&t===ve)||Ju(e?Tg.bind(null,t):Ag),t!==ve&&(ve=t,n===wr&&(wr.env=Xu()),La)){var r=wr.env.Promise,s=t.env;$i.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(Ye,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function Xu(){var t=Ye.Promise;return La?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ye,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:$i.then,gthen:t.prototype.then}:{}}function Dr(t,e,n,r,s){var i=ve;try{return In(t,!0),e(n,r,s)}finally{In(i,!1)}}function Ju(t){Hu.call(jl,t)}function ki(t,e,n,r){return typeof t!="function"?t:function(){var s=ve;n&&Rr(),In(e,!0);try{return t.apply(this,arguments)}finally{In(s,!1),r&&Ju(yn)}}}function Po(t,e){return function(n,r){return t.call(this,ki(n,e),ki(r,e))}}(""+Hu).indexOf("[native code]")===-1&&(Rr=yn=Ke);const Oo="unhandledrejection";function Io(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(Ye.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Oo,!0,!0),St(r,s)):Ye.CustomEvent&&St(r=new CustomEvent(Oo,{detail:s}),s),r&&Ye.dispatchEvent&&(dispatchEvent(r),!Ye.PromiseRejectionEvent&&Ye.onunhandledrejection))try{Ye.onunhandledrejection(r)}catch{}en&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var dt=ce.reject;function Gl(t,e,n,r){if(t.idbdb&&(t._state.openComplete||ve.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Aa.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Gl(t,e,n,r))):dt(i)}return s._promise(e,(i,l)=>On(()=>(ve.trans=s,r(i,l,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return dt(new ye.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return dt(new ye.DatabaseClosed);t.open().catch(Ke)}return t._state.dbReadyPromise.then(()=>Gl(t,e,n,r))}const Ro="3.2.4",Wn="￿",Yl=-1/0,sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Qu="String expected.",is=[],Mi=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Eg=Mi,Lg=Mi,eh=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Bi="__dbnames",Xi="readonly",Ji="readwrite";function Xn(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const th={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ds(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=$s(e))[t],e)}class Pg{_trans(e,n,r){const s=this._tx||ve.trans,i=this.name;function l(c,u,h){if(!h.schema[i])throw new ye.NotFound("Table "+i+" not part of transaction");return n(h.idbtrans,h)}const a=Cs();try{return s&&s.db===this.db?s===ve.trans?s._promise(e,l,r):On(()=>s._promise(e,l,r),{trans:s,transless:ve.transless||ve}):Gl(this.db,e,[this.name],l)}finally{a&&Ss()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(bt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ut(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(h=>u.keyPath.indexOf(h)>=0)&&u.keyPath.every(h=>n.indexOf(h)>=0))[0];if(r&&this.db._maxKey!==Wn)return this.where(r.name).equals(r.keyPath.map(u=>e[u]));!r&&en&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function l(u,h){try{return i.cmp(u,h)===0}catch{return!1}}const[a,c]=n.reduce(([u,h],d)=>{const f=s[d],m=e[d];return[u||f,u||!f?Xn(h,f&&f.multi?y=>{const p=mn(y,d);return bt(p)&&p.some(_=>l(m,_))}:y=>l(m,mn(y,d))):h]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,bt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(Pt(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){St(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Ds(s)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"add",keys:n!=null?[n]:null,values:[i]})).then(l=>l.numFailures?ce.reject(l.failures[0]):l.lastResult).then(l=>{if(s)try{qt(e,s,l)}catch{}return l})}update(e,n){if(typeof e!="object"||bt(e))return this.where(":id").equals(e).modify(n);{const r=mn(e,this.schema.primKey.keyPath);if(r===void 0)return dt(new ye.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ut(n).forEach(s=>{qt(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Ds(s)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"put",values:[i],keys:n!=null?[n]:null})).then(l=>l.numFailures?ce.reject(l.failures[0]):l.lastResult).then(l=>{if(s)try{qt(e,s,l)}catch{}return l})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?ce.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:th})).then(e=>e.numFailures?ce.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:a,keyPath:c}=this.schema.primKey;if(c&&s)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let h=c&&a?e.map(Ds(c)):e;return this.core.mutate({trans:l,type:"add",keys:s,values:h,wantResults:i}).then(({numFailures:d,results:f,lastResult:m,failures:y})=>{if(d===0)return i?f:m;throw new rs(`${this.name}.bulkAdd(): ${d} of ${u} operations failed`,y)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:a,keyPath:c}=this.schema.primKey;if(c&&s)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let h=c&&a?e.map(Ds(c)):e;return this.core.mutate({trans:l,type:"put",keys:s,values:h,wantResults:i}).then(({numFailures:d,results:f,lastResult:m,failures:y})=>{if(d===0)return i?f:m;throw new rs(`${this.name}.bulkPut(): ${d} of ${u} operations failed`,y)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new rs(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function ls(t){var e={},n=function(l,a){if(a){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return e[l].subscribe.apply(null,u),t}if(typeof l=="string")return e[l]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(l,a,c){if(typeof l!="object"){var u;a||(a=$g),c||(c=Ke);var h={subscribers:[],fire:c,subscribe:function(d){h.subscribers.indexOf(d)===-1&&(h.subscribers.push(d),h.fire=a(h.fire,d))},unsubscribe:function(d){h.subscribers=h.subscribers.filter(function(f){return f!==d}),h.fire=h.subscribers.reduce(a,c)}};return e[l]=n[l]=h,h}ut(u=l).forEach(function(d){var f=u[d];if(bt(f))i(d,u[d][0],u[d][1]);else{if(f!=="asap")throw new ye.InvalidArgument("Invalid event config");var m=i(d,gs,function(){for(var y=arguments.length,p=new Array(y);y--;)p[y]=arguments[y];m.subscribers.forEach(function(_){Du(function(){_.apply(null,p)})})})}})}}function jr(t,e){return yr(e).from({prototype:t}),e}function cr(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Qi(t,e){t.filter=Xn(t.filter,e)}function el(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Xn(r(),e()):e,t.justLimit=n&&!r}function si(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new ye.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Do(t,e,n){const r=si(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Ns(t,e,n,r){const s=t.replayFilter?Xn(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},l=(a,c,u)=>{if(!s||s(c,u,f=>c.stop(f),f=>c.fail(f))){var h=c.primaryKey,d=""+h;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(h)),Pt(i,d)||(i[d]=!0,e(a,c,u))}};return Promise.all([t.or._iterate(l,n),No(Do(t,r,n),t.algorithm,l,!t.keysOnly&&t.valueMapper)])}return No(Do(t,r,n),Xn(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function No(t,e,n,r){var s=Ze(r?(i,l,a)=>n(r(i),l,a):n);return t.then(i=>{if(i)return i.start(()=>{var l=()=>i.continue();e&&!e(i,a=>l=a,a=>{i.stop(a),l=Ke},a=>{i.fail(a),l=Ke})||s(i.value,i,a=>l=a),l()})})}function Ct(t,e){try{const n=Mo(t),r=Mo(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const l=s.length,a=i.length,c=l<a?l:a;for(let u=0;u<c;++u)if(s[u]!==i[u])return s[u]<i[u]?-1:1;return l===a?0:l<a?-1:1}(Bo(t),Bo(e));case"Array":return function(s,i){const l=s.length,a=i.length,c=l<a?l:a;for(let u=0;u<c;++u){const h=Ct(s[u],i[u]);if(h!==0)return h}return l===a?0:l<a?-1:1}(t,e)}}catch{}return NaN}function Mo(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Ml(t);return n==="ArrayBuffer"?"binary":n}function Bo(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Og{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,dt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,dt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Xn(n.algorithm,e)}_iterate(e,n){return Ns(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&St(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Ns(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(cr(r,!0))return s.count({trans:n,query:{index:si(r,s.schema),range:r.range}}).then(l=>Math.min(l,r.limit));var i=0;return Ns(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function l(u,h){return h?l(u[r[h]],h-1):u[s]}var a=this._ctx.dir==="next"?1:-1;function c(u,h){var d=l(u,i),f=l(h,i);return d<f?-a:d>f?a:0}return this.toArray(function(u){return u.sort(c)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&cr(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=si(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:l})=>s?l.map(s):l)}{const s=[];return Ns(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,cr(n)?el(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):el(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),el(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return Qi(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return Qi(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=Xn(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&cr(n,!0)&&n.limit>0)return this._read(s=>{var i=si(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Qi(this._ctx,function(s){var i=s.primaryKey.toString(),l=Pt(r,i);return r[i]=!0,!l}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=ut(e),l=i.length;s=function(p){for(var _=!1,b=0;b<l;++b){var v=i[b],k=e[v];mn(p,v)!==k&&(qt(p,v,k),_=!0)}return _}}const a=n.table.core,{outbound:c,extractKey:u}=a.schema.primaryKey,h=this.db._options.modifyChunkSize||200,d=[];let f=0;const m=[],y=(p,_)=>{const{failures:b,numFailures:v}=_;f+=p-v;for(let k of ut(b))d.push(b[k])};return this.clone().primaryKeys().then(p=>{const _=b=>{const v=Math.min(h,p.length-b);return a.getMany({trans:r,keys:p.slice(b,b+v),cache:"immutable"}).then(k=>{const x=[],P=[],U=c?[]:null,w=[];for(let S=0;S<v;++S){const I=k[S],O={value:$s(I),primKey:p[b+S]};s.call(O,O.value,O)!==!1&&(O.value==null?w.push(p[b+S]):c||Ct(u(I),u(O.value))===0?(P.push(O.value),c&&U.push(p[b+S])):(w.push(p[b+S]),x.push(O.value)))}const H=cr(n)&&n.limit===1/0&&(typeof e!="function"||e===tl)&&{index:n.index,range:n.range};return Promise.resolve(x.length>0&&a.mutate({trans:r,type:"add",values:x}).then(S=>{for(let I in S.failures)w.splice(parseInt(I),1);y(x.length,S)})).then(()=>(P.length>0||H&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:U,values:P,criteria:H,changeSpec:typeof e!="function"&&e}).then(S=>y(P.length,S))).then(()=>(w.length>0||H&&e===tl)&&a.mutate({trans:r,type:"delete",keys:w,criteria:H}).then(S=>y(w.length,S))).then(()=>p.length>b+v&&_(b+h))})};return _(0).then(()=>{if(d.length>0)throw new wi("Error modifying one or more objects",d,f,m);return p.length})})})}delete(){var e=this._ctx,n=e.range;return cr(e)&&(e.isPrimKey&&!Lg||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(l=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:c,results:u,numFailures:h})=>{if(h)throw new wi("Could not delete some values",Object.keys(a).map(d=>a[d]),l-h);return l-h}))}):this.modify(tl)}}const tl=(t,e)=>e.value=null;function Ig(t,e){return t<e?-1:t===e?0:1}function Rg(t,e){return t>e?-1:t===e?0:1}function Et(t,e,n){var r=t instanceof rh?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function ur(t){return new t.Collection(t,()=>nh("")).limit(0)}function Dg(t,e,n,r,s,i){for(var l=Math.min(t.length,r.length),a=-1,c=0;c<l;++c){var u=e[c];if(u!==r[c])return s(t[c],n[c])<0?t.substr(0,c)+n[c]+n.substr(c+1):s(t[c],r[c])<0?t.substr(0,c)+r[c]+n.substr(c+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;s(t[c],u)<0&&(a=c)}return l<r.length&&i==="next"?t+n.substr(t.length):l<t.length&&i==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Ms(t,e,n,r){var s,i,l,a,c,u,h,d=n.length;if(!n.every(p=>typeof p=="string"))return Et(t,Qu);function f(p){s=function(b){return b==="next"?v=>v.toUpperCase():v=>v.toLowerCase()}(p),i=function(b){return b==="next"?v=>v.toLowerCase():v=>v.toUpperCase()}(p),l=p==="next"?Ig:Rg;var _=n.map(function(b){return{lower:i(b),upper:s(b)}}).sort(function(b,v){return l(b.lower,v.lower)});a=_.map(function(b){return b.upper}),c=_.map(function(b){return b.lower}),u=p,h=p==="next"?"":r}f("next");var m=new t.Collection(t,()=>kn(a[0],c[d-1]+r));m._ondirectionchange=function(p){f(p)};var y=0;return m._addAlgorithm(function(p,_,b){var v=p.key;if(typeof v!="string")return!1;var k=i(v);if(e(k,c,y))return!0;for(var x=null,P=y;P<d;++P){var U=Dg(v,k,a[P],c[P],l,u);U===null&&x===null?y=P+1:(x===null||l(x,U)>0)&&(x=U)}return _(x!==null?function(){p.continue(x+h)}:b),!1}),m}function kn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function nh(t){return{type:1,lower:t,upper:t}}class rh{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?ur(this):new this.Collection(this,()=>kn(e,n,!r,!s))}catch{return Et(this,sn)}}equals(e){return e==null?Et(this,sn):new this.Collection(this,()=>nh(e))}above(e){return e==null?Et(this,sn):new this.Collection(this,()=>kn(e,void 0,!0))}aboveOrEqual(e){return e==null?Et(this,sn):new this.Collection(this,()=>kn(e,void 0,!1))}below(e){return e==null?Et(this,sn):new this.Collection(this,()=>kn(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Et(this,sn):new this.Collection(this,()=>kn(void 0,e))}startsWith(e){return typeof e!="string"?Et(this,Qu):this.between(e,e+Wn,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ms(this,(n,r)=>n.indexOf(r[0])===0,[e],Wn)}equalsIgnoreCase(e){return Ms(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=hn.apply(gr,arguments);return e.length===0?ur(this):Ms(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=hn.apply(gr,arguments);return e.length===0?ur(this):Ms(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,Wn)}anyOf(){const e=hn.apply(gr,arguments);let n=this._cmp;try{e.sort(n)}catch{return Et(this,sn)}if(e.length===0)return ur(this);const r=new this.Collection(this,()=>kn(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,l,a)=>{const c=i.key;for(;n(c,e[s])>0;)if(++s,s===e.length)return l(a),!1;return n(c,e[s])===0||(l(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[Yl,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=hn.apply(gr,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Et(this,sn)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[Yl,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,l=this._min,a=this._max;if(e.length===0)return ur(this);if(!e.every(v=>v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0))return Et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);const c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let h,d=s;function f(v,k){return d(v[0],k[0])}try{h=e.reduce(function(v,k){let x=0,P=v.length;for(;x<P;++x){const U=v[x];if(r(k[0],U[1])<0&&r(k[1],U[0])>0){U[0]=l(U[0],k[0]),U[1]=a(U[1],k[1]);break}}return x===P&&v.push(k),v},[]),h.sort(f)}catch{return Et(this,sn)}let m=0;const y=u?v=>s(v,h[m][1])>0:v=>s(v,h[m][1])>=0,p=c?v=>i(v,h[m][0])>0:v=>i(v,h[m][0])>=0;let _=y;const b=new this.Collection(this,()=>kn(h[0][0],h[h.length-1][1],!c,!u));return b._ondirectionchange=v=>{v==="next"?(_=y,d=s):(_=p,d=i),h.sort(f)},b._addAlgorithm((v,k,x)=>{for(var P=v.key;_(P);)if(++m,m===h.length)return k(x),!1;return!!function(U){return!y(U)&&!p(U)}(P)||(this._cmp(P,h[m][1])===0||this._cmp(P,h[m][0])===0||k(()=>{d===s?v.continue(h[m][0]):v.continue(h[m][1])}),!1)}),b}startsWithAnyOf(){const e=hn.apply(gr,arguments);return e.every(n=>typeof n=="string")?e.length===0?ur(this):this.inAnyRange(e.map(n=>[n,n+Wn])):Et(this,"startsWithAnyOf() only works with strings")}}function Gt(t){return Ze(function(e){return ms(e),t(e.target.error),!1})}function ms(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const vs="storagemutated",Tn="x-storagemutated-1",Rn=ls(null,vs);class Ng{_lock(){return es(!ve.global),++this._reculock,this._reculock!==1||ve.global||(ve.lockOwnerFor=this),this}_unlock(){if(es(!ve.global),--this._reculock==0)for(ve.global||(ve.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Dr(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&ve.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(es(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(r);case"MissingAPIError":throw new ye.MissingAPI(r.message,r);default:throw new ye.OpenFailed(r)}if(!this.active)throw new ye.TransactionInactive;return es(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ze(s=>{ms(s),this._reject(e.error)}),e.onabort=Ze(s=>{ms(s),this.active&&this._reject(new ye.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=Ze(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Rn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return dt(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new ye.TransactionInactive);if(this._locked())return new ce((i,l)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,l)},ve])});if(r)return On(()=>{var i=new ce((l,a)=>{this._lock();const c=n(l,a,this);c&&c.then&&c.then(l,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new ce((i,l)=>{var a=n(i,l,this);a&&a.then&&a.then(i,l)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=ce.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=l)})()}var i=n._waitingFor;return new ce((l,a)=>{r.then(c=>n._waitingQueue.push(Ze(l.bind(null,c))),c=>n._waitingQueue.push(Ze(a.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Pt(n,e))return n[e];const r=this.schema[e];if(!r)throw new ye.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function Zl(t,e,n,r,s,i,l){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!l?"&":"")+(r?"*":"")+(s?"++":"")+sh(e)}}function sh(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ih(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Nu(n,r=>[r.name,r])}}let bs=t=>{try{return t.only([[]]),bs=()=>[[]],[[]]}catch{return bs=()=>Wn,Wn}};function Xl(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>mn(r,e)}(t):e=>mn(e,t)}function Fo(t){return[].slice.call(t)}let Mg=0;function as(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Bg(t,e,n){function r(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:h,lowerOpen:d,upperOpen:f}=c;return u===void 0?h===void 0?null:e.upperBound(h,!!f):h===void 0?e.lowerBound(u,!!d):e.bound(u,h,!!d,!!f)}const{schema:s,hasGetAll:i}=function(c,u){const h=Fo(c.objectStoreNames);return{schema:{name:c.name,tables:h.map(d=>u.objectStore(d)).map(d=>{const{keyPath:f,autoIncrement:m}=d,y=bt(f),p=f==null,_={},b={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p,compound:y,keyPath:f,autoIncrement:m,unique:!0,extractKey:Xl(f)},indexes:Fo(d.indexNames).map(v=>d.index(v)).map(v=>{const{name:k,unique:x,multiEntry:P,keyPath:U}=v,w={name:k,compound:bt(U),keyPath:U,unique:x,multiEntry:P,extractKey:Xl(U)};return _[as(U)]=w,w}),getIndexByKeyPath:v=>_[as(v)]};return _[":id"]=b.primaryKey,f!=null&&(_[as(f)]=b.primaryKey),b})},hasGetAll:h.length>0&&"getAll"in u.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),l=s.tables.map(c=>function(u){const h=u.name;return{name:h,schema:u,mutate:function({trans:d,type:f,keys:m,values:y,range:p}){return new Promise((_,b)=>{_=Ze(_);const v=d.objectStore(h),k=v.keyPath==null,x=f==="put"||f==="add";if(!x&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:P}=m||y||{length:1};if(m&&y&&m.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let U;const w=[],H=[];let S=0;const I=q=>{++S,ms(q)};if(f==="deleteRange"){if(p.type===4)return _({numFailures:S,failures:H,results:[],lastResult:void 0});p.type===3?w.push(U=v.clear()):w.push(U=v.delete(r(p)))}else{const[q,X]=x?k?[y,m]:[y,null]:[m,null];if(x)for(let F=0;F<P;++F)w.push(U=X&&X[F]!==void 0?v[f](q[F],X[F]):v[f](q[F])),U.onerror=I;else for(let F=0;F<P;++F)w.push(U=v[f](q[F])),U.onerror=I}const O=q=>{const X=q.target.result;w.forEach((F,J)=>F.error!=null&&(H[J]=F.error)),_({numFailures:S,failures:H,results:f==="delete"?m:w.map(F=>F.result),lastResult:X})};U.onerror=q=>{I(q),O(q)},U.onsuccess=O})},getMany:({trans:d,keys:f})=>new Promise((m,y)=>{m=Ze(m);const p=d.objectStore(h),_=f.length,b=new Array(_);let v,k=0,x=0;const P=w=>{const H=w.target;b[H._pos]=H.result,++x===k&&m(b)},U=Gt(y);for(let w=0;w<_;++w)f[w]!=null&&(v=p.get(f[w]),v._pos=w,v.onsuccess=P,v.onerror=U,++k);k===0&&m(b)}),get:({trans:d,key:f})=>new Promise((m,y)=>{m=Ze(m);const p=d.objectStore(h).get(f);p.onsuccess=_=>m(_.target.result),p.onerror=Gt(y)}),query:function(d){return f=>new Promise((m,y)=>{m=Ze(m);const{trans:p,values:_,limit:b,query:v}=f,k=b===1/0?void 0:b,{index:x,range:P}=v,U=p.objectStore(h),w=x.isPrimaryKey?U:U.index(x.name),H=r(P);if(b===0)return m({result:[]});if(d){const S=_?w.getAll(H,k):w.getAllKeys(H,k);S.onsuccess=I=>m({result:I.target.result}),S.onerror=Gt(y)}else{let S=0;const I=_||!("openKeyCursor"in w)?w.openCursor(H):w.openKeyCursor(H),O=[];I.onsuccess=q=>{const X=I.result;return X?(O.push(_?X.value:X.primaryKey),++S===b?m({result:O}):void X.continue()):m({result:O})},I.onerror=Gt(y)}})}(i),openCursor:function({trans:d,values:f,query:m,reverse:y,unique:p}){return new Promise((_,b)=>{_=Ze(_);const{index:v,range:k}=m,x=d.objectStore(h),P=v.isPrimaryKey?x:x.index(v.name),U=y?p?"prevunique":"prev":p?"nextunique":"next",w=f||!("openKeyCursor"in P)?P.openCursor(r(k),U):P.openKeyCursor(r(k),U);w.onerror=Gt(b),w.onsuccess=Ze(H=>{const S=w.result;if(!S)return void _(null);S.___id=++Mg,S.done=!1;const I=S.continue.bind(S);let O=S.continuePrimaryKey;O&&(O=O.bind(S));const q=S.advance.bind(S),X=()=>{throw new Error("Cursor not stopped")};S.trans=d,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=Ze(b),S.next=function(){let F=1;return this.start(()=>F--?this.continue():this.stop()).then(()=>this)},S.start=F=>{const J=new Promise((oe,fe)=>{oe=Ze(oe),w.onerror=Gt(fe),S.fail=fe,S.stop=A=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=X,oe(A)}}),ee=()=>{if(w.result)try{F()}catch(oe){S.fail(oe)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return w.onsuccess=Ze(oe=>{w.onsuccess=ee,ee()}),S.continue=I,S.continuePrimaryKey=O,S.advance=q,ee(),J},_(S)},b)})},count({query:d,trans:f}){const{index:m,range:y}=d;return new Promise((p,_)=>{const b=f.objectStore(h),v=m.isPrimaryKey?b:b.index(m.name),k=r(y),x=k?v.count(k):v.count();x.onsuccess=Ze(P=>p(P.target.result)),x.onerror=Gt(_)})}}}(c)),a={};return l.forEach(c=>a[c.name]=c),{stack:"dbcore",transaction:t.transaction.bind(t),table(c){if(!a[c])throw new Error(`Table '${c}' not found`);return a[c]},MIN_KEY:-1/0,MAX_KEY:bs(e),schema:s}}function Jl({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:l,indexedDB:a},c){return{dbcore:function(h,d){return d.reduce((f,{create:m})=>({...f,...m(f)}),h)}(Bg(i,l,c),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(l=>l.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function xi({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(l=>{const a=ka(l,s);(!a||"value"in a&&a.value===void 0)&&(l===t.Transaction.prototype||l instanceof t.Transaction?pn(l,s,{get(){return this.table(s)},set(c){Iu(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):l[s]=new t.Table(s,i))})})}function Ql({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Fg(t,e){return t._cfg.version-e._cfg.version}function jg(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const l=i._reject.bind(i),a=ve.transless||ve;On(()=>{ve.trans=i,ve.transless=a,e===0?(ut(s).forEach(c=>{nl(n,c,s[c].primKey,s[c].indexes)}),Jl(t,n),ce.follow(()=>t.on.populate.fire(i)).catch(l)):function({_novip:c},u,h,d){const f=[],m=c._versions;let y=c._dbSchema=ta(c,c.idbdb,d),p=!1;const _=m.filter(v=>v._cfg.version>=u);function b(){return f.length?ce.resolve(f.shift()(h.idbtrans)).then(b):ce.resolve()}return _.forEach(v=>{f.push(()=>{const k=y,x=v._cfg.dbschema;na(c,k,d),na(c,x,d),y=c._dbSchema=x;const P=lh(k,x);P.add.forEach(w=>{nl(d,w[0],w[1].primKey,w[1].indexes)}),P.change.forEach(w=>{if(w.recreate)throw new ye.Upgrade("Not yet support for changing primary key");{const H=d.objectStore(w.name);w.add.forEach(S=>ea(H,S)),w.change.forEach(S=>{H.deleteIndex(S.name),ea(H,S)}),w.del.forEach(S=>H.deleteIndex(S))}});const U=v._cfg.contentUpgrade;if(U&&v._cfg.version>u){Jl(c,d),h._memoizedTables={},p=!0;let w=Mu(x);P.del.forEach(O=>{w[O]=k[O]}),Ql(c,[c.Transaction.prototype]),xi(c,[c.Transaction.prototype],ut(w),w),h.schema=w;const H=xa(U);let S;H&&Rr();const I=ce.follow(()=>{if(S=U(h),S&&H){var O=yn.bind(null,null);S.then(O,O)}});return S&&typeof S.then=="function"?ce.resolve(S):I.then(()=>S)}}),f.push(k=>{(!p||!Eg)&&function(x,P){[].slice.call(P.db.objectStoreNames).forEach(U=>x[U]==null&&P.db.deleteObjectStore(U))}(v._cfg.dbschema,k),Ql(c,[c.Transaction.prototype]),xi(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),h.schema=c._dbSchema})}),b().then(()=>{var v,k;k=d,ut(v=y).forEach(x=>{k.db.objectStoreNames.contains(x)||nl(k,x,v[x].primKey,v[x].indexes)})})}(t,e,i,n).catch(l)})}function lh(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const l={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!Mi)l.recreate=!0,n.change.push(l);else{const a=s.idxByName,c=i.idxByName;let u;for(u in a)c[u]||l.del.push(u);for(u in c){const h=a[u],d=c[u];h?h.src!==d.src&&l.change.push(d):l.add.push(d)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}else n.add.push([r,i])}return n}function nl(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>ea(s,i)),s}function ea(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ta(t,e,n){const r={};return _i(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let l=i.keyPath;const a=Zl(sh(l),l||"",!1,!1,!!i.autoIncrement,l&&typeof l!="string",!0),c=[];for(let h=0;h<i.indexNames.length;++h){const d=i.index(i.indexNames[h]);l=d.keyPath;var u=Zl(d.name,l,!!d.unique,!!d.multiEntry,!1,l&&typeof l!="string",!1);c.push(u)}r[s]=ih(s,a,c)}),r}function na({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],l=n.objectStore(i);t._hasGetAll="getAll"in l;for(let a=0;a<l.indexNames.length;++a){const c=l.indexNames[a],u=l.index(c).keyPath,h=typeof u=="string"?u:"["+_i(u).join("+")+"]";if(e[i]){const d=e[i].idxByName[h];d&&(d.name=c,delete e[i].idxByName[h],e[i].idxByName[c]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ye.WorkerGlobalScope&&Ye instanceof Ye.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Ug{_parseStoresSpec(e,n){ut(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((l,a)=>{const c=(l=l.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Zl(c,u||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),bt(u),a===0)}),i=s.shift();if(i.multi)throw new ye.Schema("Primary key cannot be multi-valued");s.forEach(l=>{if(l.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),n[r]=ih(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?St(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(l=>{St(s,l._cfg.storesSource),i=l._cfg.dbschema={},l._parseStoresSpec(s,i)}),n._dbSchema=i,Ql(n,[n._allTables,n,n.Transaction.prototype]),xi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ut(i),i),n._storeNames=ut(i),this}upgrade(e){return this._cfg.contentUpgrade=Ea(this._cfg.contentUpgrade||Ke,e),this}}function Ia(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new vn(Bi,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ra(t){return t&&typeof t.databases=="function"}function ra(t){return On(function(){return ve.letThrough=!0,t()})}function qg(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Kg(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?dt(e.dbOpenError):t);en&&(e.openCanceller._stackHolder=tr()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new ye.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,l=null,a=!1;return ce.race([r,(typeof navigator>"u"?ce.resolve():qg()).then(()=>new ce((c,u)=>{if(s(),!n)throw new ye.MissingAPI;const h=t.name,d=e.autoSchema?n.open(h):n.open(h,Math.round(10*t.verno));if(!d)throw new ye.MissingAPI;d.onerror=Gt(u),d.onblocked=Ze(t._fireOnBlocked),d.onupgradeneeded=Ze(f=>{if(l=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=ms,l.abort(),d.result.close();const y=n.deleteDatabase(h);y.onsuccess=y.onerror=Ze(()=>{u(new ye.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{l.onerror=Gt(u);var m=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=m<1,t._novip.idbdb=d.result,jg(t,m/10,l,u)}},u),d.onsuccess=Ze(()=>{l=null;const f=t._novip.idbdb=d.result,m=_i(f.objectStoreNames);if(m.length>0)try{const p=f.transaction((y=m).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:_},b,v){_.verno=b.version/10;const k=_._dbSchema=ta(0,b,v);_._storeNames=_i(b.objectStoreNames,0),xi(_,[_._allTables],ut(k),k)}(t,f,p):(na(t,t._dbSchema,p),function(_,b){const v=lh(ta(0,_.idbdb,b),_._dbSchema);return!(v.add.length||v.change.some(k=>k.add.length||k.change.length))}(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Jl(t,p)}catch{}var y;is.push(t),f.onversionchange=Ze(p=>{e.vcFired=!0,t.on("versionchange").fire(p)}),f.onclose=Ze(p=>{t.on("close").fire(p)}),a&&function({indexedDB:p,IDBKeyRange:_},b){!Ra(p)&&b!==Bi&&Ia(p,_).put({name:b}).catch(Ke)}(t._deps,h),c()},u)}))]).then(()=>(s(),e.onReadyBeingFired=[],ce.resolve(ra(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Ea,Ke);return e.onReadyBeingFired=[],ce.resolve(ra(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{l&&l.abort()}catch{}return r===e.openCanceller&&t._close(),dt(c)}).finally(()=>{e.openComplete=!0,i()})}function sa(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return l=>{var a=i(l),c=a.value;return a.done?c:c&&typeof c.then=="function"?c.then(n,r):bt(c)?Promise.all(c).then(n,r):n(c)}}return s(e)()}function zg(t,e,n){var r=arguments.length;if(r<2)throw new ye.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Bu(s),n]}function ah(t,e,n,r,s){return ce.resolve().then(()=>{const i=ve.transless||ve,l=t._createTransaction(e,n,t._dbSchema,r),a={trans:l,transless:i};if(r)l.idbtrans=r.idbtrans;else try{l.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===Aa.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ah(t,e,n,null,s))):dt(d)}const c=xa(s);let u;c&&Rr();const h=ce.follow(()=>{if(u=s.call(l,l),u)if(c){var d=yn.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=sa(u))},a);return(u&&typeof u.then=="function"?ce.resolve(u).then(d=>l.active?d:dt(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>u)).then(d=>(r&&l._resolve(),l._completion.then(()=>d))).catch(d=>(l._reject(d),dt(d)))})}function Bs(t,e,n){const r=bt(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const Hg={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function l(h,d,f){const m=as(h),y=s[m]=s[m]||[],p=h==null?0:typeof h=="string"?1:h.length,_=d>0,b={...f,isVirtual:_,keyTail:d,keyLength:p,extractKey:Xl(h),unique:!_&&f.unique};return y.push(b),b.isPrimaryKey||i.push(b),p>1&&l(p===2?h[0]:h.slice(0,p-1),d+1,f),y.sort((v,k)=>v.keyTail-k.keyTail),b}const a=l(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[a];for(const h of r.indexes)l(h.keyPath,0,h);function c(h){const d=h.query.index;return d.isVirtual?{...h,query:{index:d,range:(f=h.query.range,m=d.keyTail,{type:f.type===1?2:f.type,lower:Bs(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Bs(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:h;var f,m}return{...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(h){const d=s[as(h)];return d&&d[0]}},count:h=>n.count(c(h)),query:h=>n.query(c(h)),openCursor(h){const{keyTail:d,isVirtual:f,keyLength:m}=h.query.index;return f?n.openCursor(c(h)).then(y=>y&&function(p){return Object.create(p,{continue:{value:function(b){b!=null?p.continue(Bs(b,h.reverse?t.MAX_KEY:t.MIN_KEY,d)):h.unique?p.continue(p.key.slice(0,m).concat(h.reverse?t.MIN_KEY:t.MAX_KEY,d)):p.continue()}},continuePrimaryKey:{value(b,v){p.continuePrimaryKey(Bs(b,t.MAX_KEY,d),v)}},primaryKey:{get:()=>p.primaryKey},key:{get(){const b=p.key;return m===1?b[0]:b.slice(0,m)}},value:{get:()=>p.value}})}(y)):n.openCursor(h)}}}}}};function Da(t,e,n,r){return n=n||{},r=r||"",ut(t).forEach(s=>{if(Pt(e,s)){var i=t[s],l=e[s];if(typeof i=="object"&&typeof l=="object"&&i&&l){const a=Ml(i);a!==Ml(l)?n[r+s]=e[s]:a==="Object"?Da(i,l,n,r+s+"."):i!==l&&(n[r+s]=e[s])}else i!==l&&(n[r+s]=e[s])}else n[r+s]=void 0}),ut(e).forEach(s=>{Pt(t,s)||(n[r+s]=e[s])}),n}const Wg={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const l=ve.trans,{deleting:a,creating:c,updating:u}=l.table(e).hook;switch(i.type){case"add":if(c.fire===Ke)break;return l._promise("readwrite",()=>h(i),!0);case"put":if(c.fire===Ke&&u.fire===Ke)break;return l._promise("readwrite",()=>h(i),!0);case"delete":if(a.fire===Ke)break;return l._promise("readwrite",()=>h(i),!0);case"deleteRange":if(a.fire===Ke)break;return l._promise("readwrite",()=>function(f){return d(f.trans,f.range,1e4)}(i),!0)}return n.mutate(i);function h(f){const m=ve.trans,y=f.keys||function(p,_){return _.type==="delete"?_.keys:_.keys||_.values.map(p.extractKey)}(r,f);if(!y)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:y}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(p,_,b){return _.type==="add"?Promise.resolve([]):p.getMany({trans:_.trans,keys:b,cache:"immutable"})}(n,f,y).then(p=>{const _=y.map((b,v)=>{const k=p[v],x={onerror:null,onsuccess:null};if(f.type==="delete")a.fire.call(x,b,k,m);else if(f.type==="add"||k===void 0){const P=c.fire.call(x,b,f.values[v],m);b==null&&P!=null&&(b=P,f.keys[v]=b,r.outbound||qt(f.values[v],r.keyPath,b))}else{const P=Da(k,f.values[v]),U=u.fire.call(x,P,b,k,m);if(U){const w=f.values[v];Object.keys(U).forEach(H=>{Pt(w,H)?w[H]=U[H]:qt(w,H,U[H])})}}return x});return n.mutate(f).then(({failures:b,results:v,numFailures:k,lastResult:x})=>{for(let P=0;P<y.length;++P){const U=v?v[P]:y[P],w=_[P];U==null?w.onerror&&w.onerror(b[P]):w.onsuccess&&w.onsuccess(f.type==="put"&&p[P]?f.values[P]:U)}return{failures:b,results:v,numFailures:k,lastResult:x}}).catch(b=>(_.forEach(v=>v.onerror&&v.onerror(b)),Promise.reject(b)))})}function d(f,m,y){return n.query({trans:f,values:!1,query:{index:r,range:m},limit:y}).then(({result:p})=>h({type:"delete",keys:p,trans:f}).then(_=>_.numFailures>0?Promise.reject(_.failures[0]):p.length<y?{failures:[],numFailures:0,lastResult:void 0}:d(f,{...m,lower:p[p.length-1],lowerOpen:!0},y)))}}}}})};function oh(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)Ct(e.keys[s],t[i])===0&&(r.push(n?$s(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const Vg={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=oh(r.keys,r.trans._cache,r.cache==="clone");return s?ce.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?$s(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Na(t){return!("from"in t)}const un=function(t,e){if(!this){const n=new un;return t&&"d"in t&&St(n,t),n}St(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function ys(t,e,n){const r=Ct(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Na(t))return St(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(Ct(n,t.from)<0)return s?ys(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},jo(t);if(Ct(e,t.to)>0)return i?ys(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},jo(t);Ct(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),Ct(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const l=!t.r;s&&!t.l&&Ti(t,s),i&&l&&Ti(t,i)}function Ti(t,e){Na(e)||function n(r,{from:s,to:i,l,r:a}){ys(r,s,i),l&&n(r,l),a&&n(r,a)}(t,e)}function Gg(t,e){const n=ia(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=ia(t);let l=i.next(s.from),a=l.value;for(;!r.done&&!l.done;){if(Ct(a.from,s.to)<=0&&Ct(a.to,s.from)>=0)return!0;Ct(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(l=i.next(s.from)).value}return!1}function ia(t){let e=Na(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Ct(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Ct(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function jo(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",l={...t},a=t[s];t.from=a.from,t.to=a.to,t[s]=a[s],l[s]=a[i],t[i]=l,l.d=Uo(l)}t.d=Uo(t)}function Uo({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Ar(un.prototype,{add(t){return Ti(this,t),this},addKey(t){return ys(this,t,t),this},addKeys(t){return t.forEach(e=>ys(this,e,e)),this},[Bl](){return ia(this)}});const Yg={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new un(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:l}=i,{extractKey:a,outbound:c}=l,u={...s,mutate:f=>{const m=f.trans,y=m.mutatedParts||(m.mutatedParts={}),p=U=>{const w=`idb://${e}/${r}/${U}`;return y[w]||(y[w]=new un)},_=p(""),b=p(":dels"),{type:v}=f;let[k,x]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const P=f.trans._cache;return s.mutate(f).then(U=>{if(bt(k)){v!=="delete"&&(k=U.results),_.addKeys(k);const w=oh(k,P);w||v==="add"||b.addKeys(k),(w||x)&&function(H,S,I,O){function q(X){const F=H(X.name||"");function J(oe){return oe!=null?X.extractKey(oe):null}const ee=oe=>X.multiEntry&&bt(oe)?oe.forEach(fe=>F.addKey(fe)):F.addKey(oe);(I||O).forEach((oe,fe)=>{const A=I&&J(I[fe]),T=O&&J(O[fe]);Ct(A,T)!==0&&(A!=null&&ee(A),T!=null&&ee(T))})}S.indexes.forEach(q)}(p,i,w,x)}else if(k){const w={from:k.lower,to:k.upper};b.add(w),_.add(w)}else _.add(n),b.add(n),i.indexes.forEach(w=>p(w.name).add(n));return U})}},h=({query:{index:f,range:m}})=>{var y,p;return[f,new un((y=m.lower)!==null&&y!==void 0?y:t.MIN_KEY,(p=m.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},d={get:f=>[l,new un(f.key)],getMany:f=>[l,new un().addKeys(f.keys)],count:h,query:h,openCursor:h};return ut(d).forEach(f=>{u[f]=function(m){const{subscr:y}=ve;if(y){const p=x=>{const P=`idb://${e}/${r}/${x}`;return y[P]||(y[P]=new un)},_=p(""),b=p(":dels"),[v,k]=d[f](m);if(p(v.name||"").add(k),!v.isPrimaryKey){if(f!=="count"){const x=f==="query"&&c&&m.values&&s.query({...m,values:!1});return s[f].apply(this,arguments).then(P=>{if(f==="query"){if(c&&m.values)return x.then(({result:w})=>(_.addKeys(w),P));const U=m.values?P.result.map(a):P.result;m.values?_.addKeys(U):b.addKeys(U)}else if(f==="openCursor"){const U=P,w=m.values;return U&&Object.create(U,{key:{get:()=>(b.addKey(U.primaryKey),U.key)},primaryKey:{get(){const H=U.primaryKey;return b.addKey(H),H}},value:{get:()=>(w&&_.addKey(U.primaryKey),U.value)}})}return P})}b.add(n)}}return s[f].apply(this,arguments)}}),u}}}};class vn{constructor(e,n){this._middlewares={},this.verno=0;const r=vn.dependencies;this._options=n={addons:vn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var l;i.dbReadyPromise=new ce(a=>{i.dbReadyResolve=a}),i.openCanceller=new ce((a,c)=>{i.cancelOpen=c}),this._state=i,this.name=e,this.on=ls(this,"populate","blocked","versionchange","close",{ready:[Ea,Ke]}),this.on.ready.subscribe=Ru(this.on.ready.subscribe,a=>(c,u)=>{vn.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||ce.resolve().then(c),u&&a(c);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(c),u&&a(c);else{a(c);const d=this;u||a(function f(){d.on.ready.unsubscribe(c),d.on.ready.unsubscribe(f)})}})}),this.Collection=(l=this,jr(Og.prototype,function(a,c){this.db=l;let u=th,h=null;if(c)try{u=c()}catch(y){h=y}const d=a._ctx,f=d.table,m=f.hook.reading.fire;this._ctx={table:f,index:d.index,isPrimKey:!d.index||f.schema.primKey.keyPath&&d.index===f.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:d.or,valueMapper:m!==gs?m:null}})),this.Table=function(a){return jr(Pg.prototype,function(c,u,h){this.db=a,this._tx=h,this.name=c,this.schema=u,this.hook=a._allTables[c]?a._allTables[c].hook:ls(null,{creating:[yg,Ke],reading:[bg,gs],updating:[wg,Ke],deleting:[_g,Ke]})})}(this),this.Transaction=function(a){return jr(Ng.prototype,function(c,u,h,d,f){this.db=a,this.mode=c,this.storeNames=u,this.schema=h,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=ls(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ce((m,y)=>{this._resolve=m,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var y=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):y&&this.idbtrans&&this.idbtrans.abort(),dt(m)})})}(this),this.Version=function(a){return jr(Ug.prototype,function(c){this.db=a,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return jr(rh.prototype,function(c,u,h){this.db=a,this._ctx={table:c,index:u===":id"?null:u,or:h};const d=a._deps.indexedDB;if(!d)throw new ye.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(f,m)=>d.cmp(m,f),this._max=(f,m)=>d.cmp(f,m)>0?f:m,this._min=(f,m)=>d.cmp(f,m)<0?f:m,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=bs(n.IDBKeyRange),this._createTransaction=(a,c,u,h)=>new this.Transaction(a,c,u,this._options.chromeTransactionDurability,h),this._fireOnBlocked=a=>{this.on("blocked").fire(a),is.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(a))},this.use(Hg),this.use(Wg),this.use(Yg),this.use(Vg),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new ye.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Fg),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?e():new ce((n,r)=>{if(this._state.openComplete)return r(new ye.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ye.DatabaseClosed);this.open().catch(Ke)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((l,a)=>l.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Kg(this)}_close(){const e=this._state,n=is.indexOf(this);if(n>=0&&is.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ce(r=>{e.dbReadyResolve=r}),e.openCanceller=new ce((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ye.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new ce((r,s)=>{const i=()=>{this.close();var l=this._deps.indexedDB.deleteDatabase(this.name);l.onsuccess=Ze(()=>{(function({indexedDB:a,IDBKeyRange:c},u){!Ra(a)&&u!==Bi&&Ia(a,c).delete(u).catch(Ke)})(this._deps,this.name),r()}),l.onerror=Gt(s),l.onblocked=this._fireOnBlocked};if(e)throw new ye.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ut(this._allTables).map(e=>this._allTables[e])}transaction(){const e=zg.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=ve.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let l,a;e=e.replace("!","").replace("?","");try{if(a=n.map(u=>{var h=u instanceof this.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===Xi)l=Xi;else{if(e!="rw"&&e!=Ji)throw new ye.InvalidArgument("Invalid transaction mode: "+e);l=Ji}if(s){if(s.mode===Xi&&l===Ji){if(!i)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(u=>{if(s&&s.storeNames.indexOf(u)===-1){if(!i)throw new ye.SubTransaction("Table "+u+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,(h,d)=>{d(u)}):dt(u)}const c=ah.bind(null,this,l,a,s,r);return s?s._promise(l,c,"lock"):ve.trans?Dr(ve.transless,()=>this._whenReady(c)):this._whenReady(c)}table(e){if(!Pt(this._allTables,e))throw new ye.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Zg=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Xg{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Zg](){return this}}function ch(t,e){return ut(e).forEach(n=>{Ti(t[n]||(t[n]=new un),e[n])}),t}function Jg(t){let e,n=!1;const r=new Xg(s=>{const i=xa(t);let l=!1,a={},c={};const u={get closed(){return l},unsubscribe:()=>{l=!0,Rn.storagemutated.unsubscribe(m)}};s.start&&s.start(u);let h=!1,d=!1;function f(){return ut(c).some(p=>a[p]&&Gg(a[p],c[p]))}const m=p=>{ch(a,p),f()&&y()},y=()=>{if(h||l)return;a={};const p={},_=function(b){i&&Rr();const v=()=>On(t,{subscr:b,trans:null}),k=ve.trans?Dr(ve.transless,v):v();return i&&k.then(yn,yn),k}(p);d||(Rn(vs,m),d=!0),h=!0,Promise.resolve(_).then(b=>{n=!0,e=b,h=!1,l||(f()?y():(a={},c=p,s.next&&s.next(b)))},b=>{h=!1,n=!1,s.error&&s.error(b),u.unsubscribe()})};return y(),u});return r.hasValue=()=>n,r.getValue=()=>e,r}let la;try{la={indexedDB:Ye.indexedDB||Ye.mozIndexedDB||Ye.webkitIndexedDB||Ye.msIndexedDB,IDBKeyRange:Ye.IDBKeyRange||Ye.webkitIDBKeyRange}}catch{la={indexedDB:null,IDBKeyRange:null}}const Bn=vn;function ii(t){let e=dn;try{dn=!0,Rn.storagemutated.fire(t)}finally{dn=e}}Ar(Bn,{...Qs,delete:t=>new Bn(t,{addons:[]}).delete(),exists:t=>new Bn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Ra(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==Bi)):Ia(e,n).toCollection().primaryKeys()}(Bn.dependencies).then(t)}catch{return dt(new ye.MissingAPI)}},defineClass:()=>function(t){St(this,t)},ignoreTransaction:t=>ve.trans?Dr(ve.transless,t):t(),vip:ra,async:function(t){return function(){try{var e=sa(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ce.resolve(e)}catch(n){return dt(n)}}},spawn:function(t,e,n){try{var r=sa(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:ce.resolve(r)}catch(s){return dt(s)}},currentTransaction:{get:()=>ve.trans||null},waitFor:function(t,e){const n=ce.resolve(typeof t=="function"?Bn.ignoreTransaction(t):t).timeout(e||6e4);return ve.trans?ve.trans.waitFor(n):n},Promise:ce,debug:{get:()=>en,set:t=>{ju(t,t==="dexie"?()=>!0:eh)}},derive:yr,extend:St,props:Ar,override:Ru,Events:ls,on:Rn,liveQuery:Jg,extendObservabilitySet:ch,getByKeyPath:mn,setByKeyPath:qt,delByKeyPath:function(t,e){typeof e=="string"?qt(t,e,void 0):"length"in e&&[].map.call(e,function(n){qt(t,n,void 0)})},shallowClone:Mu,deepClone:$s,getObjectDiff:Da,cmp:Ct,asap:Du,minKey:Yl,addons:[],connections:is,errnames:Aa,dependencies:la,semVer:Ro,version:Ro.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Bn.maxKey=bs(Bn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rn(vs,t=>{if(!dn){let e;Mi?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Tn,!0,!0,t)):e=new CustomEvent(Tn,{detail:t}),dn=!0,dispatchEvent(e),dn=!1}}),addEventListener(Tn,({detail:t})=>{dn||ii(t)}));let dn=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Tn);typeof t.unref=="function"&&t.unref(),Rn(vs,e=>{dn||t.postMessage(e)}),t.onmessage=e=>{e.data&&ii(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Rn(vs,e=>{try{dn||(typeof localStorage<"u"&&localStorage.setItem(Tn,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Tn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Tn){const n=JSON.parse(e.newValue);n&&ii(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Tn&&ii(e.changedParts)})}ce.rejectionMapper=function(t,e){if(!t||t instanceof _r||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Lo[t.name])return t;var n=new Lo[t.name](e||t.message,t);return"stack"in t&&pn(n,"stack",{get:function(){return this.inner.stack}}),n},ju(en,eh);class Qg extends vn{userSettings;constructor(e){super(e),this.version(1).stores({userSettings:"userId"})}}const uh=new Qg("userSettings"),[qo,aa]=R({userId:0,username:"",email:"",theme:"light"}),[ep,Ko]=R(!1);function Ie(t){return t&&Ko(!1),ep()||(Ko(!0),np().pipe(we(1),at(e=>{e.length>0&&e[0].userId===qo().userId&&aa(e[0])})).subscribe()),[qo,aa]}function tp(t,e){uh.userSettings.put(t).then(()=>{e&&e()}).catch(n=>{console.error(n)}),aa(t)}function np(){return _e.toObservable(uh.userSettings.toArray())}const rp="_body_1g476_1",sp="_primary_1g476_14",ip="_accent_1g476_27",lp="_tertiary_1g476_36",ap="_warn_1g476_44",op="_hover_1g476_48",cp="_popup_1g476_62",$n={body:rp,primary:sp,accent:ip,tertiary:lp,warn:ap,hover:op,popup:cp},up="_body_yc4l_1",hp="_primary_yc4l_14",dp="_accent_yc4l_27",fp="_tertiary_yc4l_36",gp="_warn_yc4l_44",pp="_hover_yc4l_48",mp="_popup_yc4l_62",Cn={body:up,primary:hp,accent:dp,tertiary:fp,warn:gp,hover:pp,popup:mp},Kn=function(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor),t},vp="_active_88uab_1",bp="_inactive_88uab_6",yp="_navbar_88uab_11",rl={active:vp,inactive:bp,navbar:yp};var _p=C('<svg width=40 height=40 viewBox="0 0 83 88"fill=none xmlns=http://www.w3.org/2000/svg><path d="M31.125 57.75C31.125 57.0207 31.3983 56.3212 31.8847 55.8055C32.3711 55.2897 33.0308 55 33.7188 55H49.2812C49.9692 55 50.6289 55.2897 51.1153 55.8055C51.6017 56.3212 51.875 57.0207 51.875 57.75C51.875 58.4793 51.6017 59.1788 51.1153 59.6945C50.6289 60.2103 49.9692 60.5 49.2812 60.5H33.7188C33.0308 60.5 32.3711 60.2103 31.8847 59.6945C31.3983 59.1788 31.125 58.4793 31.125 57.75ZM20.75 41.25C20.75 40.5207 21.0233 39.8212 21.5097 39.3055C21.9961 38.7897 22.6558 38.5 23.3438 38.5H59.6562C60.3442 38.5 61.0039 38.7897 61.4903 39.3055C61.9767 39.8212 62.25 40.5207 62.25 41.25C62.25 41.9793 61.9767 42.6788 61.4903 43.1945C61.0039 43.7103 60.3442 44 59.6562 44H23.3438C22.6558 44 21.9961 43.7103 21.5097 43.1945C21.0233 42.6788 20.75 41.9793 20.75 41.25ZM10.375 24.75C10.375 24.0207 10.6483 23.3212 11.1347 22.8055C11.6211 22.2897 12.2808 22 12.9688 22H70.0312C70.7192 22 71.3789 22.2897 71.8653 22.8055C72.3517 23.3212 72.625 24.0207 72.625 24.75C72.625 25.4793 72.3517 26.1788 71.8653 26.6945C71.3789 27.2103 70.7192 27.5 70.0312 27.5H12.9688C12.2808 27.5 11.6211 27.2103 11.1347 26.6945C10.6483 26.1788 10.375 25.4793 10.375 24.75Z"fill=white>');const wp=()=>_p();var $p=C("<li><div>"),Cp=C("<div><div><span></span><ul>"),Sp=C("<li>");const kp=t=>{const[e,n]=Ie(),r=K(()=>Oe(e().theme));R(!1),R(!1);const[s,i]=R(window.location.pathname),l=[{Name:"Home",Link:"/"},{Name:"Characters",Link:"/characters"},{Name:"Info",Link:"/info"},{Name:"Homebrew",Link:"/homebrew"}],[{list:[a,c]},u]=pt(t,["list"]),h=d=>s()==="/"&&d.Link==="/"||s().startsWith(d.Link)&&s()!=="/"&&d.Link!=="/"?rl.active:rl.inactive;return V(()=>{u.isMobile&&c(!1)}),(()=>{var d=Cp(),f=d.firstChild,m=f.firstChild,y=m.nextSibling;return g(m,o(Hn,{href:"/",children:"MySite"})),g(y,o(G,{get when(){return u.isMobile},get children(){var p=$p(),_=p.firstChild;return g(_,o(Hn,{href:"/",children:"MySite"})),p}}),null),g(y,o(Q,{each:l,children:(p,_)=>o(G,{get when(){return!u.isMobile||_()===0||a()},get children(){var b=Sp();return g(b,o(Hn,{onClick:()=>i(p.Link),get href(){return p.Link},get children(){return p.Name}})),V(()=>z(b,`${r()?.accent} ${r()?.hover} ${h(p)}`)),b}})}),null),g(f,o(ae,{onClick:()=>c(p=>!p),get children(){return o(wp,{})}}),null),V(p=>{var _=`${r()?.primary} ${rl.navbar}`,b=`${u.style??""}`,v=u.isMobile?{margin:"0 auto",width:"min-content"}:{};return _!==p.e&&z(d,p.e=_),b!==p.t&&z(f,p.t=b),p.a=va(y,v,p.a),p},{e:void 0,t:void 0,a:void 0}),d})()};var xp=(t,e)=>{Je(()=>{const n=r=>{const s=t();!s||s.contains(r.target)||e(r)};document.addEventListener("click",n),bn(()=>document.removeEventListener("click",n))})},Ma=xp,Tp=C("<b>X"),Ap=C("<div><div><h2 style=margin-left:5%></h2><span>");const Ut=t=>{const[e,n]=Ie();Ue(rt);const r=K(()=>Oe(e().theme)),[s,i]=t.backgroundClick??R(!0),l=tn(),a=t.translate?.x??"-50%",c=t.translate?.y??"-50%",[u,h]=R();return Ma(()=>t.ref?t.ref():u(),()=>{i(d=>!d)}),o(ba,{ref:d=>h(d),get children(){var d=Ap(),f=d.firstChild,m=f.firstChild,y=m.nextSibling;return`translate(${a},${c})`!=null?d.style.setProperty("transform",`translate(${a},${c})`):d.style.removeProperty("transform"),d.style.setProperty("padding","0px"),d.style.setProperty("padding-bottom","5px"),d.style.setProperty("padding-top","3.8rem"),d.style.setProperty("overflow","hidden"),f.style.setProperty("display","flex"),f.style.setProperty("justify-content","space-between"),f.style.setProperty("position","fixed"),f.style.setProperty("top","0"),f.style.setProperty("left","0"),f.style.setProperty("right","0"),g(m,()=>t.title??"Modal"),g(y,o(ae,{onClick:()=>t.setClose?t.setClose(p=>!p):i(p=>!p),get children(){return Tp()}})),g(d,()=>t.children,null),V(p=>{var _=t.width?t.width:l.isMobile()?"90vw":"45vw",b=t.height?t.height:l.isMobile()?"90vh":"60vh",v=`${r()?.popup} ${r()?.primary}`,k=r()?.accent;return _!==p.e&&((p.e=_)!=null?d.style.setProperty("width",_):d.style.removeProperty("width")),b!==p.t&&((p.t=b)!=null?d.style.setProperty("height",b):d.style.removeProperty("height")),v!==p.a&&z(d,p.a=v),k!==p.o&&z(f,p.o=k),p},{e:void 0,t:void 0,a:void 0,o:void 0}),d}})};class pr{set;constructor(){this.set=new Map}add(e){this.set.set(JSON.stringify(e),e)}delete(e){this.set.delete(JSON.stringify(e))}get value(){return Array.from(this.set.values())}set value(e){e?.length&&(this.clear(),e.forEach(n=>this.add(n)))}clear(){this.set.clear()}}const sl=(t,e,n)=>t.sort((r,s)=>{switch(e){case"cost":const i=r[e],l=s[e];if(i.quantity>l.quantity)return n?1:-1;if(i.quantity<l.quantity)return n?-1:1;break;case"damage":const a=r[e],c=s[e];if(a[0].damageDice>c[0].damageDice)return n?1:-1;if(a[0].damageDice<c[0].damageDice)return n?-1:1;break;case"range":const u=r[e],h=s[e];if(u.normal>h.normal)return n?1:-1;if(u.normal<h.normal)return n?-1:1;break;case"armorClass":const d=r[e],f=s[e];if(d.base>f.base)return n?1:-1;if(d.base<f.base)return n?-1:1;break;default:if(r[e]>s[e])return n?1:-1;if(r[e]<s[e])return n?-1:1;break}return 0});function zo(t,e,n,r={full:1,half:.5,third:1/3}){if(t<1||e<1||e>9)return 0;const s=r[n]?r[n]:1,i=Math.ceil(t*s);if(i<e*2-1)return"-";const l=()=>e===5&&i>=18||e===6&&i>=19||e===7&&i>=20?1:0;return e===1?2+(i>2?2:Math.floor(i/2)):e<=3?2+(i>9||i>=e*2?1:0):e===4?1+(i>=9?2:i===8?1:0):e===5?1+(i>17?2:i>=e*2?1:0):e<=7?(i>9||i>=e*2?1:0)+l():Math.min(1,1+Math.abs(Math.floor((i-e*2)/2)))}function Ho(t,e,n=!1){const r=i=>i===0?"cantrips_known":`spell_slots_level_${i}`,s={};if(e==="half")switch(n&&(t<10?s[r(0)]=2:t<14?s[r(0)]=3:s[r(0)]=4),t){case 2:s[r(1)]=2;break;case 3:case 4:s[r(1)]=3;break;case 5:case 6:s[r(1)]=4,s[r(2)]=2;break;case 7:case 8:s[r(1)]=4,s[r(2)]=3;break;case 9:case 10:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 11:case 12:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 13:case 14:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break;case 15:case 16:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=2;break;case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3,s[r(5)]=1;break}else switch(n&&(t<10?s[r(0)]=2:s[r(0)]=3),t){case 3:s[r(1)]=2;break;case 4:case 5:case 6:s[r(1)]=3;break;case 7:case 8:case 9:s[r(1)]=4,s[r(2)]=2;break;case 10:case 11:case 12:s[r(1)]=4,s[r(2)]=3;break;case 13:case 14:case 15:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 16:case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break}return s}const hh=t=>{switch(t){case 0:return"Cantrip";case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`;default:return`${t}th`}};function it(t){return JSON.parse(JSON.stringify(t))}function Ep(t){return Array.from({length:t},(e,n)=>n+1)}const Lp=t=>{switch(t){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${t}th`}},Pp=t=>{const e=[];return t.isVerbal&&e.push("V"),t.isSomatic&&e.push("S"),t.isMaterial&&e.push("M"),t.materials_Needed?[e.join(", "),t.materials_Needed??null].join(", "):e.join(", ")},Op=t=>{const e=JSON.parse(JSON.stringify(t));return typeof e=="string"?e:Array.isArray(e)?e.join(`
 
`):"-unknown-"};var Ip=C('<svg width=46 height=44><path d="M24.15 12.7875L37.6625 25.575C39.1 26.95 39.1 29.15 37.6625 30.525C36.225 31.9 33.925 31.9 32.4875 30.525L24.15 22.6875C23.4312 22 22.425 22 21.7062 22.6875L13.3687 30.525C11.9312 31.9 9.63123 31.9 8.19373 30.525C6.75623 29.15 6.75623 26.95 8.19373 25.575L21.7062 12.7875C22.425 12.2375 23.575 12.2375 24.15 12.7875Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>'),Rp=C('<svg width=44 height=43><path d="M20.7625 31.8469L7.83752 19.35C6.46252 18.0062 6.46252 15.8562 7.83752 14.5125C9.21252 13.1687 11.4125 13.1687 12.7875 14.5125L20.7625 22.1719C21.45 22.8437 22.4125 22.8437 23.1 22.1719L31.075 14.5125C32.45 13.1687 34.65 13.1687 36.025 14.5125C37.4 15.8562 37.4 18.0062 36.025 19.35L23.1 31.8469C22.55 32.3844 21.45 32.3844 20.7625 31.8469Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>');const Ba=t=>(()=>{var e=Ip();return nt(e,Qe(t,{viewBox:"0 0 46 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),Fa=t=>(()=>{var e=Rp();return nt(e,Qe(t,{viewBox:"0 0 44 43",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();var Dp=C('<svg width=26 height=17 viewBox="0 0 26 17"fill=none xmlns=http://www.w3.org/2000/svg><path d="M25.9732 8.37285C25.9671 8.35975 25.8692 8.14406 25.6726 7.78919C24.6176 5.88731 20.727 0 13.0002 0C3.83202 0 0.0644916 8.28892 0.0271169 8.37285C-0.00903897 8.45467 -0.00903897 8.54533 0.0271169 8.6275C0.0644916 8.71108 3.83202 17 13.0002 17C20.7229 17 24.6135 11.1191 25.6706 9.21435C25.868 8.85771 25.9667 8.6406 25.9728 8.6275C26.009 8.54533 26.009 8.45467 25.9732 8.37285ZM13.0002 16.2917C5.00282 16.2917 1.35026 9.51894 0.846515 8.49965C1.34945 7.47894 4.99226 0.708333 13.0002 0.708333C20.9975 0.708333 24.6501 7.48106 25.1538 8.50035C24.6509 9.52106 21.0081 16.2917 13.0002 16.2917Z"fill=white></path><path d="M13.0002 2.83475C9.41018 2.83475 6.50024 5.37164 6.50024 8.50141C6.50024 11.6312 9.41018 14.1681 13.0002 14.1681C16.5902 14.1681 19.5001 11.6312 19.5001 8.50141C19.5001 5.37164 16.5902 2.83475 13.0002 2.83475ZM13.0002 13.4597C9.85909 13.4597 7.31274 11.2398 7.31274 8.50141C7.31274 5.763 9.85909 3.54308 13.0002 3.54308C16.1413 3.54308 18.6876 5.763 18.6876 8.50141C18.6876 11.2398 16.1413 13.4597 13.0002 13.4597Z"fill=white></path><path d="M13.0002 5.66809C11.2054 5.66809 9.75024 6.93672 9.75024 8.50142C9.75024 10.0661 11.2054 11.3348 13.0002 11.3348C14.795 11.3348 16.2502 10.0661 16.2502 8.50142C16.2502 6.93672 14.795 5.66809 13.0002 5.66809ZM13.0002 10.6264C11.6543 10.6264 10.5627 9.67478 10.5627 8.50142C10.5627 7.32807 11.6543 6.37642 13.0002 6.37642C14.3461 6.37642 15.4377 7.32807 15.4377 8.50142C15.4377 9.67478 14.3461 10.6264 13.0002 10.6264Z"fill=white></path><path d="M13.0002 7.08333C12.7755 7.08333 12.5939 7.24164 12.5939 7.43749C12.5939 7.63335 12.7755 7.79166 13.0002 7.79166C13.4487 7.79166 13.8127 8.109 13.8127 8.5C13.8127 8.69585 13.9943 8.85416 14.2189 8.85416C14.4436 8.85416 14.6252 8.69585 14.6252 8.5C14.6252 7.71764 13.8976 7.08333 13.0002 7.08333Z"fill=white>');const Np=()=>Dp();var Mp=C('<svg width=50 height=50><path fill-rule=evenodd clip-rule=evenodd d="M20.8333 4.16663C19.6827 4.16663 18.75 5.09938 18.75 6.24996V9.54533C17.3015 10.1316 15.9551 10.915 14.7439 11.8617L11.887 10.2123C11.4085 9.93604 10.8398 9.86117 10.3061 10.0042C9.77239 10.1472 9.31737 10.4964 9.0411 10.9749L4.87443 18.1917C4.29914 19.1882 4.64054 20.4623 5.63697 21.0377L8.49283 22.6864C8.3876 23.4433 8.33331 24.2158 8.33331 25C8.33331 25.7841 8.3876 26.5564 8.49283 27.3135L5.63699 28.9622C5.15847 29.2385 4.80933 29.6935 4.66631 30.2272C4.52331 30.761 4.59816 31.3295 4.87443 31.8081L9.0411 39.025C9.31737 39.5035 9.77241 39.8527 10.3061 39.9958C10.8398 40.1387 11.4085 40.0639 11.887 39.7877L14.7439 38.1381C15.9552 39.0847 17.3015 39.8683 18.75 40.4545V43.75C18.75 44.9006 19.6827 45.8333 20.8333 45.8333H29.1667C30.3171 45.8333 31.25 44.9006 31.25 43.75V40.4545C32.6984 39.8683 34.0448 39.0847 35.2561 38.1381L38.113 39.7877C38.5915 40.0639 39.16 40.1387 39.6938 39.9958C40.2275 39.8527 40.6825 39.5035 40.9588 39.0252L45.1255 31.8083C45.4017 31.3298 45.4767 30.761 45.3336 30.2272C45.1907 29.6937 44.8415 29.2385 44.363 28.9622L41.5071 27.3135C41.6123 26.5566 41.6667 25.7841 41.6667 25C41.6667 24.2158 41.6123 23.4433 41.5071 22.6864L44.363 21.0377C45.3594 20.4623 45.7009 19.1881 45.1255 18.1917L40.9588 10.9748C40.6825 10.4963 40.2275 10.1471 39.6938 10.0041C39.16 9.86113 38.5915 9.93598 38.113 10.2123L35.2561 11.8617C34.0448 10.915 32.6984 10.1316 31.25 9.54533V6.24996C31.25 5.09938 30.3171 4.16663 29.1667 4.16663H20.8333ZM22.9167 11.0205V8.33329H27.0834V11.0205C27.0834 11.9422 27.689 12.7544 28.5723 13.0173C30.4705 13.5822 32.1823 14.5874 33.5882 15.9172C34.2575 16.5505 35.2634 16.6687 36.0615 16.208L38.3921 14.8624L40.4755 18.4708L38.1477 19.8147C37.3502 20.2751 36.9496 21.2043 37.1623 22.1002C37.3827 23.0287 37.5 23.9993 37.5 25C37.5 26.0006 37.3827 26.9712 37.1623 27.8997C36.9496 28.7956 37.3502 29.7248 38.1477 30.1852L40.4755 31.5291L38.3921 35.1375L36.0613 33.7918C35.2634 33.3312 34.2575 33.4493 33.588 34.0827C32.1823 35.4125 30.4705 36.4177 28.5723 36.9825C27.689 37.2454 27.0834 38.0577 27.0834 38.9793V41.6666H22.9167V38.9793C22.9167 38.0577 22.3109 37.2454 21.4275 36.9825C19.5294 36.4177 17.8177 35.4125 16.4118 34.0827C15.7424 33.4493 14.7365 33.3312 13.9385 33.7918L11.6079 35.1375L9.52454 31.5291L11.8522 30.1852C12.6496 29.7248 13.0502 28.7956 12.8376 27.8997C12.6171 26.9712 12.5 26.0006 12.5 25C12.5 23.9993 12.6171 23.0287 12.8376 22.1002C13.0502 21.2043 12.6496 20.2751 11.8522 19.8147L9.52454 18.4709L11.6079 14.8624L13.9385 16.208C14.7365 16.6687 15.7424 16.5505 16.4118 15.9172C17.8176 14.5874 19.5294 13.5822 21.4275 13.0173C22.3109 12.7544 22.9167 11.9422 22.9167 11.0205ZM20.8333 25C20.8333 22.6987 22.6988 20.8333 25 20.8333C27.3013 20.8333 29.1667 22.6987 29.1667 25C29.1667 27.3012 27.3013 29.1666 25 29.1666C22.6988 29.1666 20.8333 27.3012 20.8333 25ZM25 16.6666C20.3976 16.6666 16.6667 20.3976 16.6667 25C16.6667 29.6022 20.3976 33.3333 25 33.3333C29.6023 33.3333 33.3334 29.6022 33.3334 25C33.3334 20.3976 29.6023 16.6666 25 16.6666Z"fill=black>');const Bp=t=>(()=>{var e=Mp();return nt(e,Qe(t,{viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();var Fp=C('<svg width=21 height=19 viewBox="0 0 21 19"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_19_710)><path d="M20.6154 3.70551L16.903 0.346669C16.3905 -0.11705 15.56 -0.11705 15.0468 0.346965C15.0468 0.346965 0.39736 13.6012 0.197532 13.782C-0.001968 13.9622 7.37507e-07 14.2487 7.37507e-07 14.2487L0.000328863 18.4047C0.000328863 18.7327 0.294329 18.9984 0.656251 18.9987H2.29359C2.29458 18.9987 5.25 18.9987 5.25 18.9987C5.25 18.9987 5.56599 19.0011 5.76581 18.82C5.96564 18.6389 20.6154 5.38434 20.6154 5.38434C21.1286 4.92062 21.1286 4.16983 20.6154 3.70551ZM12.2574 3.70997L13.4174 4.75972L2.28047 14.8365L1.12022 13.7868L12.2574 3.70997ZM2.74444 15.2563L13.8813 5.17979L15.2736 6.43943L4.13634 16.5157L2.74444 15.2563ZM0.984704 18.4047C0.803251 18.4047 0.656251 18.2723 0.656579 18.1081V17.6382L1.5038 18.4047H0.984704ZM2.43174 18.405L0.656579 16.7989L0.656907 14.2072L5.29692 18.4053H2.43174V18.405ZM5.76089 17.9852L4.60064 16.9355L15.7379 6.85951L16.8978 7.90897L5.76089 17.9852ZM17.3618 7.48918L12.7217 3.29018L13.6497 2.45062L18.2903 6.64932L17.3618 7.48918ZM20.1515 4.96515L18.754 6.22954L14.1136 2.03084L15.5108 0.767044C15.7674 0.534887 16.1831 0.534887 16.4391 0.76645L20.1515 4.12529C20.4077 4.35745 20.4074 4.733 20.1515 4.96515Z"fill=white></path></g><defs><clipPath id=clip0_19_710><rect width=21 height=19 fill=white>');const jp=()=>Fp();var Up=C('<svg width=8 height=38><path d="M8 33.6154C8 34.7783 7.57857 35.8935 6.82843 36.7158C6.07828 37.5381 5.06087 38 4 38C2.93913 38 1.92172 37.5381 1.17157 36.7158C0.421427 35.8935 0 34.7783 0 33.6154C0 32.4525 0.421427 31.3373 1.17157 30.515C1.92172 29.6927 2.93913 29.2308 4 29.2308C5.06087 29.2308 6.07828 29.6927 6.82843 30.515C7.57857 31.3373 8 32.4525 8 33.6154ZM8 19C8 20.1629 7.57857 21.2781 6.82843 22.1004C6.07828 22.9227 5.06087 23.3846 4 23.3846C2.93913 23.3846 1.92172 22.9227 1.17157 22.1004C0.421427 21.2781 0 20.1629 0 19C0 17.8371 0.421427 16.7219 1.17157 15.8996C1.92172 15.0773 2.93913 14.6154 4 14.6154C5.06087 14.6154 6.07828 15.0773 6.82843 15.8996C7.57857 16.7219 8 17.8371 8 19ZM8 4.38462C8 5.54749 7.57857 6.66273 6.82843 7.48501C6.07828 8.30728 5.06087 8.76923 4 8.76923C2.93913 8.76923 1.92172 8.30728 1.17157 7.48501C0.421427 6.66273 0 5.54749 0 4.38462C0 3.22174 0.421427 2.1065 1.17157 1.28422C1.92172 0.461949 2.93913 0 4 0C5.06087 0 6.07828 0.461949 6.82843 1.28422C7.57857 2.1065 8 3.22174 8 4.38462Z"fill=black>');const qp=t=>(()=>{var e=Up();return nt(e,Qe(t,{viewBox:"0 0 8 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),Kp="_settingContainer_1pcjr_1",zp="_settingTabs_1pcjr_7",Hp="_settingBody_1pcjr_29",Wp="_active_1pcjr_39",Fs={settingContainer:Kp,settingTabs:zp,settingBody:Hp,active:Wp},Vp="_snack_1yjw2_1",Gp="_error_1yjw2_33",Yp="_success_1yjw2_40",Zp="_warning_1yjw2_46",Xp="_open_1yjw2_52",Jp="_slideIn_1yjw2_1",Qp="_close_1yjw2_56",em="_slideOut_1yjw2_1",oa={snack:Vp,error:Gp,success:Yp,warning:Zp,open:Xp,slideIn:Jp,close:Qp,slideOut:em};var tm=C("<div>"),nm=C("<div><span>");const[Wo,dh]=R([]),$r=t=>{dh(e=>[...e,t])},rm=t=>{dh(e=>e.filter((n,r)=>r!==t))},sm=()=>{const[t,e]=Ie();return K(()=>Oe(t().theme)),o(G,{get when(){return Wo().length>0},get children(){var n=tm();return g(n,o(Q,{get each(){return Wo()},children:(r,s)=>o(im,Qe(r,{get index(){return s()},onClose:()=>rm(s())}))})),V(()=>z(n,oa.snackContainer)),n}})},im=t=>{tn();const[e,n]=Ie(),[r,s]=R(!0),i=K(()=>Oe(e().theme));t.closeTimeout&&setTimeout(()=>t.onClose(),t.closeTimeout),t.closeTimeout||setTimeout(()=>t.onClose(),5e3);const l=Math.floor(t.message.length/17);return o(ba,{get mount(){return document.body},get children(){return o(G,{get when(){return r()},get children(){var a=nm(),c=a.firstChild;return g(c,()=>t.message),g(a,o(ae,{get onClick(){return t.onClose},children:"X"}),null),V(u=>{var h=`${10+t.index*(50+l*8)}px`,d=`${i().primary} ${oa.snack} ${oa[t.severity??"info"]}`;return h!==u.e&&((u.e=h)!=null?a.style.setProperty("bottom",h):a.style.removeProperty("bottom")),d!==u.t&&z(a,u.t=d),u},{e:void 0,t:void 0}),a}})}})};var lm=C("<div><h3>General</h3>"),am=C("<option value=dark>Dark"),om=C("<option value=light>Light"),cm=C("<div><h3>Theme</h3><label for=themeChange>Change Theme "),um=C("<div><h3>Account</h3>"),hm=C("<div><div><ul></ul></div><div><div>"),dm=C("<li>");const fm=t=>{const[e,n]=R(["General","Theme","Account"]),[r,s]=R("Theme");return(()=>{var i=hm(),l=i.firstChild,a=l.firstChild,c=l.nextSibling,u=c.firstChild;return g(a,o(Q,{get each(){return e()},children:h=>(()=>{var d=dm();return d.$$click=f=>s(h),g(d,h),V(()=>z(d,r()===h?Fs.active:"")),d})()})),g(c,o(us,{get children(){return[o(At,{get when(){return r()==="General"},get children(){return lm()}}),o(At,{get when(){return r()==="Theme"},get children(){var h=cm(),d=h.firstChild;return d.nextSibling,g(h,o(Ce,{name:"themeChange",onChange:f=>t.setDefaultUserSettings(m=>(m.theme=f.target.value,it(m))),get children(){return[am(),om()]}}),null),h}}),o(At,{get when(){return r()==="Account"},get children(){return um()}})]}}),u),g(u,o(ae,{onClick:h=>tp(t.defaultUserSettings(),()=>$r({message:"Settings Saved Successfully!",severity:"success",closeTimeout:4e3})),children:"Save Settings"})),V(h=>{var d=Fs.settingContainer,f=Fs.settingTabs,m=Fs.settingBody;return d!==h.e&&z(i,h.e=d),f!==h.t&&z(l,h.t=f),m!==h.a&&z(c,h.a=m),h},{e:void 0,t:void 0,a:void 0}),i})()};zt(["click"]);function tn(){return Ue(rt)}const gm="_topper_1h9yq_1",pm="_navOpen_1h9yq_26",mm="_navClosed_1h9yq_45",il={topper:gm,navOpen:pm,navClosed:mm};var vm=C("<span><div><h2>Navigation</h2></div><div class=theLine>"),bm=C("<ul class=sideBody>"),ym=C("<div class=sidebar><div class=sideHead><h2></h2><span></span></div><div class=theLine>"),_m=C("<span>"),wm=C("<li><h3>");const $m=t=>{const[{userStyle:e,defaultShowList:n,setDefaultShowList:r,defaultIsMobile:s,setDefaultIsMobile:i,defaultUserSettings:l,setDefaultUserSettings:a},c]=pt(t,["userStyle","defaultShowList","setDefaultShowList","defaultIsMobile","setDefaultIsMobile","defaultUserSettings","setDefaultUserSettings"]),[u,h]=R(!1),d=tn(),[f,m]=R([{Name:"Characters",Link:"/characters",isOpen:!1,children:[{Name:"View",Link:"/characters/view",isOpen:!1},{Name:"Create",Link:"/characters/create",isOpen:!1}]},{Name:"Info",Link:"/info",isOpen:!1,children:[{Name:"Spells",Link:"/info/spells",isOpen:!1},{Name:"Feats",Link:"/info/feats",isOpen:!1},{Name:"Classes",Link:"/info/classes",isOpen:!1},{Name:"Backgrounds",Link:"/info/backgrounds",isOpen:!1},{Name:"Items",Link:"/info/items",isOpen:!1},{Name:"Races",Link:"/info/races",isOpen:!1}]},{Name:"Homebrew",Link:"/homebrew",isOpen:!1,children:[{Name:"Spells",Link:"/homebrew/view?name=spells",isOpen:!1},{Name:"Feats",Link:"/homebrew/view?name=feats",isOpen:!1},{Name:"Classes",Link:"/homebrew/view?name=classes",isOpen:!1},{Name:"Subclasses",Link:"/homebrew/view?name=subclasses",isOpen:!1},{Name:"Backgrounds",Link:"/homebrew/view?name=backgrounds",isOpen:!1},{Name:"Items",Link:"/homebrew/view?name=items",isOpen:!1},{Name:"Races",Link:"/homebrew/view?name=races",isOpen:!1}]}].sort((_,b)=>_.Name>b.Name?1:-1)),y=_=>_.replace("view","create").replace("?name=","/"),p=()=>[{name:"Login",action:()=>{console.log("Login")},condition:()=>!0},{name:"Register",action:()=>{console.log("Register")},condition:()=>!0},{name:"Logout",action:()=>{console.log("Logout")},condition:()=>!0},{name:"Profile",action:()=>{console.log("Profile")},condition:()=>!0}];return(()=>{var _=vm(),b=_.firstChild;return b.firstChild,b.nextSibling,g(b,o(ae,{get children(){return[o(Bp,{height:30,onClick:v=>h(k=>!k)}),o(G,{get when(){return u()},get children(){return o(Ut,{title:"Settings",get width(){return d.isMobile()?"90vw":"45vw"},get height(){return d.isMobile()?"90vh":"60vh"},backgroundClick:[u,h],get children(){return o(fm,{userStyle:e,defaultUserSettings:l,setDefaultUserSettings:a})}})}})]}}),null),g(b,o(ae,{enableBackgroundClick:!0,get menuItems(){return p()},get overrideX(){return s()?"42vw":"93vw"},get children(){return o(qp,{height:30})}}),null),g(_,o(Q,{get each(){return f()},children:v=>(()=>{var k=ym(),x=k.firstChild,P=x.firstChild,U=P.nextSibling;return x.nextSibling,g(P,o(Hn,{onClick:()=>r(w=>!w),get href(){return v.Link},get children(){return v.Name}})),U.$$click=()=>m(w=>(v.isOpen=!v.isOpen,it([...w.filter(H=>H.Name!==v.Name),v].sort((H,S)=>H.Name>S.Name?1:-1)))),g(U,(()=>{var w=K(()=>!!v.isOpen);return()=>w()?o(Ba,{}):o(Fa,{})})()),g(k,o(G,{get when(){return v.isOpen},get children(){var w=bm();return g(w,o(Q,{get each(){return v.children},children:H=>(()=>{var S=wm(),I=S.firstChild;return g(I,o(Hn,{onClick:()=>r(O=>!O),get href(){return H.Link},get children(){return H.Name}})),g(S,o(G,{get when(){return H.Link.includes("homebrew")},get children(){var O=_m();return g(O,o(Hn,{onClick:()=>r(q=>!q),get href(){return y(H.Link)},get children(){return o(jp,{})}}),null),g(O,o(Hn,{onClick:()=>r(q=>!q),get href(){return H.Link},get children(){return o(Np,{})}}),null),O}}),null),S})()})),w}}),null),V(()=>z(U,`${e().hover}`)),k})()}),null),V(v=>{var k=`${e().primary} ${n()?`${il.navOpen}`:`${il.navClosed}`}`,x=`${e().accent} ${il.topper}`;return k!==v.e&&z(_,v.e=k),x!==v.t&&z(b,v.t=x),v},{e:void 0,t:void 0}),_})()};zt(["click"]);var Cm=C("<div><div class=body><span>");const Sm={isMobile:R(Kn())[0],showList:R(!1),useStyle:()=>({body:"",primary:"",accent:"",tertiary:"",warn:"",hover:"",popup:"",table:""}),getMouse:()=>({x:0,y:0})},rt=Er(Sm),km=t=>o(rt.Provider,{get value(){return t.value},get children(){return t.children}}),xm=t=>{const[e,n]=Ie(),r=K(()=>Oe(e().theme)),[s,i]=R(!Kn()),[l,a]=R(Kn()),[c,u]=R({x:0,y:0});V(()=>{s(),a(Kn())});const h=()=>{Kn()?i(!1):i(window.matchMedia("only screen and (max-width: 768px)").matches)};a(Kn()),window.addEventListener("resize",h),V(()=>{Kn()||window.innerWidth<=768});const d=m=>u({x:m.clientX,y:m.clientY});It(()=>{window.addEventListener("mousemove",d)}),bn(()=>{window.removeEventListener("mousemove",d)});const{isMobile:f}=tn();return o(km,{value:{isMobile:l,showList:[s,i],useStyle:Oe,getMouse:()=>c()},get children(){return[(()=>{var m=Cm(),y=m.firstChild,p=y.firstChild;return m.style.setProperty("height","100vh"),g(m,o(kp,{get isMobile(){return f()},style:"margin-bottom: 15px;",list:[s,i]}),y),g(p,()=>t.children),g(y,o(G,{get when(){return s()},get children(){return o($m,{userStyle:r,defaultShowList:s,setDefaultShowList:i,defaultIsMobile:l,setDefaultIsMobile:a,defaultUserSettings:e,setDefaultUserSettings:n})}}),null),V(_=>{var b=r().body,v=`${s()?"openFirst":"closeFirst"}`;return b!==_.e&&z(m,_.e=b),v!==_.t&&z(p,_.t=v),_},{e:void 0,t:void 0}),m})(),o(sm,{})]}})},Tm={body:Cn.body,primary:Cn.primary,accent:Cn.accent,tertiary:Cn.tertiary,warn:Cn.warn,hover:Cn.hover,popup:Cn.popup,table:Cn.table},Vo={body:$n.body,primary:$n.primary,accent:$n.accent,tertiary:$n.tertiary,warn:$n.warn,hover:$n.hover,popup:$n.popup,table:$n.table};function Oe(t){const[e,n]=Ie();switch(t??e().theme){case"light":return document.body.style.backgroundColor="#fff",Tm;case"dark":return document.body.style.backgroundColor="#000",Vo;default:return Vo}}function Am(){const[t,e]=Ie();return Ue(rt),K(()=>Oe(t().theme))}const Em="_menuButtons_1grs9_1",Lm="_menuButton_1grs9_1",Pm="_customButtonStyle_1grs9_26",Om="_transparent_1grs9_36",js={menuButtons:Em,menuButton:Lm,customButtonStyle:Pm,transparent:Om};var Im=C("<button>"),Rm=C("<div><ul>"),Dm=C("<li><button>");const ae=t=>{const[e,n]=R({show:!1,lastX:0,lastY:0}),r=K(()=>!!t.menuItems&&e().show),s=K(()=>t.menuItems?.filter(y=>y.condition?y.condition():!0)??[]),i=tn(),[l,a]=Ie(),c=t.styleType??"accent",u=K(()=>Oe(l().theme)),h=K(()=>u()[c]),[d,f]=R(),m=K(()=>({position:"absolute",top:t.overrideY??`${e().lastY}px`,left:t.overrideX??`${e().lastX<45?e().lastX-+(d()?d().width:"0"):e().lastX}px`,display:`${e().show?"block":"none"}`}));return Ma(d,()=>{const y=Math.abs(i.getMouse().x-e().lastX)<20,p=Math.abs(i.getMouse().y-e().lastY)<20;e().show&&!y&&!p&&Object.keys(t).includes("enableBackgroundClick")&&n({show:!1,lastX:0,lastY:0})}),[(()=>{var y=Im();return nt(y,Qe(t,{onClick:p=>{t.menuItems?.length&&n({show:!e().show,lastX:p.clientX+(p.view?.scrollX??0),lastY:p.clientY+(p.view?.scrollY??0)}),t.onClick&&t.onClick(p)},get class(){return`${h()} ${u()?.hover} ${js.customButtonStyle} ${t.transparent?js.transparent:""} ${t.class??""} `}}),!1,!0),g(y,()=>t.children),y})(),o(ba,{get mount(){return document.getElementById("root")},get children(){return o(G,{get when(){return r()},get children(){var y=Rm(),p=y.firstChild;return Ln(f,y),g(p,o(Q,{get each(){return t.menuItems??[]},children:_=>o(G,{get when(){return K(()=>!!(!_.condition||_.condition()))()&&r()},get children(){var b=Dm(),v=b.firstChild;return v.addEventListener("click",_.action),g(v,()=>_.name),V(k=>{var x=`${100/s().length}%`,P=`${u().hover}`,U=`${u().accent} ${js.menuButton}`;return x!==k.e&&((k.e=x)!=null?b.style.setProperty("height",x):b.style.removeProperty("height")),P!==k.t&&z(b,k.t=P),U!==k.a&&z(v,k.a=U),k},{e:void 0,t:void 0,a:void 0}),b}})})),V(_=>{var b=`${u()?.popup} ${u()?.primary} ${t.menuStyle??""}`,v=m(),k=`${js.menuButtons}`;return b!==_.e&&z(y,_.e=b),_.t=va(y,v,_.t),k!==_.a&&z(p,_.a=k),_},{e:void 0,t:void 0,a:void 0}),y}})}})]},Nm="_carouselHeader_uoqig_1",Mm="_carousel_uoqig_1",Bm="_carouselSlides_uoqig_24",Fm="_carouselSlide_uoqig_24",jm="_carouselButton_uoqig_37",Sn={carouselHeader:Nm,carousel:Mm,carouselSlides:Bm,carouselSlide:Fm,carouselButton:jm};var Um=C("<div>No <!> Found"),qm=C("<div>No Elements Found"),Km=C("<div><div><div><div></div></div></div><div>");const Fi=({startingIndex:t=0,...e})=>{const[n,r]=R(t),[s,i]=pt(e,["currentIndex"]),l=()=>s.currentIndex?s.currentIndex[0]():n(),a=m=>s.currentIndex?s.currentIndex[1](m):r(m),c=K(()=>e.elements.length===2?l():n()),u=K(()=>e.elements.length>0?e.elements[c()].name:e.notFoundName?`No ${e.notFoundName} Found`:"No Elements Found"),h=K(()=>e.elements.length>0?e.elements[c()].element:e.notFoundName?(()=>{var m=Um(),y=m.firstChild,p=y.nextSibling;return p.nextSibling,g(m,()=>e.notFoundName,p),m})():qm()),d=()=>{c()!==e.elements.length-1?r(m=>m+1):r(0)},f=()=>{c()!==0?r(m=>m-1):r(e.elements.length-1)};return V(()=>{e.currentIndex&&a(c())}),(()=>{var m=Km(),y=m.firstChild,p=y.firstChild,_=p.firstChild,b=y.nextSibling;return g(y,o(ae,{get class(){return`${Sn.carouselButton}`},onClick:f,children:"❮"}),p),g(_,u),g(y,o(ae,{get class(){return`${Sn.carouselButton} `},onClick:d,children:"❯"}),null),g(b,h),V(v=>{var k=`${Sn.carousel}`,x=`${Sn.carouselHeader}`,P=`${Sn.carouselSlides} ${Sn.header}`,U=`${Sn.carouselSlide}`,w=`${Sn.carouselSlide}`;return k!==v.e&&z(m,v.e=k),x!==v.t&&z(y,v.t=x),P!==v.a&&z(p,v.a=P),U!==v.o&&z(_,v.o=U),w!==v.i&&z(b,v.i=w),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),m})()},zm="_Chip_466ds_1",Hm="_removeChipButton_466ds_21",Go={Chip:zm,removeChipButton:Hm};var Wm=C("<span><span></span><span>:</span><span>");const Tt=t=>{const[e,n]=Ie(),r=K(()=>Oe(e().theme));return(()=>{var s=Wm(),i=s.firstChild,l=i.nextSibling,a=l.nextSibling;return g(i,()=>t.key),g(a,()=>"  "+t.value),g(s,o(G,{get when(){return!!t.remove},get children(){return o(ae,{get class(){return`${r().hover} ${Go.removeChipButton}`},get onClick(){return t.remove},children:"X"})}}),null),V(()=>z(s,`${r().accent} ${Go.Chip} ${t.class??""}`)),s})()},Vm="_compBody_1xaw7_1",Gm={compBody:Vm};var Ym=C("<div>");const Mt=t=>{const[e,n]=pt(t,["children","class"]),[r,s]=Ie();tn();const i=K(()=>Oe(r().theme));return(()=>{var l=Ym();return nt(l,Qe(n,{get class(){return`${i().primary} ${Gm.compBody} ${e.class??""}`}}),!1,!0),g(l,()=>e.children),l})()},Zm="_header_nb7qb_1",Xm="_body_nb7qb_26",Jm="_totalPanel_nb7qb_35",ll={header:Zm,body:Xm,totalPanel:Jm};var Qm=C("<div>"),ev=C("<div><div><span>");const _s=t=>{const[e,n]=R(!!t.startOpen),[r,s]=Ie();Ue(rt);const i=K(()=>Oe(r().theme));return(()=>{var l=ev(),a=l.firstChild,c=a.firstChild;return nt(l,Qe({get class(){return`${ll.totalPanel} ${t.styles}`}},t),!1,!0),g(c,()=>t.children[0]),g(a,o(ae,{onClick:()=>{n(u=>!u),t.extraLogic&&t.extraLogic()},get class(){return`${i()?.hover}`},get children(){return[o(G,{get when(){return!e()},get children(){return o(Fa,{})}}),o(G,{get when(){return e()},get children(){return o(Ba,{})}})]}}),null),g(l,o(G,{get when(){return e()},get children(){var u=Qm();return g(u,()=>t.children[1]),V(()=>z(u,`${i()?.accent} ${ll.body}`)),u}}),null),V(()=>z(a,`${i()?.accent} ${ll.header}`)),l})()},tv="_input_889mw_2",nv="_error_889mw_44",rv="_success_889mw_47",sv="_warning_889mw_50",iv="_info_889mw_53",lv="_disabled_889mw_56",av="_checkbox_889mw_60",ov="_transparent_889mw_64",Yo={input:tv,error:nv,success:rv,warning:sv,info:iv,disabled:lv,checkbox:av,transparent:ov},fh=Er({getName:()=>"",setName:()=>{},getTextInside:()=>!0,setTextInside:()=>{},getFocused:()=>!1,setFocused:()=>{},getValue:()=>"",setValue:()=>{},getFieldType:()=>"",setFieldType:()=>{}}),cv=t=>{const[e,n]=R(t.name??""),[r,s]=R(!0),[i,l]=R(!1),[a,c]=R(t.value??""),[u,h]=R(t.type??"text");return o(fh.Provider,{value:{getName:e,setName:n,getTextInside:r,setTextInside:s,getFocused:i,setFocused:l,getValue:a,setValue:c,getFieldType:u,setFieldType:h},get children(){return t.children}})};function ja(){return Ue(fh)}var uv=C("<input>");const be=t=>{const[e,n]=pt(t,["tooltip","transparent","value","onChange"]),r=a=>(a??"text")!=="checkbox",s=ja(),i=K(()=>t.value),l=K(()=>Object.keys(e).includes("transparent"));return It(()=>{s.getName&&s.setFieldType(t.type??"text")}),(()=>{var a=uv();return nt(a,Qe(n,{get placeholder(){return K(()=>!!(s.getName()&&s.getTextInside()))()?s.getName():t.placeholder},get value(){return i()},onFocus:c=>{s.getName&&(s.setFocused(!0),s.setTextInside(!1))},onBlur:c=>{s.setFocused&&s.setFocused(!1)},get type(){return K(()=>s.getFieldType().length>0)()?s.getFieldType():t.type},onChange:c=>{s.getName&&(c.currentTarget.value?(s.setValue(c.currentTarget.value),s.setTextInside(!1),s.setFocused(!0)):c.currentTarget.checked?(s.setValue(c.currentTarget.checked?"true":""),s.setFocused(!0),s.setTextInside(!1)):c.currentTarget.checked||(s.setValue(c.currentTarget.checked?"true":""),s.setFocused(!1),s.setTextInside(!0))),t.onChange&&t.onChange(c)},get class(){return`${Yo.input} ${l()&&r(n.type)?Yo.transparent:""} ${t.class??""}`},get title(){return e.tooltip}}),!1,!1),a})()};function hv(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const dv="_feature_d38qu_1",fv="_table_d38qu_5",gv="_tableCell_d38qu_16",Zo={feature:dv,table:fv,tableCell:gv};var pv=C("<table><thead><tr><th>Level</th><th>PB</th><th>Features</th></tr></thead><tbody>"),mv=C("<th>"),vv=C("<tr><td></td><td></td><td>"),bv=C("<td><span>");const yv=t=>{const e=t.Class,n=i=>{switch(t.Class().name.toLowerCase()){case"rogue":case"monk":if(!Number.isNaN(+i))return i;const l=JSON.parse(i);return`${JSON.parse(l).DiceCount}d${JSON.parse(l).DiceValue}`}return i},r=i=>t.Class().name.toLowerCase()==="sorcerer"?i.slice(1):i,s=()=>t.Class()?.classLevels?.sort((a,c)=>Object.keys(c.classSpecific).length-Object.keys(a.classSpecific).length);return(()=>{var i=pv(),l=i.firstChild,a=l.firstChild,c=a.firstChild,u=c.nextSibling;u.nextSibling;var h=l.nextSibling;return g(a,o(Q,{get each(){return r(Object.keys(s()[0].classSpecific))},children:d=>(()=>{var f=mv();return g(f,()=>hv(d)),f})()}),null),g(h,o(Q,{get each(){return e().classLevels.sort((d,f)=>d.info.level-f.info.level)},children:d=>(()=>{var f=vv(),m=f.firstChild,y=m.nextSibling,p=y.nextSibling;return f.style.setProperty("border","1px solid white"),g(m,()=>d.info.level),g(y,()=>d.profBonus),g(p,()=>d.features.map(_=>_.name).join(", ")),g(f,o(Q,{get each(){return r(Object.keys(d.classSpecific))},children:_=>(()=>{var b=bv(),v=b.firstChild;return g(v,()=>n(d.classSpecific[_])),b})()}),null),V(()=>z(p,`${Zo.feature}`)),f})()})),V(()=>z(i,`${Zo.table}`)),i})()},_v="_CenterPage_khgy5_1",wv="_eachPage_khgy5_36",$v="_subClasses_khgy5_51",Cv="_dropCard_khgy5_56",Sv="_flexbox_khgy5_81",kv="_innerFlexBox_khgy5_86",xv="_left_khgy5_104",hr={CenterPage:_v,eachPage:wv,subClasses:$v,dropCard:Cv,flexbox:Sv,innerFlexBox:kv,left:xv};var Tv=C("<h4>Spells Gained"),Av=C("<span>"),Ev=C("<br>"),Lv=C("<div><h3></h3><span></span><br><span></span><br><span>"),Pv=C("<li><span></span>"),Ov=C("<h5> <!> "),Iv=C("<span> <!> ");const Rv=t=>{const[e,n]=R(!1),[r,s]=Ie(),i=K(()=>Oe(r().theme));return(()=>{var l=Pv(),a=l.firstChild;return a.$$click=()=>n(c=>!c),g(a,()=>t.subclass.name),g(l,o(G,{get when(){return e()},get children(){return o(Ut,{width:"50vw",height:"max-content",maxHeight:"90vh",backgroundClick:[e,n],get children(){var c=Lv(),u=c.firstChild,h=u.nextSibling,d=h.nextSibling,f=d.nextSibling,m=f.nextSibling,y=m.nextSibling;return g(u,()=>t.subclass.name),g(h,()=>t.subclass.desc?.join(` 
`)),g(f,()=>t.subclass.subclassFlavor),g(c,o(G,{get when(){return t.subclass.spells?.length>=1},get children(){return[Tv(),(()=>{var p=Av();return g(p,()=>t.subclass.spells?.join(`
`)),p})(),Ev()]}}),y),g(y,o(Q,{get each(){return t.subclass.features},children:p=>[(()=>{var _=Ov(),b=_.firstChild,v=b.nextSibling;return v.nextSibling,g(_,()=>p.name,v),_})(),(()=>{var _=Iv(),b=_.firstChild,v=b.nextSibling;return v.nextSibling,g(_,()=>Op(p?.value),v),_})()]})),c}})}}),null),V(()=>z(a,`${i()?.hover}`)),l})()};zt(["click"]);const Dv="_chipbar_1uyza_1",Nv="_chipContainer_1uyza_7",Mv="_leftArrow_1uyza_20",Bv="_rightArrow_1uyza_26",Us={chipbar:Dv,chipContainer:Nv,leftArrow:Mv,rightArrow:Bv};var al=C("<span>"),Fv=C("<div><div>");const gh=t=>{const[e,n]=R(!1),[r,s]=R(!1),i=u=>{s(l?.scrollLeft!==l?.scrollWidth-l?.clientWidth),n(l?.scrollLeft>0),l?.scrollLeft<=0&&n(!1)};It(()=>{l&&l.addEventListener("scroll",i)}),bn(()=>{l&&l.removeEventListener("scroll",i)});let l;V(()=>{t.chips().length>0&&i()});const a=()=>{l.scrollLeft-=100,i()},c=()=>{l.scrollLeft+=100,i(),n(!0)};return o(G,{get when(){return t.chips().length>0},get children(){var u=Fv(),h=u.firstChild;g(u,o(G,{get when(){return e()},get children(){var f=al();return g(f,o(ae,{onClick:a,children:"←"})),V(()=>z(f,`${Us.leftArrow}`)),f}}),h);var d=l;return typeof d=="function"?Ln(d,h):l=h,g(h,o(G,{get when(){return t.chips().length>1},get children(){var f=al();return g(f,o(ae,{onClick:()=>t.setChips?t.setChips([]):null,children:"Clear All"})),f}}),null),g(h,o(Q,{get each(){return t.chips()},children:(f,m)=>o(Tt,{get key(){return f.key},get value(){return f.value},get remove(){return t.chips().length>0?()=>t.setChips?t.setChips(y=>[...y].filter((p,_)=>_!==m())):null:void 0}})}),null),g(u,o(G,{get when(){return r()},get children(){var f=al();return g(f,o(ae,{onClick:c,children:"→"})),V(()=>z(f,`${Us.rightArrow}`)),f}}),null),V(f=>{var m=`${Us.chipbar}`,y=`${Us.chipContainer}`;return m!==f.e&&z(u,f.e=m),y!==f.t&&z(h,f.t=y),f},{e:void 0,t:void 0}),u}})};var jv=C("<div><h2>Skills"),Xo=C("<div><br>"),Uv=C("<div><h2>Starting Equipment"),qv=C("<div><div><h1></h1><div></div><span><h2>Proficiencies</h2><span>Armor: </span><span></span><br><span>Weapons: <!> </span><br><span>Tools:</span><br><br><span>Saving Throws: </span></span><br><br><br><br><div>"),qs=C("<br>"),Kv=C("<span>Choose: "),zv=C("<span>"),Hv=C("<h3>choice "),Wv=C("<span>choose: "),Vv=C("<span>or"),Gv=C("<div><br><br><span>");const Yv=t=>{Ue(rt);const[e,n]=Ie(),r=K(()=>Oe(e().theme));R([]);const[s,i]=R([{key:"test",value:"test"}]),l=K(()=>t.currentClass().subclasses?.length>0?t.currentClass().subclasses:[]);K(()=>t.currentClass().classLevels.map(c=>c.features).flat());const a=c=>t.currentClass().startingEquipment[`choice${c}`];return(()=>{var c=qv(),u=c.firstChild,h=u.firstChild,d=h.nextSibling,f=d.nextSibling,m=f.firstChild,y=m.nextSibling;y.firstChild;var p=y.nextSibling,_=p.nextSibling,b=_.nextSibling,v=b.firstChild,k=v.nextSibling;k.nextSibling;var x=b.nextSibling,P=x.nextSibling;P.firstChild;var U=P.nextSibling,w=U.nextSibling,H=w.nextSibling;H.firstChild;var S=f.nextSibling,I=S.nextSibling,O=I.nextSibling,q=O.nextSibling,X=q.nextSibling;return g(h,()=>t.currentClass().name),g(d,o(yv,{Class:()=>t.currentClass()})),g(y,()=>t.currentClass().proficiencies.filter(F=>F.toLowerCase().includes("armor")).join(", "),null),g(p,o(G,{get when(){return!!t.currentClass().proficiencies.filter(F=>F.toLowerCase()==="shields").length},children:", Shields"})),g(b,()=>t.currentClass().proficiencies.filter(F=>F.toLowerCase().includes("weapons")).join(", "),k),g(P,o(G,{get when(){return K(()=>!t.currentClass().proficiencies.map(F=>F.toLowerCase()).includes("tools"))()&&!t.currentClass().proficiencies.map(F=>F.toLowerCase()).includes("kit")},children:"None"}),null),g(P,o(G,{get when(){return!t.currentClass().proficiencies.map(F=>F.toLowerCase()).includes("kit")},get children(){return t.currentClass().proficiencies.filter(F=>F.toLowerCase().includes("kit"))}}),null),g(P,o(G,{get when(){return!t.currentClass().proficiencies.map(F=>F.toLowerCase()).includes("tools")},get children(){return t.currentClass().proficiencies.filter(F=>F.toLowerCase().includes("tools")).join(", ")}}),null),g(H,()=>t.currentClass().savingThrows.join(", "),null),g(u,o(_s,{get class(){return`${hr.dropCard}`},get children(){return[jv(),(()=>{var F=Xo(),J=F.firstChild;return g(F,o(G,{get when(){return t.currentClass().proficiencyChoices.length>0},get children(){return o(Q,{get each(){return t.currentClass().proficiencyChoices},children:ee=>[qs(),(()=>{var oe=Kv();return oe.firstChild,g(oe,()=>ee.choose,null),oe})(),qs(),o(Q,{get each(){return ee.choices},children:oe=>[(()=>{var fe=zv();return g(fe,oe),fe})(),qs()]})]})}}),J),F})()]}}),O),g(u,o(_s,{get class(){return`${hr.dropCard}`},get children(){return[Uv(),(()=>{var F=Xo();return F.firstChild,g(F,o(Q,{each:[1,2,3,4],children:(J,ee)=>o(G,{get when(){return a(J).length>=1},get children(){return o(Q,{get each(){return a(J)},children:(oe,fe)=>(()=>{var A=Gv(),T=A.firstChild,M=T.nextSibling,W=M.nextSibling;return g(A,o(G,{get when(){return fe()<1},get children(){var $=Hv();return $.firstChild,g($,J,null),$}}),T),g(A,o(G,{get when(){return fe()<1},get children(){var $=Wv();return $.firstChild,g($,()=>oe.choose,null),$}}),M),g(W,o(gh,{chips:s,setChips:i})),g(A,o(G,{get when(){return fe()<=0},get children(){return[qs(),Vv()]}}),null),A})()})}})}),null),F})()]}}),q),g(X,o(Q,{get each(){return l()},children:F=>o(Rv,{subclass:F})})),V(F=>{var J=`${r()?.primary} ${hr.CenterPage}`,ee=`${hr.eachPage}`,oe=`${hr.left}`,fe=`${hr.subClasses}`;return J!==F.e&&z(c,F.e=J),ee!==F.t&&z(u,F.t=ee),oe!==F.a&&z(f,F.a=oe),fe!==F.o&&z(X,F.o=fe),F},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()},Zv="_view_fn0io_1",Xv={view:Zv};var Jv=C("<h4>At Higher Levels: "),Qv=C("<span>"),eb=C("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>");const tb=t=>{const e=Ue(rt),[{"0":n,"1":r},s]=pt(t.backgroundClick,["0","1"]),i=()=>t.spell();return Am(),o(Ut,{get title(){return i().name},get width(){return e.isMobile()?"100%":"50%"},get height(){return e.isMobile()?"100%":"50%"},backgroundClick:[n,r],get children(){var l=eb(),a=l.firstChild,c=a.firstChild,u=c.nextSibling,h=u.firstChild,d=u.nextSibling,f=d.firstChild,m=f.nextSibling;m.nextSibling;var y=d.nextSibling,p=y.firstChild,_=p.nextSibling;_.nextSibling;var b=y.nextSibling;b.firstChild;var v=b.nextSibling;v.firstChild;var k=v.nextSibling;k.firstChild;var x=k.nextSibling;x.firstChild;var P=x.nextSibling;return g(c,()=>i().name),g(u,()=>Lp(i().level),h),g(u,()=>i().school,null),g(d,()=>i().castingTime,m),g(y,()=>i().range,_),g(b,()=>Pp(i()),null),g(v,()=>i().duration,null),g(k,()=>i().classes.join(", "),null),g(x,()=>i().subClasses.join(", "),null),g(P,()=>i().desc),g(a,o(G,{get when(){return!!i().higherLevel},get children(){return[Jv()," ",(()=>{var U=Qv();return g(U,()=>i().higherLevel),U})()]}}),null),V(()=>z(l,`${Xv.view}`)),l}})},nb="_paginator_3yqsp_1",rb="_pageView_3yqsp_11",Jo={paginator:nb,pageView:rb},sb="_select_1joqo_1",ib="_transparent_1joqo_8",Qo={select:sb,transparent:ib};var lb=C("<option>");const pe=t=>{tn();const[e,n]=Ie(),r=K(()=>Oe(e().theme));return(()=>{var s=lb();return nt(s,Qe(t,{get class(){return`${r().primary} ${t.class??""}`}}),!1,!1),s})()};var ab=C("<select>");const Ce=t=>{const[e,n]=pt(t,["disableUnselected","class","transparent","tooltip"]);return(()=>{var r=ab();return nt(r,Qe({get title(){return e.tooltip}},n,{get class(){return`${Qo.select} ${Object.keys(e).includes("transparent")||e.transparent?Qo.transparent:""} ${e.class??""}`}}),!1,!0),g(r,o(G,{get when(){return!Object.keys(e).includes("disableUnselected")||!e.disableUnselected},get children(){return o(pe,{value:"",children:"--------"})}}),null),g(r,()=>t.children,null),r})()};var ob=C("<div><div><div></div> / <div>"),cb=C("<option>");const Cr=t=>{Ue(rt);const[e,n]=Ie(),[r,s]=R(1),[i,l]=R(t.itemsPerPage?.[0]??10),a=K(()=>Oe(e().theme)),c=K(()=>t.items().slice((r()-1)*i(),r()*i())),u=K(()=>Math.ceil(t.items().length/i())),h=t.itemsPerPage??[10,20,50,100];return V(()=>{r()>u()&&s(u())}),V(()=>{t.setPaginatedItems(c())}),(()=>{var d=ob(),f=d.firstChild,m=f.firstChild,y=m.nextSibling,p=y.nextSibling;return g(d,o(ae,{get disabled(){return r()===1},onClick:()=>s(1),children:"←←"}),f),g(d,o(ae,{get disabled(){return r()===1},onClick:()=>s(r()-1),children:"←"}),f),g(d,o(Ce,{disableUnselected:!0,transparent:!0,onChange:_=>l(+_.currentTarget.value),get children(){return o(Q,{each:h,children:_=>(()=>{var b=cb();return b.value=_,g(b,_),b})()})}}),f),g(m,r),g(p,u),g(d,o(ae,{get disabled(){return r()===u()},onClick:()=>s(r()+1),children:"→"}),null),g(d,o(ae,{get disabled(){return r()===u()},onClick:()=>s(u()),children:"→→"}),null),V(_=>{var b=`${a()?.accent} ${Jo.paginator} `,v=Jo.pageView;return b!==_.e&&z(d,_.e=b),v!==_.t&&z(f,_.t=v),_},{e:void 0,t:void 0}),d})()},ub="_searchBar_urvs3_1",ec={searchBar:ub};var hb=C("<div><input type=text><button>"),db=C('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const os=t=>{const[e,n]=R(""),[r,s]=pt(t,["wrapClass","tooltip"]),i=()=>{const l=e().toLowerCase(),a=t.dataSource().filter(c=>l.trim().length===0?!0:JSON.stringify(c).toLowerCase().includes(l.trim()));a.length>1?t.setResults(a):t.setResults(t.dataSource())};return t.setResults(t.dataSource()),(()=>{var l=hb(),a=l.firstChild,c=a.nextSibling;return a.$$keydown=u=>u.key==="Enter"&&i(),a.addEventListener("change",u=>n(u.currentTarget.value)),nt(a,Qe({get value(){return e()}},t,{get class(){return`${ec.input} ${t.class??""}`}}),!1,!1),c.$$click=i,g(c,o(fb,{})),V(u=>{var h=`${ec.searchBar} ${r.wrapClass}`,d=r.tooltip??"Search!";return h!==u.e&&z(l,u.e=h),d!==u.t&&Xe(c,"title",u.t=d),u},{e:void 0,t:void 0}),l})()},fb=t=>(()=>{var e=db();return nt(e,Qe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();zt(["keydown","click"]);const gb="_areaStyle_gxfg5_1",pb="_picButton_gxfg5_16",mb="_transparent_gxfg5_23",Ks={areaStyle:gb,picButton:pb,transparent:mb};function vb({multiple:t=!1,accept:e=""}){const n=document.createElement("input");return n.type="file",n.accept=e,n.multiple=t,n}function bb(t){const e=[];if(!t)return e;for(const n in t){const r=+n;if(isNaN(+r))continue;const s=t[r];if(!s)continue;const i={source:URL.createObjectURL(s),name:s.name,size:s.size,file:s};e.push(i)}return e}function yb(t){const[e,n]=R([]);let r=()=>{};const s=async c=>{c.preventDefault(),c.stopPropagation();const u=c.currentTarget;let h=[];u.files&&(h=bb(u.files)),u.removeEventListener("change",s),u.remove(),n(h);try{await r(h)}catch(d){console.error(d)}};return{files:e,selectFiles:c=>{c&&(r=c);const u=vb(t||{});u.addEventListener("change",s),u.click()},removeFile:c=>{n(u=>u.filter(h=>h.name!==c))},clearFiles:()=>{n([])}}}var _b=C("<div><h1>Modal</h1><div><h2>Upload And image to parse text from");const wb=t=>{const[e,n]=pt(t,["uploadType","setData"]),{files:r,selectFiles:s}=yb({accept:e.uploadType==="image"?"image/*":"file/*"}),i=tn();return o(Ut,{get width(){return i.isMobile()?"80vw":"45vw"},get height(){return i.isMobile()?"45vh":"60vh"},get children(){var l=_b(),a=l.firstChild,c=a.nextSibling;return c.firstChild,g(c,o(ae,{onClick:u=>{s(([h])=>{t.snackbar&&$r(t.snackbar.start),_e.toObservable(h.file.arrayBuffer()).pipe(we(1),at(d=>{const f=h.name.split(".")[h.name.split(".").length-1],m=new Uint8Array(d),y=new Blob([m],{type:`image/${f}`});t.setData(URL.createObjectURL(y)),t.snackbar&&$r(t.snackbar.success)})).subscribe({error:d=>{t.snackbar&&$r({...t.snackbar.error})}})})},children:"Upload"}),null),l}})};var $b=C("<span>"),Cb=C("<textarea>");const En=t=>{let e;const[n,r]=pt(t,["buttons","minSize","text","setText","class","tooltip","transparent","picToTextEnabled"]),[s,i]=R(!1),[l,a]=R(""),c=ja();function u(){if(e){e.style.height="auto";const h=n.minSize?.height??100,d=e.scrollHeight<h?h:e.scrollHeight;e.style.height=`${d}px`,e.setAttribute("style","height:"+d+"px;overflow-y:hidden;")}}return It(()=>{u(),c.setFieldType("textarea")}),V(()=>{u(),n.text()}),V(()=>{l()&&($r({message:"Parsing text from image...",closeTimeout:2e3}),s0(l(),n.setText,()=>{u(),$r({message:"Text parsed from image successfully.",closeTimeout:2e3})}))}),[o(G,{get when(){return n.picToTextEnabled},get children(){var h=$b();return h.style.setProperty("width","inherit"),h.style.setProperty("font-size","1em"),g(h,o(ae,{get styleType(){return n.buttons?.styleType??"accent"},get class(){return`${Ks.picButton}`},onClick:d=>i(f=>!f),get children(){return[o(l0,{width:"30px",height:"30px",style:{fill:"white"}}),o(G,{get when(){return s()},get children(){return o(wb,{setData:a,uploadType:"image"})}})]}})),V(()=>z(h,`${n.transparent?Ks.transparent:""}`)),h}}),(()=>{var h=Cb();return Ln(d=>{e=d,u()},h),nt(h,Qe(r,{onFocus:d=>{c.getName&&(c.setFocused(!0),c.setTextInside(!1))},onBlur:d=>{c.setFocused&&c.setFocused(!1)},get placeholder(){return K(()=>!!(c.getName&&c.getTextInside()))()?c.getName():t.placeholder},get class(){return`${Ks.areaStyle} ${n.class??""} ${n.transparent?Ks.transparent:""}`},get value(){return n.text()},onInput:d=>{n.setText(d.currentTarget.value),u(),c.getName&&d.currentTarget.value&&(c.setValue(d.currentTarget.value),c.setTextInside(!1),c.setFocused(!0))},get title(){return n.tooltip}}),!1,!1),h})()]};function Ua(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let nr=Ua();function ph(t){nr=t}const mh=/[&<>"']/,Sb=new RegExp(mh.source,"g"),vh=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,kb=new RegExp(vh.source,"g"),xb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tc=t=>xb[t];function Lt(t,e){if(e){if(mh.test(t))return t.replace(Sb,tc)}else if(vh.test(t))return t.replace(kb,tc);return t}const Tb=/(^|[^\[])\^/g;function je(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const r={replace:(s,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(Tb,"$1"),n=n.replace(s,l),r},getRegex:()=>new RegExp(n,e)};return r}function nc(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const cs={exec:()=>null};function rc(t,e){const n=t.replace(/\|/g,(i,l,a)=>{let c=!1,u=l;for(;--u>=0&&a[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Ur(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r;){const i=t.charAt(r-s-1);if(i===e&&!n)s++;else if(i!==e&&n)s++;else break}return t.slice(0,r-s)}function Ab(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function sc(t,e,n,r){const s=e.href,i=e.title?Lt(e.title):null,l=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:n,href:s,title:i,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,a}return{type:"image",raw:n,href:s,title:i,text:Lt(l)}}function Eb(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(s=>{const i=s.match(/^\s+/);if(i===null)return s;const[l]=i;return l.length>=r.length?s.slice(r.length):s}).join(`
`)}class Ai{options;rules;lexer;constructor(e){this.options=e||nr}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ur(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=Eb(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const s=Ur(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Ur(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=Ur(n[0],`
`).split(`
`),s="",i="";const l=[];for(;r.length>0;){let a=!1;const c=[];let u;for(u=0;u<r.length;u++)if(/^ {0,3}>/.test(r[u]))c.push(r[u]),a=!0;else if(!a)c.push(r[u]);else break;r=r.slice(u);const h=c.join(`
`),d=h.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}
${h}`:h,i=i?`${i}
${d}`:d;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,l,!0),this.lexer.state.top=f,r.length===0)break;const m=l[l.length-1];if(m?.type==="code")break;if(m?.type==="blockquote"){const y=m,p=y.raw+`
`+r.join(`
`),_=this.blockquote(p);l[l.length-1]=_,s=s.substring(0,s.length-y.raw.length)+_.raw,i=i.substring(0,i.length-y.text.length)+_.text;break}else if(m?.type==="list"){const y=m,p=y.raw+`
`+r.join(`
`),_=this.list(p);l[l.length-1]=_,s=s.substring(0,s.length-m.raw.length)+_.raw,i=i.substring(0,i.length-y.raw.length)+_.raw,r=p.substring(l[l.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const s=r.length>1,i={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const l=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let c=!1,u="",h="";if(!(n=l.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let d=n[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),f=e.split(`
`,1)[0],m=!d.trim(),y=0;if(this.options.pedantic?(y=2,h=d.trimStart()):m?y=n[1].length+1:(y=n[2].search(/[^ ]/),y=y>4?1:y,h=d.slice(y),y+=n[1].length),m&&/^ *$/.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),c=!0),!c){const b=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,y-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:\`\`\`|~~~)`),x=new RegExp(`^ {0,${Math.min(3,y-1)}}#`);for(;e;){const P=e.split(`
`,1)[0];if(f=P,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(f)||x.test(f)||b.test(f)||v.test(e))break;if(f.search(/[^ ]/)>=y||!f.trim())h+=`
`+f.slice(y);else{if(m||d.search(/[^ ]/)>=4||k.test(d)||x.test(d)||v.test(d))break;h+=`
`+f}!m&&!f.trim()&&(m=!0),u+=P+`
`,e=e.substring(P.length+1),d=f.slice(y)}}i.loose||(a?i.loose=!0:/\n *\n *$/.test(u)&&(a=!0));let p=null,_;this.options.gfm&&(p=/^\[[ xX]\] /.exec(h),p&&(_=p[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:u,task:!!p,checked:_,loose:!1,text:h,tokens:[]}),i.raw+=u}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){const u=i.items[c].tokens.filter(d=>d.type==="space"),h=u.length>0&&u.some(d=>/\n.*\n/.test(d.raw));i.loose=h}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:i}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const r=rc(n[1]),s=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],l={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?l.align.push("right"):/^ *:-+: *$/.test(a)?l.align.push("center"):/^ *:-+ *$/.test(a)?l.align.push("left"):l.align.push(null);for(let a=0;a<r.length;a++)l.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:l.align[a]});for(const a of i)l.rows.push(rc(a,l.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:l.align[u]})));return l}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Lt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const l=Ur(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{const l=Ab(n[2],"()");if(l>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+l;n[2]=n[2].substring(0,l),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let s=n[2],i="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);l&&(s=l[1],i=l[3])}else i=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),sc(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const s=(r[2]||r[1]).replace(/\s+/g," "),i=n[s.toLowerCase()];if(!i){const l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return sc(r,i,r[0],this.lexer)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const l=[...s[0]].length-1;let a,c,u=l,h=0;const d=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,n=n.slice(-1*e.length+l);(s=d.exec(n))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(c=[...a].length,s[3]||s[4]){u+=c;continue}else if((s[5]||s[6])&&l%3&&!((l+c)%3)){h+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+h);const f=[...s[0]][0].length,m=e.slice(0,l+s.index+f+c);if(Math.min(l,c)%2){const p=m.slice(1,-1);return{type:"em",raw:m,text:p,tokens:this.lexer.inlineTokens(p)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const s=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return s&&i&&(r=r.substring(1,r.length-1)),r=Lt(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=Lt(n[1]),s="mailto:"+r):(r=Lt(n[1]),s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let r,s;if(n[2]==="@")r=Lt(n[0]),s="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=Lt(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=Lt(n[0]),{type:"text",raw:n[0],text:r}}}}const Lb=/^(?: *(?:\n|$))+/,Pb=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Ob=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ks=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ib=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bh=/(?:[*+-]|\d{1,9}[.)])/,yh=je(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,bh).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),qa=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Rb=/^[^\n]+/,Ka=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Db=je(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ka).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Nb=je(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bh).getRegex(),ji="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",za=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Mb=je("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",za).replace("tag",ji).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_h=je(qa).replace("hr",ks).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex(),Bb=je(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",_h).getRegex(),Ha={blockquote:Bb,code:Pb,def:Db,fences:Ob,heading:Ib,hr:ks,html:Mb,lheading:yh,list:Nb,newline:Lb,paragraph:_h,table:cs,text:Rb},ic=je("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ks).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex(),Fb={...Ha,table:ic,paragraph:je(qa).replace("hr",ks).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ic).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex()},jb={...Ha,html:je(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",za).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:je(qa).replace("hr",ks).replace("heading",` *#{1,6} *[^
]`).replace("lheading",yh).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},wh=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ub=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,$h=/^( {2,}|\\)\n(?!\s*$)/,qb=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xs="\\p{P}\\p{S}",Kb=je(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,xs).getRegex(),zb=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Hb=je(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,xs).getRegex(),Wb=je("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,xs).getRegex(),Vb=je("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,xs).getRegex(),Gb=je(/\\([punct])/,"gu").replace(/punct/g,xs).getRegex(),Yb=je(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zb=je(za).replace("(?:-->|$)","-->").getRegex(),Xb=je("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zb).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ei=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jb=je(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ei).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ch=je(/^!?\[(label)\]\[(ref)\]/).replace("label",Ei).replace("ref",Ka).getRegex(),Sh=je(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ka).getRegex(),Qb=je("reflink|nolink(?!\\()","g").replace("reflink",Ch).replace("nolink",Sh).getRegex(),Wa={_backpedal:cs,anyPunctuation:Gb,autolink:Yb,blockSkip:zb,br:$h,code:Ub,del:cs,emStrongLDelim:Hb,emStrongRDelimAst:Wb,emStrongRDelimUnd:Vb,escape:wh,link:Jb,nolink:Sh,punctuation:Kb,reflink:Ch,reflinkSearch:Qb,tag:Xb,text:qb,url:cs},ey={...Wa,link:je(/^!?\[(label)\]\((.*?)\)/).replace("label",Ei).getRegex(),reflink:je(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ei).getRegex()},ca={...Wa,escape:je(wh).replace("])","~|])").getRegex(),url:je(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ty={...ca,br:je($h).replace("{2,}","*").getRegex(),text:je(ca.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},zs={normal:Ha,gfm:Fb,pedantic:jb},qr={normal:Wa,gfm:ca,breaks:ty,pedantic:ey};class Yt{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||nr,this.options.tokenizer=this.options.tokenizer||new Ai,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:zs.normal,inline:qr.normal};this.options.pedantic?(n.block=zs.pedantic,n.inline=qr.pedantic):this.options.gfm&&(n.block=zs.gfm,this.options.breaks?n.inline=qr.breaks:n.inline=qr.gfm),this.tokenizer.rules=n}static get rules(){return{block:zs,inline:qr}}static lex(e,n){return new Yt(n).lex(e)}static lexInline(e,n){return new Yt(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,u)=>c+"    ".repeat(u.length));let s,i,l;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},c),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(l=e.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){i=n[n.length-1],r&&i?.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s),r=l.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,s,i,l=e,a,c,u;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,a.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(r=h.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,l,u)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),n.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},d),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(i=e.substring(0,h+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),c=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}}class Li{options;parser;constructor(e){this.options=e||nr}space(e){return""}code({text:e,lang:n,escaped:r}){const s=(n||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+`
`;return s?'<pre><code class="language-'+Lt(s)+'">'+(r?i:Lt(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:Lt(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let s="";for(let a=0;a<e.items.length;a++){const c=e.items[a];s+=this.listitem(c)}const i=n?"ol":"ul",l=n&&r!==1?' start="'+r+'"':"";return"<"+i+l+`>
`+s+"</"+i+`>
`}listitem(e){let n="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);n+=this.tablerow({text:r});let s="";for(let i=0;i<e.rows.length;i++){const l=e.rows[i];r="";for(let a=0;a<l.length;a++)r+=this.tablecell(l[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const s=this.parser.parseInline(r),i=nc(e);if(i===null)return s;e=i;let l='<a href="'+e+'"';return n&&(l+=' title="'+n+'"'),l+=">"+s+"</a>",l}image({href:e,title:n,text:r}){const s=nc(e);if(s===null)return r;e=s;let i=`<img src="${e}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Va{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Zt{options;renderer;textRenderer;constructor(e){this.options=e||nr,this.options.renderer=this.options.renderer||new Li,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Va}static parse(e,n){return new Zt(n).parse(e)}static parseInline(e,n){return new Zt(n).parseInline(e)}parse(e,n=!0){let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=i,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const l=i;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let a=l,c=this.renderer.text(a);for(;s+1<e.length&&e[s+1].type==="text";)a=e[++s],c+=`
`+this.renderer.text(a);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,n){n=n||this.renderer;let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=a||"";continue}}const l=i;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const a='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}}class li{options;constructor(e){this.options=e||nr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class ny{defaults=Ua();options=this.setOptions;parse=this.parseMarkdown(Yt.lex,Zt.parse);parseInline=this.parseMarkdown(Yt.lexInline,Zt.parseInline);Parser=Zt;Renderer=Li;TextRenderer=Va;Lexer=Yt;Tokenizer=Ai;Hooks=li;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const i=s;for(const l of i.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of i.rows)for(const a of l)r=r.concat(this.walkTokens(a.tokens,n));break}case"list":{const i=s;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=s;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(l=>{const a=i[l].flat(1/0);r=r.concat(this.walkTokens(a,n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const l=n.renderers[i.name];l?n.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=l.apply(this,a)),c}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const l=n[i.level];l?l.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),s.extensions=n),r.renderer){const i=this.defaults.renderer||new Li(this.defaults);for(const l in r.renderer){if(!(l in i))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;const a=l,c=r.renderer[a],u=i[a];i[a]=(...h)=>{let d=c.apply(i,h);return d===!1&&(d=u.apply(i,h)),d||""}}s.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Ai(this.defaults);for(const l in r.tokenizer){if(!(l in i))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const a=l,c=r.tokenizer[a],u=i[a];i[a]=(...h)=>{let d=c.apply(i,h);return d===!1&&(d=u.apply(i,h)),d}}s.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new li;for(const l in r.hooks){if(!(l in i))throw new Error(`hook '${l}' does not exist`);if(l==="options")continue;const a=l,c=r.hooks[a],u=i[a];li.passThroughHooks.has(l)?i[a]=h=>{if(this.defaults.async)return Promise.resolve(c.call(i,h)).then(f=>u.call(i,f));const d=c.call(i,h);return u.call(i,d)}:i[a]=(...h)=>{let d=c.apply(i,h);return d===!1&&(d=u.apply(i,h)),d}}s.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,l=r.walkTokens;s.walkTokens=function(a){let c=[];return c.push(l.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Yt.lex(e,n??this.defaults)}parser(e,n){return Zt.parse(e,n??this.defaults)}parseMarkdown(e,n){return(s,i)=>{const l={...i},a={...this.defaults,...l},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&l.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(s):s).then(u=>e(u,a)).then(u=>a.hooks?a.hooks.processAllTokens(u):u).then(u=>a.walkTokens?Promise.all(this.walkTokens(u,a.walkTokens)).then(()=>u):u).then(u=>n(u,a)).then(u=>a.hooks?a.hooks.postprocess(u):u).catch(c);try{a.hooks&&(s=a.hooks.preprocess(s));let u=e(s,a);a.hooks&&(u=a.hooks.processAllTokens(u)),a.walkTokens&&this.walkTokens(u,a.walkTokens);let h=n(u,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(u){return c(u)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Lt(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const Jn=new ny;function De(t,e){return Jn.parse(t,e)}De.options=De.setOptions=function(t){return Jn.setOptions(t),De.defaults=Jn.defaults,ph(De.defaults),De};De.getDefaults=Ua;De.defaults=nr;De.use=function(...t){return Jn.use(...t),De.defaults=Jn.defaults,ph(De.defaults),De};De.walkTokens=function(t,e){return Jn.walkTokens(t,e)};De.parseInline=Jn.parseInline;De.Parser=Zt;De.parser=Zt.parse;De.Renderer=Li;De.TextRenderer=Va;De.Lexer=Yt;De.lexer=Yt.lex;De.Tokenizer=Ai;De.Hooks=li;De.parse=De;De.options;De.setOptions;De.use;De.walkTokens;De.parseInline;Zt.parse;Yt.lex;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:kh,setPrototypeOf:lc,isFrozen:ry,getPrototypeOf:sy,getOwnPropertyDescriptor:iy}=Object;let{freeze:kt,seal:Dt,create:xh}=Object,{apply:ua,construct:ha}=typeof Reflect<"u"&&Reflect;kt||(kt=function(e){return e});Dt||(Dt=function(e){return e});ua||(ua=function(e,n,r){return e.apply(n,r)});ha||(ha=function(e,n){return new e(...n)});const Hs=Ot(Array.prototype.forEach),ac=Ot(Array.prototype.pop),Kr=Ot(Array.prototype.push),ai=Ot(String.prototype.toLowerCase),ol=Ot(String.prototype.toString),oc=Ot(String.prototype.match),zr=Ot(String.prototype.replace),ly=Ot(String.prototype.indexOf),ay=Ot(String.prototype.trim),jt=Ot(Object.prototype.hasOwnProperty),$t=Ot(RegExp.prototype.test),Hr=oy(TypeError);function Ot(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return ua(t,e,r)}}function oy(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ha(t,n)}}function Se(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ai;lc&&lc(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(ry(e)||(e[r]=i),s=i)}t[s]=!0}return t}function cy(t){for(let e=0;e<t.length;e++)jt(t,e)||(t[e]=null);return t}function zn(t){const e=xh(null);for(const[n,r]of kh(t))jt(t,n)&&(Array.isArray(r)?e[n]=cy(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=zn(r):e[n]=r);return e}function Wr(t,e){for(;t!==null;){const r=iy(t,e);if(r){if(r.get)return Ot(r.get);if(typeof r.value=="function")return Ot(r.value)}t=sy(t)}function n(){return null}return n}const cc=kt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cl=kt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ul=kt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uy=kt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hl=kt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hy=kt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),uc=kt(["#text"]),hc=kt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dl=kt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dc=kt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ws=kt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dy=Dt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fy=Dt(/<%[\w\W]*|[\w\W]*%>/gm),gy=Dt(/\${[\w\W]*}/gm),py=Dt(/^data-[\-\w.\u00B7-\uFFFF]/),my=Dt(/^aria-[\-\w]+$/),Th=Dt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vy=Dt(/^(?:\w+script|data):/i),by=Dt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ah=Dt(/^html$/i),yy=Dt(/^[a-z][.\w]*(-[.\w]+)+$/i);var fc=Object.freeze({__proto__:null,MUSTACHE_EXPR:dy,ERB_EXPR:fy,TMPLIT_EXPR:gy,DATA_ATTR:py,ARIA_ATTR:my,IS_ALLOWED_URI:Th,IS_SCRIPT_OR_DATA:vy,ATTR_WHITESPACE:by,DOCTYPE_NAME:Ah,CUSTOM_ELEMENT:yy});const Vr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},_y=function(){return typeof window>"u"?null:window},wy=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Eh(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_y();const e=de=>Eh(de);if(e.version="3.1.6",e.removed=[],!t||!t.document||t.document.nodeType!==Vr.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:a,Element:c,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:m}=t,y=c.prototype,p=Wr(y,"cloneNode"),_=Wr(y,"remove"),b=Wr(y,"nextSibling"),v=Wr(y,"childNodes"),k=Wr(y,"parentNode");if(typeof l=="function"){const de=n.createElement("template");de.content&&de.content.ownerDocument&&(n=de.content.ownerDocument)}let x,P="";const{implementation:U,createNodeIterator:w,createDocumentFragment:H,getElementsByTagName:S}=n,{importNode:I}=r;let O={};e.isSupported=typeof kh=="function"&&typeof k=="function"&&U&&U.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:X,TMPLIT_EXPR:F,DATA_ATTR:J,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:fe,CUSTOM_ELEMENT:A}=fc;let{IS_ALLOWED_URI:T}=fc,M=null;const W=Se({},[...cc,...cl,...ul,...hl,...uc]);let $=null;const E=Se({},[...hc,...dl,...dc,...Ws]);let j=Object.seal(xh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ie=null,le=null,Z=!0,te=!0,N=!1,D=!0,Y=!1,ne=!0,re=!1,ge=!1,qe=!1,Ne=!1,ht=!1,ot=!1,ue=!0,B=!1;const me="user-content-";let ke=!0,ct=!1,$e={},st=null;const Ht=Se({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dn=null;const Mr=Se({},["audio","video","img","source","image","track"]);let sr=null;const Br=Se({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nn="http://www.w3.org/1998/Math/MathML",Mn="http://www.w3.org/2000/svg",Rt="http://www.w3.org/1999/xhtml";let nn=Rt,ir=!1,lr=null;const Ts=Se({},[Nn,Mn,Rt],ol);let wn=null;const As=["application/xhtml+xml","text/html"],Zh="text/html";let ft=null,ar=null;const Xh=n.createElement("form"),to=function(L){return L instanceof RegExp||L instanceof Function},qi=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ar&&ar===L)){if((!L||typeof L!="object")&&(L={}),L=zn(L),wn=As.indexOf(L.PARSER_MEDIA_TYPE)===-1?Zh:L.PARSER_MEDIA_TYPE,ft=wn==="application/xhtml+xml"?ol:ai,M=jt(L,"ALLOWED_TAGS")?Se({},L.ALLOWED_TAGS,ft):W,$=jt(L,"ALLOWED_ATTR")?Se({},L.ALLOWED_ATTR,ft):E,lr=jt(L,"ALLOWED_NAMESPACES")?Se({},L.ALLOWED_NAMESPACES,ol):Ts,sr=jt(L,"ADD_URI_SAFE_ATTR")?Se(zn(Br),L.ADD_URI_SAFE_ATTR,ft):Br,Dn=jt(L,"ADD_DATA_URI_TAGS")?Se(zn(Mr),L.ADD_DATA_URI_TAGS,ft):Mr,st=jt(L,"FORBID_CONTENTS")?Se({},L.FORBID_CONTENTS,ft):Ht,ie=jt(L,"FORBID_TAGS")?Se({},L.FORBID_TAGS,ft):{},le=jt(L,"FORBID_ATTR")?Se({},L.FORBID_ATTR,ft):{},$e=jt(L,"USE_PROFILES")?L.USE_PROFILES:!1,Z=L.ALLOW_ARIA_ATTR!==!1,te=L.ALLOW_DATA_ATTR!==!1,N=L.ALLOW_UNKNOWN_PROTOCOLS||!1,D=L.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Y=L.SAFE_FOR_TEMPLATES||!1,ne=L.SAFE_FOR_XML!==!1,re=L.WHOLE_DOCUMENT||!1,Ne=L.RETURN_DOM||!1,ht=L.RETURN_DOM_FRAGMENT||!1,ot=L.RETURN_TRUSTED_TYPE||!1,qe=L.FORCE_BODY||!1,ue=L.SANITIZE_DOM!==!1,B=L.SANITIZE_NAMED_PROPS||!1,ke=L.KEEP_CONTENT!==!1,ct=L.IN_PLACE||!1,T=L.ALLOWED_URI_REGEXP||Th,nn=L.NAMESPACE||Rt,j=L.CUSTOM_ELEMENT_HANDLING||{},L.CUSTOM_ELEMENT_HANDLING&&to(L.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=L.CUSTOM_ELEMENT_HANDLING.tagNameCheck),L.CUSTOM_ELEMENT_HANDLING&&to(L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),L.CUSTOM_ELEMENT_HANDLING&&typeof L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(te=!1),ht&&(Ne=!0),$e&&(M=Se({},uc),$=[],$e.html===!0&&(Se(M,cc),Se($,hc)),$e.svg===!0&&(Se(M,cl),Se($,dl),Se($,Ws)),$e.svgFilters===!0&&(Se(M,ul),Se($,dl),Se($,Ws)),$e.mathMl===!0&&(Se(M,hl),Se($,dc),Se($,Ws))),L.ADD_TAGS&&(M===W&&(M=zn(M)),Se(M,L.ADD_TAGS,ft)),L.ADD_ATTR&&($===E&&($=zn($)),Se($,L.ADD_ATTR,ft)),L.ADD_URI_SAFE_ATTR&&Se(sr,L.ADD_URI_SAFE_ATTR,ft),L.FORBID_CONTENTS&&(st===Ht&&(st=zn(st)),Se(st,L.FORBID_CONTENTS,ft)),ke&&(M["#text"]=!0),re&&Se(M,["html","head","body"]),M.table&&(Se(M,["tbody"]),delete ie.tbody),L.TRUSTED_TYPES_POLICY){if(typeof L.TRUSTED_TYPES_POLICY.createHTML!="function")throw Hr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof L.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Hr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=L.TRUSTED_TYPES_POLICY,P=x.createHTML("")}else x===void 0&&(x=wy(m,s)),x!==null&&typeof P=="string"&&(P=x.createHTML(""));kt&&kt(L),ar=L}},no=Se({},["mi","mo","mn","ms","mtext"]),ro=Se({},["foreignobject","annotation-xml"]),Jh=Se({},["title","style","font","a","script"]),so=Se({},[...cl,...ul,...uy]),io=Se({},[...hl,...hy]),Qh=function(L){let se=k(L);(!se||!se.tagName)&&(se={namespaceURI:nn,tagName:"template"});const he=ai(L.tagName),He=ai(se.tagName);return lr[L.namespaceURI]?L.namespaceURI===Mn?se.namespaceURI===Rt?he==="svg":se.namespaceURI===Nn?he==="svg"&&(He==="annotation-xml"||no[He]):!!so[he]:L.namespaceURI===Nn?se.namespaceURI===Rt?he==="math":se.namespaceURI===Mn?he==="math"&&ro[He]:!!io[he]:L.namespaceURI===Rt?se.namespaceURI===Mn&&!ro[He]||se.namespaceURI===Nn&&!no[He]?!1:!io[he]&&(Jh[he]||!so[he]):!!(wn==="application/xhtml+xml"&&lr[L.namespaceURI]):!1},Wt=function(L){Kr(e.removed,{element:L});try{k(L).removeChild(L)}catch{_(L)}},Es=function(L,se){try{Kr(e.removed,{attribute:se.getAttributeNode(L),from:se})}catch{Kr(e.removed,{attribute:null,from:se})}if(se.removeAttribute(L),L==="is"&&!$[L])if(Ne||ht)try{Wt(se)}catch{}else try{se.setAttribute(L,"")}catch{}},lo=function(L){let se=null,he=null;if(qe)L="<remove></remove>"+L;else{const gt=oc(L,/^[\r\n\t ]+/);he=gt&&gt[0]}wn==="application/xhtml+xml"&&nn===Rt&&(L='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+L+"</body></html>");const He=x?x.createHTML(L):L;if(nn===Rt)try{se=new f().parseFromString(He,wn)}catch{}if(!se||!se.documentElement){se=U.createDocument(nn,"template",null);try{se.documentElement.innerHTML=ir?P:He}catch{}}const mt=se.body||se.documentElement;return L&&he&&mt.insertBefore(n.createTextNode(he),mt.childNodes[0]||null),nn===Rt?S.call(se,re?"html":"body")[0]:re?se.documentElement:mt},ao=function(L){return w.call(L.ownerDocument||L,L,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},oo=function(L){return L instanceof d&&(typeof L.nodeName!="string"||typeof L.textContent!="string"||typeof L.removeChild!="function"||!(L.attributes instanceof h)||typeof L.removeAttribute!="function"||typeof L.setAttribute!="function"||typeof L.namespaceURI!="string"||typeof L.insertBefore!="function"||typeof L.hasChildNodes!="function")},co=function(L){return typeof a=="function"&&L instanceof a},rn=function(L,se,he){O[L]&&Hs(O[L],He=>{He.call(e,se,he,ar)})},uo=function(L){let se=null;if(rn("beforeSanitizeElements",L,null),oo(L))return Wt(L),!0;const he=ft(L.nodeName);if(rn("uponSanitizeElement",L,{tagName:he,allowedTags:M}),L.hasChildNodes()&&!co(L.firstElementChild)&&$t(/<[/\w]/g,L.innerHTML)&&$t(/<[/\w]/g,L.textContent)||L.nodeType===Vr.progressingInstruction||ne&&L.nodeType===Vr.comment&&$t(/<[/\w]/g,L.data))return Wt(L),!0;if(!M[he]||ie[he]){if(!ie[he]&&fo(he)&&(j.tagNameCheck instanceof RegExp&&$t(j.tagNameCheck,he)||j.tagNameCheck instanceof Function&&j.tagNameCheck(he)))return!1;if(ke&&!st[he]){const He=k(L)||L.parentNode,mt=v(L)||L.childNodes;if(mt&&He){const gt=mt.length;for(let xt=gt-1;xt>=0;--xt){const Vt=p(mt[xt],!0);Vt.__removalCount=(L.__removalCount||0)+1,He.insertBefore(Vt,b(L))}}}return Wt(L),!0}return L instanceof c&&!Qh(L)||(he==="noscript"||he==="noembed"||he==="noframes")&&$t(/<\/no(script|embed|frames)/i,L.innerHTML)?(Wt(L),!0):(Y&&L.nodeType===Vr.text&&(se=L.textContent,Hs([q,X,F],He=>{se=zr(se,He," ")}),L.textContent!==se&&(Kr(e.removed,{element:L.cloneNode()}),L.textContent=se)),rn("afterSanitizeElements",L,null),!1)},ho=function(L,se,he){if(ue&&(se==="id"||se==="name")&&(he in n||he in Xh))return!1;if(!(te&&!le[se]&&$t(J,se))){if(!(Z&&$t(ee,se))){if(!$[se]||le[se]){if(!(fo(L)&&(j.tagNameCheck instanceof RegExp&&$t(j.tagNameCheck,L)||j.tagNameCheck instanceof Function&&j.tagNameCheck(L))&&(j.attributeNameCheck instanceof RegExp&&$t(j.attributeNameCheck,se)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(se))||se==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&$t(j.tagNameCheck,he)||j.tagNameCheck instanceof Function&&j.tagNameCheck(he))))return!1}else if(!sr[se]){if(!$t(T,zr(he,fe,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&L!=="script"&&ly(he,"data:")===0&&Dn[L])){if(!(N&&!$t(oe,zr(he,fe,"")))){if(he)return!1}}}}}}return!0},fo=function(L){return L!=="annotation-xml"&&oc(L,A)},go=function(L){rn("beforeSanitizeAttributes",L,null);const{attributes:se}=L;if(!se)return;const he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};let He=se.length;for(;He--;){const mt=se[He],{name:gt,namespaceURI:xt,value:Vt}=mt,Fr=ft(gt);let wt=gt==="value"?Vt:ay(Vt);if(he.attrName=Fr,he.attrValue=wt,he.keepAttr=!0,he.forceKeepAttr=void 0,rn("uponSanitizeAttribute",L,he),wt=he.attrValue,ne&&$t(/((--!?|])>)|<\/(style|title)/i,wt)){Es(gt,L);continue}if(he.forceKeepAttr||(Es(gt,L),!he.keepAttr))continue;if(!D&&$t(/\/>/i,wt)){Es(gt,L);continue}Y&&Hs([q,X,F],mo=>{wt=zr(wt,mo," ")});const po=ft(L.nodeName);if(ho(po,Fr,wt)){if(B&&(Fr==="id"||Fr==="name")&&(Es(gt,L),wt=me+wt),x&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!xt)switch(m.getAttributeType(po,Fr)){case"TrustedHTML":{wt=x.createHTML(wt);break}case"TrustedScriptURL":{wt=x.createScriptURL(wt);break}}try{xt?L.setAttributeNS(xt,gt,wt):L.setAttribute(gt,wt),oo(L)?Wt(L):ac(e.removed)}catch{}}}rn("afterSanitizeAttributes",L,null)},ed=function de(L){let se=null;const he=ao(L);for(rn("beforeSanitizeShadowDOM",L,null);se=he.nextNode();)rn("uponSanitizeShadowNode",se,null),!uo(se)&&(se.content instanceof i&&de(se.content),go(se));rn("afterSanitizeShadowDOM",L,null)};return e.sanitize=function(de){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,he=null,He=null,mt=null;if(ir=!de,ir&&(de="<!-->"),typeof de!="string"&&!co(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw Hr("dirty is not a string, aborting")}else throw Hr("toString is not a function");if(!e.isSupported)return de;if(ge||qi(L),e.removed=[],typeof de=="string"&&(ct=!1),ct){if(de.nodeName){const Vt=ft(de.nodeName);if(!M[Vt]||ie[Vt])throw Hr("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof a)se=lo("<!---->"),he=se.ownerDocument.importNode(de,!0),he.nodeType===Vr.element&&he.nodeName==="BODY"||he.nodeName==="HTML"?se=he:se.appendChild(he);else{if(!Ne&&!Y&&!re&&de.indexOf("<")===-1)return x&&ot?x.createHTML(de):de;if(se=lo(de),!se)return Ne?null:ot?P:""}se&&qe&&Wt(se.firstChild);const gt=ao(ct?de:se);for(;He=gt.nextNode();)uo(He)||(He.content instanceof i&&ed(He.content),go(He));if(ct)return de;if(Ne){if(ht)for(mt=H.call(se.ownerDocument);se.firstChild;)mt.appendChild(se.firstChild);else mt=se;return($.shadowroot||$.shadowrootmode)&&(mt=I.call(r,mt,!0)),mt}let xt=re?se.outerHTML:se.innerHTML;return re&&M["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&$t(Ah,se.ownerDocument.doctype.name)&&(xt="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+xt),Y&&Hs([q,X,F],Vt=>{xt=zr(xt,Vt," ")}),x&&ot?x.createHTML(xt):xt},e.setConfig=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qi(de),ge=!0},e.clearConfig=function(){ar=null,ge=!1},e.isValidAttribute=function(de,L,se){ar||qi({});const he=ft(de),He=ft(L);return ho(he,He,se)},e.addHook=function(de,L){typeof L=="function"&&(O[de]=O[de]||[],Kr(O[de],L))},e.removeHook=function(de){if(O[de])return ac(O[de])},e.removeHooks=function(de){O[de]&&(O[de]=[])},e.removeAllHooks=function(){O={}},e}var $y=Eh();const Cy="_markStyle_16k43_1",Sy={markStyle:Cy};var ky=C("<div>");const Lh=t=>{const[e,n]=pt(t,["text","tooltip","class"]),[r,s]=R();return(()=>{var i=ky();return Ln(s,i),nt(i,Qe({get class(){return`${Sy.markStyle} ${e.class??""}`},get innerHTML(){return $y.sanitize(De.parse(e.text(),{async:!1,gfm:!0}))},get title(){return e.tooltip}},n),!1,!1),i})()};class Ph extends vn{spells;classes;races;backgrounds;items;feats;constructor(e){super(e),this.version(1).stores({spells:"name",classes:"name",races:"name",backgrounds:"name",items:"name",feats:"name"})}}const Le=new Ph("homebrew");class xy{classes;setClasses;homebrewClasses$=_e.toObservable(Le.classes.toArray());items;setItems;homebrewItems$=_e.toObservable(Le.items.toArray());feats;setFeats;homebrewFeats$=_e.toObservable(Le.feats.toArray());spells;setSpells;homebrewSpells$=_e.toObservable(Le.spells.toArray());backgrounds;setBackgrounds;homebrewBackgrounds$=_e.toObservable(Le.backgrounds.toArray());races;setRaces;homebrewRaces$=_e.toObservable(Le.races.toArray());constructor(e=[],n=[],r=[],s=[],i=[],l=[]){[this.classes,this.setClasses]=R(e),[this.items,this.setItems]=R(n),[this.feats,this.setFeats]=R(r),[this.spells,this.setSpells]=R(s),[this.backgrounds,this.setBackgrounds]=R(i),[this.races,this.setRaces]=R(l),this.homebrewClasses$.pipe(we(1),at(a=>this.setClasses(c=>[...c,...a]))).subscribe(),this.homebrewItems$.pipe(we(1),at(a=>this.setItems(c=>[...c,...a]))).subscribe(),this.homebrewFeats$.pipe(we(1),at(a=>this.setFeats(c=>[...c,...a]))).subscribe(),this.homebrewSpells$.pipe(we(1),at(a=>this.setSpells(c=>[...c,...a]))).subscribe(),this.homebrewBackgrounds$.pipe(we(1),at(a=>this.setBackgrounds(c=>[...c,...a]))).subscribe(),this.homebrewRaces$.pipe(we(1),at(a=>this.setRaces(c=>[...c,...a]))).subscribe()}addClass=e=>{this.classes().findIndex(n=>n.name===e.name)===-1&&(this.setClasses(n=>[...n,e]),this.addClassToDB(e).subscribe())};addClassToDB=e=>_e.toObservable(Le.classes.add(e)).pipe(we(1));updateClass(e){const n=this.classes().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.classes();r[n]=e,this.setClasses([...r])}updateClassesInDB=()=>{this.homebrewClasses$.pipe(we(1),Ge(e=>_e.toObservable(Le.classes.bulkPut(this.classes())))).subscribe()};removeClass=e=>{const n=this.classes().findIndex(s=>s.name===e);if(n===-1)return;const r=this.classes();r.splice(n,1),this.setClasses([...r]),_e.toObservable(Le.classes.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.classes.bulkAdd(this.classes())))).subscribe()};addItem=e=>{this.items().findIndex(n=>n.name===e.name)===-1&&(this.setItems(n=>[...n,e]),this.addItemToDB(e).subscribe())};addItemToDB=e=>_e.toObservable(Le.items.add(e)).pipe(we(1));updateItem=e=>{const n=this.items().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.items();r[n]=e,this.setItems([...r])};updateItemsInDB=()=>{this.homebrewItems$.pipe(we(1),Ge(e=>_e.toObservable(Le.items.bulkPut(this.items())))).subscribe()};removeItem=e=>{const n=this.items().findIndex(s=>s.name===e);if(n===-1)return;const r=this.items();r.splice(n,1),this.setItems([...r]),_e.toObservable(Le.items.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.items.bulkAdd(this.items())))).subscribe()};addFeat=e=>{this.feats().findIndex(n=>n.name===e.name)===-1&&(this.setFeats(n=>[...n,e]),this.addFeatToDB(e).subscribe())};addFeatToDB=e=>_e.toObservable(Le.feats.add(e)).pipe(we(1));updateFeat=e=>{const n=this.feats().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.feats();r[n]=e,this.setFeats([...r])};updateFeatsInDB=()=>{this.homebrewFeats$.pipe(we(1),Ge(e=>_e.toObservable(Le.feats.bulkPut(this.feats())))).subscribe()};removeFeat=e=>{const n=this.feats().findIndex(s=>s.name===e);if(n===-1)return;const r=this.feats();r.splice(n,1),this.setFeats([...r]),_e.toObservable(Le.feats.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.feats.bulkAdd(this.feats())))).subscribe()};addSpell=e=>{this.spells().findIndex(n=>n.name===e.name)===-1&&(this.setSpells(n=>[...n,e]),this.addSpellToDB(it(e)).subscribe())};addSpellToDB=e=>_e.toObservable(Le.spells.add(e)).pipe(we(1));updateSpell=e=>{const n=this.spells().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.spells();r[n]=e,this.setSpells([...r]),this.updateSpellInDb(it(e)).subscribe()};updateSpellInDb=e=>_e.toObservable(Le.spells.put(e)).pipe(we(1));updateSpellsInDB=()=>{this.homebrewSpells$.pipe(we(1),Ge(e=>_e.toObservable(Le.spells.bulkPut(this.spells())))).subscribe()};removeSpell=e=>{const n=this.spells().findIndex(s=>s.name===e);if(n===-1)return;const r=this.spells();r.splice(n,1),this.setSpells([...r]),_e.toObservable(Le.spells.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.spells.bulkAdd(this.spells())))).subscribe()};addBackground=e=>{this.backgrounds().findIndex(n=>n.name===e.name)===-1&&(this.setBackgrounds(n=>[...n,e]),this.addBackgroundToDB(e).subscribe())};addBackgroundToDB=e=>_e.toObservable(Le.backgrounds.add(e)).pipe(we(1));updateBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.backgrounds();r[n]=e,this.setBackgrounds([...r]),this.updateBackgroundsInDB()};updateBackgroundsInDB=()=>{this.homebrewBackgrounds$.pipe(we(1),Ge(e=>_e.toObservable(Le.backgrounds.bulkPut(this.backgrounds())))).subscribe()};removeBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e);if(n===-1)return;const r=this.backgrounds();r.splice(n,1),this.setBackgrounds([...r]),_e.toObservable(Le.backgrounds.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.backgrounds.bulkAdd(this.backgrounds())))).subscribe()};addRace=e=>{this.races().findIndex(n=>n.name===e.name)===-1&&(this.setRaces(n=>[...n,e]),this.addRaceToDB(e).subscribe())};addRaceToDB=e=>_e.toObservable(Le.races.add(e)).pipe(we(1));updateRace=e=>{const n=this.races().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.races();r[n]=e,this.setRaces([...r]),this.updateRacesInDB().subscribe()};updateRacesInDB=()=>this.homebrewRaces$.pipe(we(1),Ge(e=>_e.toObservable(Le.races.bulkPut(this.races()))));removeRace=e=>{const n=this.races().findIndex(s=>s.name===e);if(n===-1)return;const r=this.races().splice(n,1);this.setRaces([...r]),_e.toObservable(Le.races.clear()).pipe(we(1),Ge(()=>_e.toObservable(Le.races.bulkAdd(this.races())))).subscribe()}}const et=new xy,Nt=new Ph("dndSrd"),[gc,Ty]=R([]);function Oh(){const t=_e.toObservable(Nt.backgrounds.toArray());return gc().length===0&&t.pipe(we(1),Ge(e=>e.length>0?We(e):We([])),Ge(e=>e.length===0?_e.post("/api/DnDInfo/Backgrounds",{}).pipe(we(1),er(n=>(console.error("Error: ",n),We(null))),at(n=>{n&&Nt.backgrounds.bulkAdd(n)})):We(e)),at(e=>e&&e.length>0?Ty(e):null)).subscribe(),gc}const Ih=()=>{const t=Oh();return K(()=>[...t()])},[pc,Ay]=R([]);function Ga(){const t=_e.toObservable(Nt.classes.toArray());return pc().length===0&&t.pipe(we(1),Ge(e=>e.length>0?We(e):We([])),Ge(e=>e.length===0?_e.post("/api/DnDInfo/Classes",{}).pipe(we(1),er(n=>(console.error("Error: ",n),We(null))),at(n=>{n&&Nt.classes.bulkAdd(n)})):We(e)),Ge(e=>We(e&&e.concat(et.classes()))),at(e=>e&&e.length>0?Ay(e):null)).subscribe(),pc}const Ui=()=>{const t=Ga();return K(()=>[...t(),...et.classes()])},[mc,Ey]=R([]);function Rh(){const t=_e.toObservable(Nt.feats.toArray());return mc().length===0&&t.pipe(we(1),Ge(e=>e.length>0?We(e):We([])),Ge(e=>e.length===0?_e.post("/api/DnDInfo/Feats",{}).pipe(we(1),er(n=>(console.error("Error: ",n),We(null))),at(n=>{n&&Nt.feats.bulkAdd(n)})):We(e)),at(e=>e&&e.length>0?Ey(e):null)).subscribe(),mc}const[vc,Ly]=R([]),Ya=()=>{const t=Rh(),e=_e.toObservable(Le.feats.toArray());return vc().length===0&&e.pipe(we(1),at(r=>{r.length>0&&Ly(r)})).subscribe(),K(()=>[...t(),...vc()])},[bc,Py]=R([]);function Dh(){const t=_e.toObservable(Nt.items.toArray());return bc().length===0&&t.pipe(we(1),Ge(e=>e.length>0?We(e):We([])),Ge(e=>e.length===0?_e.post("/api/DnDInfo/Items",{}).pipe(we(1),er(n=>(console.error("Error: ",n),We(null))),at(n=>{n&&Nt.items.bulkAdd(n)})):We(e)),at(e=>e&&e.length>0?Py(e):null)).subscribe(),bc}const Nh=()=>{const t=Dh();return K(()=>[...t()])},[yc,Oy]=R([]);function Mh(){const t=_e.toObservable(Nt.races.toArray());return yc().length===0&&t.pipe(we(1),Ge(e=>e.length>0?We(e):We([])),Ge(e=>e.length===0?_e.post("/api/DnDInfo/Races",{}).pipe(we(1),er(n=>(console.error("Error: ",n),We(null))),at(n=>{n&&Nt.races.bulkAdd(n)})):We(e)),at(e=>e&&e.length>0?Oy(e):null)).subscribe(),yc}const Iy=()=>{const t=Mh();return K(()=>[...t()])},[_c,Ry]=R([]);function Za(t){const e=_e.toObservable(Nt.spells.toArray()),n=_e.toObservable(Le.spells.toArray());return _c().length===0&&(t?e:sg([e,n]).pipe(Sa(([s,i])=>[...s,...i]))).pipe(we(1),Ge(s=>s.length>0?We(s):We([])),Ge(s=>s.length===0?_e.post("/api/DnDInfo/Spells",{}).pipe(we(1),er(i=>(console.error("Error: ",i),We(null))),at(i=>{i&&Nt.spells.bulkAdd(i)})):We(s)),at(s=>s&&s.length>0?Ry(s):null)).subscribe(),_c}const Bh=()=>{const t=Za();return K(()=>[...t()])},Dy=[{name:"Gandalf",level:1,class:"Wizard",race:"Elf",subrace:"High Elf",background:"Noble",subclass:"Evocation",stats:{str:8,dex:14,con:12,int:15,wis:13,cha:10},spells:{spellsKnown:["Fireball","Mage Armor","Magic Missile","Shield"],spellsPrepared:["Fireball","Shield","Magic Missile"],alwaysPrepared:[]},skills:{proficient:["Arcana","History"],expertise:["Arcana"]},Features:[]},{name:"Jorden",level:1,class:"Fighter",race:"Dwarf",subrace:"Hill Dwarf",background:"Soldier",subclass:"Champion",stats:{str:12,dex:15,con:14,int:10,wis:13,cha:8},skills:{proficient:["Athletics","Survival"],expertise:["Athletics"]},Features:[]}],[Ny,My]=R(Dy);function eC(){return[Ny,My]}const By=new vn("dndInfo");By.version(1).stores({classes:"++id, name"});R(null);function da(t){return t.replace(/[_-]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Fy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jy={exports:{}};(function(t){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(A,T,M){A[T]=M.value},l,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function d(A,T,M){return Object.defineProperty(A,T,{value:M,enumerable:!0,configurable:!0,writable:!0}),A[T]}try{d({},"")}catch{d=function(T,M,W){return T[M]=W}}function f(A,T,M,W){var $=T&&T.prototype instanceof k?T:k,E=Object.create($.prototype),j=new ee(W||[]);return i(E,"_invoke",{value:q(A,M,j)}),E}n.wrap=f;function m(A,T,M){try{return{type:"normal",arg:A.call(T,M)}}catch(W){return{type:"throw",arg:W}}}var y="suspendedStart",p="suspendedYield",_="executing",b="completed",v={};function k(){}function x(){}function P(){}var U={};d(U,c,function(){return this});var w=Object.getPrototypeOf,H=w&&w(w(oe([])));H&&H!==r&&s.call(H,c)&&(U=H);var S=P.prototype=k.prototype=Object.create(U);x.prototype=P,i(S,"constructor",{value:P,configurable:!0}),i(P,"constructor",{value:x,configurable:!0}),x.displayName=d(P,h,"GeneratorFunction");function I(A){["next","throw","return"].forEach(function(T){d(A,T,function(M){return this._invoke(T,M)})})}n.isGeneratorFunction=function(A){var T=typeof A=="function"&&A.constructor;return T?T===x||(T.displayName||T.name)==="GeneratorFunction":!1},n.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,P):(A.__proto__=P,d(A,h,"GeneratorFunction")),A.prototype=Object.create(S),A},n.awrap=function(A){return{__await:A}};function O(A,T){function M(E,j,ie,le){var Z=m(A[E],A,j);if(Z.type==="throw")le(Z.arg);else{var te=Z.arg,N=te.value;return N&&typeof N=="object"&&s.call(N,"__await")?T.resolve(N.__await).then(function(D){M("next",D,ie,le)},function(D){M("throw",D,ie,le)}):T.resolve(N).then(function(D){te.value=D,ie(te)},function(D){return M("throw",D,ie,le)})}}var W;function $(E,j){function ie(){return new T(function(le,Z){M(E,j,le,Z)})}return W=W?W.then(ie,ie):ie()}i(this,"_invoke",{value:$})}I(O.prototype),d(O.prototype,u,function(){return this}),n.AsyncIterator=O,n.async=function(A,T,M,W,$){$===void 0&&($=Promise);var E=new O(f(A,T,M,W),$);return n.isGeneratorFunction(T)?E:E.next().then(function(j){return j.done?j.value:E.next()})};function q(A,T,M){var W=y;return function(E,j){if(W===_)throw new Error("Generator is already running");if(W===b){if(E==="throw")throw j;return fe()}for(M.method=E,M.arg=j;;){var ie=M.delegate;if(ie){var le=X(ie,M);if(le){if(le===v)continue;return le}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(W===y)throw W=b,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);W=_;var Z=m(A,T,M);if(Z.type==="normal"){if(W=M.done?b:p,Z.arg===v)continue;return{value:Z.arg,done:M.done}}else Z.type==="throw"&&(W=b,M.method="throw",M.arg=Z.arg)}}}function X(A,T){var M=T.method,W=A.iterator[M];if(W===l)return T.delegate=null,M==="throw"&&A.iterator.return&&(T.method="return",T.arg=l,X(A,T),T.method==="throw")||M!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+M+"' method")),v;var $=m(W,A.iterator,T.arg);if($.type==="throw")return T.method="throw",T.arg=$.arg,T.delegate=null,v;var E=$.arg;if(!E)return T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,v;if(E.done)T[A.resultName]=E.value,T.next=A.nextLoc,T.method!=="return"&&(T.method="next",T.arg=l);else return E;return T.delegate=null,v}I(S),d(S,h,"Generator"),d(S,c,function(){return this}),d(S,"toString",function(){return"[object Generator]"});function F(A){var T={tryLoc:A[0]};1 in A&&(T.catchLoc=A[1]),2 in A&&(T.finallyLoc=A[2],T.afterLoc=A[3]),this.tryEntries.push(T)}function J(A){var T=A.completion||{};T.type="normal",delete T.arg,A.completion=T}function ee(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(F,this),this.reset(!0)}n.keys=function(A){var T=Object(A),M=[];for(var W in T)M.push(W);return M.reverse(),function $(){for(;M.length;){var E=M.pop();if(E in T)return $.value=E,$.done=!1,$}return $.done=!0,$}};function oe(A){if(A){var T=A[c];if(T)return T.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var M=-1,W=function $(){for(;++M<A.length;)if(s.call(A,M))return $.value=A[M],$.done=!1,$;return $.value=l,$.done=!0,$};return W.next=W}}return{next:fe}}n.values=oe;function fe(){return{value:l,done:!0}}return ee.prototype={constructor:ee,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(J),!A)for(var T in this)T.charAt(0)==="t"&&s.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=l)},stop:function(){this.done=!0;var A=this.tryEntries[0],T=A.completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var T=this;function M(le,Z){return E.type="throw",E.arg=A,T.next=le,Z&&(T.method="next",T.arg=l),!!Z}for(var W=this.tryEntries.length-1;W>=0;--W){var $=this.tryEntries[W],E=$.completion;if($.tryLoc==="root")return M("end");if($.tryLoc<=this.prev){var j=s.call($,"catchLoc"),ie=s.call($,"finallyLoc");if(j&&ie){if(this.prev<$.catchLoc)return M($.catchLoc,!0);if(this.prev<$.finallyLoc)return M($.finallyLoc)}else if(j){if(this.prev<$.catchLoc)return M($.catchLoc,!0)}else if(ie){if(this.prev<$.finallyLoc)return M($.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(A,T){for(var M=this.tryEntries.length-1;M>=0;--M){var W=this.tryEntries[M];if(W.tryLoc<=this.prev&&s.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var $=W;break}}$&&(A==="break"||A==="continue")&&$.tryLoc<=T&&T<=$.finallyLoc&&($=null);var E=$?$.completion:{};return E.type=A,E.arg=T,$?(this.method="next",this.next=$.finallyLoc,v):this.complete(E)},complete:function(A,T){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&T&&(this.next=T),v},finish:function(A){for(var T=this.tryEntries.length-1;T>=0;--T){var M=this.tryEntries[T];if(M.finallyLoc===A)return this.complete(M.completion,M.afterLoc),J(M),v}},catch:function(A){for(var T=this.tryEntries.length-1;T>=0;--T){var M=this.tryEntries[T];if(M.tryLoc===A){var W=M.completion;if(W.type==="throw"){var $=W.arg;J(M)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(A,T,M){return this.delegate={iterator:oe(A),resultName:T,nextLoc:M},this.method==="next"&&(this.arg=l),v}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(jy);var Xa=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const Uy=Xa;let wc=0;var Fh=({id:t,action:e,payload:n={}})=>{let r=t;return typeof r>"u"&&(r=Uy("Job",wc),wc+=1),{id:r,action:e,payload:n}},Nr={};let Ja=!1;Nr.logging=Ja;Nr.setLogging=t=>{Ja=t};Nr.log=(...t)=>Ja?console.log.apply(void 0,t):null;const qy=Fh,{log:Vs}=Nr,Ky=Xa;let $c=0;var zy=()=>{const t=Ky("Scheduler",$c),e={},n={};let r=[];$c+=1;const s=()=>r.length,i=()=>Object.keys(e).length,l=()=>{if(r.length!==0){const d=Object.keys(e);for(let f=0;f<d.length;f+=1)if(typeof n[d[f]]>"u"){r[0](e[d[f]]);break}}},a=(d,f)=>new Promise((m,y)=>{const p=qy({action:d,payload:f});r.push(async _=>{r.shift(),n[_.id]=p;try{m(await _[d].apply(void 0,[...f,p.id]))}catch(b){y(b)}finally{delete n[_.id],l()}}),Vs(`[${t}]: Add ${p.id} to JobQueue`),Vs(`[${t}]: JobQueue length=${r.length}`),l()});return{addWorker:d=>(e[d.id]=d,Vs(`[${t}]: Add ${d.id}`),Vs(`[${t}]: Number of workers=${i()}`),l(),d.id),addJob:async(d,...f)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return a(d,f)},terminate:async()=>{Object.keys(e).forEach(async d=>{await e[d].terminate()}),r=[]},getQueueLen:s,getNumWorkers:i}};function Hy(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Wy(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Vy=Wy;const Gy=Vy;var Yy=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Gy()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Hy=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const Zy=Yy("type")==="browser",Xy=Zy?t=>new URL(t,window.location.href).href:t=>t;var Jy=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(e[n]=Xy(e[n]))}),e},Qy=t=>{const e=[],n=[],r=[],s=[],i=[];return t.blocks&&t.blocks.forEach(l=>{l.paragraphs.forEach(a=>{a.lines.forEach(c=>{c.words.forEach(u=>{u.symbols.forEach(h=>{i.push({...h,page:t,block:l,paragraph:a,line:c,word:u})}),s.push({...u,page:t,block:l,paragraph:a,line:c})}),r.push({...c,page:t,block:l,paragraph:a})}),n.push({...a,page:t,block:l})}),e.push({...l,page:t})}),{...t,blocks:e,paragraphs:n,lines:r,words:s,symbols:i}},jh={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const e1="tesseract.js",t1="5.1.0",n1="Pure Javascript Multilingual OCR",r1="src/index.js",s1="src/index.d.ts",i1="dist/tesseract.min.js",l1="dist/tesseract.min.js",a1={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},o1={"./src/worker/node/index.js":"./src/worker/browser/index.js"},c1="",u1=["jeromewu"],h1="Apache-2.0",d1={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},f1={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},g1={"@rollup/pluginutils":"^5.0.2"},p1={type:"git",url:"https://github.com/naptha/tesseract.js.git"},m1={url:"https://github.com/naptha/tesseract.js/issues"},v1="https://github.com/naptha/tesseract.js",b1={type:"opencollective",url:"https://opencollective.com/tesseractjs"},y1={name:e1,version:t1,description:n1,main:r1,types:s1,unpkg:i1,jsdelivr:l1,scripts:a1,browser:o1,author:c1,contributors:u1,license:h1,devDependencies:d1,dependencies:f1,overrides:g1,repository:p1,bugs:m1,homepage:v1,collective:b1};var _1={workerBlobURL:!0,logger:()=>{}};const w1=y1.version,$1=_1;var C1={...$1,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${w1}/dist/worker.min.js`},S1=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n},k1=t=>{t.terminate()},x1=(t,e)=>{t.onmessage=({data:n})=>{e(n)}},T1=async(t,e)=>{t.postMessage(e)};const fl=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(t)}),fa=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await fa(t.src)),t.tagName==="VIDEO"&&(e=await fa(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async r=>{e=await fl(r),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();e=await fl(n)}else(t instanceof File||t instanceof Blob)&&(e=await fl(t));return new Uint8Array(e)};var A1=fa;const E1=C1,L1=S1,P1=k1,O1=x1,I1=T1,R1=A1;var D1={defaultOptions:E1,spawnWorker:L1,terminateWorker:P1,onMessage:O1,send:I1,loadImage:R1};const N1=Jy,M1=Qy,Bt=Fh,{log:Cc}=Nr,B1=Xa,Fn=jh,{defaultOptions:F1,spawnWorker:j1,terminateWorker:U1,onMessage:q1,loadImage:Sc,send:K1}=D1;let kc=0;var Uh=async(t="eng",e=Fn.LSTM_ONLY,n={},r={})=>{const s=B1("Worker",kc),{logger:i,errorHandler:l,...a}=N1({...F1,...n}),c={},u={},h=typeof t=="string"?t.split("+"):t;let d=e,f=r;const m=[Fn.DEFAULT,Fn.LSTM_ONLY].includes(e)&&!a.legacyCore;let y,p;const _=new Promise(($,E)=>{p=$,y=E}),b=$=>{y($.message)};let v=j1(a);v.onerror=b,kc+=1;const k=($,E)=>{c[$]=E},x=($,E)=>{u[$]=E},P=({id:$,action:E,payload:j})=>new Promise((ie,le)=>{Cc(`[${s}]: Start ${$}, action=${E}`);const Z=`${E}-${$}`;k(Z,ie),x(Z,le),K1(v,{workerId:s,jobId:$,action:E,payload:j})}),U=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),w=$=>P(Bt({id:$,action:"load",payload:{options:{lstmOnly:m,corePath:a.corePath,logging:a.logging}}})),H=($,E,j)=>P(Bt({id:j,action:"FS",payload:{method:"writeFile",args:[$,E]}})),S=($,E)=>P(Bt({id:E,action:"FS",payload:{method:"readFile",args:[$,{encoding:"utf8"}]}})),I=($,E)=>P(Bt({id:E,action:"FS",payload:{method:"unlink",args:[$]}})),O=($,E,j)=>P(Bt({id:j,action:"FS",payload:{method:$,args:E}})),q=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),X=($,E)=>P(Bt({id:E,action:"loadLanguage",payload:{langs:$,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Fn.LSTM_ONLY,Fn.TESSERACT_LSTM_COMBINED].includes(d)&&!a.legacyLang}}})),F=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),J=($,E,j,ie)=>P(Bt({id:ie,action:"initialize",payload:{langs:$,oem:E,config:j}})),ee=($="eng",E,j,ie)=>{if(m&&[Fn.TESSERACT_ONLY,Fn.TESSERACT_LSTM_COMBINED].includes(E))throw Error("Legacy model requested but code missing.");const le=E||d;d=le;const Z=j||f;f=Z;const N=(typeof $=="string"?$.split("+"):$).filter(D=>!h.includes(D));return h.push(...N),N.length>0?X(N,ie).then(()=>J($,le,Z,ie)):J($,le,Z,ie)},oe=($={},E)=>P(Bt({id:E,action:"setParameters",payload:{params:$}})),fe=async($,E={},j={blocks:!0,text:!0,hocr:!0,tsv:!0},ie)=>P(Bt({id:ie,action:"recognize",payload:{image:await Sc($),options:E,output:j}})),A=($="Tesseract OCR Result",E=!1,j)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),P(Bt({id:j,action:"getPDF",payload:{title:$,textonly:E}}))),T=async($,E)=>{if(m)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return P(Bt({id:E,action:"detect",payload:{image:await Sc($)}}))},M=async()=>(v!==null&&(U1(v),v=null),Promise.resolve());q1(v,({workerId:$,jobId:E,status:j,action:ie,data:le})=>{const Z=`${ie}-${E}`;if(j==="resolve"){Cc(`[${$}]: Complete ${E}`);let te=le;ie==="recognize"?te=M1(le):ie==="getPDF"&&(te=Array.from({...le,length:Object.keys(le).length})),c[Z]({jobId:E,data:te})}else if(j==="reject")if(u[Z](le),ie==="load"&&y(le),l)l(le);else throw Error(le);else j==="progress"&&i({...le,userJobId:E})});const W={id:s,worker:v,setResolve:k,setReject:x,load:U,writeText:H,readText:S,removeFile:I,FS:O,loadLanguage:q,initialize:F,reinitialize:ee,setParameters:oe,recognize:fe,getPDF:A,detect:T,terminate:M};return w().then(()=>X(t)).then(()=>J(t,e,r)).then(()=>p(W)).catch(()=>{}),_};const qh=Uh,z1=async(t,e,n)=>{const r=await qh(e,1,n);return r.recognize(t).finally(async()=>{await r.terminate()})},H1=async(t,e)=>{const n=await qh("osd",0,e);return n.detect(t).finally(async()=>{await n.terminate()})};var W1={recognize:z1,detect:H1},V1={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},G1={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Y1=zy,Z1=Uh,X1=W1,J1=V1,Q1=jh,e0=G1,{setLogging:t0}=Nr;var n0={languages:J1,OEM:Q1,PSM:e0,createScheduler:Y1,createWorker:Z1,setLogging:t0,...X1};const r0=Fy(n0),s0=async(t,e,n)=>{const r=await r0.createWorker("eng");r.recognize(t).then(s=>{e(i=>i?i+`
`+s.data.text:s.data.text),r.terminate(),n&&n()})};var i0=C('<svg width=800px height=800px><path d="M3 10H4C4.93188 10 5.39782 10 5.76537 10.1522C6.25542 10.3552 6.64477 10.7446 6.84776 11.2346C7 11.6022 7 12.0681 7 13C7 13.9319 7 14.3978 6.84776 14.7654C6.64477 15.2554 6.25542 15.6448 5.76537 15.8478C5.39782 16 4.93188 16 4 16H3M19 6V5C19 3.89543 18.1046 3 17 3H15C13.8954 3 13 3.89543 13 5V6M6.2 20H17.8C18.9201 20 19.4802 20 19.908 19.782C20.2843 19.5903 20.5903 19.2843 20.782 18.908C21 18.4802 21 17.9201 21 16.8V9.2C21 8.07989 21 7.51984 20.782 7.09202C20.5903 6.71569 20.2843 6.40973 19.908 6.21799C19.4802 6 18.9201 6 17.8 6H6.2C5.0799 6 4.51984 6 4.09202 6.21799C3.71569 6.40973 3.40973 6.71569 3.21799 7.09202C3 7.51984 3 8.07989 3 9.2V16.8C3 17.9201 3 18.4802 3.21799 18.908C3.40973 19.2843 3.71569 19.5903 4.09202 19.782C4.51984 20 5.07989 20 6.2 20ZM17 13C17 14.6569 15.6569 16 14 16C12.3431 16 11 14.6569 11 13C11 11.3431 12.3431 10 14 10C15.6569 10 17 11.3431 17 13Z"stroke=#000000 stroke-width=2 stroke-linecap=round stroke-linejoin=round>');const l0=t=>(()=>{var e=i0();return nt(e,Qe(t,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),Xt=t=>{const{tabs:e,setTabs:n}=f0();return It(()=>{t.name!==void 0&&n(r=>({...r,[t.name]:t.children}))}),K(()=>t.children)},a0="_tabs_fzpxn_1",o0="_tabBody_fzpxn_38",c0="_leftArrow_fzpxn_45",u0="_rightArrow_fzpxn_51",Gs={tabs:a0,tabBody:o0,leftArrow:c0,rightArrow:u0};var gl=C("<span>"),h0=C("<div><div><div></div></div><div>"),d0=C("<b>");const Qa=Er({tabs:()=>({}),setTabs:()=>{}});function f0(){return Ue(Qa)}const g0=t=>{const[e,n]=R(t.value,{equals:(r,s)=>{if(!(Object.keys(r).length===Object.keys(s).length))return!1;for(const l in r)if(r[l]!==s[l])return!1;return JSON.stringify(r)===JSON.stringify(s)}});return o(Qa.Provider,{value:{tabs:e,setTabs:n},get children(){return t.children}})},eo=t=>o(g0,{value:{},get children(){return o(p0,t)}}),p0=t=>{const[e,n]=Ie(),r=K(()=>Oe(e().theme)),{tabs:s,setTabs:i}=Ue(Qa),[l,a]=R(Object.keys(s())[0]),c=K(()=>s()[l()]);Lr(()=>t.children),V(()=>{a(Object.keys(s())[0])});const[u,h]=R(!1),[d,f]=R(!1),m=v=>{f(y?.scrollLeft!==y?.scrollWidth-y?.clientWidth),h(y?.scrollLeft>0),y?.scrollLeft<=0&&h(!1)};let y;It(()=>{y&&(y.addEventListener("scroll",m),m())}),bn(()=>{y&&y.removeEventListener("scroll",m)});const p=()=>{y.scrollLeft-=100,m()},_=()=>{y.scrollLeft+=100,m(),h(!0)},b=t.styleType??"accent";return(()=>{var v=h0(),k=v.firstChild,x=k.firstChild,P=k.nextSibling;g(k,o(G,{get when(){return u()},get children(){var w=gl();return g(w,o(ae,{onClick:p,children:"←"})),V(()=>z(w,`${Gs.leftArrow}`)),w}}),x);var U=y;return typeof U=="function"?Ln(U,x):y=x,g(x,o(Q,{get each(){return Object.keys(s())},children:(w,H)=>(()=>{var S=gl();return S.$$click=()=>a(w),g(S,o(G,{get when(){return w===l()},get children(){var I=d0();return g(I,w),I}}),null),g(S,o(G,{get when(){return w!==l()},children:w}),null),V(()=>z(S,`${Oe().hover}`)),S})()})),g(k,o(G,{get when(){return d()},get children(){var w=gl();return g(w,o(ae,{onClick:_,children:"→"})),V(()=>z(w,`${Gs.rightArrow}`)),w}}),null),g(P,c),V(w=>{var H=`${r()[b]} ${Gs.tabs}`,S=`${r()[b]} ${Gs.tabBody}`;return H!==w.e&&z(k,w.e=H),S!==w.t&&z(P,w.t=S),w},{e:void 0,t:void 0}),v})()};zt(["click"]);const m0="_formField_1o1an_1",v0="_moveLegendInside_1o1an_25",b0="_checkboxPadding_1o1an_30",xc={formField:m0,moveLegendInside:v0,checkboxPadding:b0};var y0=C("<fieldset><legend>");const lt=t=>o(cv,{get name(){return t.name},get children(){return o(_0,t)}}),_0=t=>{const[e,n]=pt(t,["children","styleType","name","class","value"]),r=ja(),[s]=Ie(),i=K(()=>Oe(s().theme)),l=K(()=>!r.getValue()&&!r.getFocused()&&r.getTextInside()),a=Lr(()=>t.children),[c,u]=R();Ma(c,()=>{r.setTextInside(!!r.getValue()||!r.getFocused())}),V(()=>{r.setName(t.name)});const[h,d]=R("10px"),[f,m]=R("20px");return V(()=>{l()?(d("10px"),r.getFieldType()!=="textarea"&&m("10px"),r.getFieldType()==="textarea"&&m("10px")):(d("0px"),r.getFieldType()!=="textarea"&&m("0px"),r.getFieldType()==="textarea"&&m("3px"))}),(()=>{var y=y0(),p=y.firstChild;return Ln(u,y),nt(y,Qe(n,{get style(){return{"margin-top":h(),"padding-bottom":f()}},onClick:()=>r.setTextInside(!1),get class(){return`${i()[e.styleType??"accent"]} ${xc.formField} ${e.class??""}`}}),!1,!0),g(p,(()=>{var _=K(()=>!!r.getName());return()=>_()?r.getName():""})()),g(y,a,null),V(()=>z(p,`${i()[e.styleType??"accent"]} ${l()?`${xc.moveLegendInside}`:""}`)),y})()};function w0(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:l}=t;let a,c;const u=async(d=!0)=>{await c};async function h(){if("serviceWorker"in navigator){if(a=await Pi(()=>import("./workbox-window.prod.es5-HOwwy-x7.js"),__vite__mapDeps([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{l?.(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r?.()}),a.register({immediate:e}).then(d=>{i?i("/sw.js",d):s?.(d)}).catch(d=>{l?.(d)})}}return c=h(),u}function Kh(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:l}=t,[a,c]=R(!1),[u,h]=R(!1),d=w0({immediate:e,onOfflineReady(){h(!0),r?.()},onNeedRefresh(){c(!0),n?.()},onRegistered:s,onRegisteredSW:i,onRegisterError:l});return{needRefresh:[a,c],offlineReady:[u,h],updateServiceWorker:d}}const $0="_Container_8liaz_1",C0="_Toast_8liaz_15",S0="_ToastMessage_8liaz_43",k0="_ToastButton_8liaz_51",Gr={Container:$0,Toast:C0,ToastMessage:S0,ToastButton:k0};var x0=C("<span>App ready to work offline"),T0=C("<button>Reload"),A0=C("<div><div></div><button>Close"),E0=C("<div>"),L0=C("<span>New content available, click on reload button to update.");const P0=()=>{const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:s}=Kh({onRegistered(l){console.log("SW Registered: ",l)},onRegisterError(l){console.log("SW registration error",l)}}),i=()=>{e(!1),r(!1)};return(()=>{var l=E0();return g(l,o(G,{get when(){return t()||n()},get children(){var a=A0(),c=a.firstChild,u=c.nextSibling;return g(c,o(G,{get fallback(){return L0()},get when(){return t()},get children(){return x0()}})),g(a,o(G,{get when(){return n()},get children(){var h=T0();return h.$$click=()=>s(!0),V(()=>z(h,Gr.ToastButton)),h}}),u),u.$$click=()=>i(),V(h=>{var d=Gr.Toast,f=Gr.Message,m=Gr.ToastButton;return d!==h.e&&z(a,h.e=d),f!==h.t&&z(c,h.t=f),m!==h.a&&z(u,h.a=m),h},{e:void 0,t:void 0,a:void 0}),a}})),V(()=>z(l,Gr.Container)),l})()};zt(["click"]);const zh=Er({tableState:()=>({headers:[],rowTransform:[],currentColumns:[]}),setTableState:()=>{}}),O0=t=>{const[e,n]=R(t.value);return o(zh.Provider,{value:{tableState:e,setTableState:n},get children(){return t.children}})};function rr(){return Ue(zh)}var I0=C("<table><thead></thead><tbody>"),Hh=C("<tr><td>"),R0=C("<tr>"),Tc=C("<td>");const Sr=t=>o(O0,{value:{headers:[],rowTransform:[],currentColumns:[]},get children(){return o(D0,t)}}),D0=t=>{const e=rr(),[n,r]=pt(t,["data","columns","children","dropdown"]),[s,i]=R(),[l,a]=R();e.setTableState({headers:[],rowTransform:[],currentColumns:[]});const[c,u]=R({}),h=y=>e.tableState().currentColumns.findIndex(p=>p===y),d=y=>e.tableState().headers[h(y)],f=()=>!!e.tableState().dropTransform,m=y=>{const p=!!e.tableState().dropTransform,_=!!c()[y]||!Object.keys(t).includes("dropdown");return p&&_};return t.children,(()=>{var y=I0(),p=y.firstChild,_=p.nextSibling;return nt(y,r,!1,!0),Ln(i,p),g(p,o(Q,{get each(){return n.columns},children:(b,v)=>K(()=>d(b))})),Ln(a,_),g(_,o(G,{get when(){return!n.data().length},get children(){return[]}}),null),g(_,o(G,{get when(){return n.data().length},get children(){return o(Q,{get each(){return n.data()},children:(b,v)=>[o(N0,{get columns(){return n.columns},get showDropdown(){return c()[v()]},setShowDropdown:u,get dropdownArrow(){return r.dropdownArrow},get isDropTable(){return f()},row:b,get rowI(){return v()}}),o(G,{get when(){return m(v())},get children(){return o(M0,{get colSpan(){return n.columns.length},row:b,get rowI(){return v()},get transform(){return e.tableState().dropTransform}})}})]})}}),null),y})()},N0=t=>{const e=rr(),n=l=>e.tableState().cellProps?e.tableState().cellProps[l]:{},r=l=>e.tableState().currentColumns.findIndex(a=>a===l),s=l=>e.tableState().rowTransform[r(l)],i=()=>!!t.columns.map(l=>s(l)).filter(l=>typeof l=="function").length;return[o(G,{get when(){return K(()=>!!t.isDropTable)()&&i()},get children(){var l=Hh(),a=l.firstChild;return g(l,o(Q,{get each(){return t.columns},children:(c,u)=>{const h=s(c);return o(G,{when:typeof h=="function",get children(){var d=Tc();return nt(d,Qe({get"data-index"(){return u()}},()=>n(r(c))),!1,!0),g(d,()=>h(t.row,t.rowI)),d}})}}),a),g(a,o(G,{get when(){return t.showDropdown},get children(){return o(ae,{onClick:()=>t.setShowDropdown(c=>({...c,[t.rowI]:!1})),get children(){return o(Ba,{get width(){return t.dropdownArrow?.width},get height(){return t.dropdownArrow?.height}})}})}}),null),g(a,o(G,{get when(){return!t.showDropdown},get children(){return o(ae,{onClick:()=>t.setShowDropdown(c=>({...c,[t.rowI]:!0})),get children(){return o(Fa,{get width(){return t.dropdownArrow?.width},get height(){return t.dropdownArrow?.height}})}})}}),null),l}}),o(G,{get when(){return K(()=>!t.isDropTable)()&&i()},get children(){var l=R0();return g(l,o(Q,{get each(){return t.columns},children:(a,c)=>{const u=s(a);return o(G,{when:typeof u=="function",get children(){var h=Tc();return nt(h,Qe({get"data-index"(){return c()}},()=>n(r(a))),!1,!0),g(h,()=>u(t.row,t.rowI)),h}})}})),l}})]},M0=t=>(()=>{var e=Hh(),n=e.firstChild;return g(n,()=>t.transform(t.row,t.rowI)),V(()=>Xe(n,"colspan",t.colSpan)),e})();var B0=C("<tr>"),F0=C("<th>");const Me=t=>{const{tableState:e,setTableState:n}=rr();return t.children,It(()=>{n(r=>({...r,currentColumns:[...r.currentColumns,t.name]}))}),B0()},Be=t=>{const{tableState:e,setTableState:n}=rr(),[r,s]=pt(t,["children"]);return It(()=>{n(i=>({...i,headers:[...i.headers,(()=>{var l=F0();return nt(l,s,!1,!0),g(l,()=>r.children),l})()]}))}),[]},Fe=t=>{const[e,n]=pt(t,["children"]),{tableState:r,setTableState:s}=rr();return It(()=>{s(i=>({...i,cellProps:[...i.cellProps?i.cellProps:[],n],rowTransform:[...i.rowTransform,e.children]}))}),[]},kr=t=>{const{tableState:e,setTableState:n}=rr();return It(()=>{n(r=>({...r,rowProps:t}))}),[]},Wh=t=>{const[e,n]=pt(t,["children"]),{tableState:r,setTableState:s}=rr();return It(()=>{s(i=>({...i,dropTransform:e.children,dropProps:n}))}),[]};var j0=C("<h1>Home"),U0=C("<div>Welcome to my app. This is a work in progress."),pl=C("<div>"),q0=C("<div><div></div><div>"),K0=C("<div><div></div><div></div><span>");const z0=()=>{const[t,e]=Ie();tn(),K(()=>Oe(t().theme));const n=Ga();Za(),Rh(),Mh(),Dh(),Oh();const[r,s]=R(`This **is** _a_ 
# test`),[i,l]=R("It'll be great eventually."),[a,c]=R("");return R(!1),o(Mt,{get children(){return[j0(),o(eo,{get children(){return[o(Xt,{name:"Welcome",get children(){return o(_s,{get children(){return[U0(),(()=>{var u=pl();return u.style.setProperty("width","100%"),u.style.setProperty("padding","15px"),g(u,o(En,{readOnly:!0,transparent:!0,tooltip:"Testing",text:i,setText:l})),u})()]}})}}),o(Xt,{name:"Table",get children(){var u=pl();return g(u,o(Sr,{dropdownArrow:{width:"30px",height:"30px"},dropdown:!0,data:n,columns:["hitDie","className","saves"],get children(){return[o(Me,{name:"className",get children(){return[o(Be,{children:"Class Name"}),o(Fe,{children:(h,d)=>h.name})]}}),o(Me,{name:"hitDie",get children(){return[o(Be,{children:"Hit Die"}),o(Fe,{children:h=>h.hitDie})]}}),o(Me,{name:"saves",get children(){return[o(Be,{children:"Saves"}),o(Fe,{children:h=>h.savingThrows?.join(", ")})]}}),o(kr,{style:{height:"40px"}}),o(Wh,{children:(h,d)=>(()=>{var f=K0(),m=f.firstChild,y=m.nextSibling,p=y.nextSibling;return f.style.setProperty("border","1px solid"),f.style.setProperty("padding","5px"),f.style.setProperty("border-radius","10px"),g(m,()=>h?.name),g(y,()=>h?.hitDie),g(p,()=>h?.spellcasting?.spellcastingAbility),f})()})]}})),u}}),o(Xt,{name:"Markdown",get children(){var u=q0(),h=u.firstChild,d=h.nextSibling;return u.style.setProperty("height","100%"),h.style.setProperty("width","100%"),h.style.setProperty("height","max-content !important"),g(h,o(Lh,{text:r})),d.style.setProperty("width","100%"),d.style.setProperty("height","max-content"),d.style.setProperty("min-height","200px"),g(d,o(En,{buttons:{styleType:"tertiary"},picToTextEnabled:!0,onChange:f=>s(f.currentTarget.value),readOnly:!1,transparent:!1,tooltip:"Testing",text:r,setText:s})),u}}),o(Xt,{name:"Field Test",get children(){var u=pl();return u.style.setProperty("display","flex"),u.style.setProperty("flex-direction","row"),u.style.setProperty("flex-wrap","wrap"),g(u,o(lt,{name:"Input Test",style:{height:"min-content"},get children(){return o(be,{type:"text",get value(){return a()},onChange:h=>c(h.currentTarget.value),width:700,style:{"max-width":"800px !important"}})}}),null),g(u,o(lt,{name:"TextArea Test",get children(){return o(En,{text:a,setText:c})}}),null),u}})]}}),o(P0,{})]}})};var H0=C("<div>Element 1"),W0=C("<div>Element 2"),V0=C("<div>Element 3"),G0=C("<div>Element 4"),Y0=C("<h1>Homebrew");const Z0=()=>{Ue(rt)?.useStyle();const e=[{name:"Element A",element:H0()},{name:"Element 2",element:W0()},{name:"Element fred",element:V0()},{name:"Elem fff",element:G0()}];return o(Mt,{get children(){return[Y0(),o(Fi,{elements:e})]}})},X0="_sidebar_1142h_1",J0="_body_1142h_33",Q0="_bodyMenu_1142h_57",e_={sidebar:X0,body:J0,bodyMenu:Q0};var t_=C("<h1>Create"),Ac=C("<div>"),n_=C("<a><div><p>");const r_=()=>{const e=Ue(rt)?.useStyle(),n=[{name:"Classes"},{name:"Races"},{name:"Backgrounds"},{name:"Feats"},{name:"Spells"},{name:"Items"}],[r,s]=R(n);return o(Mt,{get children(){return[t_(),(()=>{var i=Ac();return g(i,o(Q,{get each(){return r()},children:(l,a)=>[(()=>{var c=n_(),u=c.firstChild,h=u.firstChild;return g(h,()=>l.name),V(d=>{var f=`${e?.primary}`,m=`/homebrew/create/${l.name.toLowerCase()}`,y=`${e?.hover}`;return f!==d.e&&z(c,d.e=f),m!==d.t&&Xe(c,"href",d.t=m),y!==d.a&&z(u,d.a=y),d},{e:void 0,t:void 0,a:void 0}),c})(),o(G,{get when(){return a()===2},get children(){var c=Ac();return c.style.setProperty("height","0"),c.style.setProperty("flex-basis","100%"),c}})]})),V(()=>z(i,`${e_.bodyMenu} `)),i})()]}})};var s_=C("<td>Options"),i_=C("<table><thead><tr></tr></thead><tbody>"),l_=C("<th>"),a_=C('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M0 0h24v24H0z"fill=none></path><path d="M12 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4z">'),o_=C("<tr>"),c_=C("<td>");const jn=t=>{const[e,n]=R(t.data),[r,s]=R(t.data),i=K(()=>r());R([]);const l=K(()=>t.button?i().map(a=>t.button.generateMenuButtons(a)):[]);return[(()=>{var a=i_(),c=a.firstChild,u=c.firstChild,h=c.nextSibling;return g(u,o(Q,{get each(){return t.keys??[]},children:d=>(()=>{var f=l_();return g(f,()=>da(d.toString())),f})()}),null),g(u,o(G,{get when(){return t.button},get children(){return s_()}}),null),g(h,o(Q,{get each(){return i()},children:(d,f)=>(()=>{var m=o_();return g(m,o(Q,{get each(){return t.keys},children:y=>(()=>{var p=c_();return g(p,()=>`${d[y]}`),p})()}),null),g(m,o(G,{get when(){return t.button},get children(){return o(ae,{get enableBackgroundClick(){return t.button?.backgroundClick},get overrideX(){return t.button?.overideX},get overrideY(){return t.button?.overideY},get menuItems(){return l()[f()]},get children(){return a_()}})}}),null),m})()})),a})(),o(G,{get when(){return t.paginator},get children(){return o(Cr,{setPaginatedItems:s,items:e,get itemsPerPage(){return t.paginator}})}})]};var u_=C("<h1>View"),h_=C("<div>");const Ec=()=>{tn(),Ie();const t=nu(),e=K(()=>[{name:"Spells",element:o(jn,{get data(){return et.spells()},keys:["name","level"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/spells?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Feats",element:o(jn,{get data(){return et.feats()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/feats?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Classes",element:o(jn,{get data(){return et.classes()},keys:["name","hitDie"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/classes?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Subclasses",element:o(jn,{get data(){return et.classes().flatMap(a=>a.subclasses)},keys:["name","class"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/subclasses?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Items",element:o(jn,{get data(){return et.items()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/items?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Backgrounds",element:o(jn,{get data(){return et.backgrounds()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/backgrounds?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Races",element:o(jn,{get data(){return et.races()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/races?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})}]),[n,r]=Qt();n.name||r({name:e()[0].name});const s=K(()=>e().findIndex(a=>a.name.toLowerCase()===n.name?.toLowerCase()));V(()=>{console.log("startingIndex",s()),console.log("searchParam",n.name)});const[i,l]=R(s());return V(()=>{r({name:e()[i()].name??"spells"})}),o(Mt,{get children(){return[u_(),(()=>{var a=h_();return a.style.setProperty("text-align","left"),g(a,o(Fi,{get startingIndex(){return s()},currentIndex:[i,l],get elements(){return e()}})),a})()]}})},d_="_fieldStyle_vfrdk_1",f_="_selectSpan_vfrdk_7",g_="_rowOne_vfrdk_17",p_="_twoRowContainer_vfrdk_23",m_="_divide_vfrdk_34",v_="_rowTwo_vfrdk_38",b_="_allProficiency_vfrdk_50",y_="_singleProficiency_vfrdk_55",__="_levelSecondRow_vfrdk_74",w_="_wholeTable_vfrdk_82",$_="_rowStyle_vfrdk_86",C_="_headerStyle_vfrdk_90",S_="_cellStyle_vfrdk_95",k_="_tableFeature_vfrdk_101",x_="_spellcasting_vfrdk_108",T_="_specific_vfrdk_117",xe={fieldStyle:d_,selectSpan:f_,rowOne:g_,twoRowContainer:p_,divide:m_,rowTwo:v_,allProficiency:b_,singleProficiency:y_,levelSecondRow:__,wholeTable:w_,rowStyle:$_,headerStyle:C_,cellStyle:S_,tableFeature:k_,spellcasting:x_,specific:T_},A_="_body_bpryr_1",E_="_textArea_bpryr_20",L_="_checkBox_bpryr_28",P_="_castingRowOne_bpryr_33",O_="_chips_bpryr_43",ln={body:A_,textArea:E_,checkBox:L_,castingRowOne:P_,chips:O_};var Ys=C("<div>"),I_=C('<div><textarea placeholder="Enter a Feature description..">'),R_=C("<h1>subclasses"),D_=C("<div><h2>Choose a class"),N_=C('<div><textarea placeholder="Enter a Subclass description..">'),M_=C("<div><h2>Level up features"),B_=C("<div><span><label for=casterType>Caster Type:</label></span><span><label for=castingStat>Casting Stat:"),F_=C("<div><label for=spellsKnown>Spells Known: </label><span><label for=halfCasterRoundUp>Round Up: "),j_=C("<div><h3>Spells Known </h3><div><label for=slotLevel>Class Level: </label></div><div><label for=slotAmount>Slot Amount: "),U_=C("<div><label for=hasCantrips>Has Cantrips: </label><label for=ritualCasting>Ritual Casting: "),q_=C("<div><h3>Spells Table</h3><div></div><div>"),K_=C("<div><h3>Spellcasting Info</h3><div></div><div>"),z_=C("<div><h2>Spellcasting</h2><div><div><label for=hasCasting>Has Spellcasting: </label></div><div>"),H_=C("<div><div><label>Title: </label></div><div><label>Description: </label><textarea></textarea></div><div>"),oi=(t=>(t[t.None=0]="None",t[t.Level=1]="Level",t[t.HalfLevel=2]="HalfLevel",t[t.StatModPlusLevel=3]="StatModPlusLevel",t[t.StatModPlusHalfLevel=4]="StatModPlusHalfLevel",t[t.StatModPlusThirdLevel=5]="StatModPlusThirdLevel",t[t.Other=6]="Other",t))(oi||{});const W_=()=>{const[t,e]=Qt();Ue(rt);const[n,r]=Ie();K(()=>Oe(n().theme));const s=Ga(),i=()=>s().map($=>$.name),[l,a]=R(1),c=Za(),[u,h]=R(!1),[d,f]=R(!1),[m,y]=R(0),[p,_]=R(""),[b,v]=R(!1),[k,x]=R(""),[P,U]=R(!1),[w,H]=R({}),[S,I]=R([]),[O,q]=R(1),[X,F]=R(0),[J,ee]=R({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),oe=K(()=>{const $=J().class.toLowerCase(),[E]=s().filter(j=>j.name?.toLowerCase()===$?.toLowerCase());if(E&&E.subclassLevels&&E.subclassLevels.length)return E.subclassLevels.map(j=>`${j}`);switch($){case"cleric":return["1","2","6","8","17"];case"druid":case"wizard":return["2","6","10","14"];case"barbarian":return["3","6","10","14"];case"monk":return["3","6","11","17"];case"bard":return["3","6","14"];case"sorcerer":case"warlock":return["1","6","14","18"];case"fighter":return["3","7","10","15","18"];case"paladin":return["3","7","15","20"];case"ranger":return["3","7","11","15"];case"rogue":return["3","9","13","17"];case"forgemaster":return["3","7","11","15","20"];default:return[]}}),fe=K(()=>{const $=s().filter(j=>j.name.toLowerCase()===J().class.toLowerCase()),E=J();return $.length===1&&E.name.trim().length>0&&E.subclassFlavor.trim().length>0&&E.desc.length}),A=()=>{ee($=>{const E={info:{className:$.class,subclassName:$.name,level:l(),type:"subclass",other:""},name:"",value:[""]};return{...$,features:[...$.features,E]}})},T=$=>J().features.filter(E=>E.info.level===$),M=$=>({name:`Level ${$}`,element:(()=>{var E=Ys();return g(E,o(Q,{get each(){return T($)},children:(j,ie)=>[(()=>{var le=Ys();return g(le,o(be,{placeholder:"Enter a Feature name..",get value(){return j.name},onChange:Z=>{ee(te=>{const N=te.features.filter(ne=>ne.info.level===$),D=te.features.filter(ne=>ne.info.level!==$),Y=N[ie()];return Y.name=Z.currentTarget.value,N.splice(ie(),1,Y),te.features=[...D,...N],it(te)})}})),le})(),(()=>{var le=I_(),Z=le.firstChild;return Z.addEventListener("change",te=>{ee(N=>{const D=N.features.filter(re=>re.info.level===$),Y=N.features.filter(re=>re.info.level!==$),ne=D[ie()];return ne.value=te.currentTarget.value.split(`
`),D.splice(ie(),1,ne),N.features=[...Y,...D],it(N)})}),V(()=>z(Z,`${ln.textArea}`)),V(()=>Z.value=J().features.filter(te=>te.info.level===$)[ie()].value.join(`
`)),le})(),(()=>{var le=Ys();return g(le,o(ae,{onClick:Z=>{ee(te=>{const N=te.features.filter(Y=>Y.info.level===$),D=te.features.filter(Y=>Y.info.level!==$);return N.splice(ie(),1),te.features=[...D,...N],it(te)})},children:"Remove"})),le})()]})),E})()}),W=()=>{ee({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),a(1),h(!1),f(!1),y(0),_(""),v(!1),x(""),H({})};return V(()=>{u()?ee($=>{const E={...$};E.spellcasting={info:E.spellcasting?.info||[],castingLevels:[],name:E.name,spellcastingAbility:k(),casterType:p(),spellsKnownCalc:m(),spellsKnownRoundup:d()};for(let j=1;j<=20;j++)E.spellcasting?.castingLevels.push({level:j,spellcasting:Ho(j,p(),P())});return E}):ee($=>{const E={...$};return delete E.spellcasting,E})}),V(()=>{m()===6&&p().length>0&&ee($=>{const E={...$};let j;if(E.spellcasting&&E.spellcasting.castingLevels){const ie=S();j=E.spellcasting.castingLevels.map(le=>(le.spellcasting=Ho(le.level,p(),P()),ie.forEach(Z=>{Z.level===le.level&&(le.spellcasting={...le.spellcasting,spells_known:Z.amount})}),le))}else j=E.spellcasting?.castingLevels||[];return E.spellcasting={info:E.spellcasting?.info||[],castingLevels:j,name:E.name,spellcastingAbility:k(),casterType:p(),spellsKnownCalc:m(),spellsKnownRoundup:d()},E})}),V(()=>{if(t.name&&t.subclass){if(t.name!==J().class&&t.subclass!==J().name){const[$]=s().filter(E=>E.name.toLowerCase()===t.name.toLowerCase());if($){const[E]=$.subclasses.filter(j=>j.name.toLowerCase()===t.subclass.toLowerCase());ee(E)}}}else e({name:J().class,subclass:J().name})}),o(Mt,{get children(){return[R_(),(()=>{var $=D_();return $.firstChild,g($,o(Ce,{get value(){return J().class},onChange:E=>{ee(j=>({...j,class:E.currentTarget.value}))},get children(){return o(Q,{get each(){return i()},children:E=>o(pe,{value:`${E}`,children:E})})}}),null),$})(),(()=>{var $=N_(),E=$.firstChild;return g($,o(be,{placeholder:"Enter a Subclass name..",get value(){return J().name},onChange:j=>ee(ie=>({...ie,name:j.currentTarget.value}))}),E),g($,o(be,{placeholder:"Enter a Subclass flavor..",get value(){return J().subclassFlavor},onChange:j=>ee(ie=>({...ie,subclassFlavor:j.currentTarget.value}))}),E),E.addEventListener("change",j=>ee(ie=>({...ie,desc:j.currentTarget.value.split(`
`)}))),V(()=>z(E,`${ln.textArea}`)),V(()=>E.value=J().desc.join(`
`)),$})(),(()=>{var $=M_();return $.firstChild,g($,o(Ce,{get value(){return l()},onChange:E=>{const j=parseInt(E.currentTarget.value);a(j)},get children(){return o(Q,{get each(){return oe()},children:E=>o(pe,{value:`${E}`,children:E})})}}),null),g($,o(ae,{onClick:A,children:"Add Feature"}),null),g($,o(Fi,{get elements(){return oe().map(E=>M(+E))}}),null),$})(),(()=>{var $=z_(),E=$.firstChild,j=E.nextSibling,ie=j.firstChild;ie.firstChild;var le=ie.nextSibling;return g(ie,o(be,{get class(){return`${ln.checkBox}`},get checked(){return u()},onChange:Z=>h(Z.currentTarget.checked),type:"checkbox",name:"hasCasting"}),null),g(j,o(G,{get when(){return u()},get children(){return[(()=>{var Z=B_(),te=Z.firstChild;te.firstChild;var N=te.nextSibling;return N.firstChild,g(te,o(Ce,{name:"casterType",get value(){return p()},onChange:D=>_(D.currentTarget.value),get children(){return[o(pe,{value:"half",children:"Half Caster"}),o(pe,{value:"third",children:"Third Caster"})]}}),null),g(N,o(Ce,{name:"castingStat",get value(){return k()},onChange:D=>x(D.currentTarget.value),get children(){return o(Q,{each:["Intelligence","Wisdom","Charisma"],children:D=>o(pe,{value:D,children:D})})}}),null),V(()=>z(Z,`${ln.castingRowOne}`)),Z})(),(()=>{var Z=F_(),te=Z.firstChild,N=te.nextSibling;return N.firstChild,g(Z,o(Ce,{name:"spellsKnown",get value(){return m()},onChange:D=>y(+D.currentTarget.value),get children(){return[o(pe,{value:"0",children:"None"}),o(pe,{value:"1",children:"Level"}),o(pe,{value:"2",children:"Half Level"}),o(pe,{value:"3",children:"Stat Modifier + Level"}),o(pe,{value:"4",children:"Stat Modifier + Half Level"}),o(pe,{value:"5",children:"Stat Modifier + Third Level"}),o(pe,{value:"6",children:"Other"})]}}),N),g(N,o(be,{get class(){return`${ln.checkBox}`},type:"checkbox",name:"halfCasterRoundUp",get checked(){return d()},onChange:D=>f(D.currentTarget.checked)}),null),Z})(),o(G,{get when(){return m()===6},get children(){return[(()=>{var Z=j_(),te=Z.firstChild,N=te.nextSibling;N.firstChild;var D=N.nextSibling;return D.firstChild,g(N,o(Ce,{name:"slotLevel",disableUnselected:!0,onChange:Y=>{q(+Y.currentTarget.value)},get children(){return o(Q,{get each(){return Ep(20)},children:Y=>o(pe,{value:Y,get children(){return["Level ",Y]}})})}}),null),g(D,o(be,{name:"slotAmount",type:"number",min:0,onChange:Y=>{F(+Y.currentTarget.value)}}),null),g(Z,o(ae,{onClick:Y=>{S().map(ne=>ne.level).includes(O())||I(ne=>[...ne,{level:O(),amount:X()}].sort((re,ge)=>+re.level-+ge.level))},children:"Add"}),null),Z})(),(()=>{var Z=Ys();return g(Z,o(Tt,{get key(){return`Level ${O()}`},get value(){return`${X()}`}}),null),g(Z,o(Q,{get each(){return S()},children:te=>o(Tt,{get key(){return`Level ${te.level}`},get value(){return`${te.amount}`},remove:()=>{I(N=>N.filter(D=>D.level!==te.level))}})}),null),V(()=>z(Z,`${ln.chips}`)),Z})()]}}),(()=>{var Z=U_(),te=Z.firstChild,N=te.nextSibling;return g(Z,o(be,{get class(){return`${ln.checkBox}`},type:"checkbox",name:"hasCantrips",get checked(){return P()},onChange:D=>U(D.currentTarget.checked)}),N),g(Z,o(be,{get class(){return`${ln.checkBox}`},type:"checkbox",name:"ritualCasting",get checked(){return b()},onChange:D=>v(D.currentTarget.checked)}),null),Z})(),(()=>{var Z=q_(),te=Z.firstChild,N=te.nextSibling,D=N.nextSibling;return g(N,o(Ce,{get value(){return JSON.stringify(w())},onChange:Y=>H(JSON.parse(Y.currentTarget.value)),get children(){return o(Q,{get each(){return c()},children:Y=>o(pe,{get value(){return JSON.stringify(Y)},get children(){return Y.name}})})}}),null),g(N,o(ae,{onClick:Y=>ee(ne=>({...ne,spells:[...ne.spells,w()]})),children:"Add Spell"}),null),g(D,o(Q,{get each(){return J().spells},children:Y=>o(Tt,{get key(){return hh(+Y.level)},get value(){return Y.name},remove:()=>{ee(ne=>({...ne,spells:ne.spells.filter(re=>re.name!==Y.name)}))}})})),Z})(),(()=>{var Z=K_(),te=Z.firstChild,N=te.nextSibling,D=N.nextSibling;return g(N,o(ae,{onClick:Y=>{ee(ne=>{const re=[...ne.spellcasting?.info||[]];return re.push({name:"",desc:[]}),{...ne,spellcasting:{...ne.spellcasting,info:re}}})},children:"Add Info"})),g(D,o(Q,{get each(){return J().spellcasting?.info||[]},children:(Y,ne)=>(()=>{var re=H_(),ge=re.firstChild,qe=ge.firstChild,Ne=ge.nextSibling,ht=Ne.firstChild,ot=ht.nextSibling,ue=Ne.nextSibling;return g(ge,o(be,{get name(){return`nameInput${ne()}`},get value(){return Y.name},onChange:B=>{ee(me=>{const ke=[...me.spellcasting?.info||[]];return ke[ne()]={...ke[ne()],name:B.currentTarget.value},{...me,spellcasting:{...me.spellcasting,info:ke}}})}}),null),ot.addEventListener("change",B=>{ee(me=>{const ke=[...me.spellcasting?.info||[]];return ke[ne()]={...ke[ne()],desc:B.currentTarget.value.split(`
`)},{...me,spellcasting:{...me.spellcasting,info:ke}}})}),g(ue,o(ae,{onClick:B=>{ee(me=>{const ke=[...me.spellcasting?.info||[]];return ke.splice(ne(),1),{...me,spellcasting:{...me.spellcasting,info:ke}}})},children:"Remove"})),V(B=>{var me=`nameInput${ne()}`,ke=`descInput${ne()}`,ct=`${ln.textArea}`,$e=`descInput${ne()}`;return me!==B.e&&Xe(qe,"for",B.e=me),ke!==B.t&&Xe(ht,"for",B.t=ke),ct!==B.a&&z(ot,B.a=ct),$e!==B.o&&Xe(ot,"name",B.o=$e),B},{e:void 0,t:void 0,a:void 0,o:void 0}),V(()=>ot.value=Y.desc.join(`
`)),re})()})),Z})()]}}),le),g(le,o(G,{get when(){return fe()},get children(){return o(ae,{onClick:Z=>{const te=s().filter(N=>N.name===J().class)[0];te.subclasses=[...te.subclasses,J()],et.updateClass(te),et.updateClassesInDB(),W()},children:"Save"})}})),$})()]}})};var Lc=C("<div><div><h3>General</h3></div><div></div><div><h3>Specific</h3></div><div>"),ml=C("<div><div>"),V_=C("<div><h2>Proficiencies</h2><div><div><h3>Armor</h3><span></span></div><div><h3>Weapons</h3><span></span></div><div><h3>Tools</h3><span></span></div><div><h3>Saving Throws</h3><span></span></div><div><h3>Skills</h3><span>");const G_=t=>{const e=Nh(),n=K(()=>e().filter(W=>W.equipmentCategory==="Weapon")),r=K(()=>e().filter(W=>W.equipmentCategory==="Armor")),s=K(()=>e().filter(W=>W.equipmentCategory==="Tools")),i=Y_(),l=Z_(),a=X_(),c=J_(),u=()=>t.currentClass.proficiencies.filter(W=>{const $=i.map(j=>j.toLowerCase()).includes(W.toLowerCase()),E=r().map(j=>j.name.toLowerCase()).includes(W.toLowerCase());return $||E}),h=()=>t.currentClass.proficiencies.filter(W=>{const $=l.map(j=>j.toLowerCase()).includes(W.toLowerCase()),E=n().map(j=>j.name.toLowerCase()).includes(W.toLowerCase());return $||E}),d=()=>t.currentClass.proficiencies.filter(W=>s().map($=>$.name.toLowerCase()).includes(W.toLowerCase())),f=()=>t.currentClass.proficiencies.filter(W=>c.map($=>$.toLowerCase()).includes(W.toLowerCase())),m=W=>W.length?W:["None"],[y,p]=R(!1),[_,b]=R("Simple"),[v,k]=R(""),[x,P]=R(!1),[U,w]=R("Light"),[H,S]=R(""),[I,O]=R(!1),[q,X]=R(""),[F,J]=R(!1),[ee,oe]=R(""),[fe,A]=R(!1),[T,M]=R("");return Je(()=>{console.log("Current Proficiencies",t.currentClass.proficiencies)}),(()=>{var W=V_(),$=W.firstChild,E=$.nextSibling,j=E.firstChild,ie=j.firstChild;ie.firstChild;var le=ie.nextSibling,Z=j.nextSibling,te=Z.firstChild;te.firstChild;var N=te.nextSibling,D=Z.nextSibling,Y=D.firstChild;Y.firstChild;var ne=Y.nextSibling,re=D.nextSibling,ge=re.firstChild;ge.firstChild;var qe=ge.nextSibling,Ne=re.nextSibling,ht=Ne.firstChild;ht.firstChild;var ot=ht.nextSibling;return g(ie,o(ae,{onClick:ue=>P(B=>!B),children:"+"}),null),g(j,o(G,{get when(){return x()},get children(){return o(Ut,{backgroundClick:[x,P],title:"Add Armor",get children(){var ue=Lc(),B=ue.firstChild,me=B.nextSibling,ke=me.nextSibling,ct=ke.nextSibling;return g(me,o(Ce,{transparent:!0,disableUnselected:!0,get value(){return U()},onChange:$e=>{w($e.target.value)},get children(){return o(Q,{each:i,children:$e=>o(pe,{value:$e,children:$e})})}}),null),g(me,o(ae,{onClick:$e=>{t.setProficiencies([...t.currentClass.proficiencies,U()].filter(st=>!!st))},children:"Add"}),null),g(ct,o(Ce,{transparent:!0,get value(){return H()},onChange:$e=>{S($e.target.value)},get children(){return o(Q,{get each(){return r()},children:$e=>o(pe,{get value(){return $e.name},get children(){return $e.name}})})}}),null),g(ct,o(ae,{onClick:$e=>{t.setProficiencies([...t.currentClass.proficiencies,H()].filter(st=>!!st))},children:"Add"}),null),ue}})}}),le),g(le,o(Q,{get each(){return m(u())},children:ue=>o(Tt,{key:"Armor",value:ue,remove:()=>{t.setProficiencies(t.currentClass.proficiencies.filter(B=>B!==ue))}})})),g(te,o(ae,{onClick:ue=>{p(B=>!B)},children:"+"}),null),g(Z,o(G,{get when(){return y()},get children(){return o(Ut,{backgroundClick:[y,p],title:"Add Weapon",get children(){var ue=Lc(),B=ue.firstChild,me=B.nextSibling,ke=me.nextSibling,ct=ke.nextSibling;return g(me,o(Ce,{transparent:!0,disableUnselected:!0,get value(){return _()},onChange:$e=>{b($e.target.value)},get children(){return o(Q,{each:l,children:$e=>o(pe,{value:$e,children:$e})})}}),null),g(me,o(ae,{onClick:$e=>{t.setProficiencies([...t.currentClass.proficiencies,_()].filter(st=>!!st))},children:"Add"}),null),g(ct,o(Ce,{transparent:!0,get value(){return v()},onChange:$e=>{k($e.target.value)},get children(){return o(Q,{get each(){return n()},children:$e=>o(pe,{get value(){return $e.name},get children(){return $e.name}})})}}),null),g(ct,o(ae,{onClick:$e=>{const st=v(),Ht=st||n()[0].name;t.setProficiencies([...t.currentClass.proficiencies,Ht].filter(Dn=>!!Dn))},children:"Add"}),null),ue}})}}),N),g(N,o(Q,{get each(){return m(h())},children:ue=>o(Tt,{key:"Weapon",value:ue,remove:()=>{t.setProficiencies(t.currentClass.proficiencies.filter(B=>B!==ue))}})})),g(Y,o(ae,{onClick:ue=>{O(B=>!B)},children:"+"}),null),g(D,o(G,{get when(){return I()},get children(){return o(Ut,{backgroundClick:[I,O],title:"Add Tool",get children(){var ue=ml(),B=ue.firstChild;return g(B,o(Ce,{transparent:!0,get value(){return q()},onChange:me=>{X(me.target.value)},get children(){return o(Q,{get each(){return s()},children:me=>o(pe,{get value(){return me.name},get children(){return me.name}})})}}),null),g(B,o(ae,{onClick:me=>{t.setProficiencies([...t.currentClass.proficiencies,q()].filter(ke=>!!ke))},children:"Add"}),null),ue}})}}),ne),g(ne,o(Q,{get each(){return m(d())},children:ue=>o(Tt,{key:"Tool",value:ue,remove:()=>{t.setProficiencies(t.currentClass.proficiencies.filter(B=>B!==ue))}})})),g(ge,o(ae,{onClick:ue=>{J(B=>!B)},children:"+"}),null),g(re,o(G,{get when(){return F()},get children(){return o(Ut,{backgroundClick:[F,J],title:"Add Stat",get children(){var ue=ml(),B=ue.firstChild;return g(B,o(Ce,{transparent:!0,get value(){return ee()},onChange:me=>{oe(me.target.value)},get children(){return o(Q,{each:a,children:me=>o(pe,{value:me,children:me})})}}),null),g(B,o(ae,{onClick:me=>{t.setSaves([...t.currentClass.savingThrows,ee()].filter(ke=>!!ke))},children:"Add"}),null),ue}})}}),qe),g(qe,o(Q,{get each(){return m(t.currentClass.savingThrows)},children:ue=>o(Tt,{key:"Saving Throw",value:ue,remove:()=>{t.setSaves(t.currentClass.savingThrows.filter(B=>B!==ue))}})})),g(ht,o(ae,{onClick:ue=>{A(B=>!B)},children:"+"}),null),g(Ne,o(G,{get when(){return fe()},get children(){return o(Ut,{backgroundClick:[fe,A],title:"Add Skill",get children(){var ue=ml(),B=ue.firstChild;return g(B,o(Ce,{transparent:!0,get value(){return T()},onChange:me=>{M(me.target.value)},get children(){return o(Q,{each:c,children:me=>o(pe,{value:me,children:me})})}}),null),g(B,o(ae,{onClick:me=>{t.setProficiencies([...t.currentClass.proficiencies,T()].filter(ke=>!!ke))},children:"Add"}),null),ue}})}}),ot),g(ot,o(Q,{get each(){return m(f())},children:ue=>o(Tt,{key:"Skill",value:ue,remove:()=>{t.setProficiencies(t.currentClass.proficiencies.filter(B=>B!==ue))}})})),V(ue=>{var B=xe.rowTwo,me=`${xe.allProficiency}`,ke=`${xe.singleProficiency}`,ct=`${xe.singleProficiency}`,$e=`${xe.singleProficiency}`,st=`${xe.singleProficiency}`,Ht=`${xe.singleProficiency}`;return B!==ue.e&&z(W,ue.e=B),me!==ue.t&&z(E,ue.t=me),ke!==ue.a&&z(j,ue.a=ke),ct!==ue.o&&z(Z,ue.o=ct),$e!==ue.i&&z(D,ue.i=$e),st!==ue.n&&z(re,ue.n=st),Ht!==ue.s&&z(Ne,ue.s=Ht),ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),W})()},Y_=()=>["Light","Medium","Heavy","Shields"],Z_=()=>["Simple","Martial"],X_=()=>["STR","DEX","CON","INT","WIS","CHA"],J_=()=>["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"],Q_="_header_1wacu_1",ew="_paginator_1wacu_5",tw="_list_1wacu_9",nw="_equipContain_1wacu_39",rw="_tableContainer_1wacu_43",sw="_itemTable_1wacu_49",iw="_searchBar_1wacu_54",lw="_checkbox_1wacu_60",aw="_choice_1wacu_65",Te={header:Q_,paginator:ew,list:tw,equipContain:nw,tableContainer:rw,itemTable:sw,searchBar:iw,checkbox:lw,choice:aw};var Un=C("<div>"),ow=C("<div><h2>Starting Equipment</h2><div><ul>"),cw=C("<i>Add Items to choose from."),uw=C("<li><h3>Choice <!> </h3><ul>"),hw=C("<li><span>Choose: </span><span>"),dw=C("<li>or"),Ft=C("<span>"),fw=C("<span> <!> "),gw=C("<i>");const pw=t=>{const[e,n]=R({key:"name",isAsc:!0}),r=Nh(),[s,i]=R([]),[l,a]=R([]),[c,u]=R([]),h=K(()=>r().filter(E=>E.equipmentCategory==="Weapon")),[d,f]=R({key:"name",isAsc:!0}),[m,y]=R([]),[p,_]=R([]),[b,v]=R([]),k=K(()=>r().filter(E=>E.equipmentCategory==="Armor")),[x,P]=R({key:"name",isAsc:!0}),[U,w]=R([]),[H,S]=R([]),[I,O]=R([]),[q,X]=R(!1),[F,J]=R(1),ee=E=>{const j=t.currentClass;return E===1?j.startingEquipment.choice1:E===2?j.startingEquipment.choice2:E===3?j.startingEquipment.choice3:E===4?j.startingEquipment.choice4:[]},oe=(E,j,ie)=>(ee(j)[ie]?.choices??1).filter(Z=>Z.name===E.name).length,fe=E=>{const j=new pr;return j.value=E,j.value};Je(()=>{i(r())}),Je(()=>{y(h())}),Je(()=>{S(k())}),Je(()=>{const E=e();i(j=>it(sl(j,E.key,E.isAsc)))}),Je(()=>{const E=x();S(j=>it(sl(j,E.key,E.isAsc)))}),Je(()=>{const E=d();y(j=>it(sl(j,E.key,E.isAsc)))}),Je(()=>{!q()&&u([]),!q()&&v([]),!q()&&O([])});const A=(E=1)=>{const ie=[...ee(F()),{choose:E,type:"weapon",choices:b().flatMap(le=>Array.from({length:le.amnt},(Z,te)=>le.item))}];console.log("currentChoice:",F()),console.log("newChoices: ",ie),t.setStartEquipChoice(F(),ie),X(!1),v([]),$(1)},T=(E=1)=>{const j=ee(F());t.setStartEquipChoice(F(),[...j,{choose:E,type:"armor",choices:I().flatMap(ie=>Array.from({length:ie.amnt},(le,Z)=>ie.item))}]),X(!1),O([]),$(1)},M=(E=1)=>{const j=ee(F());t.setStartEquipChoice(F(),[...j,{choose:E,type:"item",choices:c().flatMap(ie=>Array.from({length:ie.amnt},(le,Z)=>ie.item))}]),X(!1),u([]),$(1)},[W,$]=R(1);return Je(()=>{console.log("ClassItems:",ee(F()),c(),b(),I())}),(()=>{var E=ow(),j=E.firstChild,ie=j.nextSibling,le=ie.firstChild;return g(le,o(Q,{each:[1,2,3,4],children:Z=>(()=>{var te=uw(),N=te.firstChild,D=N.firstChild,Y=D.nextSibling;Y.nextSibling;var ne=N.nextSibling;return g(N,Z,Y),g(N,o(ae,{onClick:re=>{re.preventDefault(),J(Z),X(!0)},children:"+"}),null),g(ne,o(Q,{get each(){return ee(Z)},children:(re,ge)=>[(()=>{var qe=hw(),Ne=qe.firstChild,ht=Ne.firstChild,ot=Ne.nextSibling;return g(Ne,o(ae,{onClick:ue=>{ue.preventDefault();const B=it(ee(Z)).filter((me,ke)=>ke!==ge());t.setStartEquipChoice(Z,B)},children:"x"}),ht),g(Ne,()=>re?.choose,null),g(ot,o(Q,{get each(){return fe(re.choices)},children:ue=>o(Tt,{key:"Choice",get value(){return`${ue.name} ${oe(ue,Z,ge())>1?`x${oe(ue,Z,ge())}`:""}`}})})),qe})(),o(G,{get when(){return K(()=>ee(Z).length>1)()&&--ee(Z).length!==ge()},get children(){return dw()}})]})),g(te,o(G,{get when(){return ee(Z).length===0},get children(){return cw()}}),null),te})()}),null),g(le,o(G,{get when(){return q()},get children(){return o(Ut,{backgroundClick:[q,X],title:"Add Equipment Choice",get children(){var Z=Un();return g(Z,o(eo,{get children(){return[o(Xt,{name:"Items",get children(){return[o(os,{get wrapClass(){return`${Te.searchBar}`},placeholder:"search for items..",dataSource:r,setResults:i}),(()=>{var te=Un();return g(te,o(Sr,{get class(){return`${Te.itemTable}`},data:l,columns:["include","name","price","category"],get children(){return[o(Me,{name:"include",get children(){return[o(Be,{get class(){return`${Te.header}`},children:"Include"}),o(Fe,{children:(N,D)=>o(be,{get class(){return`${Te.checkbox}`},type:"number",min:0,onChange:Y=>{const ne=parseInt(Y.currentTarget.value);ne>0?u(re=>[...re.filter(ge=>ge.item.name!==N.name),{item:N,amnt:ne}]):u(re=>re.filter(ge=>ge.item.name!==N.name))}})})]}}),o(Me,{name:"amount",get children(){return[o(Be,{get class(){return`${Te.header}`},children:"Include"}),o(Fe,{children:(N,D)=>o(be,{get class(){return`${Te.checkbox}`},type:"number"})})]}}),o(Me,{name:"name",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{n(N=>({key:"name",isAsc:!N.isAsc}))},get children(){return["Name ",K(()=>K(()=>e().key==="name")()?e().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=Ft();return g(Y,()=>N.name),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(Me,{name:"price",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{n(N=>({key:"cost",isAsc:!N.isAsc}))},get children(){return["Price ",K(()=>K(()=>e().key==="cost")()?e().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>`${N.cost.quantity} ${N.cost.unit}`),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(Me,{name:"category",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{n(N=>({key:"equipmentCategory",isAsc:!N.isAsc}))},get children(){return["Category ",K(()=>K(()=>e().key==="equipmentCategory")()?e().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>N.equipmentCategory),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(kr,{})]}})),V(()=>z(te,`${Te.tableContainer}`)),te})(),o(Cr,{get classes(){return`${Te.paginator}`},items:s,setPaginatedItems:a}),(()=>{var te=Un();return g(te,o(be,{type:"number",min:1,max:999,style:{width:"50px"},get value(){return W()},onInput:N=>{const D=parseInt(N.currentTarget.value);D>0&&$(D)}}),null),g(te,o(ae,{onClick:N=>{N.preventDefault(),M(ze(W))},children:"Add Items"}),null),te})()]}}),o(Xt,{name:"Weapons",get children(){return[o(os,{get wrapClass(){return`${Te.searchBar}`},placeholder:"search for weapons..",dataSource:h,setResults:y}),(()=>{var te=Un();return g(te,o(Sr,{get class(){return`${Te.itemTable}`},data:p,columns:["include","name","price","category","damage","range"],get children(){return[o(Me,{name:"include",get children(){return[o(Be,{get class(){return`${Te.header}`},children:"Include"}),o(Fe,{children:(N,D)=>o(be,{get class(){return`${Te.checkbox}`},type:"number",min:0,onChange:Y=>{const ne=parseInt(Y.currentTarget.value);ne>0?v(re=>[...re.filter(ge=>ge.item.name!==N.name),{item:N,amnt:ne}]):v(re=>re.filter(ge=>ge.item.name!==N.name))}})})]}}),o(Me,{name:"name",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{f(N=>({key:"name",isAsc:!N.isAsc}))},get children(){return["Name ",K(()=>K(()=>d().key==="name")()?d().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=Ft();return g(Y,()=>N.name),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(Me,{name:"price",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{f(N=>({key:"cost",isAsc:!N.isAsc}))},get children(){return["Price ",K(()=>K(()=>d().key==="cost")()?d().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>`${N.cost.quantity} ${N.cost.unit}`),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(Me,{name:"category",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{f(N=>({key:"categoryRange",isAsc:!N.isAsc}))},get children(){return["Category ",K(()=>K(()=>d().key==="equipmentCategory")()?d().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>N.weaponCategory),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(Me,{name:"damage",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{f(N=>({key:"damage",isAsc:!N.isAsc}))},get children(){return["Damage ",K(()=>K(()=>d().key==="damage")()?d().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=Ft();return g(Y,()=>N.damage.map(ne=>`${ne.damageDice} ${ne.damageBonus?"+":""} ${ne.damageBonus?ne.damageBonus:""} ${ne.damageType}`).join(" ")),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(Me,{name:"range",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{f(N=>({key:"range",isAsc:!N.isAsc}))},get children(){return["Range ",K(()=>K(()=>d().key==="range")()?d().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=Ft();return g(Y,()=>N.range.long?`${N.range.normal}ft / ${N.range.long}ft`:`${N.range.normal}ft`),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(kr,{})]}})),V(()=>z(te,`${Te.tableContainer}`)),te})(),o(Cr,{get classes(){return`${Te.paginator}`},items:m,setPaginatedItems:_}),(()=>{var te=Un();return g(te,o(be,{type:"number",min:1,max:999,style:{width:"50px"},get value(){return W()},onInput:N=>{const D=parseInt(N.currentTarget.value);D>0&&$(D)}}),null),g(te,o(ae,{onClick:N=>{N.preventDefault(),A(ze(W))},children:"Add Weapons"}),null),te})()]}}),o(Xt,{name:"Armor",get children(){return[o(os,{get wrapClass(){return`${Te.searchBar}`},placeholder:"search for armor..",dataSource:k,setResults:S}),(()=>{var te=Un();return g(te,o(Sr,{get class(){return`${Te.itemTable}`},data:U,columns:["include","name","price","category","damage","range"],get children(){return[o(Me,{name:"include",get children(){return[o(Be,{get class(){return`${Te.header}`},children:"Include"}),o(Fe,{children:(N,D)=>o(be,{get class(){return`${Te.checkbox}`},type:"number",min:0,onChange:Y=>{const ne=parseInt(Y.currentTarget.value);ne>0?O(re=>[...re.filter(ge=>ge.item.name!==N.name),{item:N,amnt:ne}]):O(re=>re.filter(ge=>ge.item.name!==N.name))}})})]}}),o(Me,{name:"name",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{P(N=>({key:"name",isAsc:!N.isAsc}))},get children(){return["Name ",K(()=>K(()=>x().key==="name")()?x().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=Ft();return g(Y,()=>N.name),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(Me,{name:"price",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{P(N=>({key:"cost",isAsc:!N.isAsc}))},get children(){return["Price ",K(()=>K(()=>x().key==="cost")()?x().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>`${N.cost.quantity} ${N.cost.unit}`),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(Me,{name:"category",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{P(N=>({key:"armorCategory",isAsc:!N.isAsc}))},get children(){return["Category ",K(()=>K(()=>x().key==="armorCategory")()?x().isAsc?"▲":"▼":"")]}}),o(Fe,{children:N=>(()=>{var D=Ft();return g(D,()=>N.armorCategory),V(()=>Xe(D,"title",(N.desc??[]).join(`
`))),D})()})]}}),o(Me,{name:"damage",get children(){return[o(Be,{get class(){return`${Te.header}`},onClick:()=>{P(N=>({key:"armorClass",isAsc:!N.isAsc}))},get children(){return["Armor Class ",K(()=>K(()=>x().key==="armorClass")()?x().isAsc?"▲":"▼":"")]}}),o(Fe,{children:(N,D)=>(()=>{var Y=fw(),ne=Y.firstChild,re=ne.nextSibling;return re.nextSibling,g(Y,()=>N.armorClass.base,ne),g(Y,()=>N.armorClass.dexBonus?"+ DEX ":"",re),g(Y,(()=>{var ge=K(()=>!!N.armorClass.maxBonus);return()=>ge()?(()=>{var qe=gw();return g(qe,()=>`Max(${N.armorClass.maxBonus})`),qe})():""})(),null),V(()=>Xe(Y,"title",(N.desc??[]).join(`
`))),Y})()})]}}),o(kr,{})]}})),V(()=>z(te,`${Te.tableContainer}`)),te})(),o(Cr,{get classes(){return`${Te.paginator}`},items:H,setPaginatedItems:w}),(()=>{var te=Un();return g(te,o(be,{type:"number",min:1,max:999,style:{width:"50px"},get value(){return W()},onInput:N=>{const D=parseInt(N.currentTarget.value);D>0&&$(D)}}),null),g(te,o(ae,{onClick:N=>{N.preventDefault(),T(ze(W))},children:"Add Armor"}),null),te})()]}})]}})),Z}})}}),null),V(Z=>{var te=`${Te.equipContain}`,N=`${Te.list}`;return te!==Z.e&&z(E,Z.e=te),N!==Z.t&&z(le,Z.t=N),Z},{e:void 0,t:void 0}),E})()};var ci=(t=>(t[t.None=0]="None",t[t.INT=1]="INT",t[t.WIS=2]="WIS",t[t.CHA=3]="CHA",t))(ci||{});const mw=new Map().set("0","Cantrips").set("Cantrips","0").set("1","1st").set("1st","1").set("2","2nd").set("2nd","2").set("3","3rd").set("3rd","3").set("4","4th").set("4th","4").set("5","5th").set("5th","5").set("6","6th").set("6th","6").set("7","7th").set("7th","7").set("8","8th").set("8th","8").set("9","9th").set("9th","9"),vw="_container_mtnir_1",bw="_top_mtnir_9",yw="_body_mtnir_17",dr={container:vw,top:bw,body:yw,new:"_new_mtnir_21"},_w=()=>{const t=Ui(),e=Ya();return K(()=>{const r=t(),s=e(),i=r.flatMap(h=>h.classLevels).flatMap(h=>h.features),l=r.flatMap(h=>h.subclasses).flatMap(h=>h.features),a=s.flatMap(h=>({name:h.name,value:h.desc,info:{type:"Feature"}})),c=[...i,...l,...a].filter(h=>!!h.name).sort((h,d)=>h.name.localeCompare(d.name)),u=new pr;return c.forEach(h=>u.add(h)),u.value})};var Pc=C("<div>"),Oc=C("<div><span>"),ww=C("<div><div><h3>Level <!> Features</h3></div><div>"),Ic=C("<i>");const $w=t=>{const e=_w(),[n,r]=R(""),[s,i]=R({}),[l,a]=R(""),[c,u]=R(""),h=K(()=>l().trim().length===0||b(c()).trim().length===0),[d,f]=R(""),m=K(()=>{const k=e().filter(P=>!!P?.info?.className),x=new Set;return k.forEach(P=>x.add(P.info.className)),Array.from(x)}),y=K(()=>d()===""?e():e().filter(k=>k?.info?.className===d())),p=()=>{r(""),a(""),u("")},_=()=>{t.addFeature(t.currentLevel.info.level,{name:ze(l),value:ze(c),info:{className:t.currentLevel.info.className,subclassName:t.currentLevel.info.subclassName,level:t.currentLevel.info.level,type:"Feature",other:""}}),t.setShowFeature(!1)};console.log(t.currentLevel);const b=k=>typeof k=="string"?k:Array.isArray(k)?k.join(`
`):"",v=k=>{const x=k.info;if(x){if(x.subclassName&&x.className)return`(${k.info.subclassName} ${x.className})`;if(x.className)return`(${x.className})`;if(x.type)return`(${x.type})`}return""};return Je(()=>{console.log("Validate: ",h())}),o(Ut,{title:"Add Feature",get setClose(){return t.setShowFeature},get children(){var k=ww(),x=k.firstChild,P=x.firstChild,U=P.firstChild,w=U.nextSibling;w.nextSibling;var H=x.nextSibling;return g(x,o(G,{get when(){return n()!==""},get children(){return o(ae,{onClick:p,children:"←"})}}),P),g(P,()=>t.currentLevel.level,w),g(H,o(G,{get when(){return n()===""},get children(){var S=Pc();return g(S,o(ae,{onClick:I=>{r("new")},children:"New Feature"}),null),g(S,o(ae,{onClick:()=>r("existing"),children:"Existing Feature"}),null),g(S,o(ae,{onClick:()=>r("template"),children:"Template Feature"}),null),S}}),null),g(H,o(G,{get when(){return n()==="new"},get children(){var S=Pc();return g(S,o(lt,{name:"Feature Name",get children(){return o(be,{type:"text",transparent:!0,get value(){return l()},onInput:I=>a(I.currentTarget.value)})}}),null),g(S,o(lt,{name:"Feature Description",get children(){return o(En,{transparent:!0,text:c,setText:u})}}),null),g(S,o(ae,{onClick:()=>_(),get disabled(){return h()},children:"Save"}),null),V(()=>z(S,`${dr.new}`)),S}}),null),g(H,o(G,{get when(){return n()==="existing"},get children(){var S=Oc(),I=S.firstChild;return g(I,o(Ce,{transparent:!0,disableUnselected:!0,onChange:O=>{i(JSON.parse(O.currentTarget.value));const q=s().name,X=s().value;console.log(q,X,typeof X),a(s().name),u(b(s().value))},get children(){return o(Q,{get each(){return y()},children:O=>o(pe,{get value(){return JSON.stringify(O)},get children(){return[K(()=>O.name)," ",(()=>{var q=Ic();return g(q,()=>v(O)),q})()]}})})}}),null),g(I,o(Ce,{transparent:!0,disableUnselected:!0,onChange:O=>f(O.currentTarget.value),get children(){return[o(pe,{value:"",children:"All"}),o(Q,{get each(){return m()},children:O=>o(pe,{value:O,children:O})})]}}),null),g(I,o(ae,{onClick:()=>_(),get disabled(){return h()},children:"Save"}),null),g(S,o(lt,{name:"Feature Name",get children(){return o(be,{disabled:!0,readOnly:!0,type:"text",transparent:!0,get value(){return l()},onInput:O=>a(O.currentTarget.value)})}}),null),g(S,o(Lh,{text:c}),null),V(()=>z(S,`${dr.new}`)),S}}),null),g(H,o(G,{get when(){return n()==="template"},get children(){var S=Oc(),I=S.firstChild;return g(I,o(Ce,{transparent:!0,disableUnselected:!0,onChange:O=>{i(JSON.parse(O.currentTarget.value))},get children(){return o(Q,{get each(){return y()},children:O=>o(pe,{get value(){return JSON.stringify(O)},get children(){return[K(()=>O.name)," ",(()=>{var q=Ic();return g(q,()=>v(O)),q})()]}})})}}),null),g(I,o(Ce,{transparent:!0,disableUnselected:!0,onChange:O=>f(O.currentTarget.value),get children(){return[o(pe,{value:"",children:"All"}),o(Q,{get each(){return m()},children:O=>o(pe,{value:O,children:O})})]}}),null),g(I,o(ae,{onClick:O=>{const q=s().name,X=s().value;console.log(q,X,typeof X),a(s().name),u(b(s().value))},children:"Fill Feature"}),null),g(I,o(ae,{onClick:()=>_(),get disabled(){return h()},children:"Save"}),null),g(S,o(lt,{name:"Feature Name",get children(){return o(be,{type:"text",transparent:!0,get value(){return l()},onInput:O=>a(O.currentTarget.value)})}}),null),g(S,o(lt,{name:"Feature Description",get children(){return o(En,{transparent:!0,text:c,setText:u})}}),null),g(S,o(ae,{onClick:()=>_(),get disabled(){return h()},children:"Save"}),null),V(()=>z(S,`${dr.new}`)),S}}),null),V(S=>{var I=`${dr.container}`,O=`${dr.top}`,q=`${dr.body}`;return I!==S.e&&z(k,S.e=I),O!==S.t&&z(x,S.t=O),q!==S.a&&z(H,S.a=q),S},{e:void 0,t:void 0,a:void 0}),k}})};var Rc=C("<div>"),Cw=C("<div><div>"),Sw=C("<div><ul>"),kw=C("<div><span><label>Casting Stat</label></span><span><label>Spells Known"),xw=C("<h4>Not A Caster"),Tw=C("<div><h1>Classes Homebrewing</h1><div><span></span><span><label for=hitDie>Hit Die</label></span><span><label for=casterType>Caster Type</label></span></div><div><div><div></div></div><div></div></div><div><div>"),Aw=C("<li><span> ");const Ew=()=>{Qt();const[t,e]=Ie();K(()=>Oe(t().theme)),Ue(rt);const[n,r]=ns({id:0,name:"",hitDie:4,proficiencies:[],proficiencyChoices:[],savingThrows:[],startingEquipment:{class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]},classLevels:Array.from({length:20},(A,T)=>({level:T+1,profBonus:Math.ceil((T+1)/4)+1,features:[],classSpecific:{},info:{className:"",level:T+1,subclassName:"",type:"",other:""}})),subclasses:[],classMetadata:{subclassLevels:[],subclassType:"",subclassTypePosition:"before"}}),s=K(()=>n.spellcasting?.casterType),i=A=>r(T=>({classMetadata:{...T.classMetadata,spellcasting:{level:0,name:T.spellcasting?.name??"",spellsKnownCalc:T.spellcasting?.spellsKnownCalc??"Level",spellcastingAbility:T.spellcasting?.spellcastingAbility??"INT",casterType:A,info:T.spellcasting?.info??[]}}})),[l,a]=R(["level","proficiency","options","features"]);R(Array.from({length:20},(A,T)=>T+1));const c=()=>n.spellcasting?.spellsKnownCalc,u=()=>n.classLevels,h=A=>r(T=>it({...T,name:A})),d=A=>r(T=>it({...T,hitDie:A})),f=A=>r(T=>it({...T,proficiencies:A})),m=A=>r(T=>it({...T,savingThrows:A})),y=(A,T)=>{switch(A){case 1:r(M=>({startingEquipment:{...M.startingEquipment,choice1:T}}));break;case 2:r(M=>({startingEquipment:{...M.startingEquipment,choice2:T}}));break;case 3:r(M=>({startingEquipment:{...M.startingEquipment,choice3:T}}));break;case 4:r(M=>({startingEquipment:{...M.startingEquipment,choice4:T}}));break;default:r(M=>({startingEquipment:{...M.startingEquipment,choice1:T}}));break}},p=A=>r(T=>({classLevels:A})),_=(A,T=!1)=>r(M=>({spellcasting:{level:0,name:M.spellcasting?.name??"",spellsKnownCalc:oi[A],spellcastingAbility:M.spellcasting?.spellcastingAbility??"INT",casterType:M.spellcasting?.casterType??"full",info:M.spellcasting?.info??[],spellsKnownRoundup:T}})),b=A=>r(T=>({spellcasting:{level:0,name:T.spellcasting?.name??"",spellsKnownCalc:T.spellcasting?.spellsKnownCalc??"Level",spellcastingAbility:ci[A],casterType:T.spellcasting?.casterType??"full",info:T.spellcasting?.info??[]}})),v=A=>{const T=u().map((M,W)=>({...M,classSpecific:{...M.classSpecific,[A]:A}}));p(T)},k=A=>{r(T=>{const M=it(T);return Array.from({length:20},(W,$)=>$+1).forEach(W=>{const $=Object.entries(T.classLevels[W-1].classSpecific),E=$.findIndex(([j,ie])=>j===A);E!==-1&&$.splice(E,1),M.classLevels[W-1].classSpecific=Object.fromEntries($)}),{classLevels:M.classLevels}}),a(T=>T.filter(M=>M!==A))},x=(A,T)=>{r(M=>{const W=it(M);return W.classLevels[A-1].features.push(T),W})},P=(A,T)=>{r(M=>{const W=it(M),$=W.classLevels[A-1].features.findIndex(E=>E.name===T);return W.classLevels[A-1].features.splice($,1),W})};function U(A,T){return zo(A,T,ze(s)??"")}const w=(A,T)=>{const M=u().map((W,$)=>$===A-1?{...W,spellcasting:{...W.spellcasting,cantrips_known:T}}:W);p(M)},H=(A,T,M)=>{const W=u().map(($,E)=>E===A-1&&M?{...$,spellcasting:{...$.spellcasting,[`spell_slots_level_${T}`]:M}}:$);p(W)};function S(A){r(T=>({classLevels:Array.from({length:20},(M,W)=>W+1).map(M=>{const W=T.classLevels[M-1],$=Object.entries(W.spellcasting??{}).filter(E=>!E.includes("spell_slots_level"));return W.spellcasting={},$.length&&$.forEach(([E,j])=>W.spellcasting[E]=j),Array.from({length:9},(E,j)=>j+1).forEach(E=>{const j=zo(M,E,A);j!=="-"&&(W.spellcasting[`spell_slots_level_${E}`]=j)}),W}),spellcasting:{level:0,name:T.spellcasting?.name??"",spellsKnownCalc:T.spellcasting?.spellsKnownCalc??"Level",spellcastingAbility:T.spellcasting?.spellcastingAbility??"INT",casterType:A,info:T.spellcasting?.info??[]}}))}function I(A,T){const M=n.classLevels.map((W,$)=>$===A-1?{...W,spellcasting:{...W.spellcasting,spells_known:T}}:W);p(M)}Je(()=>{console.log("CurrentClass: ",n)}),Je(()=>{const A=["level","proficiency","features"],T=ze(c);switch(s()){case"full":T==="Other"?A.push("spellsKnown","cantrip","level-1","level-2","level-3","level-4","level-5","level-6","level-7","level-8","level-9"):A.push("cantrip","level-1","level-2","level-3","level-4","level-5","level-6","level-7","level-8","level-9"),a(A),S("full");break;case"half":T==="Other"?A.push("spellsKnown","cantrip","level-1","level-2","level-3","level-4","level-5"):A.push("cantrip","level-1","level-2","level-3","level-4","level-5"),a(A),S("half");break;case"third":T==="Other"?A.push("spellsKnown","cantrip","level-1","level-2","level-3","level-4"):A.push("cantrip","level-1","level-2","level-3","level-4"),a(A),S("third");break;case"other":T==="Other"?A.push("spellsKnown","cantrip","level-1","level-2","level-3","level-4","level-5","level-6","level-7","level-8","level-9"):A.push("cantrip","level-1","level-2","level-3","level-4","level-5","level-6","level-7","level-8","level-9"),a(A);break;default:a(A);break}}),Je(()=>{a(A=>{if(A.length>=3){const T=A.slice(0,3),M=A.slice(3);return[...new Set([...T,...oe(),...M].filter(W=>!!W))]}return A})});const[O,q]=R(""),[X,F]=R(!1),[J,ee]=R({}),oe=K(()=>{const A=new Set;return u().forEach(T=>Object.keys(T.classSpecific).forEach(M=>A.add(M))),Array.from(A).filter(T=>!!T)}),fe=K(()=>O().trim()===""||l().includes(O()));return o(Mt,{get children(){var A=Tw(),T=A.firstChild,M=T.nextSibling,W=M.firstChild,$=W.nextSibling;$.firstChild;var E=$.nextSibling;E.firstChild;var j=M.nextSibling,ie=j.firstChild,le=ie.firstChild,Z=ie.nextSibling,te=j.nextSibling,N=te.firstChild;return g(W,o(lt,{get class(){return`${xe.fieldStyle}`},name:"Class Name",get children(){return o(be,{transparent:!0,get value(){return n.name},onChange:D=>h(D.currentTarget.value)})}})),g($,o(Ce,{id:"hitDie",transparent:!0,get value(){return n.hitDie},onChange:D=>{d(+D.currentTarget.value)},disableUnselected:!0,get children(){return o(Q,{each:[4,6,8,10,12],children:D=>o(pe,{value:D,children:D})})}}),null),g(E,o(Ce,{tooltip:"Caster Type",disableUnselected:!0,transparent:!0,get value(){return s()},onChange:D=>{i(D.currentTarget.value)},get children(){return[o(pe,{value:"none",children:"None"}),o(Q,{each:["full","half","third","other"],children:D=>o(pe,{value:D,get children(){return`${D[0].toUpperCase()}${D.slice(1)}`}})})]}}),null),ie.style.setProperty("display","flex"),ie.style.setProperty("flex-direction","column"),g(ie,o(G_,{setSaves:m,setProficiencies:f,currentClass:n}),le),g(le,o(eo,{get children(){return[o(Xt,{name:"Subclasses",get children(){var D=Cw(),Y=D.firstChild;return g(Y,o(lt,{name:"Subclass Type",get children(){return o(be,{transparent:!0,type:"text",placeholder:"e.g.. __ bloodline, order of the __",get value(){return n.classMetadata.subclassType},onInput:ne=>r(re=>({classMetadata:{...re.classMetadata,subclassType:ne.currentTarget.value.trim()}}))})}}),null),g(Y,o(Ce,{disableUnselected:!0,transparent:!0,get value(){return n.classMetadata.subclassTypePosition},onChange:ne=>r(re=>({classMetadata:{...re.classMetadata,subclassTypePosition:ne.currentTarget.value}})),get children(){return[o(pe,{value:"before",children:"Before"}),o(pe,{value:"after",children:"After"})]}}),null),g(D,o(G,{get when(){return!!n.classMetadata.subclassType.trim().length},get children(){var ne=Rc();return g(ne,o(be,{style:{width:"75px",border:"1px solid"},transparent:!0,type:"number",min:1,max:20}),null),g(ne,o(ae,{children:"Add Subclass Level"}),null),ne}}),null),D}}),o(Xt,{name:"Class Specific",get children(){return[(()=>{var D=Rc();return g(D,o(lt,{name:"Column Name",get children(){return o(be,{transparent:!0,type:"text",get value(){return O()},onInput:Y=>q(Y.currentTarget.value.trim())})}}),null),g(D,o(ae,{get disabled(){return fe()},onClick:Y=>{v(O())},children:"New Table Column"}),null),D})(),(()=>{var D=Sw(),Y=D.firstChild;return g(Y,o(Q,{get each(){return oe()},children:ne=>(()=>{var re=Aw(),ge=re.firstChild,qe=ge.firstChild;return g(ge,ne,qe),g(ge,o(ae,{onClick:Ne=>{k(ne)},children:"x"}),null),re})()})),D})()]}}),o(Xt,{name:"Spellcasting",get children(){return[o(G,{get when(){return K(()=>!!s())()&&s()!=="none"},get children(){var D=kw(),Y=D.firstChild;Y.firstChild;var ne=Y.nextSibling;return ne.firstChild,g(Y,o(Ce,{disableUnselected:!0,transparent:!0,get value(){const re=n.spellcasting;if(re){const ge=re.spellcastingAbility;if(typeof ge=="string"&&!/\d/.test(ge))return JSON.parse(JSON.stringify(ci))[ge].toString();if(typeof ge=="number"||/\d/.test(ge))return ge.toString()}return"1"},onChange:re=>{b(+re.currentTarget.value)},get children(){return o(Q,{each:[1,2,3],children:re=>o(pe,{value:re,get children(){return ci[re]}})})}}),null),g(ne,o(be,{type:"checkbox",tooltip:"Round up spells known?",style:{margin:"0px","margin-left":"10px"},get checked(){return n.spellcasting?.spellsKnownRoundup??!1},onChange:re=>{const ge=n.spellcasting?.casterType;if(ge){const qe=+oi[ge];_(qe,re.currentTarget.checked)}}}),null),g(ne,o(Ce,{disableUnselected:!0,transparent:!0,get value(){return n.spellcasting?.casterType??""},onChange:re=>_(+re.currentTarget.value),get children(){return o(Q,{each:[1,2,3,4,5,6],children:re=>o(pe,{value:re,get children(){return oi[re]}})})}}),null),V(re=>{var ge=`${xe.spellcasting}`,qe=`${xe.selectSpan}`,Ne=`${xe.selectSpan}`;return ge!==re.e&&z(D,re.e=ge),qe!==re.t&&z(Y,re.t=qe),Ne!==re.a&&z(ne,re.a=Ne),re},{e:void 0,t:void 0,a:void 0}),D}}),o(G,{get when(){return!s()||s()==="none"},get children(){return xw()}})]}})]}})),g(j,o(pw,{currentClass:n,setStartEquipChoice:y}),null),g(N,o(Sr,{get class(){return`${xe.wholeTable}`},data:()=>n.classLevels,get columns(){return l()},get children(){return[o(Me,{name:"proficiency",get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:"P.B."}),o(Fe,{get class(){return`${xe.cellStyle}`},children:D=>`+${D.profBonus}`})]}}),o(Me,{name:"level",get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:"Level"}),o(Fe,{get class(){return`${xe.cellStyle}`},children:D=>D.level})]}}),o(Me,{name:"features",get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:"Features"}),o(Fe,{get class(){return`${xe.tableFeature}`},children:(D,Y)=>[o(ae,{onClick:ne=>{ee(D),F(re=>!re)},children:"+"}),o(Q,{get each(){return D?.features},children:ne=>o(Tt,{get key(){return`${ne?.info?.level} `},get value(){return ne?.name},remove:()=>P(ne?.info?.level,ne?.name)})})]})]}}),o(Me,{name:"spellsKnown",get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:"Spells Known"}),o(Fe,{get class(){return`${xe.cellStyle}`},children:D=>o(be,{style:{width:"2.5rem"},type:"number",min:0,get value(){return u()[D.level-1].spellcasting?.spells_known},onChange:Y=>I(D.level,+Y.currentTarget.value)})})]}}),o(Me,{name:"cantrip",get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:"Cantrips"}),o(Fe,{get class(){return`${xe.cellStyle}`},children:D=>o(be,{style:{width:"2.5rem"},type:"number",min:0,get value(){return u()[D.level-1].spellcasting?.cantrips_known},onChange:Y=>w(D.level,+Y.currentTarget.value)})})]}}),o(Q,{get each(){return oe()},children:D=>o(Me,{name:D,get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},children:D}),o(Fe,{get class(){return`${xe.cellStyle}`},children:Y=>o(G,{get when(){return Y.classSpecific[D]===D},children:D})})]}})}),o(Q,{each:[1,2,3,4,5,6,7,8,9],children:D=>o(Me,{name:`level-${D}`,get children(){return[o(Be,{get class(){return`${xe.headerStyle}`},get children(){return mw.get(D.toString())}}),o(Fe,{get class(){return`${xe.cellStyle}`},children:Y=>[o(G,{get when(){return s()!=="other"},get children(){return U(Y.level,D)}}),o(G,{get when(){return s()==="other"},get children(){return o(be,{style:{width:"2rem"},get value(){return u()[Y.level-1].spellcasting?.[`spell_slots_level_${D}`]},onChange:ne=>H(Y.level,D,+ne.currentTarget.value)})}})]})]}})}),o(kr,{get class(){return`${xe.rowStyle}`}})]}}),null),g(N,o(G,{get when(){return X()},get children(){return o($w,{addFeature:x,showFeature:X,get currentLevel(){return J()},setShowFeature:F})}}),null),V(D=>{var Y=`${xe.rowOne}`,ne=`${xe.selectSpan}`,re=`${xe.selectSpan}`,ge=`${xe.twoRowContainer}`,qe=`${xe.divide}`,Ne=`${xe.divide}`,ht=`${xe.twoRowContainer}`,ot=`${xe.twoRowContainer}`;return Y!==D.e&&z(M,D.e=Y),ne!==D.t&&z($,D.t=ne),re!==D.a&&z(E,D.a=re),ge!==D.o&&z(j,D.o=ge),qe!==D.i&&z(ie,D.i=qe),Ne!==D.n&&z(Z,D.n=Ne),ht!==D.s&&z(te,D.s=ht),ot!==D.h&&z(N,D.h=ot),D},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),A}})};var Lw=C("<h1>Items"),Pw=C("<h2>Item Types"),Ow=C("<div>"),Iw=C("<div><p>damage</p><p>properties</p><p>description</p><p>cost</p><p>weight</p><p>description"),Rw=C("<div><p>armor class</p><p>strength requirement</p><p>stealth disadvantage</p><p>description</p><p>cost</p><p>weight"),Dw=C("<div><p>description</p><p>cost</p><p>weight</p><p>consumable");const Nw=()=>{Ue(rt);const[t,e]=Ie();return K(()=>Oe(t().theme)),o(Mt,{get children(){return[Lw(),Pw(),(()=>{var n=Ow();return g(n,o(Fi,{get elements(){return[{name:"Weapon",element:Iw()},{name:"Armor",element:Rw()},{name:"Item",element:Dw()}]}})),n})()]}})},Mw="_body_1qbz3_1",Bw="_name_1qbz3_24",Fw="_featHomebrew_1qbz3_28",jw="_featName_1qbz3_1",Uw="_removeChipButton_1qbz3_42",qw="_preRequisites_1qbz3_49",Kw="_Description_1qbz3_67",zw="_chipBar_1qbz3_83",fr={body:Mw,name:Bw,featHomebrew:Fw,featName:jw,removeChipButton:Uw,preRequisites:qw,Description:Kw,chipBar:zw};var Hw=C("<h1>Feats"),vl=C("<div>"),Ww=C("<div class=featHomebrew><div><h2>Add Name</h2></div><div><h2>Add Pre-Requisites</h2><div></div><div></div></div><div><h2>Description"),An=(t=>(t[t.AbilityScore=0]="AbilityScore",t[t.Class=1]="Class",t[t.CharacterLevel=2]="CharacterLevel",t))(An||{});const Vw=()=>{Ue(rt);const[t,e]=Ie();K(()=>Oe(t().theme));const n=Ui();Ya(),new Pf({});const[r,s]=R([]),[i,l]=R(0),[a,c]=R(""),[u,h]=R("str"),[d,f]=R("0"),[m,y]=R("");R(!1);const[p,_]=Qt(),b=()=>{s([]),l(0),c(""),h("str"),f("0"),y("")},v=w=>{switch(i()){case 0:s(H=>[...H,{info:{className:"",subclassName:"",level:0,type:An[0],other:""},name:u(),value:d()}]);break;case 1:s(H=>[...H,{info:{className:"",subclassName:"",level:0,type:An[1],other:""},name:u(),value:d()}]);break;case 2:s(H=>[...H,{info:{className:"",subclassName:"",level:0,type:An[2],other:""},name:u(),value:d()}]);break}};V(()=>{switch(i()){case 0:h("STR"),f("0");break;case 1:h("Class"),f("Barbarian");break;case 2:h("Barbarian"),f("0");break}});const k=K(()=>{const w={};return w.name=a(),w.preReqs=r(),w.desc=[m()],w});It(()=>{if(p.name){const w=et.feats().find(H=>H.name===p.name);w&&(s(w.preReqs),y(w.desc[0]),c(w.name))}});const x=K(()=>et.feats().findIndex(w=>w.name===a())!==-1),P=()=>{et.addFeat(k()),b()},U=()=>{et.updateFeat(k()),b()};return o(Mt,{get children(){return[Hw(),(()=>{var w=Ww(),H=w.firstChild;H.firstChild;var S=H.nextSibling,I=S.firstChild,O=I.nextSibling,q=O.nextSibling,X=S.nextSibling;return X.firstChild,g(H,o(lt,{name:"Add Name",get children(){return o(be,{type:"text",transparent:!0,id:"featName",get value(){return a()},onChange:F=>c(F.currentTarget.value)})}}),null),g(H,o(G,{get when(){return x()},get children(){return o(ae,{onClick:()=>{const F=et.feats().find(J=>J.name===a());F&&(s(F.preReqs),y(F.desc[0]))},children:"Fill"})}}),null),g(O,o(Ce,{get value(){return i()},onChange:F=>l(()=>+F.currentTarget.value),disableUnselected:!0,transparent:!0,get children(){return[o(pe,{get value(){return 0},children:"Ability Score"}),o(pe,{get value(){return 1},children:"Class"}),o(pe,{get value(){return 2},children:"Class Level"})]}}),null),g(O,o(us,{get children(){return[o(At,{get when(){return i()===0},get children(){var F=vl();return g(F,o(Ce,{transparent:!0,disableUnselected:!0,onChange:J=>h(J.currentTarget.value),get children(){return[o(pe,{value:"STR",children:"Strength"}),o(pe,{value:"DEX",children:"Dexterity"}),o(pe,{value:"CON",children:"Constitution"}),o(pe,{value:"INT",children:"Intelligence"}),o(pe,{value:"WIS",children:"Wisdom"}),o(pe,{value:"CHA",children:"Charisma"})]}}),null),g(F,o(lt,{name:"Amount",get children(){return o(be,{transparent:!0,type:"number",get value(){return d()},onChange:J=>f(J.currentTarget.value)})}}),null),F}}),o(At,{get when(){return i()===1},get children(){var F=vl();return g(F,o(Ce,{transparent:!0,get value(){return u()},onChange:J=>{h("Class"),f(J.currentTarget.value)},get children(){return o(Q,{get each(){return n()},children:J=>o(pe,{get value(){return J.name},get children(){return J.name}})})}})),F}}),o(At,{get when(){return i()===2},get children(){var F=vl();return g(F,o(Ce,{transparent:!0,get value(){return u()},onChange:J=>h(J.currentTarget.value),get children(){return o(Q,{get each(){return n()},children:J=>o(pe,{get value(){return J.name},get children(){return J.name}})})}}),null),g(F,o(be,{type:"number",get value(){return d()},onChange:J=>f(J.currentTarget.value)}),null),F}})]}}),null),g(O,o(ae,{get disabled(){return r().length>=10},onClick:v,children:"Add"}),null),g(q,o(Tt,{get key(){return u()},get value(){return d()}}),null),g(q,o(Q,{get each(){return r()},children:(F,J)=>o(Tt,{get key(){return F.name},get value(){return F.value},remove:()=>s(ee=>ee.filter((oe,fe)=>fe!==J()))})}),null),g(X,o(lt,{name:"Description",get children(){return o(En,{id:"featDescription",name:"featDescription",text:m,setText:y,picToTextEnabled:!0,transparent:!0})}}),null),g(w,o(G,{get when(){return!x()},get children(){return o(ae,{get class(){return`${fr.addButton}`},onClick:P,children:"Add Feat"})}}),null),g(w,o(G,{get when(){return x()},get children(){return o(ae,{get class(){return`${fr.addButton}`},onClick:U,children:"Update Feat"})}}),null),V(F=>{var J=`${fr.name}`,ee=`${fr.preRequisites}`,oe=`${fr.chipBar}`,fe=`${fr.Description}`;return J!==F.e&&z(H,F.e=J),ee!==F.t&&z(S,F.t=ee),oe!==F.a&&z(q,F.a=oe),fe!==F.o&&z(X,F.o=fe),F},{e:void 0,t:void 0,a:void 0,o:void 0}),w})()]}})};var Gw=C("<h1>backgrounds"),Yw=C("<div><p></p><p></p><p>ideals</p><p>bonds</p><p>flaws</p><p>personality traits</p><p>background features</p><p>languages</p><p>skills</p><p>tools");const Zw=()=>{Ue(rt);const[t,e]=Ie(),n=Ih();et.backgrounds,K(()=>Oe(t().theme));const[r,s]=ns({name:"",startingProficiencies:[],languageChoice:{choose:0,type:"language",choices:[]},startingEquipment:[],startingEquipmentChoices:[],feature:[]});return V(()=>{console.log("Backgrounds: ",n())}),o(Mt,{get children(){return[Gw(),(()=>{var i=Yw(),l=i.firstChild,a=l.nextSibling;return g(l,o(lt,{name:"Background Name",get children(){return o(be,{get value(){return r.name},onChange:c=>s({name:c.currentTarget.value}),transparent:!0})}})),g(a,o(be,{type:"number",transparent:!0,style:{width:"min-content"},get value(){return r.languageChoice.choose},onChange:c=>{s({languageChoice:{...r.languageChoice,type:"language",choose:parseInt(c.currentTarget.value)}})}})),i})()]}})},Xw="_body_chbsq_1",Jw="_smallField_chbsq_20",Qw="_border_chbsq_33",e$="_field_chbsq_44",t$="_wrapper_chbsq_68",n$="_check_chbsq_81",r$="_classList_chbsq_86",Ae={body:Xw,smallField:Jw,border:Qw,field:e$,wrapper:t$,break:"_break_chbsq_76",check:n$,classList:r$};var s$=C("<h1>Spells"),i$=C("<div>"),l$=C("<label>Casting Time"),a$=C("<label>Range"),o$=C("<label>Duration"),c$=C("<div><p></p><span></span><p><label for=hasVerbal>has Verbal?</label><label for=hasSomatic>has Somatic?</label><label for=hasMaterial>has Material?</label></p><span></span><span></span><p><label>Level </label></p><p><label>School </label></p><span></span><p><label for=isRitual>is Ritual?</label></p><div><h4>Classes?</h4></div><span></span><div></div><span></span><p><span><label>Custom</label></span></p><p><span><label>Custom</label></span></p><span></span><p><span><label>Custom</label></span><span><label for=isConcentration>isConcentration?</label></span></p><span></span><p></p><span></span><p></p><span></span><p>");const u$=()=>{Ue(rt);const[t,e]=Ie();K(()=>Oe(t().theme));const n=()=>et.spells().findIndex(I=>I.name===i.name)>-1,r=()=>{et.addSpell(i)},s=()=>{et.updateSpell(i)},[i,l]=ns({name:"",desc:"",duration:"",concentration:!1,level:"0",range:"",ritual:!1,school:"",castingTime:"",damageType:"",page:"",isMaterial:!1,isSomatic:!1,isVerbal:!1,materials_Needed:"",higherLevel:"",classes:[],subClasses:[]}),a=Array.from({length:10},(I,O)=>O),c=Bh(),u=Ui(),[h,d]=Qt(),f=K(()=>u().map(I=>I.name)),[m,y]=ns({}),[p,_]=ns({castingTime:!1,range:!1}),[b,v]=R(""),[k,x]=R(""),P=()=>{const I=new pr;return c().forEach(O=>I.add(O.school)),I.value.sort()},U=()=>{const I=new pr;return c().forEach(O=>I.add(O.castingTime)),I.value.sort()},w=()=>{const I=new pr;return c().forEach(O=>I.add(O.range)),I.value.sort()},H=()=>{const I=new pr;return c().forEach(O=>I.add(O.duration)),I.value.sort()},S=I=>{const O=I?h.name:i.name,q=et.spells().find(X=>X.name===O);q&&(l(q),v(q.desc),x(q.higherLevel))};return It(()=>{h.name&&S(!0)}),Je(()=>{l({desc:b()})}),Je(()=>{l({higherLevel:k()})}),o(Mt,{get children(){return[s$(),(()=>{var I=c$(),O=I.firstChild,q=O.nextSibling,X=q.nextSibling,F=X.firstChild,J=F.nextSibling,ee=J.nextSibling,oe=X.nextSibling,fe=oe.nextSibling,A=fe.nextSibling;A.firstChild;var T=A.nextSibling;T.firstChild;var M=T.nextSibling,W=M.nextSibling;W.firstChild;var $=W.nextSibling;$.firstChild;var E=$.nextSibling,j=E.nextSibling,ie=j.nextSibling,le=ie.nextSibling,Z=le.firstChild;Z.firstChild;var te=le.nextSibling,N=te.firstChild;N.firstChild;var D=te.nextSibling,Y=D.nextSibling,ne=Y.firstChild;ne.firstChild;var re=ne.nextSibling;re.firstChild;var ge=Y.nextSibling,qe=ge.nextSibling,Ne=qe.nextSibling,ht=Ne.nextSibling,ot=ht.nextSibling,ue=ot.nextSibling;return g(O,o(lt,{get class(){return`${Ae.smallField}`},name:"Spell Name",get children(){return o(be,{transparent:!0,get value(){return i.name},onInput:B=>l({name:B.currentTarget.value})})}}),null),g(O,o(G,{get when(){return n()},get children(){return[o(ae,{onClick:()=>S(),children:"Fill Info"}),o(ae,{onClick:()=>et.removeSpell(i.name),children:"Delete"})]}}),null),g(X,o(be,{id:"hasVerbal",type:"checkbox",get class(){return`${Ae.check}`},get checked(){return i.isVerbal},onChange:B=>l({isVerbal:B.currentTarget.checked})}),F),g(X,o(be,{id:"hasSomatic",type:"checkbox",get class(){return`${Ae.check}`},get checked(){return i.isSomatic},onChange:B=>l({isSomatic:B.currentTarget.checked})}),J),g(X,o(be,{get checked(){return i.isMaterial},get class(){return`${Ae.check}`},onclick:B=>l({isMaterial:B.currentTarget.checked}),id:"hasMaterial",type:"checkbox"}),ee),g(I,o(G,{get when(){return i.isMaterial},get children(){var B=i$();return g(B,o(lt,{get class(){return`${Ae.smallField}`},name:"Material Components",get children(){return o(be,{transparent:!0,get value(){return i.materials_Needed},onChange:me=>l({materials_Needed:me.currentTarget.value})})}})),B}}),fe),g(A,o(Ce,{get class(){return`${Ae.border}`},get value(){return i.level},onChange:B=>l({level:B.currentTarget.value}),transparent:!0,get children(){return o(Q,{each:a,children:B=>o(pe,{get value(){return B.toString(10)},get children(){return hh(B)}})})}}),null),g(T,o(Ce,{get class(){return`${Ae.border}`},get value(){return i.school},onChange:B=>l({school:B.currentTarget.value}),transparent:!0,get children(){return o(Q,{get each(){return P()},children:B=>o(pe,{value:B,children:B})})}}),null),g(W,o(be,{id:"isRitual",type:"checkbox",get checked(){return i.ritual},onChange:B=>l({ritual:B.currentTarget.checked})}),null),g($,o(Ce,{get class(){return`${Ae.border}`},get value(){return m.currentClass},onChange:B=>y({currentClass:B.currentTarget.value}),transparent:!0,get children(){return o(Q,{get each(){return f()},children:B=>o(pe,{value:B,children:B})})}}),null),g($,o(ae,{get disabled(){return i.classes.includes(m.currentClass)},onClick:B=>{l({classes:[...i.classes,m.currentClass]})},children:"Add"}),null),g(j,o(Q,{get each(){return i.classes},children:B=>o(Tt,{key:"Class",value:B,remove:()=>{l({classes:i.classes.filter(me=>me!==B)})}})})),g(Z,o(be,{type:"checkbox",tooltip:"Custom Input?",onClick:B=>_({castingTime:B.currentTarget.checked}),get checked(){return p.castingTime}}),null),g(le,o(G,{get when(){return!p.castingTime},get children(){return[l$(),o(Ce,{get class(){return`${Ae.border}`},get value(){return i.castingTime},onChange:B=>l({castingTime:B.currentTarget.value}),transparent:!0,get children(){return o(Q,{get each(){return U()},children:B=>o(pe,{value:B,children:B})})}})]}}),null),g(le,o(G,{get when(){return p.castingTime},get children(){return o(lt,{get class(){return`${Ae.smallField}`},name:"Casting Time",get children(){return o(be,{transparent:!0,get value(){return i.castingTime},onChange:B=>l({castingTime:B.currentTarget.value})})}})}}),null),g(N,o(be,{type:"checkbox",tooltip:"Custom Input?",onClick:B=>_({range:B.currentTarget.checked}),get checked(){return p.range}}),null),g(te,o(G,{get when(){return!p.range},get children(){return[a$(),o(Ce,{get class(){return`${Ae.border}`},transparent:!0,get value(){return i.range},onChange:B=>l({range:B.currentTarget.value}),get children(){return o(Q,{get each(){return w()},children:B=>o(pe,{value:B,children:B})})}})]}}),null),g(te,o(G,{get when(){return p.range},get children(){return o(lt,{get class(){return`${Ae.smallField}`},name:"Range",get children(){return o(be,{transparent:!0,get value(){return i.range},onChange:B=>l({range:B.currentTarget.value})})}})}}),null),g(ne,o(be,{type:"checkbox",tooltip:"Custom Input?",onClick:B=>_({duration:B.currentTarget.checked}),get checked(){return p.duration}}),null),g(re,o(be,{id:"isConcentration",type:"checkbox",tooltip:"Custom Input?",get class(){return`${Ae.check}`},onClick:B=>l({concentration:B.currentTarget.checked}),get checked(){return i.concentration}}),null),g(re,o(G,{get when(){return!p.duration},get children(){return[o$(),o(Ce,{get class(){return`${Ae.border}`},transparent:!0,get value(){return i.duration},onChange:B=>{l({duration:B.currentTarget.value})},get children(){return o(Q,{get each(){return H().filter(B=>i.concentration?B.toLowerCase().includes("concentration"):!B.toLowerCase().includes("concentration"))},children:B=>o(pe,{value:B,children:B})})}})]}}),null),g(re,o(G,{get when(){return p.duration},get children(){return o(lt,{get class(){return`${Ae.smallField}`},name:"Duration",get children(){return o(be,{transparent:!0,get value(){return i.duration},onChange:B=>l({duration:B.currentTarget.value})})}})}}),null),g(qe,o(lt,{name:"Description",get children(){return o(En,{transparent:!0,text:b,setText:v,picToTextEnabled:!0})}})),g(ht,o(lt,{name:"Higher Levels",get children(){return o(En,{transparent:!0,text:k,setText:x,picToTextEnabled:!0})}})),g(ue,o(G,{get when(){return!n()},get children(){return o(ae,{onClick:r,children:"Create"})}}),null),g(ue,o(G,{get when(){return n()},get children(){return o(ae,{onClick:s,children:"Update"})}}),null),V(B=>{var me=`${Ae.wrapper}`,ke=`${Ae.break}`,ct=`${Ae.break}`,$e=`${Ae.break}`,st=`${Ae.field}`,Ht=`${Ae.field}`,Dn=`${Ae.break}`,Mr=`${Ae.field}`,sr=`${Ae.field}`,Br=`${Ae.break}`,Nn=`${Ae.classList}`,Mn=`${Ae.break}`,Rt=`${Ae.field}`,nn=`${Ae.field}`,ir=`${Ae.break}`,lr=`${Ae.field}`,Ts=`${Ae.break}`,wn=`${Ae.break}`,As=`${Ae.break}`;return me!==B.e&&z(I,B.e=me),ke!==B.t&&z(q,B.t=ke),ct!==B.a&&z(oe,B.a=ct),$e!==B.o&&z(fe,B.o=$e),st!==B.i&&z(A,B.i=st),Ht!==B.n&&z(T,B.n=Ht),Dn!==B.s&&z(M,B.s=Dn),Mr!==B.h&&z(W,B.h=Mr),sr!==B.r&&z($,B.r=sr),Br!==B.d&&z(E,B.d=Br),Nn!==B.l&&z(j,B.l=Nn),Mn!==B.u&&z(ie,B.u=Mn),Rt!==B.c&&z(le,B.c=Rt),nn!==B.w&&z(te,B.w=nn),ir!==B.m&&z(D,B.m=ir),lr!==B.f&&z(Y,B.f=lr),Ts!==B.y&&z(ge,B.y=Ts),wn!==B.g&&z(Ne,B.g=wn),As!==B.p&&z(ot,B.p=As),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0}),I})()]}})};var h$=C("<h1>races"),d$=C("<div><p>name</p><p>size</p><p>speed</p><p>ability score increase</p><p>age range</p><p>features");const f$=()=>{Ue(rt);const[t,e]=Ie();return K(()=>Oe(t().theme)),o(Mt,{get children(){return[h$(),d$()]}})},g$="_SpellsBody_1d3ph_1",p$="_materials_needed_1d3ph_1",m$="_headerBar_1d3ph_20",v$="_view_1d3ph_36",b$="_center_1d3ph_72",y$="_paginator_1d3ph_77",_$="_header_1d3ph_20",an={SpellsBody:g$,materials_needed:p$,headerBar:m$,view:v$,center:b$,paginator:y$,header:_$},w$="_searchBar_auo5i_1",$$="_booleanSelect_auo5i_46",C$="_chipBar_auo5i_78",S$="_all_auo5i_85",k$="_none_auo5i_89",x$="_top_auo5i_93",T$="_bottom_auo5i_97",A$="_left_auo5i_101",E$="_right_auo5i_105",bl={searchBar:w$,booleanSelect:$$,chipBar:C$,all:S$,none:k$,top:x$,bottom:T$,left:A$,right:E$};var L$=C("<div id=booleanBar><label for=falsebox>"),P$=C("<div><div>"),O$=C("<option>"),I$=C('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const R$=t=>{const[e,n]=R({key:"",value:""}),[r,s]=R("name"),[i,l]=R(""),[a,c]=R(!1),[u,h]=R([]),d=p=>{if(Array.isArray(t.spellsSrd()[0][p]))if(typeof(t.spellsSrd()[0][p]&&Array.isArray(t.spellsSrd()[0][p])?t.spellsSrd()[0][p][0]:null)=="string"){const v=t.spellsSrd().flatMap(k=>k[p]?.toString().includes(",")?k[p]?.toString().split(","):k[p]?.toString());return[...new Set(v)].sort().filter(k=>!!k)}else return[...new Set(...t.spellsSrd().flatMap(v=>Array.isArray(v[p])?v[p]:[]))].sort().filter(v=>!!v);const _=new Set;return t.spellsSrd().map(b=>b[p]&&!Array.isArray(b[p])?b[p]:"").map(b=>_.add(`${b}`)),[..._].sort().filter(b=>!!b)},f=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"];Je(()=>{t.setSearchResults(t.spellsSrd().filter(p=>p&&u().length>0?![...new Set(u().map(x=>x.key))].map(x=>u().filter(P=>P.key===x)).map(x=>x.map(P=>{const U=p[P.key];if(U)switch(!0){case typeof U=="string":return U.toLowerCase().includes(P.value.toLowerCase());case Array.isArray(U):return U.join(" ").toLowerCase().includes(P.value.toLowerCase());case typeof U=="boolean":return` ${U} `.toLowerCase().includes(P.value.toLowerCase())}return!1})).map(x=>x.includes(!0)).includes(!1):!0))}),Je(()=>{t.spellsSrd().length>0&&typeof t.spellsSrd()[0][r()]=="boolean"&&l(`${a()}`)}),Je(()=>{h(p=>e().key?[...p,e()]:p),l(""),document.getElementById("searchBar")&&(document.getElementById("searchBar").value="")});const m=p=>{if(p==="concentration")return"Conc";if(p==="damageType")return"Dmg Type";const _=b=>(b.charAt(0).toUpperCase()+b.slice(1)).replace(/([A-Z])/g," $1").trim();return p.startsWith("is")?_(p.replace("is","")):_(p)},y=()=>t.spellsSrd().length>0?t.spellsSrd()[0]:{};return(()=>{var p=P$(),_=p.firstChild;return g(_,o(ae,{transparent:!0,onClick:()=>n(b=>({key:r(),value:da(i())})),get children(){return o(D$,{})}}),null),g(_,o(Ce,{get class(){return`${bl.all}`},disableUnselected:!0,onChange:b=>s(b.target.value),id:"chipDropdown",get children(){return o(Q,{get each(){return Object.keys(y()).filter(b=>!["materials_Needed","higherLevel","page"].includes(b))},children:b=>o(pe,{value:b,get children(){return m(b)}})})}}),null),g(_,o(us,{get children(){return[o(At,{get when(){return Array.isArray(y()[r()])||["damageType","castingTime","range","duration"].includes(r())},get children(){return o(Ce,{onChange:b=>l(b.currentTarget.value),get children(){return o(Q,{get each(){return d(r())},children:b=>(()=>{var v=O$();return v.value=b,g(v,b),v})()})}})}}),o(At,{get when(){return typeof y()[r()]=="boolean"},get children(){var b=L$(),v=b.firstChild;return g(b,o(be,{type:"checkbox",get checked(){return a()},id:"booleanCheckbox",onchange:()=>{c(!a()),l(`${a()}`)}}),v),g(v,o(G,{get when(){return!a()},children:"false"}),null),g(v,o(G,{get when(){return a()},children:"true"}),null),V(()=>z(b,`${bl.booleanSelect}`)),b}}),o(At,{get when(){return typeof y()[r()]=="string"},get children(){return o(us,{get fallback(){return o(be,{id:"searchBar",onChange:b=>l(b.currentTarget.value),onKeyDown:b=>{b.key==="Enter"&&n(v=>({key:r(),value:da(b.currentTarget.value)}))},placeholder:"Search Spells...",get value(){return i()},type:"text"})},get children(){return o(At,{get when(){return["school","level"].includes(r())},get children(){return o(Ce,{onChange:b=>l(b.currentTarget.value),get children(){return[o(G,{get when(){return r()==="school"},get children(){return o(Q,{each:f,children:b=>o(pe,{value:b,children:b})})}}),o(G,{get when(){return r()==="level"},get children(){return o(Q,{each:[0,1,2,3,4,5,6,7,8,9],children:b=>o(pe,{value:b,children:b})})}})]}})}})}})}})]}}),null),g(p,o(gh,{chips:u,setChips:h}),null),V(()=>z(_,`${bl.searchBar}`)),p})()},D$=t=>(()=>{var e=I$();return nt(e,Qe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();var N$=C("<h1>Spells"),M$=C("<br>"),Yr=C("<span>"),B$=C("<span><strong>Name"),F$=C("<span><strong>Level"),j$=C("<div><span><strong>Name</strong></span><span><strong>Level"),U$=C("<div>"),Dc=C("<div><span>"),q$=C("<h4>At Higher Levels: "),K$=C("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>"),z$=C("<div><span></span><span>"),H$=C("<hr>");const Nc=()=>{const t=Ue(rt),[e,n]=Ie();K(()=>Oe(e().theme));const r=Bh(),[s,i]=Qt();s.name||i({name:r()[0]?.name});const l=r().filter(w=>w.name?.toLowerCase()===(s?.name||r()[0]?.name).toLowerCase())[0],[a,c]=R(l),[u,h]=R([]),[d,f]=R([]),[m,y]=R(!1),[p,_]=R({sortKey:"level",isAsc:!0}),[b,v]=R([]),k=K(()=>d().length>0?d():r()),x=w=>{switch(w){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${w}th`}},P=w=>{const H=[];return w.isVerbal&&H.push("V"),w.isSomatic&&H.push("S"),w.isMaterial&&H.push("M"),w.materials_Needed?[H.join(", "),w.materials_Needed??null].join(", "):H.join(", ")},U=w=>{_(H=>H.sortKey===w?it({sortKey:w,isAsc:!H.isAsc}):it({sortKey:w,isAsc:H.isAsc})),v(H=>{const I=p().isAsc;return it(H.sort((O,q)=>{const X=typeof O?.[w]=="string"?O?.[w].replaceAll(" ",""):O?.[w],F=typeof q?.[w]=="string"?q?.[w].replaceAll(" ",""):q?.[w];return X===void 0||F===void 0?0:X<F?I?1:-1:X>F?I?-1:1:0}))})};return Je(()=>{i({name:a()?.name??""})}),Je(()=>{const w=r();v(w)}),o(Mt,{get children(){return[(()=>{var w=N$();return V(()=>z(w,`${an.center}`)),w})(),M$(),o(R$,{searchResults:d,setSearchResults:f,spellsSrd:b}),o(G,{get when(){return!t.isMobile()},get children(){return o(Sr,{get class(){return`${an.SpellsBody}`},data:u,columns:["name","level"],dropdown:!0,get children(){return[o(Me,{name:"name",get children(){return[o(Be,{get children(){var w=B$();return w.firstChild,w.$$click=()=>U("name"),g(w,o(G,{get when(){return p().sortKey==="name"},get children(){var H=Yr();return g(H,()=>p().isAsc?"↑":"↓"),H}}),null),w}}),o(Fe,{get class(){return`${an.center}`},children:(w,H)=>(()=>{var S=Dc(),I=S.firstChild;return g(I,()=>w.name),S})()})]}}),o(Me,{name:"level",get children(){return[o(Be,{get children(){var w=F$();return w.firstChild,w.$$click=()=>U("level"),g(w,o(G,{get when(){return p().sortKey==="level"},get children(){var H=Yr();return g(H,()=>p().isAsc?"↑":"↓"),H}}),null),w}}),o(Fe,{get class(){return`${an.center}`},children:(w,H)=>(()=>{var S=Dc(),I=S.firstChild;return g(I,()=>w.level),S})()})]}}),o(kr,{}),o(Wh,{children:(w,H)=>(()=>{var S=K$(),I=S.firstChild,O=I.firstChild,q=O.nextSibling,X=q.firstChild,F=q.nextSibling,J=F.firstChild,ee=J.nextSibling;ee.nextSibling;var oe=F.nextSibling,fe=oe.firstChild,A=fe.nextSibling;A.nextSibling;var T=oe.nextSibling;T.firstChild;var M=T.nextSibling;M.firstChild;var W=M.nextSibling;W.firstChild;var $=W.nextSibling;$.firstChild;var E=$.nextSibling;return g(O,()=>w.name),g(q,()=>x(w.level),X),g(q,()=>w.school,null),g(F,()=>w.castingTime,ee),g(oe,()=>w.range,A),g(T,()=>P(w),null),g(M,()=>w.duration,null),g(W,()=>w.classes.join(", "),null),g($,()=>w.subClasses.join(", "),null),g(E,()=>w.desc),g(I,o(G,{get when(){return!!w.higherLevel},get children(){return[q$()," ",(()=>{var j=Yr();return g(j,()=>w.higherLevel),j})()]}}),null),V(()=>z(S,`${an.view}`)),S})()})]}})}}),o(G,{get when(){return t.isMobile()},get children(){return[(()=>{var w=j$(),H=w.firstChild;H.firstChild;var S=H.nextSibling;return S.firstChild,H.$$click=()=>U("name"),g(H,o(G,{get when(){return p().sortKey==="name"},get children(){var I=Yr();return g(I,()=>p().isAsc?"↑":"↓"),I}}),null),S.$$click=()=>U("level"),g(S,o(G,{get when(){return p().sortKey==="level"},get children(){var I=Yr();return g(I,()=>p().isAsc?"↑":"↓"),I}}),null),V(()=>z(w,`${an.header}`)),w})(),o(Q,{get each(){return u()},children:(w,H)=>[(()=>{var S=z$(),I=S.firstChild,O=I.nextSibling;return I.$$click=()=>{c(w),y(q=>!q)},g(I,()=>w.name),O.$$click=()=>{c(w),y(q=>!q)},g(O,()=>x(w.level)),V(()=>z(S,`${an.headerBar}`)),S})(),H$()]}),o(G,{get when(){return m()},get children(){return o(tb,{spell:a,backgroundClick:[m,y]})}})]}}),(()=>{var w=U$();return g(w,o(Cr,{items:k,setPaginatedItems:h})),V(()=>z(w,`${an.center} ${an.paginator}`)),w})()]}})};zt(["click"]);const W$="_featsList_1hcnd_1",V$="_PreReqsBar_1hcnd_17",G$="_body_1hcnd_29",yl={featsList:W$,PreReqsBar:V$,body:G$};var Y$=C("<div><div><h1>Feats</h1><div></div><ol>"),Z$=C("<li> <button></button>"),Mc=C("<div>"),Bc=C("<br>"),X$=C("<div>Description:"),_l=C("<span>"),J$=C("<div>Ability Score Requirement: "),Q$=C("<span> of "),e2=C("<div>Class Requirement:"),t2=C("<div>class level Requirement:"),n2=C("<span> "),r2=C("<div>classes Requirement:");const s2=()=>{const[t,e]=R([]),[n,r]=R([]),s=K(()=>n().length===0?t():n()),[i,l]=R([]),a=v=>i().includes(v),c=v=>a(v)?l(i().filter(k=>k!==v)):l([...i(),v]);Ue(rt);const[u,h]=Ie(),d=K(()=>Oe(u().theme)),f=Ya(),[m,y]=Qt();m.name||y({name:f()[0]?.name});const p=f().filter(v=>v.name?.toLowerCase()===(m.name||f()[0]?.name).toLowerCase())[0],[_,b]=R(p);return V(()=>{y({name:_()?.name})}),(()=>{var v=Y$(),k=v.firstChild,x=k.firstChild,P=x.nextSibling,U=P.nextSibling;return P.style.setProperty("height","5vh"),P.style.setProperty("width","45%"),g(P,o(os,{placeholder:"Search Feats...",dataSource:f,setResults:r})),g(U,o(Q,{get each(){return s()},children:(w,H)=>[(()=>{var S=Z$(),I=S.firstChild,O=I.nextSibling;return g(S,()=>w.name,I),O.$$click=()=>{c(H()),b(w)},g(O,()=>a(H())?"↑":"↓"),S})(),o(G,{get when(){return a(H())},get children(){return[(()=>{var S=Mc();return g(S,o(Q,{get each(){return _().preReqs},children:I=>(()=>{var O=Mc();return g(O,o(us,{get children(){return[o(At,{get when(){return I.info.type===An[0]},get children(){return[J$(),(()=>{var q=Q$(),X=q.firstChild;return g(q,()=>I.name,X),g(q,()=>I.value,null),q})()]}}),o(At,{get when(){return I.info.type===An[1]},get children(){return[e2(),(()=>{var q=_l();return g(q,()=>I.value),q})()]}}),o(At,{get when(){return I.info.type===An[2]},get children(){return[t2(),(()=>{var q=n2(),X=q.firstChild;return g(q,()=>I.name,X),g(q,()=>I.value,null),q})()]}}),o(At,{get when(){return I.info.type===An[3]},get children(){return[r2(),(()=>{var q=_l();return g(q,()=>I.name),q})()]}})]}})),O})()})),V(()=>z(S,`${yl.PreReqsBar}`)),S})(),Bc(),X$(),(()=>{var S=_l();return g(S,o(Q,{get each(){return _().desc},children:(I,O)=>[I,Bc()]})),S})()]}})]})),g(k,o(Cr,{items:f,setPaginatedItems:e}),null),V(w=>{var H=`${d()?.primary} ${yl.featsList}`,S=`${yl.body}`;return H!==w.e&&z(v,w.e=H),S!==w.t&&z(k,w.t=S),w},{e:void 0,t:void 0}),v})()};zt(["click"]);const i2="_sidebar_18u2w_9",l2="_sidebar_shown_18u2w_37",a2="_wrapper_18u2w_43",o2="_thePage_18u2w_48",c2="_outerStyles_18u2w_59",u2="_SelectorBar_18u2w_67",h2="_fixed_18u2w_79",d2="_flexrow_18u2w_93",f2="_wrap_18u2w_43",g2="_abilityscore_18u2w_103",p2="_sideBarBtn_18u2w_110",m2="_animate_18u2w_124",v2="_slidein_18u2w_1",Zs={sidebar:i2,sidebar_shown:l2,wrapper:a2,thePage:o2,outerStyles:c2,SelectorBar:u2,fixed:h2,flexrow:d2,wrap:f2,abilityscore:g2,sideBarBtn:p2,animate:m2,slidein:v2},b2="_subrace_1t2pp_1",y2={subrace:b2};var _2=C("<div><h3>Sub Races"),qn=C("<br>"),Fc=C("<div>"),w2=C("<span>languages:"),wl=C("<span>"),$2=C("<h3>languages to choose from"),C2=C("<div><span>name: </span><br><br><span>Ability Score increases:</span><br>"),S2=C("<span><br><span></span> <span></span><br>"),k2=C("<span>: ");const x2=t=>{Oe();let e=t.race;return o(G,{get when(){return e?.subRaces?.length>0},get children(){return o(_s,{get children(){return[_2(),(()=>{var n=Fc();return g(n,o(G,{get when(){return e?.subRaces.length>0},get children(){return[qn(),(()=>{var r=Fc();return g(r,o(Q,{get each(){return e?.subRaces},children:s=>[(()=>{var i=C2(),l=i.firstChild;l.firstChild;var a=l.nextSibling,c=a.nextSibling,u=c.nextSibling,h=u.nextSibling;return g(l,()=>s.name,null),g(i,o(G,{get when(){return s.abilityBonuses.length>0},get children(){return o(Q,{get each(){return s.abilityBonuses},children:d=>(()=>{var f=S2(),m=f.firstChild,y=m.nextSibling,p=y.nextSibling,_=p.nextSibling;return g(y,()=>d.name),g(_,()=>d.value),f})()})}}),h),g(i,o(G,{get when(){return s.traits.length>0},get children(){return o(Q,{get each(){return s.traits},children:d=>[qn(),(()=>{var f=k2(),m=f.firstChild;return g(f,()=>d.name,m),f})(),qn(),(()=>{var f=wl();return g(f,()=>d.value),f})(),qn()]})}}),h),g(i,o(G,{get when(){return s.languages.length>0},get children(){return[w2(),qn(),(()=>{var d=wl();return g(d,()=>s.languages.join(", ")),d})()]}}),null),g(i,o(G,{get when(){return s.languageChoice.choices.length>0},get children(){return[$2(),o(Q,{get each(){return s.languageChoice.choices},children:d=>[(()=>{var f=wl();return g(f,d),f})(),qn()]})]}}),null),V(d=>{var f=`${s.name}`,m=`${y2.subrace}`;return f!==d.e&&Xe(i,"id",d.e=f),m!==d.t&&z(i,d.t=m),d},{e:void 0,t:void 0}),i})(),qn()]})),r})()]}})),n})()]}})}})};var T2=C("<div><div><h1></h1><h2> traits</h2><div><h3>Ability Score Increases: </h3><div></div><h3>Age:</h3><span></span><h3>Alignment:</h3><span></span><h3>Size:</h3><span></span><h3>Speed:</h3><span>ft</span><h3>Race Specific Traits:</h3><span></span><h3>Proficiencies</h3><div></div><h3>Languages:</h3><br>"),$l=C("<br>"),Cl=C("<span>"),A2=C("<div>: ");const E2=t=>{let e=t.styles,n=t.dndSrdRace;return(()=>{var r=T2(),s=r.firstChild,i=s.firstChild,l=i.nextSibling,a=l.firstChild,c=l.nextSibling,u=c.firstChild,h=u.nextSibling,d=h.nextSibling,f=d.nextSibling,m=f.nextSibling,y=m.nextSibling,p=y.nextSibling,_=p.nextSibling,b=_.nextSibling,v=b.nextSibling,k=v.firstChild,x=v.nextSibling,P=x.nextSibling,U=P.nextSibling,w=U.nextSibling,H=w.nextSibling,S=H.nextSibling;return g(i,()=>n().name),g(l,()=>n().name,a),g(h,o(Q,{get each(){return n().abilityBonuses},children:I=>[$l(),(()=>{var O=Cl();return g(O,()=>I.name),O})()," ",(()=>{var O=Cl();return g(O,()=>I.value),O})(),$l()]})),g(f,()=>n()?.age),g(y,()=>n()?.alignment),g(_,()=>n()?.sizeDescription),g(v,()=>n()?.speed,k),g(P,o(Q,{get each(){return n()?.traits},children:I=>[(()=>{var O=A2(),q=O.firstChild;return g(O,()=>I?.name,q),g(O,o(Q,{get each(){return I?.value},children:X=>(()=>{var F=Cl();return g(F,X),V(()=>z(F,`${e.wrap}`)),F})()}),null),O})(),$l()]})),g(w,()=>n()?.startingProficencies?.map(I=>I?.value)?.join(`
`)),g(c,()=>n()?.languageDesc,S),g(c,o(x2,{styles:e,get race(){return n()}}),null),V(I=>{var O=`${e.thePage}`,q=`${n().name}`,X=`${e.abilityscore}`,F=`${e.wrap}`,J=`${e.wrap}`,ee=`${e.wrap}`;return O!==I.e&&z(r,I.e=O),q!==I.t&&Xe(i,"id",I.t=q),X!==I.a&&z(h,I.a=X),F!==I.o&&z(f,I.o=F),J!==I.i&&z(y,I.i=J),ee!==I.n&&z(_,I.n=ee),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};var L2=C("<div id=racesComp><h1>Races</h1><div><button>←</button><span></span><button>→</button></div><div>");const P2=()=>{const t=Iy();Ue(rt);const[e,n]=Ie(),r=K(()=>Oe(e().theme));R([]);const[s,i]=Qt(),l=t()?.findIndex(h=>h.name?.toLowerCase()===s?.name?.toLowerCase()),[a,c]=R(l>=0?l:0);s.name||i({name:t().length>0?t()[a()].name:"dragonborn"});const u=K(()=>t().length>0&&a()>=0&&a()<t().length?t()[a()]:{});return V(()=>{i({name:t().length>0?u()?.name:"Dragonborn"})}),(()=>{var h=L2(),d=h.firstChild,f=d.nextSibling,m=f.firstChild,y=m.nextSibling,p=y.nextSibling,_=f.nextSibling;return m.$$click=()=>a()===0?c(b=>t().length-1):c(b=>b-1),g(y,()=>u().name),p.$$click=()=>a()===t().length-1?c(b=>0):c(b=>b+1),g(_,o(E2,{styles:Zs,dndSrdRace:u})),V(b=>{var v=`${r().primary} ${Zs.outerStyles}`,k=`${Zs.SelectorBar}`,x=`${Zs.wrapper}`;return v!==b.e&&z(h,b.e=v),k!==b.t&&z(f,b.t=k),x!==b.a&&z(_,b.a=x),b},{e:void 0,t:void 0,a:void 0}),h})()};zt(["click"]);const O2="_allBackgrounds_osalx_1",I2="_backgrounds_osalx_12",R2="_feature_osalx_23",D2="_totalPanel_osalx_27",N2="_body_osalx_31",Zr={allBackgrounds:O2,backgrounds:I2,feature:R2,totalPanel:D2,body:N2};var M2=C("<div><h1>Backgrounds</h1><div></div><div></div>"),B2=C("<div>"),F2=C("<div><h2></h2><div></div><h3></h3><h3>choose: </h3><div></div><br><h3>Starting Equipment</h3><div></div><br><div></div><h3>Skill Proficiencies</h3><div>"),j2=C("<span><h3></h3><br><span>"),Xr=C("<br>"),Sl=C("<span>"),U2=C("<h3>Choose: "),q2=C("<span> ");const K2=()=>{Ue(rt);const[t,e]=Ie(),n=K(()=>Oe(t().theme)),r=Ih(),[s,i]=R(r()||[]),l=K(()=>{if(s().length===0)return r()}),[a,c]=Qt();a.name||c({name:r()[0]?.name});const u=r().filter(m=>m.name?.toLowerCase()===(a?.name||r()[0]?.name).toLowerCase())[0],[h,d]=R(u);V(()=>{c({name:h()?.name})});const f=m=>{d(m)};return(()=>{var m=M2(),y=m.firstChild,p=y.nextSibling,_=p.nextSibling;return p.style.setProperty("width","35%"),p.style.setProperty("height","5vh"),p.style.setProperty("margin","0 auto"),g(p,o(os,{placeholder:"Search Backgrounds...",dataSource:r,setResults:i})),g(_,o(Q,{get each(){return l()},children:b=>o(_s,{get extraSetter(){return f(b)},styles:Zr,get children(){return[(()=>{var v=B2();return g(v,()=>h().name),v})(),(()=>{var v=F2(),k=v.firstChild,x=k.nextSibling,P=x.nextSibling,U=P.nextSibling;U.firstChild;var w=U.nextSibling,H=w.nextSibling,S=H.nextSibling,I=S.nextSibling,O=I.nextSibling,q=O.nextSibling,X=q.nextSibling,F=X.nextSibling;return g(k,()=>h().name),g(x,o(Q,{get each(){return h().feature},children:J=>[(()=>{var ee=j2(),oe=ee.firstChild,fe=oe.nextSibling,A=fe.nextSibling;return g(oe,()=>J.name),g(A,()=>J.value),V(()=>z(A,`${Zr.feature}`)),ee})(),Xr()]})),g(P,()=>h().languageChoice.type),g(U,()=>h().languageChoice.choose,null),g(w,o(Q,{get each(){return h().languageChoice.choices},children:J=>[(()=>{var ee=Sl();return g(ee,J),ee})(),Xr()]})),g(I,o(Q,{get each(){return h().startingEquipment},children:J=>[(()=>{var ee=Sl();return g(ee,()=>J.item),ee})(),Xr()]})),g(q,o(Q,{get each(){return h().startingEquipmentChoices},children:J=>[(()=>{var ee=U2();return ee.firstChild,g(ee,()=>J.choose,null),ee})(),o(Q,{get each(){return J.choices},children:ee=>[(()=>{var oe=q2(),fe=oe.firstChild;return g(oe,()=>ee.quantity,fe),g(oe,()=>ee.item,null),oe})(),Xr()]})]})),g(F,o(Q,{get each(){return h().startingProficiencies},children:J=>[(()=>{var ee=Sl();return g(ee,()=>J.value),ee})(),Xr()]})),V(()=>z(v,`${Zr.body}`)),v})()]}})})),V(b=>{var v=`${n()?.primary} ${Zr.allBackgrounds}`,k=`${Zr.backgrounds}`;return v!==b.e&&z(m,b.e=v),k!==b.t&&z(_,b.t=k),b},{e:void 0,t:void 0}),m})()},z2="_CenterPage_69voi_1",H2="_eachPage_69voi_8",W2="_Center_69voi_1",V2="_CenterTable_69voi_18",G2="_subClasses_69voi_28",jc={CenterPage:z2,eachPage:H2,Center:W2,CenterTable:V2,subClasses:G2};var Y2=C("<div><div><span></span></div><hr><div>");const Z2=()=>{Ue(rt);const[t,e]=Ie(),n=K(()=>Oe(t().theme)),r=Ui(),[s,i]=Qt(),l=r().findIndex(h=>h.name.toLowerCase()===s.name?.toLowerCase()),[a,c]=R(l>=0?l:0);s.name||i({name:r().length>0?r()[a()].name:"barbarian"});const u=K(()=>r().length>0&&a()>=0&&a()<r().length?r()[a()]:{});return K(()=>u().subclasses?.length>0?u().subclasses:[]),V(()=>{i({name:r().length>0?u().name:"barbarian"}),console.table(u())}),(()=>{var h=Y2(),d=h.firstChild,f=d.firstChild,m=d.nextSibling,y=m.nextSibling;return g(d,o(ae,{onClick:()=>a()===0?c(p=>r().length-1):c(p=>p-1),children:"←"}),f),g(f,()=>u().name),g(d,o(ae,{onClick:()=>a()===r().length-1?c(p=>0):c(p=>p+1),children:"→"}),null),m.style.setProperty("width","100%"),g(y,o(Yv,{currentClass:u})),V(p=>{var _=`${n()?.primary} ${jc.CenterPage}`,b=`${jc.eachPage}`;return _!==p.e&&z(h,p.e=_),b!==p.t&&z(y,p.t=b),p},{e:void 0,t:void 0}),h})()},Vh=ma(()=>Pi(()=>import("./characters-hl9AZee0.js"),__vite__mapDeps([0,1]))),Gh=ma(()=>Pi(()=>import("./create-pJTzdNsn.js"),__vite__mapDeps([2,1]))),Yh=ma(()=>Pi(()=>import("./view-A5hm5kmo.js"),__vite__mapDeps([3,4]))),X2=document.getElementById("root"),J2=60*1e3;Kh({onRegisteredSW(t,e){e&&setInterval(()=>{Vh.preload(),Gh.preload(),Yh.preload(),e.update()},J2)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){console.log("onNeedRefresh")},onOfflineReady(){console.log("onOfflineReady")}});xd(()=>o(df,{root:xm,get children(){return[o(Ve,{path:"/",component:z0}),o(Ve,{path:"/characters",get children(){return[o(Ve,{path:"/",component:Vh}),o(Ve,{path:"/view",component:Yh}),o(Ve,{path:"/create",component:Gh})]}}),o(Ve,{path:"/info",get children(){return[o(Ve,{path:"/races",component:P2}),o(Ve,{path:"/spells",component:Nc}),o(Ve,{path:"/feats",component:s2}),o(Ve,{path:"/classes",component:Z2}),o(Ve,{path:"/backgrounds",component:K2}),o(Ve,{path:"/*any",component:Nc})]}}),o(Ve,{path:"/homebrew",get children(){return[o(Ve,{path:"/",component:Z0}),o(Ve,{path:"/view",component:Ec}),o(Ve,{path:"/create",get children(){return[o(Ve,{path:"/",component:r_}),o(Ve,{path:"/classes",component:Ew}),o(Ve,{path:"/subclasses",component:W_}),o(Ve,{path:"/items",component:Nw}),o(Ve,{path:"/feats",component:Vw}),o(Ve,{path:"/backgrounds",component:Zw}),o(Ve,{path:"/spells",component:u$}),o(Ve,{path:"/races",component:f$})]}}),o(Ve,{path:"/*any",component:Ec})]}})]}}),X2);export{ae as B,Q as F,o as a,V as b,K as c,z as d,eC as e,Ui as f,Ie as g,Bh as h,g as i,Ya as j,Iy as k,Nh as l,Ih as m,R as n,Q2 as o,Qt as p,Xe as s,C as t,Oe as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/characters-hl9AZee0.js","assets/characters-i2fzY9Kk.css","assets/create-pJTzdNsn.js","assets/view-A5hm5kmo.js","assets/view-aa-IgBHj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
