(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const eh="modulepreload",th=function(t){return"/"+t},Io={},yi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(a=>{if(a=th(a),a in Io)return;Io[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":eh,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Te={context:void 0,registry:void 0};function Vr(t){Te.context=t}const nh=(t,e)=>t===e,ni=Symbol("solid-proxy"),rh=Symbol("solid-track"),ri={equals:nh};let Ql=ac;const dn=1,si=2,ec={owned:null,cleanups:null,context:null,owner:null},Ai={};var Ee=null;let Li=null,sh=null,Re=null,pt=null,an=null,_i=0;function dr(t,e){const n=Re,r=Ee,s=t.length===0,i=e===void 0?r:e,a=s?ec:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?t:()=>t(()=>it(()=>Si(a)));Ee=a,Re=null;try{return un(o,!0)}finally{Re=n,Ee=r}}function P(t,e){e=e?Object.assign({},ri,e):ri;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),ic(n,s));return[sc.bind(n),r]}function No(t,e,n){const r=$i(t,e,!0,dn);Sr(r)}function z(t,e,n){const r=$i(t,e,!1,dn);Sr(r)}function tc(t,e,n){Ql=hh;const r=$i(t,e,!1,dn);(!n||!n.render)&&(r.user=!0),an?an.push(r):Sr(r)}function G(t,e,n){n=n?Object.assign({},ri,n):ri;const r=$i(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Sr(r),sc.bind(r)}function ih(t){return t&&typeof t=="object"&&"then"in t}function ah(t,e,n){let r,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,s=t,i=e||{}):(r=t,s=e,i=n||{});let a=null,o=Ai,l=null,c=!1,u="initialValue"in i,h=typeof r=="function"&&G(r);const f=new Set,[g,b]=(i.storage||P)(i.initialValue),[m,y]=P(void 0),[_,v]=P(void 0,{equals:!1}),[C,x]=P(u?"ready":"unresolved");if(Te.context){l=`${Te.context.id}${Te.context.count++}`;let T;i.ssrLoadFrom==="initial"?o=i.initialValue:Te.load&&(T=Te.load(l))&&(o=T)}function k(T,N,O,M){return a===T&&(a=null,M!==void 0&&(u=!0),(T===o||N===o)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(M,{value:N})),o=Ai,I(N,O)),N}function I(T,N){un(()=>{N===void 0&&b(()=>T),x(N!==void 0?"errored":u?"ready":"unresolved"),y(N);for(const O of f.keys())O.decrement();f.clear()},!1)}function A(){const T=lh,N=g(),O=m();if(O!==void 0&&!a)throw O;return Re&&!Re.user&&T&&No(()=>{_(),a&&(T.resolved||f.has(T)||(T.increment(),f.add(T)))}),N}function K(T=!0){if(T!==!1&&c)return;c=!1;const N=h?h():r;if(N==null||N===!1){k(a,it(g));return}const O=o!==Ai?o:it(()=>s(N,{value:g(),refetching:T}));return ih(O)?(a=O,"value"in O?(O.status==="success"?k(a,O.value,void 0,N):k(a,void 0,void 0,N),O):(c=!0,queueMicrotask(()=>c=!1),un(()=>{x(u?"refreshing":"pending"),v()},!1),O.then(M=>k(O,M,void 0,N),M=>k(O,void 0,lc(M),N)))):(k(a,O,void 0,N),O)}return Object.defineProperties(A,{state:{get:()=>C()},error:{get:()=>m()},loading:{get(){const T=C();return T==="pending"||T==="refreshing"}},latest:{get(){if(!u)return A();const T=m();if(T&&!a)throw T;return g()}}}),h?No(()=>K(!1)):K(!1),[A,{refetch:K,mutate:b}]}function it(t){if(Re===null)return t();const e=Re;Re=null;try{return t()}finally{Re=e}}function nc(t,e,n){const r=Array.isArray(t);let s,i=n&&n.defer;return a=>{let o;if(r){o=Array(t.length);for(let c=0;c<t.length;c++)o[c]=t[c]()}else o=t();if(i){i=!1;return}const l=it(()=>e(o,s,a));return s=o,l}}function rc(t){tc(()=>it(t))}function Sn(t){return Ee===null||(Ee.cleanups===null?Ee.cleanups=[t]:Ee.cleanups.push(t)),t}function ii(){return Ee}function Ya(t,e){const n=Ee,r=Re;Ee=t,Re=null;try{return un(e,!0)}catch(s){Ja(s)}finally{Ee=n,Re=r}}function oh(t){const e=Re,n=Ee;return Promise.resolve().then(()=>{Re=e,Ee=n;let r;return un(t,!1),Re=Ee=null,r?r.done:void 0})}function wi(t,e){const n=Symbol("context");return{id:n,Provider:dh(n),defaultValue:t}}function He(t){return Ee&&Ee.context&&Ee.context[t.id]!==void 0?Ee.context[t.id]:t.defaultValue}function $r(t){const e=G(t),n=G(()=>oa(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let lh;function sc(){if(this.sources&&this.state)if(this.state===dn)Sr(this);else{const t=pt;pt=null,un(()=>oi(this),!1),pt=t}if(Re){const t=this.observers?this.observers.length:0;Re.sources?(Re.sources.push(this),Re.sourceSlots.push(t)):(Re.sources=[this],Re.sourceSlots=[t]),this.observers?(this.observers.push(Re),this.observerSlots.push(Re.sources.length-1)):(this.observers=[Re],this.observerSlots=[Re.sources.length-1])}return this.value}function ic(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&un(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],a=Li&&Li.running;a&&Li.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?pt.push(i):an.push(i),i.observers&&oc(i)),a||(i.state=dn)}if(pt.length>1e6)throw pt=[],new Error},!1)),e}function Sr(t){if(!t.fn)return;Si(t);const e=_i;ch(t,t.value,e)}function ch(t,e,n){let r;const s=Ee,i=Re;Re=Ee=t;try{r=t.fn(e)}catch(a){return t.pure&&(t.state=dn,t.owned&&t.owned.forEach(Si),t.owned=null),t.updatedAt=n+1,Ja(a)}finally{Re=i,Ee=s}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?ic(t,r):t.value=r,t.updatedAt=n)}function $i(t,e,n,r=dn,s){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ee,context:Ee?Ee.context:null,pure:n};return Ee===null||Ee!==ec&&(Ee.owned?Ee.owned.push(i):Ee.owned=[i]),i}function ai(t){if(t.state===0)return;if(t.state===si)return oi(t);if(t.suspense&&it(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<_i);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===dn)Sr(t);else if(t.state===si){const r=pt;pt=null,un(()=>oi(t,e[0]),!1),pt=r}}function un(t,e){if(pt)return t();let n=!1;e||(pt=[]),an?n=!0:an=[],_i++;try{const r=t();return uh(n),r}catch(r){n||(an=null),pt=null,Ja(r)}}function uh(t){if(pt&&(ac(pt),pt=null),t)return;const e=an;an=null,e.length&&un(()=>Ql(e),!1)}function ac(t){for(let e=0;e<t.length;e++)ai(t[e])}function hh(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:ai(r)}if(Te.context){if(Te.count){Te.effects||(Te.effects=[]),Te.effects.push(...t.slice(0,n));return}else Te.effects&&(t=[...Te.effects,...t],n+=Te.effects.length,delete Te.effects);Vr()}for(e=0;e<n;e++)ai(t[e])}function oi(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const s=r.state;s===dn?r!==e&&(!r.updatedAt||r.updatedAt<_i)&&ai(r):s===si&&oi(r,e)}}}function oc(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=si,n.pure?pt.push(n):an.push(n),n.observers&&oc(n))}}function Si(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),a=n.observerSlots.pop();r<s.length&&(i.sourceSlots[a]=r,s[r]=i,n.observerSlots[r]=a)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Si(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function lc(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Ja(t,e=Ee){throw lc(t)}function oa(t){if(typeof t=="function"&&!t.length)return oa(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=oa(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function dh(t,e){return function(r){let s;return z(()=>s=it(()=>(Ee.context={...Ee.context,[t]:r.value},$r(()=>r.children))),void 0),s}}const fh=Symbol("fallback");function Do(t){for(let e=0;e<t.length;e++)t[e]()}function ph(t,e,n={}){let r=[],s=[],i=[],a=0,o=e.length>1?[]:null;return Sn(()=>Do(i)),()=>{let l=t()||[],c,u;return l[rh],it(()=>{let f=l.length,g,b,m,y,_,v,C,x,k;if(f===0)a!==0&&(Do(i),i=[],r=[],s=[],a=0,o&&(o=[])),n.fallback&&(r=[fh],s[0]=dr(I=>(i[0]=I,n.fallback())),a=1);else if(a===0){for(s=new Array(f),u=0;u<f;u++)r[u]=l[u],s[u]=dr(h);a=f}else{for(m=new Array(f),y=new Array(f),o&&(_=new Array(f)),v=0,C=Math.min(a,f);v<C&&r[v]===l[v];v++);for(C=a-1,x=f-1;C>=v&&x>=v&&r[C]===l[x];C--,x--)m[x]=s[C],y[x]=i[C],o&&(_[x]=o[C]);for(g=new Map,b=new Array(x+1),u=x;u>=v;u--)k=l[u],c=g.get(k),b[u]=c===void 0?-1:c,g.set(k,u);for(c=v;c<=C;c++)k=r[c],u=g.get(k),u!==void 0&&u!==-1?(m[u]=s[c],y[u]=i[c],o&&(_[u]=o[c]),u=b[u],g.set(k,u)):i[c]();for(u=v;u<f;u++)u in m?(s[u]=m[u],i[u]=y[u],o&&(o[u]=_[u],o[u](u))):s[u]=dr(h);s=s.slice(0,a=f),r=l.slice(0)}return s});function h(f){if(i[u]=f,o){const[g,b]=P(u);return o[u]=b,e(l[u],g)}return e(l[u])}}}function d(t,e){return it(()=>t(e||{}))}function Ss(){return!0}const la={get(t,e,n){return e===ni?n:t.get(e)},has(t,e){return e===ni?!0:t.has(e)},set:Ss,deleteProperty:Ss,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Ss,deleteProperty:Ss}},ownKeys(t){return t.keys()}};function Oi(t){return(t=typeof t=="function"?t():t)?t:{}}function gh(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function ct(...t){let e=!1;for(let a=0;a<t.length;a++){const o=t[a];e=e||!!o&&ni in o,t[a]=typeof o=="function"?(e=!0,G(o)):o}if(e)return new Proxy({get(a){for(let o=t.length-1;o>=0;o--){const l=Oi(t[o])[a];if(l!==void 0)return l}},has(a){for(let o=t.length-1;o>=0;o--)if(a in Oi(t[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<t.length;o++)a.push(...Object.keys(Oi(t[o])));return[...new Set(a)]}},la);const n={},r=Object.create(null);for(let a=t.length-1;a>=0;a--){const o=t[a];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(o,u);if(!r[u])r[u]=h.get?{enumerable:!0,configurable:!0,get:gh.bind(n[u]=[h.get.bind(o)])}:h.value!==void 0?h:void 0;else{const f=n[u];f&&(h.get?f.push(h.get.bind(o)):h.value!==void 0&&f.push(()=>h.value))}}}const s={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const o=i[a],l=r[o];l&&l.get?Object.defineProperty(s,o,l):s[o]=l?l.value:void 0}return s}function It(t,...e){if(ni in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(a=>new Proxy({get(o){return a.includes(o)?t[o]:void 0},has(o){return a.includes(o)&&o in t},keys(){return a.filter(o=>o in t)}},la));return i.push(new Proxy({get(a){return s.has(a)?void 0:t[a]},has(a){return s.has(a)?!1:a in t},keys(){return Object.keys(t).filter(a=>!s.has(a))}},la)),i}const n={},r=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let o=!1,l=0;for(const c of e)c.includes(s)&&(o=!0,a?r[l][s]=i.value:Object.defineProperty(r[l],s,i)),++l;o||(a?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}function Za(t){let e,n;const r=s=>{const i=Te.context;if(i){const[o,l]=P();Te.count||(Te.count=0),Te.count++,(n||(n=t())).then(c=>{Vr(i),Te.count--,l(()=>c.default),Vr()}),e=o}else if(!e){const[o]=ah(()=>(n||(n=t())).then(l=>l.default));e=o}let a;return G(()=>(a=e())&&it(()=>{if(!i)return a(s);const o=Te.context;Vr(i);const l=a(s);return Vr(o),l}))};return r.preload=()=>n||((n=t()).then(s=>e=()=>s.default),n),r}const cc=t=>`Stale read from <${t}>.`;function Y(t){const e="fallback"in t&&{fallback:()=>t.fallback};return G(ph(()=>t.each,t.children,e||void 0))}function Z(t){const e=t.keyed,n=G(()=>t.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return G(()=>{const r=n();if(r){const s=t.children;return typeof s=="function"&&s.length>0?it(()=>s(e?r:()=>{if(!it(n))throw cc("Show");return t.when})):s}return t.fallback},void 0,void 0)}function ss(t){let e=!1;const n=(i,a)=>(e?i[1]===a[1]:!i[1]==!a[1])&&i[2]===a[2],r=$r(()=>t.children),s=G(()=>{let i=r();Array.isArray(i)||(i=[i]);for(let a=0;a<i.length;a++){const o=i[a].when;if(o)return e=!!i[a].keyed,[a,o,i[a]]}return[-1]},void 0,{equals:n});return G(()=>{const[i,a,o]=s();if(i<0)return t.fallback;const l=o.children;return typeof l=="function"&&l.length>0?it(()=>l(e?a:()=>{if(it(s)[0]!==i)throw cc("Match");return o.when})):l},void 0,void 0)}function Ct(t){return t}const mh=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],vh=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...mh]),bh=new Set(["innerHTML","textContent","innerText","children"]),yh=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),_h=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function wh(t,e){const n=_h[t];return typeof n=="object"?n[e]?n.$:void 0:n}const $h=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Sh={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function kh(t,e,n){let r=n.length,s=e.length,i=r,a=0,o=0,l=e[s-1].nextSibling,c=null;for(;a<s||o<i;){if(e[a]===n[o]){a++,o++;continue}for(;e[s-1]===n[i-1];)s--,i--;if(s===a){const u=i<r?o?n[o-1].nextSibling:n[i-o]:l;for(;o<i;)t.insertBefore(n[o++],u)}else if(i===o)for(;a<s;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===n[i-1]&&n[o]===e[s-1]){const u=e[--s].nextSibling;t.insertBefore(n[o++],e[a++].nextSibling),t.insertBefore(n[--i],u),e[s]=n[i]}else{if(!c){c=new Map;let h=o;for(;h<i;)c.set(n[h],h++)}const u=c.get(e[a]);if(u!=null)if(o<u&&u<i){let h=a,f=1,g;for(;++h<s&&h<i&&!((g=c.get(e[h]))==null||g!==u+f);)f++;if(f>u-o){const b=e[a];for(;o<u;)t.insertBefore(n[o++],b)}else t.replaceChild(n[o++],e[a++])}else a++;else e[a++].remove()}}}const Mo="_$DX_DELEGATE";function Ch(t,e,n,r={}){let s;return dr(i=>{s=i,e===document?t():p(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{s(),e.textContent=""}}function w(t,e,n){let r;const s=()=>{const a=document.createElement("template");return a.innerHTML=t,n?a.content.firstChild.firstChild:a.content.firstChild},i=e?()=>it(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function Ft(t,e=window.document){const n=e[Mo]||(e[Mo]=new Set);for(let r=0,s=t.length;r<s;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,Oh))}}function ht(t,e,n){Te.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function xh(t,e,n,r){Te.context||(r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r))}function U(t,e){Te.context||(e==null?t.removeAttribute("class"):t.className=e)}function Th(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const s=n[0];t.addEventListener(e,n[0]=i=>s.call(t,n[1],i))}else t.addEventListener(e,n)}function Eh(t,e,n={}){const r=Object.keys(e||{}),s=Object.keys(n);let i,a;for(i=0,a=s.length;i<a;i++){const o=s[i];!o||o==="undefined"||e[o]||(Bo(t,o,!1),delete n[o])}for(i=0,a=r.length;i<a;i++){const o=r[i],l=!!e[o];!o||o==="undefined"||n[o]===l||!l||(Bo(t,o,!0),n[o]=l)}return n}function Xa(t,e,n){if(!e)return n?ht(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let s,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)s=e[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function wt(t,e={},n,r){const s={};return r||z(()=>s.children=yr(t,e.children,s.children)),z(()=>e.ref&&e.ref(t)),z(()=>Ah(t,e,n,!0,s,!0)),s}function br(t,e,n){return it(()=>t(e,n))}function p(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return yr(t,e,r,n);z(s=>yr(t,e(),s,n),r)}function Ah(t,e,n,r,s={},i=!1){e||(e={});for(const a in s)if(!(a in e)){if(a==="children")continue;s[a]=jo(t,a,null,s[a],n,i)}for(const a in e){if(a==="children"){r||yr(t,e.children);continue}const o=e[a];s[a]=jo(t,a,o,s[a],n,i)}}function Lh(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Bo(t,e,n){const r=e.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)t.classList.toggle(r[s],n)}function jo(t,e,n,r,s,i){let a,o,l,c,u;if(e==="style")return Xa(t,n,r);if(e==="classList")return Eh(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);r&&t.removeEventListener(h,r),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);r&&t.removeEventListener(h,r,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),f=$h.has(h);if(!f&&r){const g=Array.isArray(r)?r[0]:r;t.removeEventListener(h,g)}(f||n)&&(Th(t,h,n,f),f&&Ft([h]))}else if(e.slice(0,5)==="attr:")ht(t,e.slice(5),n);else if((u=e.slice(0,5)==="prop:")||(l=bh.has(e))||!s&&((c=wh(e,t.tagName))||(o=vh.has(e)))||(a=t.nodeName.includes("-"))){if(u)e=e.slice(5),o=!0;else if(Te.context)return n;e==="class"||e==="className"?U(t,n):a&&!o&&!l?t[Lh(e)]=n:t[c||e]=n}else{const h=s&&e.indexOf(":")>-1&&Sh[e.split(":")[0]];h?xh(t,h,e,n):ht(t,yh[e]||e,n)}return n}function Oh(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),Te.registry&&!Te.done&&(Te.done=_$HY.done=!0);n;){const r=n[e];if(r&&!n.disabled){const s=n[`${e}Data`];if(s!==void 0?r.call(n,s,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function yr(t,e,n,r,s){if(Te.context){!n&&(n=[...t.childNodes]);let o=[];for(let l=0;l<n.length;l++){const c=n[l];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():o.push(c)}n=o}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,a=r!==void 0;if(t=a&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(Te.context)return n;if(i==="number"&&(e=e.toString()),a){let o=n[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),n=ar(t,n,r,o)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(Te.context)return n;n=ar(t,n,r)}else{if(i==="function")return z(()=>{let o=e();for(;typeof o=="function";)o=o();n=yr(t,o,n,r)}),()=>n;if(Array.isArray(e)){const o=[],l=n&&Array.isArray(n);if(ca(o,e,n,s))return z(()=>n=yr(t,o,n,r,!0)),()=>n;if(Te.context){if(!o.length)return n;if(r===void 0)return[...t.childNodes];let c=o[0],u=[c];for(;(c=c.nextSibling)!==r;)u.push(c);return n=u}if(o.length===0){if(n=ar(t,n,r),a)return n}else l?n.length===0?Fo(t,o,r):kh(t,n,o):(n&&ar(t),Fo(t,o));n=o}else if(e.nodeType){if(Te.context&&e.parentNode)return n=a?[e]:e;if(Array.isArray(n)){if(a)return n=ar(t,n,r,e);ar(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function ca(t,e,n,r){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],l=n&&n[i],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))s=ca(t,o,l)||s;else if(c==="function")if(r){for(;typeof o=="function";)o=o();s=ca(t,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||s}else t.push(o),s=!0;else{const u=String(o);l&&l.nodeType===3&&l.data===u?t.push(l):t.push(document.createTextNode(u))}}return s}function Fo(t,e,n=null){for(let r=0,s=e.length;r<s;r++)t.insertBefore(e[r],n)}function ar(t,e,n,r){if(n===void 0)return t.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const l=o.parentNode===t;!i&&!a?l?t.replaceChild(s,o):t.insertBefore(s,n):l&&o.remove()}else i=!0}}else t.insertBefore(s,n);return[s]}const Ph=!1,Rh="http://www.w3.org/2000/svg";function Ih(t,e=!1){return e?document.createElementNS(Rh,t):document.createElement(t)}function Qa(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,s=ii();let i,a=!!Te.context;return tc(()=>{a&&(ii().user=a=!1),i||(i=Ya(s,()=>G(()=>t.children)));const o=r();if(o instanceof HTMLHeadElement){const[l,c]=P(!1),u=()=>c(!0);dr(h=>p(o,()=>l()?h():i(),null)),Sn(u)}else{const l=Ih(t.isSVG?"g":"div",t.isSVG),c=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),p(c,i),o.appendChild(l),t.ref&&t.ref(l),Sn(()=>o.removeChild(l))}},void 0,{render:!a}),n}function uc(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const o of t)o.listener({...a,from:o.location,retry:l=>{l&&(n=!0),o.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:r}}let ua;function eo(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ua=window.history.state._depth}eo();function Nh(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Dh(t,e){let n=!1;return()=>{const r=ua;eo();const s=r==null?null:ua-r;if(n){n=!1;return}s&&e(s)?(n=!0,window.history.go(-s)):t()}}const Mh=/^(?:[a-z0-9]+:)?\/\//i,Bh=/^\/+|(\/)\/+$/g,hc="http://sr";function Kn(t,e=!1){const n=t.replace(Bh,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function qs(t,e,n){if(Mh.test(e))return;const r=Kn(t),s=n&&Kn(n);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Kn(e,!i)}function jh(t,e){if(t==null)throw new Error(e);return t}function Fh(t,e){return Kn(t).replace(/\/*(\*.*)?$/g,"")+Kn(e)}function dc(t){const e={};return t.searchParams.forEach((n,r)=>{e[r]=n}),e}function Uh(t,e,n){const[r,s]=t.split("/*",2),i=r.split("/").filter(Boolean),a=i.length;return o=>{const l=o.split("/").filter(Boolean),c=l.length-a;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:a?"":"/",params:{}},h=f=>n===void 0?void 0:n[f];for(let f=0;f<a;f++){const g=i[f],b=l[f],m=g[0]===":",y=m?g.slice(1):g;if(m&&Pi(b,h(y)))u.params[y]=b;else if(m||!Pi(b,g))return null;u.path+=`/${b}`}if(s){const f=c?l.slice(-c).join("/"):"";if(Pi(f,h(s)))u.params[s]=f;else return null}return u}}function Pi(t,e){const n=r=>r.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function zh(t){const[e,n]=t.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function fc(t){const e=new Map,n=ii();return new Proxy({},{get(r,s){return e.has(s)||Ya(n,()=>e.set(s,G(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function Kh(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([s,i])=>{i==null||i===""?n.delete(s):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function pc(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),r=t.slice(e.index+e[0].length);const s=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=e[1]),r=r.slice(e[0].length);return pc(r).reduce((i,a)=>[...i,...s.map(o=>o+a)],[])}const Hh=100,gc=wi(),to=wi(),ds=()=>jh(He(gc),"<A> and 'use' router primitives can be only used inside a Route."),qh=()=>He(to)||ds().base,Wh=t=>{const e=qh();return G(()=>e.resolvePath(t()))},Gh=t=>{const e=ds();return G(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},mc=()=>ds().navigatorFactory(),vc=()=>ds().location,Kw=()=>ds().params,Tn=()=>{const t=vc(),e=mc(),n=(r,s)=>{const i=it(()=>t.pathname+Kh(t.search,r)+t.hash);e(i,{scroll:!1,resolve:!1,...s})};return[t.query,n]};function Vh(t,e=""){const{component:n,load:r,children:s,info:i}=t,a=!s||Array.isArray(s)&&!s.length,o={key:t,component:n,load:r,info:i};return bc(t.path).reduce((l,c)=>{for(const u of pc(c)){const h=Fh(e,u);let f=a?h:h.split("/*",1)[0];f=f.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),l.push({...o,originalPath:c,pattern:f,matcher:Uh(f,!a,t.matchFilters)})}return l},[])}function Yh(t,e=0){return{routes:t,score:zh(t[t.length-1])*1e4-e,matcher(n){const r=[];for(let s=t.length-1;s>=0;s--){const i=t[s],a=i.matcher(n);if(!a)return null;r.unshift({...a,route:i})}return r}}}function bc(t){return Array.isArray(t)?t:[t]}function yc(t,e="",n=[],r=[]){const s=bc(t);for(let i=0,a=s.length;i<a;i++){const o=s[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const l=Vh(o,e);for(const c of l){n.push(c);const u=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!u)yc(o.children,c.pattern,n,r);else{const h=Yh([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((i,a)=>a.score-i.score)}function Ri(t,e){for(let n=0,r=t.length;n<r;n++){const s=t[n].matcher(e);if(s)return s}return[]}function Jh(t,e){const n=new URL(hc),r=G(l=>{const c=t();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),l}},n,{equals:(l,c)=>l.href===c.href}),s=G(()=>r().pathname),i=G(()=>r().search,!0),a=G(()=>r().hash),o=()=>"";return{get pathname(){return s()},get search(){return i()},get hash(){return a()},get state(){return e()},get key(){return o()},query:fc(nc(i,()=>dc(r())))}}let tn;function Zh(){return tn}function Xh(t,e,n,r={}){const{signal:[s,i],utils:a={}}=t,o=a.parsePath||(M=>M),l=a.renderPath||(M=>M),c=a.beforeLeave||uc(),u=qs("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[h,f]=P(!1),g=async M=>{f(!0);try{await oh(M)}finally{f(!1)}},[b,m]=P(s().value),[y,_]=P(s().state),v=Jh(b,y),C=[],x=P([]),k=G(()=>typeof r.transformUrl=="function"?Ri(e(),r.transformUrl(v.pathname)):Ri(e(),v.pathname)),I=fc(()=>{const M=k(),q={};for(let V=0;V<M.length;V++)Object.assign(q,M[V].params);return q}),A={pattern:u,path:()=>u,outlet:()=>null,resolvePath(M){return qs(u,M)}};return z(()=>{const{value:M,state:q}=s();it(()=>{g(()=>{tn="native",M!==b()&&m(M),_(q),x[1]([])}).then(()=>{tn=void 0})})}),{base:A,location:v,params:I,isRouting:h,renderPath:l,parsePath:o,navigatorFactory:T,matches:k,beforeLeave:c,preloadRoute:O,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:x};function K(M,q,V){it(()=>{if(typeof q=="number"){q&&(a.go?a.go(q):console.warn("Router integration does not support relative routing"));return}const{replace:B,resolve:F,scroll:X,state:ge}={replace:!1,resolve:!0,scroll:!0,...V},R=F?M.resolvePath(q):qs("",q);if(R===void 0)throw new Error(`Path '${q}' is not a routable path`);if(C.length>=Hh)throw new Error("Too many redirects");const D=b();if((R!==D||ge!==y())&&!Ph){if(c.confirm(R,V)){const L=C.push({value:D,replace:B,scroll:X,state:y()});g(()=>{tn="navigate",m(R),_(ge),x[1]([])}).then(()=>{C.length===L&&(tn=void 0,N({value:R,state:ge}))})}}})}function T(M){return M=M||He(to)||A,(q,V)=>K(M,q,V)}function N(M){const q=C[0];q&&((M.value!==q.value||M.state!==q.state)&&i({...M,replace:q.replace,scroll:q.scroll}),C.length=0)}function O(M,q){const V=Ri(e(),M.pathname),B=tn;tn="preload";for(let F in V){const{route:X,params:ge}=V[F];X.component&&X.component.preload&&X.component.preload();const{load:R}=X;q&&R&&Ya(n(),()=>R({params:ge,location:{pathname:M.pathname,search:M.search,hash:M.hash,query:dc(M),state:null,key:""},intent:"preload"}))}tn=B}}function Qh(t,e,n,r){const{base:s,location:i,params:a}=t,{pattern:o,component:l,load:c}=r().route,u=G(()=>r().path);l&&l.preload&&l.preload();const h=c?c({params:a,location:i,intent:tn||"initial"}):void 0;return{parent:e,pattern:o,path:u,outlet:()=>l?d(l,{params:a,location:i,data:h,get children(){return n()}}):n(),resolvePath(g){return qs(s.path(),g,u())}}}const ed=t=>e=>{const{base:n}=e,r=$r(()=>e.children),s=G(()=>yc(r(),e.base||""));let i;const a=Xh(t,s,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(a),d(gc.Provider,{value:a,get children(){return d(td,{routerState:a,get root(){return e.root},get load(){return e.rootLoad},get children(){return[G(()=>(i=ii())&&null),d(nd,{routerState:a,get branches(){return s()}})]}})}})};function td(t){const e=t.routerState.location,n=t.routerState.params,r=G(()=>t.load&&it(()=>{t.load({params:n,location:e,intent:Zh()||"initial"})}));return d(Z,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>d(s,{params:n,location:e,get data(){return r()},get children(){return t.children}})})}function nd(t){const e=[];let n;const r=G(nc(t.routerState.matches,(s,i,a)=>{let o=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const h=i&&i[c],f=s[c];a&&h&&f.route.key===h.route.key?l[c]=a[c]:(o=!1,e[c]&&e[c](),dr(g=>{e[c]=g,l[c]=Qh(t.routerState,l[c-1]||t.routerState.base,Uo(()=>r()[c+1]),()=>t.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),a&&o?a:(n=l[0],l)}));return Uo(()=>r()&&n)()}const Uo=t=>()=>d(Z,{get when(){return t()},keyed:!0,children:e=>d(to.Provider,{value:e,get children(){return e.outlet()}})}),Ue=t=>{const e=$r(()=>t.children);return ct(t,{get children(){return e()}})};function rd([t,e],n,r){return[n?()=>n(t()):t,r?s=>e(r(s)):e]}function sd(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function id(t){let e=!1;const n=s=>typeof s=="string"?{value:s}:s,r=rd(P(n(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),s));return t.init&&Sn(t.init((s=t.get())=>{e=!0,r[1](n(s)),e=!1})),ed({signal:r,create:t.create,utils:t.utils})}function ad(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function od(t,e){const n=sd(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const ld=new Map;function cd(t=!0,e=!1,n="/_server",r){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let o={};function l(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function c(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const y=m.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!y||e&&!y.hasAttribute("link"))return;const _=l(y),v=_?y.href.baseVal:y.href;if((_?y.target.baseVal:y.target)||!v&&!y.hasAttribute("state"))return;const x=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||x&&x.includes("external"))return;const k=_?new URL(v,document.baseURI):new URL(v);if(!(k.origin!==window.location.origin||i&&k.pathname&&!k.pathname.toLowerCase().startsWith(i.toLowerCase())))return[y,k]}function u(m){const y=c(m);if(!y)return;const[_,v]=y,C=s.parsePath(v.pathname+v.search+v.hash),x=_.getAttribute("state");m.preventDefault(),a(C,{resolve:!1,replace:_.hasAttribute("replace"),scroll:!_.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function h(m){const y=c(m);if(!y)return;const[_,v]=y;typeof r=="function"&&(v.pathname=r(v.pathname)),o[v.pathname]||s.preloadRoute(v,_.getAttribute("preload")!=="false")}function f(m){const y=c(m);if(!y)return;const[_,v]=y;typeof r=="function"&&(v.pathname=r(v.pathname)),!o[v.pathname]&&(o[v.pathname]=setTimeout(()=>{s.preloadRoute(v,_.getAttribute("preload")!=="false"),delete o[v.pathname]},200))}function g(m){const y=c(m);if(!y)return;const[,_]=y;typeof r=="function"&&(_.pathname=r(_.pathname)),o[_.pathname]&&(clearTimeout(o[_.pathname]),delete o[_.pathname])}function b(m){if(m.defaultPrevented)return;let y=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!y)return;if(!y.startsWith("https://action/")){const v=new URL(y,hc);if(y=s.parsePath(v.pathname+v.search),!y.startsWith(n))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const _=ld.get(y);if(_){m.preventDefault();const v=new FormData(m.target);m.submitter&&m.submitter.name&&v.append(m.submitter.name,m.submitter.value),_.call({r:s,f:m.target},v)}}Ft(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",f),document.addEventListener("mouseout",g),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",b),Sn(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",f),document.removeEventListener("mouseout",g),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",b)})}}function ud(t){const e=()=>{const r=window.location.pathname+window.location.search;return{value:t.transformUrl?t.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},n=uc();return id({get:e,set({value:r,replace:s,scroll:i,state:a}){s?window.history.replaceState(Nh(a),"",r):window.history.pushState(a,"",r),od(window.location.hash.slice(1),i),eo()},init:r=>ad(window,"popstate",Dh(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:cd(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(t)}var hd=w("<a>");function Un(t){t=ct({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=It(t,["href","state","class","activeClass","inactiveClass","end"]),n=Wh(()=>t.href),r=Gh(n),s=vc(),i=G(()=>{const a=n();if(a===void 0)return[!1,!1];const o=Kn(a.split(/[?#]/,1)[0]).toLowerCase(),l=Kn(s.pathname).toLowerCase();return[t.end?o===l:l.startsWith(o),o===l]});return(()=>{var a=hd();return wt(a,ct(e,{get href(){return r()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),a})()}var ha=function(t,e){return ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},ha(t,e)};function kr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ha(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function dd(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function _c(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _r(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function da(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function fa(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function fr(t){return this instanceof fr?(this.v=t,this):new fr(t)}function fd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){r[f]&&(s[f]=function(g){return new Promise(function(b,m){i.push([f,g,b,m])>1||o(f,g)})})}function o(f,g){try{l(r[f](g))}catch(b){h(i[0][3],b)}}function l(f){f.value instanceof fr?Promise.resolve(f.value.v).then(c,u):h(i[0][2],f)}function c(f){o("next",f)}function u(f){o("throw",f)}function h(f,g){f(g),i.shift(),i.length&&o(i[0][0],i[0][1])}}function pd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _r=="function"?_r(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,l){a=t[i](a),s(o,l,a.done,a.value)})}}function s(i,a,o,l){Promise.resolve(l).then(function(c){i({value:c,done:o})},a)}}function et(t){return typeof t=="function"}function wc(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ii=wc(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function pa(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ki=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=_r(a),l=o.next();!l.done;l=o.next()){var c=l.value;c.remove(this)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else a.remove(this);var u=this.initialTeardown;if(et(u))try{u()}catch(m){i=m instanceof Ii?m.errors:[m]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=_r(h),g=f.next();!g.done;g=f.next()){var b=g.value;try{zo(b)}catch(m){i=i??[],m instanceof Ii?i=fa(fa([],da(i)),da(m.errors)):i.push(m)}}}catch(m){r={error:m}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}}if(i)throw new Ii(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)zo(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&pa(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&pa(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),$c=ki.EMPTY;function Sc(t){return t instanceof ki||t&&"closed"in t&&et(t.remove)&&et(t.add)&&et(t.unsubscribe)}function zo(t){et(t)?t():t.unsubscribe()}var kc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cc={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,fa([t,e],da(n)))},clearTimeout:function(t){var e=Cc.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xc(t){Cc.setTimeout(function(){throw t})}function Ko(){}function Ws(t){t()}var no=function(t){kr(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Sc(n)&&n.add(r)):r.destination=bd,r}return e.create=function(n,r,s){return new ga(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ki),gd=Function.prototype.bind;function Ni(t,e){return gd.call(t,e)}var md=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){ks(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){ks(r)}else ks(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ks(n)}},t}(),ga=function(t){kr(e,t);function e(n,r,s){var i=t.call(this)||this,a;if(et(n)||!n)a={next:n??void 0,error:r??void 0,complete:s??void 0};else{var o;i&&kc.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=function(){return i.unsubscribe()},a={next:n.next&&Ni(n.next,o),error:n.error&&Ni(n.error,o),complete:n.complete&&Ni(n.complete,o)}):a=n}return i.destination=new md(a),i}return e}(no);function ks(t){xc(t)}function vd(t){throw t}var bd={closed:!0,next:Ko,error:vd,complete:Ko},ro=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Tc(t){return t}function yd(t){return t.length===0?Tc:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var bt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=wd(e)?e:new ga(e,n,r);return Ws(function(){var a=s,o=a.operator,l=a.source;i.add(o?o.call(i,l):l?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Ho(n),new n(function(s,i){var a=new ga({next:function(o){try{e(o)}catch(l){i(l),a.unsubscribe()}},error:i,complete:s});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ro]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return yd(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Ho(e),new e(function(r,s){var i;n.subscribe(function(a){return i=a},function(a){return s(a)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function Ho(t){var e;return(e=t??kc.Promise)!==null&&e!==void 0?e:Promise}function _d(t){return t&&et(t.next)&&et(t.error)&&et(t.complete)}function wd(t){return t&&t instanceof no||_d(t)&&Sc(t)}function $d(t){return et(t?.lift)}function Zn(t){return function(e){if($d(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Gn(t,e,n,r,s){return new Sd(t,e,n,r,s)}var Sd=function(t){kr(e,t);function e(n,r,s,i,a,o){var l=t.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=i?function(c){try{i(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(no),kd=wc(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ec=function(t){kr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new qo(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new kd},e.prototype.next=function(n){var r=this;Ws(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=_r(r.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(n)}}catch(c){s={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Ws(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Ws(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,a=s.isStopped,o=s.observers;return i||a?$c:(this.currentObservers=null,o.push(n),new ki(function(){r.currentObservers=null,pa(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,a=r.isStopped;s?n.error(i):a&&n.complete()},e.prototype.asObservable=function(){var n=new bt;return n.source=this,n},e.create=function(n,r){return new qo(n,r)},e}(bt),qo=function(t){kr(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:$c},e}(Ec),Cd=function(t){kr(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,i=n._value;if(r)throw s;return this._throwIfClosed(),i},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Ec),xd=new bt(function(t){return t.complete()});function Td(t){return t&&et(t.schedule)}function Ed(t){return t[t.length-1]}function Ad(t){return Td(Ed(t))?t.pop():void 0}var Ac=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Lc(t){return et(t?.then)}function Oc(t){return et(t[ro])}function Pc(t){return Symbol.asyncIterator&&et(t?.[Symbol.asyncIterator])}function Rc(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ld(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ic=Ld();function Nc(t){return et(t?.[Ic])}function Dc(t){return fd(this,arguments,function(){var n,r,s,i;return _c(this,function(a){switch(a.label){case 0:n=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,fr(n.read())];case 3:return r=a.sent(),s=r.value,i=r.done,i?[4,fr(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,fr(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Mc(t){return et(t?.getReader)}function Cr(t){if(t instanceof bt)return t;if(t!=null){if(Oc(t))return Od(t);if(Ac(t))return Pd(t);if(Lc(t))return Rd(t);if(Pc(t))return Bc(t);if(Nc(t))return Id(t);if(Mc(t))return Nd(t)}throw Rc(t)}function Od(t){return new bt(function(e){var n=t[ro]();if(et(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Pd(t){return new bt(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Rd(t){return new bt(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,xc)})}function Id(t){return new bt(function(e){var n,r;try{for(var s=_r(t),i=s.next();!i.done;i=s.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(o){n={error:o}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function Bc(t){return new bt(function(e){Dd(t,e).catch(function(n){return e.error(n)})})}function Nd(t){return Bc(Dc(t))}function Dd(t,e){var n,r,s,i;return dd(this,void 0,void 0,function(){var a,o;return _c(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=pd(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),s={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function wn(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function jc(t,e){return e===void 0&&(e=0),Zn(function(n,r){n.subscribe(Gn(r,function(s){return wn(r,t,function(){return r.next(s)},e)},function(){return wn(r,t,function(){return r.complete()},e)},function(s){return wn(r,t,function(){return r.error(s)},e)}))})}function Fc(t,e){return e===void 0&&(e=0),Zn(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Md(t,e){return Cr(t).pipe(Fc(e),jc(e))}function Bd(t,e){return Cr(t).pipe(Fc(e),jc(e))}function jd(t,e){return new bt(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Fd(t,e){return new bt(function(n){var r;return wn(n,e,function(){r=t[Ic](),wn(n,e,function(){var s,i,a;try{s=r.next(),i=s.value,a=s.done}catch(o){n.error(o);return}a?n.complete():n.next(i)},0,!0)}),function(){return et(r?.return)&&r.return()}})}function Uc(t,e){if(!t)throw new Error("Iterable cannot be null");return new bt(function(n){wn(n,e,function(){var r=t[Symbol.asyncIterator]();wn(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function Ud(t,e){return Uc(Dc(t),e)}function zd(t,e){if(t!=null){if(Oc(t))return Md(t,e);if(Ac(t))return jd(t,e);if(Lc(t))return Bd(t,e);if(Pc(t))return Uc(t,e);if(Nc(t))return Fd(t,e);if(Mc(t))return Ud(t,e)}throw Rc(t)}function Kd(t,e){return e?zd(t,e):Cr(t)}function je(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ad(t);return Kd(t,n)}function Hd(t,e){return Zn(function(n,r){var s=0;n.subscribe(Gn(r,function(i){r.next(t.call(e,i,s++))}))})}function qd(t,e,n,r,s,i,a,o){var l=[],c=0,u=0,h=!1,f=function(){h&&!l.length&&!c&&e.complete()},g=function(m){return c<r?b(m):l.push(m)},b=function(m){i&&e.next(m),c++;var y=!1;Cr(n(m,u++)).subscribe(Gn(e,function(_){s?.(_),i?g(_):e.next(_)},function(){y=!0},void 0,function(){if(y)try{c--;for(var _=function(){var v=l.shift();a?wn(e,a,function(){return b(v)}):b(v)};l.length&&c<r;)_();f()}catch(v){e.error(v)}}))};return t.subscribe(Gn(e,g,function(){h=!0,f()})),function(){o?.()}}function ma(t,e,n){return n===void 0&&(n=1/0),et(e)?ma(function(r,s){return Hd(function(i,a){return e(r,i,s,a)})(Cr(t(r,s)))},n):(typeof e=="number"&&(n=e),Zn(function(r,s){return qd(r,s,t,n)}))}function Xn(t){return Zn(function(e,n){var r=null,s=!1,i;r=e.subscribe(Gn(n,void 0,void 0,function(a){i=Cr(t(a,Xn(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function ze(t,e){return et(e)?ma(t,e,1):ma(t,1)}function we(t){return t<=0?function(){return xd}:Zn(function(e,n){var r=0;e.subscribe(Gn(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Qe(t,e,n){var r=et(t)||e||n?{next:t,error:e,complete:n}:t;return r?Zn(function(s,i){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var o=!0;s.subscribe(Gn(i,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},function(){var l;o=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},function(l){var c;o=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},function(){var l,c;o&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Tc}class Wd{loggedIn=P({});tokenValue=P("");set token(e){this.tokenValue[1](e),this.loggedIn[1]({Authorization:`Bearer ${e}`})}get token(){return this.tokenValue[0]}clearToken(){this.loggedIn[1]({Authorization:""})}toObservable(e){return new bt(n=>{e.then(r=>{n.next(r)}).catch(r=>n.error(r)).finally(()=>n.complete())})}post(e,n,r){return new bt(s=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r?.headers,...this.loggedIn[0]()},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{s.next(i)}).catch(i=>s.error(i)).finally(()=>s.complete())})}get(e,n){return new bt(r=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...n?.headers,...this.loggedIn[0]()}}).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{r.next(s)}).catch(s=>r.error(s)).finally(()=>r.complete())})}}const fe=new Wd,Ke=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,st=Object.keys,ft=Array.isArray;function yt(t,e){return typeof e!="object"||st(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ke.Promise||(Ke.Promise=Promise);const is=Object.getPrototypeOf,Gd={}.hasOwnProperty;function Et(t,e){return Gd.call(t,e)}function wr(t,e){typeof e=="function"&&(e=e(is(t))),(typeof Reflect>"u"?st:Reflect.ownKeys)(e).forEach(n=>{on(t,n,e[n])})}const zc=Object.defineProperty;function on(t,e,n,r){zc(t,e,yt(n&&Et(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function pr(t){return{from:function(e){return t.prototype=Object.create(e.prototype),on(t.prototype,"constructor",t),{extend:wr.bind(null,t.prototype)}}}}const Vd=Object.getOwnPropertyDescriptor;function so(t,e){let n;return Vd(t,e)||(n=is(t))&&so(n,e)}const Yd=[].slice;function li(t,e,n){return Yd.call(t,e,n)}function Kc(t,e){return e(t)}function Yr(t){if(!t)throw new Error("Assertion Failed")}function Hc(t){Ke.setImmediate?setImmediate(t):setTimeout(t,0)}function qc(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function ln(t,e){if(Et(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=ln(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(a!==-1){var o=t[e.substr(0,a)];return o===void 0?void 0:ln(o,e.substr(a+1))}}function jt(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Yr(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)jt(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var a=e.substr(0,i),o=e.substr(i+1);if(o==="")n===void 0?ft(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var l=t[a];l&&Et(t,a)||(l=t[a]={}),jt(l,o,n)}}else n===void 0?ft(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Wc(t){var e={};for(var n in t)Et(t,n)&&(e[n]=t[n]);return e}const Jd=[].concat;function Gc(t){return Jd.apply([],t)}const Vc="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Gc([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ke[t]),Zd=Vc.map(t=>Ke[t]);qc(Vc,t=>[t,!0]);let bn=null;function fs(t){bn=typeof WeakMap<"u"&&new WeakMap;const e=va(t);return bn=null,e}function va(t){if(!t||typeof t!="object")return t;let e=bn&&bn.get(t);if(e)return e;if(ft(t)){e=[],bn&&bn.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(va(t[n]))}else if(Zd.indexOf(t.constructor)>=0)e=t;else{const i=is(t);for(var s in e=i===Object.prototype?{}:Object.create(i),bn&&bn.set(t,e),t)Et(t,s)&&(e[s]=va(t[s]))}return e}const{toString:Xd}={};function ba(t){return Xd.call(t).slice(8,-1)}const ya=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qd=typeof ya=="symbol"?function(t){var e;return t!=null&&(e=t[ya])&&e.apply(t)}:function(){return null},hr={};function rn(t){var e,n,r,s;if(arguments.length===1){if(ft(t))return t.slice();if(this===hr&&typeof t=="string")return[t];if(s=Qd(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const io=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Jt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Yc(t,e){Jt=t,Jc=e}var Jc=()=>!0;const ef=!new Error("").stack;function Qn(){if(ef)try{throw Qn.arguments,new Error}catch(t){return t}return new Error}function _a(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Jc).map(r=>`
`+r).join("")):""}var Zc=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ao=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zc),tf={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function gr(t,e){this._e=Qn(),this.name=t,this.message=e}function Xc(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function ci(t,e,n,r){this._e=Qn(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Xc(t,e)}function Zr(t,e){this._e=Qn(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Xc(t,e)}pr(gr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+_a(this._e,2))}},toString:function(){return this.name+": "+this.message}}),pr(ci).from(gr),pr(Zr).from(gr);var oo=ao.reduce((t,e)=>(t[e]=e+"Error",t),{});const nf=gr;var he=ao.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=Qn(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=tf[e]||n,this.inner=null)}return pr(r).from(nf),t[e]=r,t},{});he.Syntax=SyntaxError,he.Type=TypeError,he.Range=RangeError;var Wo=Zc.reduce((t,e)=>(t[e+"Error"]=he[e],t),{}),Gs=ao.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=he[e]),t),{});function De(){}function as(t){return t}function rf(t,e){return t==null||t===as?e:function(n){return e(t(n))}}function Vn(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function sf(t,e){return t===De?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Vn(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Vn(s,this.onerror):s),i!==void 0?i:n}}function af(t,e){return t===De?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Vn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Vn(r,this.onerror):r)}}function of(t,e){return t===De?e:function(n){var r=t.apply(this,arguments);yt(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Vn(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Vn(i,this.onerror):i),r===void 0?a===void 0?void 0:a:yt(r,a)}}function lf(t,e){return t===De?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function lo(t,e){return t===De?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}Gs.ModifyError=ci,Gs.DexieError=gr,Gs.BulkError=Zr;var os={};const Qc=100,[wa,ui,$a]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,is(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,is(e),t]})(),eu=ui&&ui.then,Vs=wa&&wa.constructor,co=!!$a;var Sa=!1,cf=$a?()=>{$a.then(Cs)}:Ke.setImmediate?setImmediate.bind(null,Cs):Ke.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Cs(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Cs,0)},Xr=function(t,e){Jr.push([t,e]),hi&&(cf(),hi=!1)},ka=!0,hi=!0,Hn=[],Ys=[],Ca=null,xa=as,mr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Yo,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Yo(t[0],t[1])}catch{}})}},ue=mr,Jr=[],qn=0,Js=[];function se(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=De,this._lib=!1;var e=this._PSD=ue;if(Jt&&(this._stackHolder=Qn(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==os)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ea(this,this._value))}this._state=null,this._value=null,++e.ref,nu(this,t)}const Ta={get:function(){var t=ue,e=di;function n(r,s){var i=!t.global&&(t!==ue||e!==di);const a=i&&!hn();var o=new se((l,c)=>{uo(this,new tu(fi(r,t,i,a),fi(s,t,i,a),l,c,t))});return Jt&&iu(o,this),o}return n.prototype=os,n},set:function(t){on(this,"then",t&&t.prototype===os?Ta:{get:function(){return t},set:Ta.set})}};function tu(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function nu(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ps();n&&typeof n.then=="function"?nu(t,(s,i)=>{n instanceof se?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,ru(t)),r&&gs()}},Ea.bind(null,t))}catch(n){Ea(t,n)}}function Ea(t,e){if(Ys.push(e),t._state===null){var n=t._lib&&ps();e=xa(e),t._state=!1,t._value=e,Jt&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(a){s&&s(a)}}(()=>{var r=so(e,"stack");e._promise=t,on(e,"stack",{get:()=>Sa?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Hn.some(s=>s._value===r._value)||Hn.push(r)}(t),ru(t),n&&gs()}}function ru(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)uo(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),qn===0&&(++qn,Xr(()=>{--qn==0&&ho()},[]))}function uo(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++qn,Xr(uf,[n,t,e])}else t._listeners.push(e)}function uf(t,e,n){try{Ca=e;var r,s=e._value;e._state?r=t(s):(Ys.length&&(Ys=[]),r=t(s),Ys.indexOf(s)===-1&&function(i){for(var a=Hn.length;a;)if(Hn[--a]._value===i._value)return void Hn.splice(a,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{Ca=null,--qn==0&&ho(),--n.psd.ref||n.psd.finalize()}}function su(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,a=t._value;a!=null?(s=a.name||"Error",i=a.message||a,r=_a(a,0)):(s=a,i=""),e.push(s+(i?": "+i:"")+r)}return Jt&&((r=_a(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&su(t._prev,e,n)),e}function iu(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Cs(){ps()&&gs()}function ps(){var t=ka;return ka=!1,hi=!1,t}function gs(){var t,e,n;do for(;Jr.length>0;)for(t=Jr,Jr=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Jr.length>0);ka=!0,hi=!0}function ho(){var t=Hn;Hn=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Js.slice(0),n=e.length;n;)e[--n]()}function xs(t){return new se(os,!1,t)}function We(t,e){var n=ue;return function(){var r=ps(),s=ue;try{return Cn(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{Cn(s,!1),r&&gs()}}}wr(se.prototype,{then:Ta,_then:function(t,e){uo(this,new tu(null,null,t,e,ue))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):xs(r)):this.then(null,r=>r&&r.name===e?n(r):xs(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),xs(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Sa=!0;var t=su(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Sa=!1}}},timeout:function(t,e){return t<1/0?new se((n,r)=>{var s=setTimeout(()=>r(new he.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&on(se.prototype,Symbol.toStringTag,"Dexie.Promise"),mr.env=au(),wr(se,{all:function(){var t=rn.apply(null,arguments).map(Ts);return new se(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>se.resolve(s).then(a=>{t[i]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof se)return t;if(t&&typeof t.then=="function")return new se((n,r)=>{t.then(n,r)});var e=new se(os,!0,t);return iu(e,Ca),e},reject:xs,race:function(){var t=rn.apply(null,arguments).map(Ts);return new se((e,n)=>{t.map(r=>se.resolve(r).then(e,n))})},PSD:{get:()=>ue,set:t=>ue=t},totalEchoes:{get:()=>di},newPSD:kn,usePSD:Tr,scheduler:{get:()=>Xr,set:t=>{Xr=t}},rejectionMapper:{get:()=>xa,set:t=>{xa=t}},follow:(t,e)=>new se((n,r)=>kn((s,i)=>{var a=ue;a.unhandleds=[],a.onunhandled=i,a.finalize=Vn(function(){(function(o){function l(){o(),Js.splice(Js.indexOf(l),1)}Js.push(l),++qn,Xr(()=>{--qn==0&&ho()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},a.finalize),t()},e,n,r))}),Vs&&(Vs.allSettled&&on(se,"allSettled",function(){const t=rn.apply(null,arguments).map(Ts);return new se(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>se.resolve(s).then(a=>r[i]={status:"fulfilled",value:a},a=>r[i]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),Vs.any&&typeof AggregateError<"u"&&on(se,"any",function(){const t=rn.apply(null,arguments).map(Ts);return new se((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,a)=>se.resolve(i).then(o=>e(o),o=>{s[a]=o,--r||n(new AggregateError(s))}))})}));const dt={awaits:0,echoes:0,id:0};var hf=0,Zs=[],Di=0,di=0,df=0;function kn(t,e,n,r){var s=ue,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++df;var a=mr.env;i.env=co?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject,nthen:Go(a.nthen,i),gthen:Go(a.gthen,i)}:{},e&&yt(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=Tr(i,t,n,r);return i.ref===0&&i.finalize(),o}function xr(){return dt.id||(dt.id=++hf),++dt.awaits,dt.echoes+=Qc,dt.id}function hn(){return!!dt.awaits&&(--dt.awaits==0&&(dt.id=0),dt.echoes=dt.awaits*Qc,!0)}function Ts(t){return dt.echoes&&t&&t.constructor===Vs?(xr(),t.then(e=>(hn(),e),e=>(hn(),ot(e)))):t}function ff(t){++di,dt.echoes&&--dt.echoes!=0||(dt.echoes=dt.id=0),Zs.push(ue),Cn(t,!0)}function pf(){var t=Zs[Zs.length-1];Zs.pop(),Cn(t,!1)}function Cn(t,e){var n=ue;if((e?!dt.echoes||Di++&&t===ue:!Di||--Di&&t===ue)||ou(e?ff.bind(null,t):pf),t!==ue&&(ue=t,n===mr&&(mr.env=au()),co)){var r=mr.env.Promise,s=t.env;ui.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(Ke,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function au(){var t=Ke.Promise;return co?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ke,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ui.then,gthen:t.prototype.then}:{}}function Tr(t,e,n,r,s){var i=ue;try{return Cn(t,!0),e(n,r,s)}finally{Cn(i,!1)}}function ou(t){eu.call(wa,t)}function fi(t,e,n,r){return typeof t!="function"?t:function(){var s=ue;n&&xr(),Cn(e,!0);try{return t.apply(this,arguments)}finally{Cn(s,!1),r&&ou(hn)}}}function Go(t,e){return function(n,r){return t.call(this,fi(n,e),fi(r,e))}}(""+eu).indexOf("[native code]")===-1&&(xr=hn=De);const Vo="unhandledrejection";function Yo(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(Ke.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Vo,!0,!0),yt(r,s)):Ke.CustomEvent&&yt(r=new CustomEvent(Vo,{detail:s}),s),r&&Ke.dispatchEvent&&(dispatchEvent(r),!Ke.PromiseRejectionEvent&&Ke.onunhandledrejection))try{Ke.onunhandledrejection(r)}catch{}Jt&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ot=se.reject;function Aa(t,e,n,r){if(t.idbdb&&(t._state.openComplete||ue.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===oo.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Aa(t,e,n,r))):ot(i)}return s._promise(e,(i,a)=>kn(()=>(ue.trans=s,r(i,a,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return ot(new he.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ot(new he.DatabaseClosed);t.open().catch(De)}return t._state.dbReadyPromise.then(()=>Aa(t,e,n,r))}const Jo="3.2.4",zn="￿",La=-1/0,Xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lu="String expected.",Qr=[],Ci=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),gf=Ci,mf=Ci,cu=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),xi="__dbnames",Mi="readonly",Bi="readwrite";function Yn(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const uu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Es(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=fs(e))[t],e)}class vf{_trans(e,n,r){const s=this._tx||ue.trans,i=this.name;function a(l,c,u){if(!u.schema[i])throw new he.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const o=ps();try{return s&&s.db===this.db?s===ue.trans?s._promise(e,a,r):kn(()=>s._promise(e,a,r),{trans:s,transless:ue.transless||ue}):Aa(this.db,e,[this.name],a)}finally{o&&gs()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ft(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=st(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==zn)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Jt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function a(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[o,l]=n.reduce(([c,u],h)=>{const f=s[h],g=e[h];return[c||f,c||!f?Yn(u,f&&f.multi?b=>{const m=ln(b,h);return ft(m)&&m.some(y=>a(g,y))}:b=>a(g,ln(b,h))):u]},[null,null]);return o?this.where(o.name).equals(e[o.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ft(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(Et(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){yt(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Es(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[i]})).then(a=>a.numFailures?se.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{jt(e,s,a)}catch{}return a})}update(e,n){if(typeof e!="object"||ft(e))return this.where(":id").equals(e).modify(n);{const r=ln(e,this.schema.primKey.keyPath);if(r===void 0)return ot(new he.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?st(n).forEach(s=>{jt(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Es(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[i],keys:n!=null?[n]:null})).then(a=>a.numFailures?se.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{jt(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?se.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:uu})).then(e=>e.numFailures?se.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:l}=this.schema.primKey;if(l&&s)throw new he.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&o?e.map(Es(l)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:f,lastResult:g,failures:b})=>{if(h===0)return i?f:g;throw new Zr(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,b)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:l}=this.schema.primKey;if(l&&s)throw new he.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&o?e.map(Es(l)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:f,lastResult:g,failures:b})=>{if(h===0)return i?f:g;throw new Zr(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,b)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new Zr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function es(t){var e={},n=function(a,o){if(o){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(a,o,l){if(typeof a!="object"){var c;o||(o=lf),l||(l=De);var u={subscribers:[],fire:l,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=o(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(f){return f!==h}),u.fire=u.subscribers.reduce(o,l)}};return e[a]=n[a]=u,u}st(c=a).forEach(function(h){var f=c[h];if(ft(f))i(h,c[h][0],c[h][1]);else{if(f!=="asap")throw new he.InvalidArgument("Invalid event config");var g=i(h,as,function(){for(var b=arguments.length,m=new Array(b);b--;)m[b]=arguments[b];g.subscribers.forEach(function(y){Hc(function(){y.apply(null,m)})})})}})}}function Dr(t,e){return pr(e).from({prototype:t}),e}function or(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function ji(t,e){t.filter=Yn(t.filter,e)}function Fi(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Yn(r(),e()):e,t.justLimit=n&&!r}function Xs(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new he.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Zo(t,e,n){const r=Xs(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function As(t,e,n,r){const s=t.replayFilter?Yn(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},a=(o,l,c)=>{if(!s||s(l,c,f=>l.stop(f),f=>l.fail(f))){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),Et(i,h)||(i[h]=!0,e(o,l,c))}};return Promise.all([t.or._iterate(a,n),Xo(Zo(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return Xo(Zo(t,r,n),Yn(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function Xo(t,e,n,r){var s=We(r?(i,a,o)=>n(r(i),a,o):n);return t.then(i=>{if(i)return i.start(()=>{var a=()=>i.continue();e&&!e(i,o=>a=o,o=>{i.stop(o),a=De},o=>{i.fail(o),a=De})||s(i.value,i,o=>a=o),a()})})}function vt(t,e){try{const n=Qo(t),r=Qo(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const a=s.length,o=i.length,l=a<o?a:o;for(let c=0;c<l;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return a===o?0:a<o?-1:1}(el(t),el(e));case"Array":return function(s,i){const a=s.length,o=i.length,l=a<o?a:o;for(let c=0;c<l;++c){const u=vt(s[c],i[c]);if(u!==0)return u}return a===o?0:a<o?-1:1}(t,e)}}catch{}return NaN}function Qo(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=ba(t);return n==="ArrayBuffer"?"binary":n}function el(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class bf{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ot.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ot.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Yn(n.algorithm,e)}_iterate(e,n){return As(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&yt(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>As(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(or(r,!0))return s.count({trans:n,query:{index:Xs(r,s.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var i=0;return As(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function a(c,u){return u?a(c[r[u]],u-1):c[s]}var o=this._ctx.dir==="next"?1:-1;function l(c,u){var h=a(c,i),f=a(u,i);return h<f?-o:h>f?o:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&or(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=Xs(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return As(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,or(n)?Fi(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):Fi(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Fi(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return ji(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return ji(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=Yn(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&or(n,!0)&&n.limit>0)return this._read(s=>{var i=Xs(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return ji(this._ctx,function(s){var i=s.primaryKey.toString(),a=Et(r,i);return r[i]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=st(e),a=i.length;s=function(m){for(var y=!1,_=0;_<a;++_){var v=i[_],C=e[v];ln(m,v)!==C&&(jt(m,v,C),y=!0)}return y}}const o=n.table.core,{outbound:l,extractKey:c}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let f=0;const g=[],b=(m,y)=>{const{failures:_,numFailures:v}=y;f+=m-v;for(let C of st(_))h.push(_[C])};return this.clone().primaryKeys().then(m=>{const y=_=>{const v=Math.min(u,m.length-_);return o.getMany({trans:r,keys:m.slice(_,_+v),cache:"immutable"}).then(C=>{const x=[],k=[],I=l?[]:null,A=[];for(let T=0;T<v;++T){const N=C[T],O={value:fs(N),primKey:m[_+T]};s.call(O,O.value,O)!==!1&&(O.value==null?A.push(m[_+T]):l||vt(c(N),c(O.value))===0?(k.push(O.value),l&&I.push(m[_+T])):(A.push(m[_+T]),x.push(O.value)))}const K=or(n)&&n.limit===1/0&&(typeof e!="function"||e===Ui)&&{index:n.index,range:n.range};return Promise.resolve(x.length>0&&o.mutate({trans:r,type:"add",values:x}).then(T=>{for(let N in T.failures)A.splice(parseInt(N),1);b(x.length,T)})).then(()=>(k.length>0||K&&typeof e=="object")&&o.mutate({trans:r,type:"put",keys:I,values:k,criteria:K,changeSpec:typeof e!="function"&&e}).then(T=>b(k.length,T))).then(()=>(A.length>0||K&&e===Ui)&&o.mutate({trans:r,type:"delete",keys:A,criteria:K}).then(T=>b(A.length,T))).then(()=>m.length>_+v&&y(_+u))})};return y(0).then(()=>{if(h.length>0)throw new ci("Error modifying one or more objects",h,f,g);return m.length})})})}delete(){var e=this._ctx,n=e.range;return or(e)&&(e.isPrimKey&&!mf||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:o,lastResult:l,results:c,numFailures:u})=>{if(u)throw new ci("Could not delete some values",Object.keys(o).map(h=>o[h]),a-u);return a-u}))}):this.modify(Ui)}}const Ui=(t,e)=>e.value=null;function yf(t,e){return t<e?-1:t===e?0:1}function _f(t,e){return t>e?-1:t===e?0:1}function xt(t,e,n){var r=t instanceof du?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function lr(t){return new t.Collection(t,()=>hu("")).limit(0)}function wf(t,e,n,r,s,i){for(var a=Math.min(t.length,r.length),o=-1,l=0;l<a;++l){var c=e[l];if(c!==r[l])return s(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):s(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;s(t[l],c)<0&&(o=l)}return a<r.length&&i==="next"?t+n.substr(t.length):a<t.length&&i==="prev"?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function Ls(t,e,n,r){var s,i,a,o,l,c,u,h=n.length;if(!n.every(m=>typeof m=="string"))return xt(t,lu);function f(m){s=function(_){return _==="next"?v=>v.toUpperCase():v=>v.toLowerCase()}(m),i=function(_){return _==="next"?v=>v.toLowerCase():v=>v.toUpperCase()}(m),a=m==="next"?yf:_f;var y=n.map(function(_){return{lower:i(_),upper:s(_)}}).sort(function(_,v){return a(_.lower,v.lower)});o=y.map(function(_){return _.upper}),l=y.map(function(_){return _.lower}),c=m,u=m==="next"?"":r}f("next");var g=new t.Collection(t,()=>vn(o[0],l[h-1]+r));g._ondirectionchange=function(m){f(m)};var b=0;return g._addAlgorithm(function(m,y,_){var v=m.key;if(typeof v!="string")return!1;var C=i(v);if(e(C,l,b))return!0;for(var x=null,k=b;k<h;++k){var I=wf(v,C,o[k],l[k],a,c);I===null&&x===null?b=k+1:(x===null||a(x,I)>0)&&(x=I)}return y(x!==null?function(){m.continue(x+u)}:_),!1}),g}function vn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function hu(t){return{type:1,lower:t,upper:t}}class du{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?lr(this):new this.Collection(this,()=>vn(e,n,!r,!s))}catch{return xt(this,Xt)}}equals(e){return e==null?xt(this,Xt):new this.Collection(this,()=>hu(e))}above(e){return e==null?xt(this,Xt):new this.Collection(this,()=>vn(e,void 0,!0))}aboveOrEqual(e){return e==null?xt(this,Xt):new this.Collection(this,()=>vn(e,void 0,!1))}below(e){return e==null?xt(this,Xt):new this.Collection(this,()=>vn(void 0,e,!1,!0))}belowOrEqual(e){return e==null?xt(this,Xt):new this.Collection(this,()=>vn(void 0,e))}startsWith(e){return typeof e!="string"?xt(this,lu):this.between(e,e+zn,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ls(this,(n,r)=>n.indexOf(r[0])===0,[e],zn)}equalsIgnoreCase(e){return Ls(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=rn.apply(hr,arguments);return e.length===0?lr(this):Ls(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=rn.apply(hr,arguments);return e.length===0?lr(this):Ls(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,zn)}anyOf(){const e=rn.apply(hr,arguments);let n=this._cmp;try{e.sort(n)}catch{return xt(this,Xt)}if(e.length===0)return lr(this);const r=new this.Collection(this,()=>vn(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,a,o)=>{const l=i.key;for(;n(l,e[s])>0;)if(++s,s===e.length)return a(o),!1;return n(l,e[s])===0||(a(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[La,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=rn.apply(hr,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return xt(this,Xt)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[La,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,a=this._min,o=this._max;if(e.length===0)return lr(this);if(!e.every(v=>v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0))return xt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",he.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,h=s;function f(v,C){return h(v[0],C[0])}try{u=e.reduce(function(v,C){let x=0,k=v.length;for(;x<k;++x){const I=v[x];if(r(C[0],I[1])<0&&r(C[1],I[0])>0){I[0]=a(I[0],C[0]),I[1]=o(I[1],C[1]);break}}return x===k&&v.push(C),v},[]),u.sort(f)}catch{return xt(this,Xt)}let g=0;const b=c?v=>s(v,u[g][1])>0:v=>s(v,u[g][1])>=0,m=l?v=>i(v,u[g][0])>0:v=>i(v,u[g][0])>=0;let y=b;const _=new this.Collection(this,()=>vn(u[0][0],u[u.length-1][1],!l,!c));return _._ondirectionchange=v=>{v==="next"?(y=b,h=s):(y=m,h=i),u.sort(f)},_._addAlgorithm((v,C,x)=>{for(var k=v.key;y(k);)if(++g,g===u.length)return C(x),!1;return!!function(I){return!b(I)&&!m(I)}(k)||(this._cmp(k,u[g][1])===0||this._cmp(k,u[g][0])===0||C(()=>{h===s?v.continue(u[g][0]):v.continue(u[g][1])}),!1)}),_}startsWithAnyOf(){const e=rn.apply(hr,arguments);return e.every(n=>typeof n=="string")?e.length===0?lr(this):this.inAnyRange(e.map(n=>[n,n+zn])):xt(this,"startsWithAnyOf() only works with strings")}}function Gt(t){return We(function(e){return ls(e),t(e.target.error),!1})}function ls(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const cs="storagemutated",yn="x-storagemutated-1",xn=es(null,cs);class $f{_lock(){return Yr(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this}_unlock(){if(Yr(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Tr(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&ue.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Yr(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new he.DatabaseClosed(r);case"MissingAPIError":throw new he.MissingAPI(r.message,r);default:throw new he.OpenFailed(r)}if(!this.active)throw new he.TransactionInactive;return Yr(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We(s=>{ls(s),this._reject(e.error)}),e.onabort=We(s=>{ls(s),this.active&&this._reject(new he.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=We(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&xn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ot(new he.ReadOnly("Transaction is readonly"));if(!this.active)return ot(new he.TransactionInactive);if(this._locked())return new se((i,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,a)},ue])});if(r)return kn(()=>{var i=new se((a,o)=>{this._lock();const l=n(a,o,this);l&&l.then&&l.then(a,o)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new se((i,a)=>{var o=n(i,a,this);o&&o.then&&o.then(i,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=se.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var i=n._waitingFor;return new se((a,o)=>{r.then(l=>n._waitingQueue.push(We(a.bind(null,l))),l=>n._waitingQueue.push(We(o.bind(null,l)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new he.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Et(n,e))return n[e];const r=this.schema[e];if(!r)throw new he.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function Oa(t,e,n,r,s,i,a){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(s?"++":"")+fu(e)}}function fu(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function pu(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:qc(n,r=>[r.name,r])}}let us=t=>{try{return t.only([[]]),us=()=>[[]],[[]]}catch{return us=()=>zn,zn}};function Pa(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>ln(r,e)}(t):e=>ln(e,t)}function tl(t){return[].slice.call(t)}let Sf=0;function ts(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function kf(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:h,upperOpen:f}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!f):u===void 0?e.lowerBound(c,!!h):e.bound(c,u,!!h,!!f)}const{schema:s,hasGetAll:i}=function(l,c){const u=tl(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(h=>c.objectStore(h)).map(h=>{const{keyPath:f,autoIncrement:g}=h,b=ft(f),m=f==null,y={},_={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:b,keyPath:f,autoIncrement:g,unique:!0,extractKey:Pa(f)},indexes:tl(h.indexNames).map(v=>h.index(v)).map(v=>{const{name:C,unique:x,multiEntry:k,keyPath:I}=v,A={name:C,compound:ft(I),keyPath:I,unique:x,multiEntry:k,extractKey:Pa(I)};return y[ts(I)]=A,A}),getIndexByKeyPath:v=>y[ts(v)]};return y[":id"]=_.primaryKey,f!=null&&(y[ts(f)]=_.primaryKey),_})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=s.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:h,type:f,keys:g,values:b,range:m}){return new Promise((y,_)=>{y=We(y);const v=h.objectStore(u),C=v.keyPath==null,x=f==="put"||f==="add";if(!x&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:k}=g||b||{length:1};if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return y({numFailures:0,failures:{},results:[],lastResult:void 0});let I;const A=[],K=[];let T=0;const N=M=>{++T,ls(M)};if(f==="deleteRange"){if(m.type===4)return y({numFailures:T,failures:K,results:[],lastResult:void 0});m.type===3?A.push(I=v.clear()):A.push(I=v.delete(r(m)))}else{const[M,q]=x?C?[b,g]:[b,null]:[g,null];if(x)for(let V=0;V<k;++V)A.push(I=q&&q[V]!==void 0?v[f](M[V],q[V]):v[f](M[V])),I.onerror=N;else for(let V=0;V<k;++V)A.push(I=v[f](M[V])),I.onerror=N}const O=M=>{const q=M.target.result;A.forEach((V,B)=>V.error!=null&&(K[B]=V.error)),y({numFailures:T,failures:K,results:f==="delete"?g:A.map(V=>V.result),lastResult:q})};I.onerror=M=>{N(M),O(M)},I.onsuccess=O})},getMany:({trans:h,keys:f})=>new Promise((g,b)=>{g=We(g);const m=h.objectStore(u),y=f.length,_=new Array(y);let v,C=0,x=0;const k=A=>{const K=A.target;_[K._pos]=K.result,++x===C&&g(_)},I=Gt(b);for(let A=0;A<y;++A)f[A]!=null&&(v=m.get(f[A]),v._pos=A,v.onsuccess=k,v.onerror=I,++C);C===0&&g(_)}),get:({trans:h,key:f})=>new Promise((g,b)=>{g=We(g);const m=h.objectStore(u).get(f);m.onsuccess=y=>g(y.target.result),m.onerror=Gt(b)}),query:function(h){return f=>new Promise((g,b)=>{g=We(g);const{trans:m,values:y,limit:_,query:v}=f,C=_===1/0?void 0:_,{index:x,range:k}=v,I=m.objectStore(u),A=x.isPrimaryKey?I:I.index(x.name),K=r(k);if(_===0)return g({result:[]});if(h){const T=y?A.getAll(K,C):A.getAllKeys(K,C);T.onsuccess=N=>g({result:N.target.result}),T.onerror=Gt(b)}else{let T=0;const N=y||!("openKeyCursor"in A)?A.openCursor(K):A.openKeyCursor(K),O=[];N.onsuccess=M=>{const q=N.result;return q?(O.push(y?q.value:q.primaryKey),++T===_?g({result:O}):void q.continue()):g({result:O})},N.onerror=Gt(b)}})}(i),openCursor:function({trans:h,values:f,query:g,reverse:b,unique:m}){return new Promise((y,_)=>{y=We(y);const{index:v,range:C}=g,x=h.objectStore(u),k=v.isPrimaryKey?x:x.index(v.name),I=b?m?"prevunique":"prev":m?"nextunique":"next",A=f||!("openKeyCursor"in k)?k.openCursor(r(C),I):k.openKeyCursor(r(C),I);A.onerror=Gt(_),A.onsuccess=We(K=>{const T=A.result;if(!T)return void y(null);T.___id=++Sf,T.done=!1;const N=T.continue.bind(T);let O=T.continuePrimaryKey;O&&(O=O.bind(T));const M=T.advance.bind(T),q=()=>{throw new Error("Cursor not stopped")};T.trans=h,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=We(_),T.next=function(){let V=1;return this.start(()=>V--?this.continue():this.stop()).then(()=>this)},T.start=V=>{const B=new Promise((X,ge)=>{X=We(X),A.onerror=Gt(ge),T.fail=ge,T.stop=R=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=q,X(R)}}),F=()=>{if(A.result)try{V()}catch(X){T.fail(X)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return A.onsuccess=We(X=>{A.onsuccess=F,F()}),T.continue=N,T.continuePrimaryKey=O,T.advance=M,F(),B},y(T)},_)})},count({query:h,trans:f}){const{index:g,range:b}=h;return new Promise((m,y)=>{const _=f.objectStore(u),v=g.isPrimaryKey?_:_.index(g.name),C=r(b),x=C?v.count(C):v.count();x.onsuccess=We(k=>m(k.target.result)),x.onerror=Gt(y)})}}}(l)),o={};return a.forEach(l=>o[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!o[l])throw new Error(`Table '${l}' not found`);return o[l]},MIN_KEY:-1/0,MAX_KEY:us(e),schema:s}}function Ra({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:a,indexedDB:o},l){return{dbcore:function(u,h){return h.reduce((f,{create:g})=>({...f,...g(f)}),u)}(kf(i,a,l),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(a=>a.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function pi({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(a=>{const o=so(a,s);(!o||"value"in o&&o.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?on(a,s,{get(){return this.table(s)},set(l){zc(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,i))})})}function Ia({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Cf(t,e){return t._cfg.version-e._cfg.version}function xf(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const a=i._reject.bind(i),o=ue.transless||ue;kn(()=>{ue.trans=i,ue.transless=o,e===0?(st(s).forEach(l=>{zi(n,l,s[l].primKey,s[l].indexes)}),Ra(t,n),se.follow(()=>t.on.populate.fire(i)).catch(a)):function({_novip:l},c,u,h){const f=[],g=l._versions;let b=l._dbSchema=Da(l,l.idbdb,h),m=!1;const y=g.filter(v=>v._cfg.version>=c);function _(){return f.length?se.resolve(f.shift()(u.idbtrans)).then(_):se.resolve()}return y.forEach(v=>{f.push(()=>{const C=b,x=v._cfg.dbschema;Ma(l,C,h),Ma(l,x,h),b=l._dbSchema=x;const k=gu(C,x);k.add.forEach(A=>{zi(h,A[0],A[1].primKey,A[1].indexes)}),k.change.forEach(A=>{if(A.recreate)throw new he.Upgrade("Not yet support for changing primary key");{const K=h.objectStore(A.name);A.add.forEach(T=>Na(K,T)),A.change.forEach(T=>{K.deleteIndex(T.name),Na(K,T)}),A.del.forEach(T=>K.deleteIndex(T))}});const I=v._cfg.contentUpgrade;if(I&&v._cfg.version>c){Ra(l,h),u._memoizedTables={},m=!0;let A=Wc(x);k.del.forEach(O=>{A[O]=C[O]}),Ia(l,[l.Transaction.prototype]),pi(l,[l.Transaction.prototype],st(A),A),u.schema=A;const K=io(I);let T;K&&xr();const N=se.follow(()=>{if(T=I(u),T&&K){var O=hn.bind(null,null);T.then(O,O)}});return T&&typeof T.then=="function"?se.resolve(T):N.then(()=>T)}}),f.push(C=>{(!m||!gf)&&function(x,k){[].slice.call(k.db.objectStoreNames).forEach(I=>x[I]==null&&k.db.deleteObjectStore(I))}(v._cfg.dbschema,C),Ia(l,[l.Transaction.prototype]),pi(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),_().then(()=>{var v,C;C=h,st(v=b).forEach(x=>{C.db.objectStoreNames.contains(x)||zi(C,x,v[x].primKey,v[x].indexes)})})}(t,e,i,n).catch(a)})}function gu(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!Ci)a.recreate=!0,n.change.push(a);else{const o=s.idxByName,l=i.idxByName;let c;for(c in o)l[c]||a.del.push(c);for(c in l){const u=o[c],h=l[c];u?u.src!==h.src&&a.change.push(h):a.add.push(h)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}function zi(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Na(s,i)),s}function Na(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Da(t,e,n){const r={};return li(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let a=i.keyPath;const o=Oa(fu(a),a||"",!1,!1,!!i.autoIncrement,a&&typeof a!="string",!0),l=[];for(let u=0;u<i.indexNames.length;++u){const h=i.index(i.indexNames[u]);a=h.keyPath;var c=Oa(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);l.push(c)}r[s]=pu(s,o,l)}),r}function Ma({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],a=n.objectStore(i);t._hasGetAll="getAll"in a;for(let o=0;o<a.indexNames.length;++o){const l=a.indexNames[o],c=a.index(l).keyPath,u=typeof c=="string"?c:"["+li(c).join("+")+"]";if(e[i]){const h=e[i].idxByName[u];h&&(h.name=l,delete e[i].idxByName[u],e[i].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ke.WorkerGlobalScope&&Ke instanceof Ke.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Tf{_parseStoresSpec(e,n){st(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((a,o)=>{const l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Oa(l,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),ft(c),o===0)}),i=s.shift();if(i.multi)throw new he.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new he.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new he.Schema("Index must have a name and cannot be an empty string")}),n[r]=pu(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?yt(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(a=>{yt(s,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(s,i)}),n._dbSchema=i,Ia(n,[n._allTables,n,n.Transaction.prototype]),pi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],st(i),i),n._storeNames=st(i),this}upgrade(e){return this._cfg.contentUpgrade=lo(this._cfg.contentUpgrade||De,e),this}}function fo(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new cn(xi,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function po(t){return t&&typeof t.databases=="function"}function Ba(t){return kn(function(){return ue.letThrough=!0,t()})}function Ef(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Af(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ot(e.dbOpenError):t);Jt&&(e.openCanceller._stackHolder=Qn()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new he.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,a=null,o=!1;return se.race([r,(typeof navigator>"u"?se.resolve():Ef()).then(()=>new se((l,c)=>{if(s(),!n)throw new he.MissingAPI;const u=t.name,h=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!h)throw new he.MissingAPI;h.onerror=Gt(c),h.onblocked=We(t._fireOnBlocked),h.onupgradeneeded=We(f=>{if(a=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=ls,a.abort(),h.result.close();const b=n.deleteDatabase(u);b.onsuccess=b.onerror=We(()=>{c(new he.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{a.onerror=Gt(c);var g=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;o=g<1,t._novip.idbdb=h.result,xf(t,g/10,a,c)}},c),h.onsuccess=We(()=>{a=null;const f=t._novip.idbdb=h.result,g=li(f.objectStoreNames);if(g.length>0)try{const m=f.transaction((b=g).length===1?b[0]:b,"readonly");e.autoSchema?function({_novip:y},_,v){y.verno=_.version/10;const C=y._dbSchema=Da(0,_,v);y._storeNames=li(_.objectStoreNames,0),pi(y,[y._allTables],st(C),C)}(t,f,m):(Ma(t,t._dbSchema,m),function(y,_){const v=gu(Da(0,y.idbdb,_),y._dbSchema);return!(v.add.length||v.change.some(C=>C.add.length||C.change.length))}(t,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ra(t,m)}catch{}var b;Qr.push(t),f.onversionchange=We(m=>{e.vcFired=!0,t.on("versionchange").fire(m)}),f.onclose=We(m=>{t.on("close").fire(m)}),o&&function({indexedDB:m,IDBKeyRange:y},_){!po(m)&&_!==xi&&fo(m,y).put({name:_}).catch(De)}(t._deps,u),l()},c)}))]).then(()=>(s(),e.onReadyBeingFired=[],se.resolve(Ba(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(lo,De);return e.onReadyBeingFired=[],se.resolve(Ba(()=>c(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),ot(l)}).finally(()=>{e.openComplete=!0,i()})}function ja(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return a=>{var o=i(a),l=o.value;return o.done?l:l&&typeof l.then=="function"?l.then(n,r):ft(l)?Promise.all(l).then(n,r):n(l)}}return s(e)()}function Lf(t,e,n){var r=arguments.length;if(r<2)throw new he.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Gc(s),n]}function mu(t,e,n,r,s){return se.resolve().then(()=>{const i=ue.transless||ue,a=t._createTransaction(e,n,t._dbSchema,r),o={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===oo.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>mu(t,e,n,null,s))):ot(h)}const l=io(s);let c;l&&xr();const u=se.follow(()=>{if(c=s.call(a,a),c)if(l){var h=hn.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=ja(c))},o);return(c&&typeof c.then=="function"?se.resolve(c).then(h=>a.active?h:ot(new he.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(h=>(r&&a._resolve(),a._completion.then(()=>h))).catch(h=>(a._reject(h),ot(h)))})}function Os(t,e,n){const r=ft(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const Of={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function a(u,h,f){const g=ts(u),b=s[g]=s[g]||[],m=u==null?0:typeof u=="string"?1:u.length,y=h>0,_={...f,isVirtual:y,keyTail:h,keyLength:m,extractKey:Pa(u),unique:!y&&f.unique};return b.push(_),_.isPrimaryKey||i.push(_),m>1&&a(m===2?u[0]:u.slice(0,m-1),h+1,f),b.sort((v,C)=>v.keyTail-C.keyTail),_}const o=a(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[o];for(const u of r.indexes)a(u.keyPath,0,u);function l(u){const h=u.query.index;return h.isVirtual?{...u,query:{index:h,range:(f=u.query.range,g=h.keyTail,{type:f.type===1?2:f.type,lower:Os(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:Os(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0})}}:u;var f,g}return{...n,schema:{...r,primaryKey:o,indexes:i,getIndexByKeyPath:function(u){const h=s[ts(u)];return h&&h[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:h,isVirtual:f,keyLength:g}=u.query.index;return f?n.openCursor(l(u)).then(b=>b&&function(m){return Object.create(m,{continue:{value:function(_){_!=null?m.continue(Os(_,u.reverse?t.MAX_KEY:t.MIN_KEY,h)):u.unique?m.continue(m.key.slice(0,g).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,h)):m.continue()}},continuePrimaryKey:{value(_,v){m.continuePrimaryKey(Os(_,t.MAX_KEY,h),v)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const _=m.key;return g===1?_[0]:_.slice(0,g)}},value:{get:()=>m.value}})}(b)):n.openCursor(u)}}}}}};function go(t,e,n,r){return n=n||{},r=r||"",st(t).forEach(s=>{if(Et(e,s)){var i=t[s],a=e[s];if(typeof i=="object"&&typeof a=="object"&&i&&a){const o=ba(i);o!==ba(a)?n[r+s]=e[s]:o==="Object"?go(i,a,n,r+s+"."):i!==a&&(n[r+s]=e[s])}else i!==a&&(n[r+s]=e[s])}else n[r+s]=void 0}),st(e).forEach(s=>{Et(t,s)||(n[r+s]=e[s])}),n}const Pf={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const a=ue.trans,{deleting:o,creating:l,updating:c}=a.table(e).hook;switch(i.type){case"add":if(l.fire===De)break;return a._promise("readwrite",()=>u(i),!0);case"put":if(l.fire===De&&c.fire===De)break;return a._promise("readwrite",()=>u(i),!0);case"delete":if(o.fire===De)break;return a._promise("readwrite",()=>u(i),!0);case"deleteRange":if(o.fire===De)break;return a._promise("readwrite",()=>function(f){return h(f.trans,f.range,1e4)}(i),!0)}return n.mutate(i);function u(f){const g=ue.trans,b=f.keys||function(m,y){return y.type==="delete"?y.keys:y.keys||y.values.map(m.extractKey)}(r,f);if(!b)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:b}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(m,y,_){return y.type==="add"?Promise.resolve([]):m.getMany({trans:y.trans,keys:_,cache:"immutable"})}(n,f,b).then(m=>{const y=b.map((_,v)=>{const C=m[v],x={onerror:null,onsuccess:null};if(f.type==="delete")o.fire.call(x,_,C,g);else if(f.type==="add"||C===void 0){const k=l.fire.call(x,_,f.values[v],g);_==null&&k!=null&&(_=k,f.keys[v]=_,r.outbound||jt(f.values[v],r.keyPath,_))}else{const k=go(C,f.values[v]),I=c.fire.call(x,k,_,C,g);if(I){const A=f.values[v];Object.keys(I).forEach(K=>{Et(A,K)?A[K]=I[K]:jt(A,K,I[K])})}}return x});return n.mutate(f).then(({failures:_,results:v,numFailures:C,lastResult:x})=>{for(let k=0;k<b.length;++k){const I=v?v[k]:b[k],A=y[k];I==null?A.onerror&&A.onerror(_[k]):A.onsuccess&&A.onsuccess(f.type==="put"&&m[k]?f.values[k]:I)}return{failures:_,results:v,numFailures:C,lastResult:x}}).catch(_=>(y.forEach(v=>v.onerror&&v.onerror(_)),Promise.reject(_)))})}function h(f,g,b){return n.query({trans:f,values:!1,query:{index:r,range:g},limit:b}).then(({result:m})=>u({type:"delete",keys:m,trans:f}).then(y=>y.numFailures>0?Promise.reject(y.failures[0]):m.length<b?{failures:[],numFailures:0,lastResult:void 0}:h(f,{...g,lower:m[m.length-1],lowerOpen:!0},b)))}}}}})};function vu(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)vt(e.keys[s],t[i])===0&&(r.push(n?fs(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const Rf={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=vu(r.keys,r.trans._cache,r.cache==="clone");return s?se.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?fs(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function mo(t){return!("from"in t)}const nn=function(t,e){if(!this){const n=new nn;return t&&"d"in t&&yt(n,t),n}yt(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function hs(t,e,n){const r=vt(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(mo(t))return yt(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(vt(n,t.from)<0)return s?hs(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},nl(t);if(vt(e,t.to)>0)return i?hs(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},nl(t);vt(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),vt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&gi(t,s),i&&a&&gi(t,i)}function gi(t,e){mo(e)||function n(r,{from:s,to:i,l:a,r:o}){hs(r,s,i),a&&n(r,a),o&&n(r,o)}(t,e)}function If(t,e){const n=Fa(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=Fa(t);let a=i.next(s.from),o=a.value;for(;!r.done&&!a.done;){if(vt(o.from,s.to)<=0&&vt(o.to,s.from)>=0)return!0;vt(s.from,o.from)<0?s=(r=n.next(o.from)).value:o=(a=i.next(s.from)).value}return!1}function Fa(t){let e=mo(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&vt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||vt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function nl(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",a={...t},o=t[s];t.from=o.from,t.to=o.to,t[s]=o[s],a[s]=o[i],t[i]=a,a.d=rl(a)}t.d=rl(t)}function rl({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}wr(nn.prototype,{add(t){return gi(this,t),this},addKey(t){return hs(this,t,t),this},addKeys(t){return t.forEach(e=>hs(this,e,e)),this},[ya](){return Fa(this)}});const Nf={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new nn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:a}=i,{extractKey:o,outbound:l}=a,c={...s,mutate:f=>{const g=f.trans,b=g.mutatedParts||(g.mutatedParts={}),m=I=>{const A=`idb://${e}/${r}/${I}`;return b[A]||(b[A]=new nn)},y=m(""),_=m(":dels"),{type:v}=f;let[C,x]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const k=f.trans._cache;return s.mutate(f).then(I=>{if(ft(C)){v!=="delete"&&(C=I.results),y.addKeys(C);const A=vu(C,k);A||v==="add"||_.addKeys(C),(A||x)&&function(K,T,N,O){function M(q){const V=K(q.name||"");function B(X){return X!=null?q.extractKey(X):null}const F=X=>q.multiEntry&&ft(X)?X.forEach(ge=>V.addKey(ge)):V.addKey(X);(N||O).forEach((X,ge)=>{const R=N&&B(N[ge]),D=O&&B(O[ge]);vt(R,D)!==0&&(R!=null&&F(R),D!=null&&F(D))})}T.indexes.forEach(M)}(m,i,A,x)}else if(C){const A={from:C.lower,to:C.upper};_.add(A),y.add(A)}else y.add(n),_.add(n),i.indexes.forEach(A=>m(A.name).add(n));return I})}},u=({query:{index:f,range:g}})=>{var b,m;return[f,new nn((b=g.lower)!==null&&b!==void 0?b:t.MIN_KEY,(m=g.upper)!==null&&m!==void 0?m:t.MAX_KEY)]},h={get:f=>[a,new nn(f.key)],getMany:f=>[a,new nn().addKeys(f.keys)],count:u,query:u,openCursor:u};return st(h).forEach(f=>{c[f]=function(g){const{subscr:b}=ue;if(b){const m=x=>{const k=`idb://${e}/${r}/${x}`;return b[k]||(b[k]=new nn)},y=m(""),_=m(":dels"),[v,C]=h[f](g);if(m(v.name||"").add(C),!v.isPrimaryKey){if(f!=="count"){const x=f==="query"&&l&&g.values&&s.query({...g,values:!1});return s[f].apply(this,arguments).then(k=>{if(f==="query"){if(l&&g.values)return x.then(({result:A})=>(y.addKeys(A),k));const I=g.values?k.result.map(o):k.result;g.values?y.addKeys(I):_.addKeys(I)}else if(f==="openCursor"){const I=k,A=g.values;return I&&Object.create(I,{key:{get:()=>(_.addKey(I.primaryKey),I.key)},primaryKey:{get(){const K=I.primaryKey;return _.addKey(K),K}},value:{get:()=>(A&&y.addKey(I.primaryKey),I.value)}})}return k})}_.add(n)}}return s[f].apply(this,arguments)}}),c}}}};class cn{constructor(e,n){this._middlewares={},this.verno=0;const r=cn.dependencies;this._options=n={addons:cn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:De,dbReadyPromise:null,cancelOpen:De,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new se(o=>{i.dbReadyResolve=o}),i.openCanceller=new se((o,l)=>{i.cancelOpen=l}),this._state=i,this.name=e,this.on=es(this,"populate","blocked","versionchange","close",{ready:[lo,De]}),this.on.ready.subscribe=Kc(this.on.ready.subscribe,o=>(l,c)=>{cn.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||se.resolve().then(l),c&&o(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&o(l);else{o(l);const h=this;c||o(function f(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(f)})}})}),this.Collection=(a=this,Dr(bf.prototype,function(o,l){this.db=a;let c=uu,u=null;if(l)try{c=l()}catch(b){u=b}const h=o._ctx,f=h.table,g=f.hook.reading.fire;this._ctx={table:f,index:h.index,isPrimKey:!h.index||f.schema.primKey.keyPath&&h.index===f.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:h.or,valueMapper:g!==as?g:null}})),this.Table=function(o){return Dr(vf.prototype,function(l,c,u){this.db=o,this._tx=u,this.name=l,this.schema=c,this.hook=o._allTables[l]?o._allTables[l].hook:es(null,{creating:[sf,De],reading:[rf,as],updating:[of,De],deleting:[af,De]})})}(this),this.Transaction=function(o){return Dr($f.prototype,function(l,c,u,h,f){this.db=o,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=es(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se((g,b)=>{this._resolve=g,this._reject=b}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var b=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):b&&this.idbtrans&&this.idbtrans.abort(),ot(g)})})}(this),this.Version=function(o){return Dr(Tf.prototype,function(l){this.db=o,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(o){return Dr(du.prototype,function(l,c,u){this.db=o,this._ctx={table:l,index:c===":id"?null:c,or:u};const h=o._deps.indexedDB;if(!h)throw new he.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(f,g)=>h.cmp(g,f),this._max=(f,g)=>h.cmp(f,g)>0?f:g,this._min=(f,g)=>h.cmp(f,g)<0?f:g,this._IDBKeyRange=o._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=us(n.IDBKeyRange),this._createTransaction=(o,l,c,u)=>new this.Transaction(o,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=o=>{this.on("blocked").fire(o),Qr.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(o))},this.use(Of),this.use(Pf),this.use(Nf),this.use(Rf),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(o=>o(this))}version(e){if(isNaN(e)||e<.1)throw new he.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new he.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Cf),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?e():new se((n,r)=>{if(this._state.openComplete)return r(new he.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new he.DatabaseClosed);this.open().catch(De)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((a,o)=>a.level-o.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Af(this)}_close(){const e=this._state,n=Qr.indexOf(this);if(n>=0&&Qr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new se(r=>{e.dbReadyResolve=r}),e.openCanceller=new se((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new he.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new se((r,s)=>{const i=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=We(()=>{(function({indexedDB:o,IDBKeyRange:l},c){!po(o)&&c!==xi&&fo(o,l).delete(c).catch(De)})(this._deps,this.name),r()}),a.onerror=Gt(s),a.onblocked=this._fireOnBlocked};if(e)throw new he.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return st(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Lf.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=ue.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let a,o;e=e.replace("!","").replace("?","");try{if(o=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===Mi)a=Mi;else{if(e!="rw"&&e!=Bi)throw new he.InvalidArgument("Invalid transaction mode: "+e);a=Bi}if(s){if(s.mode===Mi&&a===Bi){if(!i)throw new he.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&o.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new he.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(u,h)=>{h(c)}):ot(c)}const l=mu.bind(null,this,a,o,s,r);return s?s._promise(a,l,"lock"):ue.trans?Tr(ue.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!Et(this._allTables,e))throw new he.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Df=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Mf{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Df](){return this}}function bu(t,e){return st(e).forEach(n=>{gi(t[n]||(t[n]=new nn),e[n])}),t}function Bf(t){let e,n=!1;const r=new Mf(s=>{const i=io(t);let a=!1,o={},l={};const c={get closed(){return a},unsubscribe:()=>{a=!0,xn.storagemutated.unsubscribe(g)}};s.start&&s.start(c);let u=!1,h=!1;function f(){return st(l).some(m=>o[m]&&If(o[m],l[m]))}const g=m=>{bu(o,m),f()&&b()},b=()=>{if(u||a)return;o={};const m={},y=function(_){i&&xr();const v=()=>kn(t,{subscr:_,trans:null}),C=ue.trans?Tr(ue.transless,v):v();return i&&C.then(hn,hn),C}(m);h||(xn(cs,g),h=!0),u=!0,Promise.resolve(y).then(_=>{n=!0,e=_,u=!1,a||(f()?b():(o={},l=m,s.next&&s.next(_)))},_=>{u=!1,n=!1,s.error&&s.error(_),c.unsubscribe()})};return b(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let Ua;try{Ua={indexedDB:Ke.indexedDB||Ke.mozIndexedDB||Ke.webkitIndexedDB||Ke.msIndexedDB,IDBKeyRange:Ke.IDBKeyRange||Ke.webkitIDBKeyRange}}catch{Ua={indexedDB:null,IDBKeyRange:null}}const In=cn;function Qs(t){let e=sn;try{sn=!0,xn.storagemutated.fire(t)}finally{sn=e}}wr(In,{...Gs,delete:t=>new In(t,{addons:[]}).delete(),exists:t=>new In(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return po(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==xi)):fo(e,n).toCollection().primaryKeys()}(In.dependencies).then(t)}catch{return ot(new he.MissingAPI)}},defineClass:()=>function(t){yt(this,t)},ignoreTransaction:t=>ue.trans?Tr(ue.transless,t):t(),vip:Ba,async:function(t){return function(){try{var e=ja(t.apply(this,arguments));return e&&typeof e.then=="function"?e:se.resolve(e)}catch(n){return ot(n)}}},spawn:function(t,e,n){try{var r=ja(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:se.resolve(r)}catch(s){return ot(s)}},currentTransaction:{get:()=>ue.trans||null},waitFor:function(t,e){const n=se.resolve(typeof t=="function"?In.ignoreTransaction(t):t).timeout(e||6e4);return ue.trans?ue.trans.waitFor(n):n},Promise:se,debug:{get:()=>Jt,set:t=>{Yc(t,t==="dexie"?()=>!0:cu)}},derive:pr,extend:yt,props:wr,override:Kc,Events:es,on:xn,liveQuery:Bf,extendObservabilitySet:bu,getByKeyPath:ln,setByKeyPath:jt,delByKeyPath:function(t,e){typeof e=="string"?jt(t,e,void 0):"length"in e&&[].map.call(e,function(n){jt(t,n,void 0)})},shallowClone:Wc,deepClone:fs,getObjectDiff:go,cmp:vt,asap:Hc,minKey:La,addons:[],connections:Qr,errnames:oo,dependencies:Ua,semVer:Jo,version:Jo.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),In.maxKey=us(In.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(cs,t=>{if(!sn){let e;Ci?(e=document.createEvent("CustomEvent"),e.initCustomEvent(yn,!0,!0,t)):e=new CustomEvent(yn,{detail:t}),sn=!0,dispatchEvent(e),sn=!1}}),addEventListener(yn,({detail:t})=>{sn||Qs(t)}));let sn=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(yn);typeof t.unref=="function"&&t.unref(),xn(cs,e=>{sn||t.postMessage(e)}),t.onmessage=e=>{e.data&&Qs(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){xn(cs,e=>{try{sn||(typeof localStorage<"u"&&localStorage.setItem(yn,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:yn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===yn){const n=JSON.parse(e.newValue);n&&Qs(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===yn&&Qs(e.changedParts)})}se.rejectionMapper=function(t,e){if(!t||t instanceof gr||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Wo[t.name])return t;var n=new Wo[t.name](e||t.message,t);return"stack"in t&&on(n,"stack",{get:function(){return this.inner.stack}}),n},Yc(Jt,cu);class jf extends cn{userSettings;constructor(e){super(e),this.version(1).stores({userSettings:"userId"})}}const yu=new jf("userSettings"),[sl,za]=P({userId:0,username:"",email:"",theme:"light"}),[Ff,il]=P(!1);function Me(t){return t&&il(!1),Ff()||(il(!0),zf().pipe(we(1),Qe(e=>{e.length>0&&e[0].userId===sl().userId&&za(e[0])})).subscribe()),[sl,za]}function Uf(t,e){yu.userSettings.put(t).then(()=>{e&&e()}).catch(n=>{console.error(n)}),za(t)}function zf(){return fe.toObservable(yu.userSettings.toArray())}const Kf="_body_ylqsn_1",Hf="_primary_ylqsn_14",qf="_accent_ylqsn_24",Wf="_tertiary_ylqsn_30",Gf="_warn_ylqsn_35",Vf="_hover_ylqsn_39",Yf="_popup_ylqsn_53",pn={body:Kf,primary:Hf,accent:qf,tertiary:Wf,warn:Gf,hover:Vf,popup:Yf},Jf="_body_1c3w6_1",Zf="_primary_1c3w6_14",Xf="_accent_1c3w6_24",Qf="_tertiary_1c3w6_30",ep="_warn_1c3w6_35",tp="_hover_1c3w6_39",np="_popup_1c3w6_53",gn={body:Jf,primary:Zf,accent:Xf,tertiary:Qf,warn:ep,hover:tp,popup:np},jn=function(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor),t},rp="_active_88uab_1",sp="_inactive_88uab_6",ip="_navbar_88uab_11",Ki={active:rp,inactive:sp,navbar:ip};var ap=w('<svg width=40 height=40 viewBox="0 0 83 88"fill=none xmlns=http://www.w3.org/2000/svg><path d="M31.125 57.75C31.125 57.0207 31.3983 56.3212 31.8847 55.8055C32.3711 55.2897 33.0308 55 33.7188 55H49.2812C49.9692 55 50.6289 55.2897 51.1153 55.8055C51.6017 56.3212 51.875 57.0207 51.875 57.75C51.875 58.4793 51.6017 59.1788 51.1153 59.6945C50.6289 60.2103 49.9692 60.5 49.2812 60.5H33.7188C33.0308 60.5 32.3711 60.2103 31.8847 59.6945C31.3983 59.1788 31.125 58.4793 31.125 57.75ZM20.75 41.25C20.75 40.5207 21.0233 39.8212 21.5097 39.3055C21.9961 38.7897 22.6558 38.5 23.3438 38.5H59.6562C60.3442 38.5 61.0039 38.7897 61.4903 39.3055C61.9767 39.8212 62.25 40.5207 62.25 41.25C62.25 41.9793 61.9767 42.6788 61.4903 43.1945C61.0039 43.7103 60.3442 44 59.6562 44H23.3438C22.6558 44 21.9961 43.7103 21.5097 43.1945C21.0233 42.6788 20.75 41.9793 20.75 41.25ZM10.375 24.75C10.375 24.0207 10.6483 23.3212 11.1347 22.8055C11.6211 22.2897 12.2808 22 12.9688 22H70.0312C70.7192 22 71.3789 22.2897 71.8653 22.8055C72.3517 23.3212 72.625 24.0207 72.625 24.75C72.625 25.4793 72.3517 26.1788 71.8653 26.6945C71.3789 27.2103 70.7192 27.5 70.0312 27.5H12.9688C12.2808 27.5 11.6211 27.2103 11.1347 26.6945C10.6483 26.1788 10.375 25.4793 10.375 24.75Z"fill=white>');const op=()=>ap();var lp=w("<li><div>"),cp=w("<div><div><span></span><ul>"),up=w("<li>");const hp=t=>{const[e,n]=Me(),r=G(()=>Ie(e().theme));P(!1),P(!1);const[s,i]=P(window.location.pathname),a=[{Name:"Home",Link:"/"},{Name:"Characters",Link:"/characters"},{Name:"Info",Link:"/info"},{Name:"Homebrew",Link:"/homebrew"}],[{list:[o,l]},c]=It(t,["list"]),u=h=>s()==="/"&&h.Link==="/"||s().startsWith(h.Link)&&s()!=="/"&&h.Link!=="/"?Ki.active:Ki.inactive;return z(()=>{c.isMobile&&l(!1)}),(()=>{var h=cp(),f=h.firstChild,g=f.firstChild,b=g.nextSibling;return p(g,d(Un,{href:"/",children:"MySite"})),p(b,d(Z,{get when(){return c.isMobile},get children(){var m=lp(),y=m.firstChild;return p(y,d(Un,{href:"/",children:"MySite"})),m}}),null),p(b,d(Y,{each:a,children:(m,y)=>d(Z,{get when(){return!c.isMobile||y()===0||o()},get children(){var _=up();return p(_,d(Un,{onClick:()=>i(m.Link),get href(){return m.Link},get children(){return m.Name}})),z(()=>U(_,`${r()?.accent} ${r()?.hover} ${u(m)}`)),_}})}),null),p(f,d(ye,{onClick:()=>l(m=>!m),get children(){return d(op,{})}}),null),z(m=>{var y=`${r()?.primary} ${Ki.navbar}`,_=`${c.style??""}`,v=c.isMobile?{margin:"0 auto",width:"min-content"}:{};return y!==m.e&&U(h,m.e=y),_!==m.t&&U(f,m.t=_),m.a=Xa(b,v,m.a),m},{e:void 0,t:void 0,a:void 0}),h})()};function _u(t,e){const n=document.getElementById("root");if(!n){console.warn("Root element not found.");return}const r=s=>{t&&Object.keys(t).includes("contains")&&!t.contains(s.target)&&e()?.()};n.addEventListener("click",r),Sn(()=>{n.removeEventListener("click",r)})}var dp=w("<b>X"),fp=w("<div><div style=display:flex;justify-content:space-between;><h2 style=margin-left:5%>");const vo=t=>{const[e,n]=Me();He(tt);const r=G(()=>Ie(e().theme)),[s,i]=t.backgroundClick??P(!0),a=fn(),o=t.translate?.x??"-50%",l=t.translate?.y??"-50%";return d(Qa,{get children(){var c=fp(),u=c.firstChild,h=u.firstChild;return br(_u,c,()=>()=>i(f=>!f)),`translate(${o},${l})`!=null?c.style.setProperty("transform",`translate(${o},${l})`):c.style.removeProperty("transform"),c.style.setProperty("padding","0px"),c.style.setProperty("padding-bottom","5px"),p(h,()=>t.title??"Modal"),p(u,d(ye,{onClick:()=>i(f=>!f),get children(){return dp()}}),null),p(c,()=>t.children,null),z(f=>{var g=t.width?t.width:a.isMobile()?"90vw":"45vw",b=t.height?t.height:a.isMobile()?"90vh":"60vh",m=`${r()?.popup} ${r()?.primary}`,y=r()?.accent;return g!==f.e&&((f.e=g)!=null?c.style.setProperty("width",g):c.style.removeProperty("width")),b!==f.t&&((f.t=b)!=null?c.style.setProperty("height",b):c.style.removeProperty("height")),m!==f.a&&U(c,f.a=m),y!==f.o&&U(u,f.o=y),f},{e:void 0,t:void 0,a:void 0,o:void 0}),c}})};function al(t,e,n=!1){const r=i=>i===0?"cantrips_known":`spell_slots_level_${i}`,s={};if(e==="half")switch(n&&(t<10?s[r(0)]=2:t<14?s[r(0)]=3:s[r(0)]=4),t){case 2:s[r(1)]=2;break;case 3:case 4:s[r(1)]=3;break;case 5:case 6:s[r(1)]=4,s[r(2)]=2;break;case 7:case 8:s[r(1)]=4,s[r(2)]=3;break;case 9:case 10:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 11:case 12:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 13:case 14:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break;case 15:case 16:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=2;break;case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3,s[r(5)]=1;break}else switch(n&&(t<10?s[r(0)]=2:s[r(0)]=3),t){case 3:s[r(1)]=2;break;case 4:case 5:case 6:s[r(1)]=3;break;case 7:case 8:case 9:s[r(1)]=4,s[r(2)]=2;break;case 10:case 11:case 12:s[r(1)]=4,s[r(2)]=3;break;case 13:case 14:case 15:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 16:case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break}return s}const pp=t=>{switch(t){case 0:return"Cantrip";case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`;default:return`${t}th`}};function ns(t){return JSON.parse(JSON.stringify(t))}function gp(t){return Array.from({length:t},(e,n)=>n+1)}const mp=t=>{switch(t){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${t}th`}},vp=t=>{const e=[];return t.isVerbal&&e.push("V"),t.isSomatic&&e.push("S"),t.isMaterial&&e.push("M"),t.materials_Needed?[e.join(", "),t.materials_Needed??null].join(", "):e.join(", ")};var bp=w('<svg width=46 height=44 viewBox="0 0 46 44"fill=none xmlns=http://www.w3.org/2000/svg><path d="M24.15 12.7875L37.6625 25.575C39.1 26.95 39.1 29.15 37.6625 30.525C36.225 31.9 33.925 31.9 32.4875 30.525L24.15 22.6875C23.4312 22 22.425 22 21.7062 22.6875L13.3687 30.525C11.9312 31.9 9.63123 31.9 8.19373 30.525C6.75623 29.15 6.75623 26.95 8.19373 25.575L21.7062 12.7875C22.425 12.2375 23.575 12.2375 24.15 12.7875Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>'),yp=w('<svg width=44 height=43 viewBox="0 0 44 43"fill=none xmlns=http://www.w3.org/2000/svg><path d="M20.7625 31.8469L7.83752 19.35C6.46252 18.0062 6.46252 15.8562 7.83752 14.5125C9.21252 13.1687 11.4125 13.1687 12.7875 14.5125L20.7625 22.1719C21.45 22.8437 22.4125 22.8437 23.1 22.1719L31.075 14.5125C32.45 13.1687 34.65 13.1687 36.025 14.5125C37.4 15.8562 37.4 18.0062 36.025 19.35L23.1 31.8469C22.55 32.3844 21.45 32.3844 20.7625 31.8469Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>');const wu=()=>bp(),$u=()=>yp();var _p=w('<svg width=26 height=17 viewBox="0 0 26 17"fill=none xmlns=http://www.w3.org/2000/svg><path d="M25.9732 8.37285C25.9671 8.35975 25.8692 8.14406 25.6726 7.78919C24.6176 5.88731 20.727 0 13.0002 0C3.83202 0 0.0644916 8.28892 0.0271169 8.37285C-0.00903897 8.45467 -0.00903897 8.54533 0.0271169 8.6275C0.0644916 8.71108 3.83202 17 13.0002 17C20.7229 17 24.6135 11.1191 25.6706 9.21435C25.868 8.85771 25.9667 8.6406 25.9728 8.6275C26.009 8.54533 26.009 8.45467 25.9732 8.37285ZM13.0002 16.2917C5.00282 16.2917 1.35026 9.51894 0.846515 8.49965C1.34945 7.47894 4.99226 0.708333 13.0002 0.708333C20.9975 0.708333 24.6501 7.48106 25.1538 8.50035C24.6509 9.52106 21.0081 16.2917 13.0002 16.2917Z"fill=white></path><path d="M13.0002 2.83475C9.41018 2.83475 6.50024 5.37164 6.50024 8.50141C6.50024 11.6312 9.41018 14.1681 13.0002 14.1681C16.5902 14.1681 19.5001 11.6312 19.5001 8.50141C19.5001 5.37164 16.5902 2.83475 13.0002 2.83475ZM13.0002 13.4597C9.85909 13.4597 7.31274 11.2398 7.31274 8.50141C7.31274 5.763 9.85909 3.54308 13.0002 3.54308C16.1413 3.54308 18.6876 5.763 18.6876 8.50141C18.6876 11.2398 16.1413 13.4597 13.0002 13.4597Z"fill=white></path><path d="M13.0002 5.66809C11.2054 5.66809 9.75024 6.93672 9.75024 8.50142C9.75024 10.0661 11.2054 11.3348 13.0002 11.3348C14.795 11.3348 16.2502 10.0661 16.2502 8.50142C16.2502 6.93672 14.795 5.66809 13.0002 5.66809ZM13.0002 10.6264C11.6543 10.6264 10.5627 9.67478 10.5627 8.50142C10.5627 7.32807 11.6543 6.37642 13.0002 6.37642C14.3461 6.37642 15.4377 7.32807 15.4377 8.50142C15.4377 9.67478 14.3461 10.6264 13.0002 10.6264Z"fill=white></path><path d="M13.0002 7.08333C12.7755 7.08333 12.5939 7.24164 12.5939 7.43749C12.5939 7.63335 12.7755 7.79166 13.0002 7.79166C13.4487 7.79166 13.8127 8.109 13.8127 8.5C13.8127 8.69585 13.9943 8.85416 14.2189 8.85416C14.4436 8.85416 14.6252 8.69585 14.6252 8.5C14.6252 7.71764 13.8976 7.08333 13.0002 7.08333Z"fill=white>');const wp=()=>_p();var $p=w('<svg><path fill-rule=evenodd clip-rule=evenodd d="M20.8333 4.16663C19.6827 4.16663 18.75 5.09938 18.75 6.24996V9.54533C17.3015 10.1316 15.9551 10.915 14.7439 11.8617L11.887 10.2123C11.4085 9.93604 10.8398 9.86117 10.3061 10.0042C9.77239 10.1472 9.31737 10.4964 9.0411 10.9749L4.87443 18.1917C4.29914 19.1882 4.64054 20.4623 5.63697 21.0377L8.49283 22.6864C8.3876 23.4433 8.33331 24.2158 8.33331 25C8.33331 25.7841 8.3876 26.5564 8.49283 27.3135L5.63699 28.9622C5.15847 29.2385 4.80933 29.6935 4.66631 30.2272C4.52331 30.761 4.59816 31.3295 4.87443 31.8081L9.0411 39.025C9.31737 39.5035 9.77241 39.8527 10.3061 39.9958C10.8398 40.1387 11.4085 40.0639 11.887 39.7877L14.7439 38.1381C15.9552 39.0847 17.3015 39.8683 18.75 40.4545V43.75C18.75 44.9006 19.6827 45.8333 20.8333 45.8333H29.1667C30.3171 45.8333 31.25 44.9006 31.25 43.75V40.4545C32.6984 39.8683 34.0448 39.0847 35.2561 38.1381L38.113 39.7877C38.5915 40.0639 39.16 40.1387 39.6938 39.9958C40.2275 39.8527 40.6825 39.5035 40.9588 39.0252L45.1255 31.8083C45.4017 31.3298 45.4767 30.761 45.3336 30.2272C45.1907 29.6937 44.8415 29.2385 44.363 28.9622L41.5071 27.3135C41.6123 26.5566 41.6667 25.7841 41.6667 25C41.6667 24.2158 41.6123 23.4433 41.5071 22.6864L44.363 21.0377C45.3594 20.4623 45.7009 19.1881 45.1255 18.1917L40.9588 10.9748C40.6825 10.4963 40.2275 10.1471 39.6938 10.0041C39.16 9.86113 38.5915 9.93598 38.113 10.2123L35.2561 11.8617C34.0448 10.915 32.6984 10.1316 31.25 9.54533V6.24996C31.25 5.09938 30.3171 4.16663 29.1667 4.16663H20.8333ZM22.9167 11.0205V8.33329H27.0834V11.0205C27.0834 11.9422 27.689 12.7544 28.5723 13.0173C30.4705 13.5822 32.1823 14.5874 33.5882 15.9172C34.2575 16.5505 35.2634 16.6687 36.0615 16.208L38.3921 14.8624L40.4755 18.4708L38.1477 19.8147C37.3502 20.2751 36.9496 21.2043 37.1623 22.1002C37.3827 23.0287 37.5 23.9993 37.5 25C37.5 26.0006 37.3827 26.9712 37.1623 27.8997C36.9496 28.7956 37.3502 29.7248 38.1477 30.1852L40.4755 31.5291L38.3921 35.1375L36.0613 33.7918C35.2634 33.3312 34.2575 33.4493 33.588 34.0827C32.1823 35.4125 30.4705 36.4177 28.5723 36.9825C27.689 37.2454 27.0834 38.0577 27.0834 38.9793V41.6666H22.9167V38.9793C22.9167 38.0577 22.3109 37.2454 21.4275 36.9825C19.5294 36.4177 17.8177 35.4125 16.4118 34.0827C15.7424 33.4493 14.7365 33.3312 13.9385 33.7918L11.6079 35.1375L9.52454 31.5291L11.8522 30.1852C12.6496 29.7248 13.0502 28.7956 12.8376 27.8997C12.6171 26.9712 12.5 26.0006 12.5 25C12.5 23.9993 12.6171 23.0287 12.8376 22.1002C13.0502 21.2043 12.6496 20.2751 11.8522 19.8147L9.52454 18.4709L11.6079 14.8624L13.9385 16.208C14.7365 16.6687 15.7424 16.5505 16.4118 15.9172C17.8176 14.5874 19.5294 13.5822 21.4275 13.0173C22.3109 12.7544 22.9167 11.9422 22.9167 11.0205ZM20.8333 25C20.8333 22.6987 22.6988 20.8333 25 20.8333C27.3013 20.8333 29.1667 22.6987 29.1667 25C29.1667 27.3012 27.3013 29.1666 25 29.1666C22.6988 29.1666 20.8333 27.3012 20.8333 25ZM25 16.6666C20.3976 16.6666 16.6667 20.3976 16.6667 25C16.6667 29.6022 20.3976 33.3333 25 33.3333C29.6023 33.3333 33.3334 29.6022 33.3334 25C33.3334 20.3976 29.6023 16.6666 25 16.6666Z"fill=black>');const Sp=t=>(()=>{var e=$p();return wt(e,ct(t,{width:"50",height:"50",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();var kp=w('<svg width=21 height=19 viewBox="0 0 21 19"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_19_710)><path d="M20.6154 3.70551L16.903 0.346669C16.3905 -0.11705 15.56 -0.11705 15.0468 0.346965C15.0468 0.346965 0.39736 13.6012 0.197532 13.782C-0.001968 13.9622 7.37507e-07 14.2487 7.37507e-07 14.2487L0.000328863 18.4047C0.000328863 18.7327 0.294329 18.9984 0.656251 18.9987H2.29359C2.29458 18.9987 5.25 18.9987 5.25 18.9987C5.25 18.9987 5.56599 19.0011 5.76581 18.82C5.96564 18.6389 20.6154 5.38434 20.6154 5.38434C21.1286 4.92062 21.1286 4.16983 20.6154 3.70551ZM12.2574 3.70997L13.4174 4.75972L2.28047 14.8365L1.12022 13.7868L12.2574 3.70997ZM2.74444 15.2563L13.8813 5.17979L15.2736 6.43943L4.13634 16.5157L2.74444 15.2563ZM0.984704 18.4047C0.803251 18.4047 0.656251 18.2723 0.656579 18.1081V17.6382L1.5038 18.4047H0.984704ZM2.43174 18.405L0.656579 16.7989L0.656907 14.2072L5.29692 18.4053H2.43174V18.405ZM5.76089 17.9852L4.60064 16.9355L15.7379 6.85951L16.8978 7.90897L5.76089 17.9852ZM17.3618 7.48918L12.7217 3.29018L13.6497 2.45062L18.2903 6.64932L17.3618 7.48918ZM20.1515 4.96515L18.754 6.22954L14.1136 2.03084L15.5108 0.767044C15.7674 0.534887 16.1831 0.534887 16.4391 0.76645L20.1515 4.12529C20.4077 4.35745 20.4074 4.733 20.1515 4.96515Z"fill=white></path></g><defs><clipPath id=clip0_19_710><rect width=21 height=19 fill=white>');const Cp=()=>kp();var xp=w('<svg><path d="M8 33.6154C8 34.7783 7.57857 35.8935 6.82843 36.7158C6.07828 37.5381 5.06087 38 4 38C2.93913 38 1.92172 37.5381 1.17157 36.7158C0.421427 35.8935 0 34.7783 0 33.6154C0 32.4525 0.421427 31.3373 1.17157 30.515C1.92172 29.6927 2.93913 29.2308 4 29.2308C5.06087 29.2308 6.07828 29.6927 6.82843 30.515C7.57857 31.3373 8 32.4525 8 33.6154ZM8 19C8 20.1629 7.57857 21.2781 6.82843 22.1004C6.07828 22.9227 5.06087 23.3846 4 23.3846C2.93913 23.3846 1.92172 22.9227 1.17157 22.1004C0.421427 21.2781 0 20.1629 0 19C0 17.8371 0.421427 16.7219 1.17157 15.8996C1.92172 15.0773 2.93913 14.6154 4 14.6154C5.06087 14.6154 6.07828 15.0773 6.82843 15.8996C7.57857 16.7219 8 17.8371 8 19ZM8 4.38462C8 5.54749 7.57857 6.66273 6.82843 7.48501C6.07828 8.30728 5.06087 8.76923 4 8.76923C2.93913 8.76923 1.92172 8.30728 1.17157 7.48501C0.421427 6.66273 0 5.54749 0 4.38462C0 3.22174 0.421427 2.1065 1.17157 1.28422C1.92172 0.461949 2.93913 0 4 0C5.06087 0 6.07828 0.461949 6.82843 1.28422C7.57857 2.1065 8 3.22174 8 4.38462Z"fill=black>');const Tp=t=>(()=>{var e=xp();return wt(e,ct(t,{width:"8",height:"38",viewBox:"0 0 8 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),Ep="_settingContainer_1pcjr_1",Ap="_settingTabs_1pcjr_7",Lp="_settingBody_1pcjr_29",Op="_active_1pcjr_39",Ps={settingContainer:Ep,settingTabs:Ap,settingBody:Lp,active:Op},Pp="_snack_19015_1",Rp="_error_19015_26",Ip="_success_19015_33",Np="_warning_19015_39",Dp="_open_19015_45",Mp="_slideIn_19015_1",Bp="_close_19015_49",jp="_slideOut_19015_1",Ka={snack:Pp,error:Rp,success:Ip,warning:Np,open:Dp,slideIn:Mp,close:Bp,slideOut:jp};var Fp=w("<div>"),Up=w("<div><span>");const[ol,Su]=P([]),vr=t=>{Su(e=>[...e,t])},zp=t=>{Su(e=>e.filter((n,r)=>r!==t))},Kp=()=>{const[t,e]=Me();return G(()=>Ie(t().theme)),d(Z,{get when(){return ol().length>0},get children(){var n=Fp();return p(n,d(Y,{get each(){return ol()},children:(r,s)=>d(Hp,ct(r,{get index(){return s()},onClose:()=>zp(s())}))})),z(()=>U(n,Ka.snackContainer)),n}})},Hp=t=>{const[e,n]=Me(),[r,s]=P(!0),i=G(()=>Ie(e().theme));t.closeTimeout&&setTimeout(()=>t.onClose(),t.closeTimeout),t.closeTimeout||setTimeout(()=>t.onClose(),5e3);const a=Math.floor(t.message.length/17);return d(Qa,{get mount(){return document.body},get children(){return d(Z,{get when(){return r()},get children(){var o=Up(),l=o.firstChild;return p(l,()=>t.message),p(o,d(ye,{get onClick(){return t.onClose},children:"X"}),null),z(c=>{var u=`${10+t.index*(50+a*8)}px`,h=`${i().primary} ${Ka.snack} ${Ka[t.severity??"info"]}`;return u!==c.e&&((c.e=u)!=null?o.style.setProperty("bottom",u):o.style.removeProperty("bottom")),h!==c.t&&U(o,c.t=h),c},{e:void 0,t:void 0}),o}})}})};var qp=w("<div><h3>General</h3>"),Wp=w("<option value=dark>Dark"),Gp=w("<option value=light>Light"),Vp=w("<div><h3>Theme</h3><label for=themeChange>Change Theme "),Yp=w("<div><h3>Account</h3>"),Jp=w("<div><div><ul></ul></div><div><div>"),Zp=w("<li>");const Xp=t=>{const[e,n]=P(["General","Theme","Account"]),[r,s]=P("Theme");return(()=>{var i=Jp(),a=i.firstChild,o=a.firstChild,l=a.nextSibling,c=l.firstChild;return p(o,d(Y,{get each(){return e()},children:u=>(()=>{var h=Zp();return h.$$click=f=>s(u),p(h,u),z(()=>U(h,r()===u?Ps.active:"")),h})()})),p(l,d(ss,{get children(){return[d(Ct,{get when(){return r()==="General"},get children(){return qp()}}),d(Ct,{get when(){return r()==="Theme"},get children(){var u=Vp(),h=u.firstChild;return h.nextSibling,p(u,d(Ge,{name:"themeChange",onChange:f=>t.setDefaultUserSettings(g=>(g.theme=f.target.value,ns(g))),get children(){return[Wp(),Gp()]}}),null),u}}),d(Ct,{get when(){return r()==="Account"},get children(){return Yp()}})]}}),c),p(c,d(ye,{onClick:u=>Uf(t.defaultUserSettings(),()=>vr({message:"Settings Saved Successfully!",severity:"success",closeTimeout:4e3})),children:"Save Settings"})),z(u=>{var h=Ps.settingContainer,f=Ps.settingTabs,g=Ps.settingBody;return h!==u.e&&U(i,u.e=h),f!==u.t&&U(a,u.t=f),g!==u.a&&U(l,u.a=g),u},{e:void 0,t:void 0,a:void 0}),i})()};Ft(["click"]);function fn(){return He(tt)}var Qp=w("<span><div><h1>Navigation</h1><span></span></div><div class=theLine>"),eg=w("<ul class=sideBody>"),tg=w("<div class=sidebar><div class=sideHead><h2></h2><span></span></div><div class=theLine>"),ng=w("<span>"),rg=w("<li><h3>");const sg=t=>{const[{userStyle:e,defaultShowList:n,setDefaultShowList:r,defaultIsMobile:s,setDefaultIsMobile:i,defaultUserSettings:a,setDefaultUserSettings:o},l]=It(t,["userStyle","defaultShowList","setDefaultShowList","defaultIsMobile","setDefaultIsMobile","defaultUserSettings","setDefaultUserSettings"]),[c,u]=P(!1),h=fn(),[f,g]=P([{Name:"Characters",Link:"/characters",isOpen:!1,children:[{Name:"View",Link:"/characters/view",isOpen:!1},{Name:"Create",Link:"/characters/create",isOpen:!1}]},{Name:"Info",Link:"/info",isOpen:!1,children:[{Name:"Spells",Link:"/info/spells",isOpen:!1},{Name:"Feats",Link:"/info/feats",isOpen:!1},{Name:"Classes",Link:"/info/classes",isOpen:!1},{Name:"Backgrounds",Link:"/info/backgrounds",isOpen:!1},{Name:"Items",Link:"/info/items",isOpen:!1},{Name:"Races",Link:"/info/races",isOpen:!1}]},{Name:"Homebrew",Link:"/homebrew",isOpen:!1,children:[{Name:"Spells",Link:"/homebrew/view?name=spells",isOpen:!1},{Name:"Feats",Link:"/homebrew/view?name=feats",isOpen:!1},{Name:"Classes",Link:"/homebrew/view?name=classes",isOpen:!1},{Name:"Subclasses",Link:"/homebrew/view?name=subclasses",isOpen:!1},{Name:"Backgrounds",Link:"/homebrew/view?name=backgrounds",isOpen:!1},{Name:"Items",Link:"/homebrew/view?name=items",isOpen:!1},{Name:"Races",Link:"/homebrew/view?name=races",isOpen:!1}]}].sort((y,_)=>y.Name>_.Name?1:-1)),b=y=>y.replace("view","create").replace("?name=","/"),m=()=>[{name:"Login",action:()=>{console.log("Login")},condition:()=>!0},{name:"Register",action:()=>{console.log("Register")},condition:()=>!0},{name:"Logout",action:()=>{console.log("Logout")},condition:()=>!0},{name:"Profile",action:()=>{console.log("Profile")},condition:()=>!0}];return(()=>{var y=Qp(),_=y.firstChild,v=_.firstChild,C=v.nextSibling;return _.nextSibling,p(C,d(ye,{get class(){return e().hover},get children(){return[d(Sp,{onClick:x=>u(k=>!k)}),d(Z,{get when(){return c()},get children(){return d(vo,{title:"Settings",get width(){return h.isMobile()?"90vw":"45vw"},get height(){return h.isMobile()?"90vh":"60vh"},backgroundClick:[c,u],get children(){return d(Xp,{userStyle:e,defaultUserSettings:a,setDefaultUserSettings:o})}})}})]}}),null),p(C,d(ye,{get class(){return`${e().hover}`},enableBackgroundClick:!0,get menuItems(){return m()},get overrideX(){return s()?"42vw":"93vw"},get children(){return d(Tp,{})}}),null),p(y,d(Y,{get each(){return f()},children:x=>(()=>{var k=tg(),I=k.firstChild,A=I.firstChild,K=A.nextSibling;return I.nextSibling,p(A,d(Un,{onClick:()=>r(T=>!T),get href(){return x.Link},get children(){return x.Name}})),K.$$click=()=>g(T=>(x.isOpen=!x.isOpen,ns([...T.filter(N=>N.Name!==x.Name),x].sort((N,O)=>N.Name>O.Name?1:-1)))),p(K,(()=>{var T=G(()=>!!x.isOpen);return()=>T()?d(wu,{}):d($u,{})})()),p(k,d(Z,{get when(){return x.isOpen},get children(){var T=eg();return p(T,d(Y,{get each(){return x.children},children:N=>(()=>{var O=rg(),M=O.firstChild;return p(M,d(Un,{onClick:()=>r(q=>!q),get href(){return N.Link},get children(){return N.Name}})),p(O,d(Z,{get when(){return N.Link.includes("homebrew")},get children(){var q=ng();return p(q,d(Un,{onClick:()=>r(V=>!V),get href(){return b(N.Link)},get children(){return d(Cp,{})}}),null),p(q,d(Un,{onClick:()=>r(V=>!V),get href(){return N.Link},get children(){return d(wp,{})}}),null),q}}),null),O})()})),T}}),null),z(()=>U(K,`${e().hover}`)),k})()}),null),z(x=>{var k=`${e().primary} ${n()?"navOpen":"navClosed"}`,I=`${e().accent} topper`;return k!==x.e&&U(y,x.e=k),I!==x.t&&U(_,x.t=I),x},{e:void 0,t:void 0}),y})()};Ft(["click"]);var ig=w("<div><div class=body><span>");const ag={isMobile:P(jn())[0],showList:P(!1),useStyle:()=>({body:"",primary:"",accent:"",tertiary:"",warn:"",hover:"",popup:"",table:""})},tt=wi(ag),og=t=>d(tt.Provider,{get value(){return t.value},get children(){return t.children}}),lg=t=>{const[e,n]=Me(),r=G(()=>Ie(e().theme)),[s,i]=P(!jn()),[a,o]=P(jn());z(()=>{s(),o(jn())});const l=()=>{jn()?i(!1):i(window.matchMedia("only screen and (max-width: 768px)").matches)};o(jn()),window.addEventListener("resize",l),z(()=>{jn()||window.innerWidth<=768});const{isMobile:c}=fn();return d(og,{value:{isMobile:a,showList:[s,i],useStyle:Ie},get children(){var u=ig(),h=u.firstChild,f=h.firstChild;return u.style.setProperty("height","100vh"),p(u,d(hp,{get isMobile(){return c()},style:"margin-bottom: 15px;",list:[s,i]}),h),p(f,()=>t.children),p(h,d(Z,{get when(){return s()},get children(){return d(sg,{userStyle:r,defaultShowList:s,setDefaultShowList:i,defaultIsMobile:a,setDefaultIsMobile:o,defaultUserSettings:e,setDefaultUserSettings:n})}}),null),z(g=>{var b=r().body,m=`${s()?"openFirst":"closeFirst"}`;return b!==g.e&&U(u,g.e=b),m!==g.t&&U(f,g.t=m),g},{e:void 0,t:void 0}),u}})},cg={body:gn.body,primary:gn.primary,accent:gn.accent,tertiary:gn.tertiary,warn:gn.warn,hover:gn.hover,popup:gn.popup,table:gn.table},ll={body:pn.body,primary:pn.primary,accent:pn.accent,tertiary:pn.tertiary,warn:pn.warn,hover:pn.hover,popup:pn.popup,table:pn.table};function Ie(t){const[e,n]=Me();switch(t??e().theme){case"light":return document.body.style.backgroundColor="#fff",cg;case"dark":return document.body.style.backgroundColor="#000",ll;default:return ll}}function ug(){const[t,e]=Me();return He(tt),G(()=>Ie(t().theme))}const hg="_menuButtons_1ckw1_1",dg="_menuButton_1ckw1_1",fg="_customButtonStyle_1ckw1_24",pg="_transparent_1ckw1_34",Rs={menuButtons:hg,menuButton:dg,customButtonStyle:fg,transparent:pg};var gg=w("<button>"),mg=w("<div><ul>"),vg=w("<li><button>");const ye=t=>{const[e,n]=P({show:!1,lastX:0,lastY:0}),r=G(()=>!!t.menuItems),s=G(()=>t.menuItems?.filter(g=>g.condition?g.condition():!0)??[]);fn();const[i,a]=Me(),o=t.styleType??"accent",l=G(()=>Ie(i().theme)),c=G(()=>l()[o]);let u;const h=G(()=>({position:"absolute",top:t.overrideY??`${e().lastY}px`,left:t.overrideX??`${e().lastX>50*.9?e().lastX-+(u?u.width:"0"):e().lastX}px`,display:`${e().show?"block":"none"}`})),f=()=>_u(u,()=>n({show:!1,lastX:0,lastY:0}));return t.enableBackgroundClick&&document.body.addEventListener("click",f),Sn(()=>{document.body.removeEventListener("click",f)}),[(()=>{var g=gg();return br(b=>b,g),wt(g,ct({get onClick(){return t.onClick?t.onClick:b=>n(m=>({show:!m.show,lastX:b.clientX,lastY:b.clientY}))}},t,{get class(){return`${c()} ${l()?.hover} ${Rs.customButtonStyle} ${t.transparent?Rs.transparent:""} ${t.class??""} `}}),!1,!0),p(g,()=>t.children),g})(),d(Qa,{get mount(){return document.getElementById("root")},get children(){return d(Z,{get when(){return G(()=>!!e().show)()&&r()},get children(){var g=mg(),b=g.firstChild;return br(m=>u=m,g),p(b,d(Y,{get each(){return t.menuItems??[]},children:m=>d(Z,{get when(){return G(()=>!!((!m.condition||m.condition())&&e()))()&&r()},get children(){var y=vg(),_=y.firstChild;return _.addEventListener("click",m.action),p(_,()=>m.name),z(v=>{var C=`${100/s().length}%`,x=`${l().hover}`,k=`${l().accent} ${Rs.menuButton}`;return C!==v.e&&((v.e=C)!=null?y.style.setProperty("height",C):y.style.removeProperty("height")),x!==v.t&&U(y,v.t=x),k!==v.a&&U(_,v.a=k),v},{e:void 0,t:void 0,a:void 0}),y}})})),z(m=>{var y=`${l()?.popup} ${l()?.primary} ${t.menuStyle??""}`,_=h(),v=`${Rs.menuButtons}`;return y!==m.e&&U(g,m.e=y),m.t=Xa(g,_,m.t),v!==m.a&&U(b,m.a=v),m},{e:void 0,t:void 0,a:void 0}),g}})}})]},bg="_carouselHeader_uoqig_1",yg="_carousel_uoqig_1",_g="_carouselSlides_uoqig_24",wg="_carouselSlide_uoqig_24",$g="_carouselButton_uoqig_37",mn={carouselHeader:bg,carousel:yg,carouselSlides:_g,carouselSlide:wg,carouselButton:$g};var Sg=w("<div>No <!> Found"),kg=w("<div>No Elements Found"),Cg=w("<div><div><div><div></div></div></div><div>");const Er=({startingIndex:t=0,...e})=>{const[n,r]=P(t),[s,i]=It(e,["currentIndex"]),a=()=>s.currentIndex[0](),o=g=>s.currentIndex[1](g),l=G(()=>e.elements.length===2?a():n()),c=G(()=>e.elements.length>0?e.elements[l()].name:e.notFoundName?`No ${e.notFoundName} Found`:"No Elements Found"),u=G(()=>e.elements.length>0?e.elements[l()].element:e.notFoundName?(()=>{var g=Sg(),b=g.firstChild,m=b.nextSibling;return m.nextSibling,p(g,()=>e.notFoundName,m),g})():kg()),h=()=>{l()!==e.elements.length-1?r(g=>g+1):r(0)},f=()=>{l()!==0?r(g=>g-1):r(e.elements.length-1)};return z(()=>{e.currentIndex&&o(l())}),(()=>{var g=Cg(),b=g.firstChild,m=b.firstChild,y=m.firstChild,_=b.nextSibling;return p(b,d(ye,{get class(){return`${mn.carouselButton}`},onClick:f,children:"❮"}),m),p(y,c),p(b,d(ye,{get class(){return`${mn.carouselButton} `},onClick:h,children:"❯"}),null),p(_,u),z(v=>{var C=`${mn.carousel}`,x=`${mn.carouselHeader}`,k=`${mn.carouselSlides} ${mn.header}`,I=`${mn.carouselSlide}`,A=`${mn.carouselSlide}`;return C!==v.e&&U(g,v.e=C),x!==v.t&&U(b,v.t=x),k!==v.a&&U(m,v.a=k),I!==v.o&&U(y,v.o=I),A!==v.i&&U(_,v.i=A),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g})()},xg="_Chip_466ds_1",Tg="_removeChipButton_466ds_21",cl={Chip:xg,removeChipButton:Tg};var Eg=w("<span><span></span><span>:</span><span>");const $n=t=>{const[e,n]=Me(),r=G(()=>Ie(e().theme));return(()=>{var s=Eg(),i=s.firstChild,a=i.nextSibling,o=a.nextSibling;return p(i,()=>t.key),p(o,()=>t.value),p(s,d(Z,{get when(){return!!t.remove},get children(){return d(ye,{get class(){return`${r().hover} ${cl.removeChipButton}`},get onClick(){return t.remove},children:"X"})}}),null),z(()=>U(s,`${r().tertiary} ${cl.Chip} ${t.class??""}`)),s})()},Ag="_compBody_1xaw7_1",Lg={compBody:Ag};var Og=w("<div>");const Ut=t=>{const[e,n]=It(t,["children","class"]),[r,s]=Me();fn();const i=G(()=>Ie(r().theme));return(()=>{var a=Og();return wt(a,ct(n,{get class(){return`${i().primary} ${Lg.compBody} ${e.class??""}`}}),!1,!0),p(a,()=>e.children),a})()},Pg="_header_nb7qb_1",Rg="_body_nb7qb_26",Ig="_totalPanel_nb7qb_35",Hi={header:Pg,body:Rg,totalPanel:Ig};var Ng=w("<div>"),Dg=w("<div><div><span>");const Wn=t=>{const[e,n]=P(!!t.startOpen),[r,s]=Me();He(tt);const i=G(()=>Ie(r().theme));return(()=>{var a=Dg(),o=a.firstChild,l=o.firstChild;return wt(a,ct({get class(){return`${Hi.totalPanel} ${t.styles}`}},t),!1,!0),p(l,()=>t.children[0]),p(o,d(ye,{onClick:()=>{n(c=>!c),t.extraLogic&&t.extraLogic()},get class(){return`${i()?.hover}`},get children(){return[d(Z,{get when(){return!e()},get children(){return d($u,{})}}),d(Z,{get when(){return e()},get children(){return d(wu,{})}})]}}),null),p(a,d(Z,{get when(){return e()},get children(){var c=Ng();return p(c,()=>t.children[1]),z(()=>U(c,`${i()?.accent} ${Hi.body}`)),c}}),null),z(()=>U(o,`${i()?.accent} ${Hi.header}`)),a})()},Mg="_input_mfc1j_2",Bg="_error_mfc1j_37",jg="_success_mfc1j_40",Fg="_warning_mfc1j_43",Ug="_info_mfc1j_46",zg="_disabled_mfc1j_49",Kg="_checkbox_mfc1j_53",Hg="_transparent_mfc1j_57",ul={input:Mg,error:Bg,success:jg,warning:Fg,info:Ug,disabled:zg,checkbox:Kg,transparent:Hg};var qg=w("<input>");const $e=t=>{const[e,n]=It(t,["tooltip","transparent"]),r=s=>["checkbox"].includes(s??"text");return(()=>{var s=qg();return wt(s,ct(n,{get class(){return`${ul.input} ${e.transparent&&!r(n.type)?ul.transparent:""} ${t.class??""}`},get title(){return e.tooltip}}),!1,!1),s})()};function Wg(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const Gg="_feature_fg9e7_1",Vg="_table_fg9e7_5",Yg="_tableRow_fg9e7_9",Jg="_tableCell_fg9e7_13",Is={feature:Gg,table:Vg,tableRow:Yg,tableCell:Jg};var Zg=w("<table><thead><tr><th>Level</th><th>PB</th><th>Features</th></tr></thead><tbody>"),Xg=w("<th>"),Qg=w("<tr><td></td><td></td><td>"),em=w("<td><span>");const tm=t=>{const e=t.Class,n=i=>{switch(t.Class().name.toLowerCase()){case"rogue":case"monk":if(!Number.isNaN(+i))return i;const a=JSON.parse(i);return`${JSON.parse(a).DiceCount}d${JSON.parse(a).DiceValue}`}return i},r=i=>t.Class().name.toLowerCase()==="sorcerer"?i.slice(1):i,s=()=>t.Class()?.classLevels?.sort((o,l)=>Object.keys(l.classSpecific).length-Object.keys(o.classSpecific).length);return(()=>{var i=Zg(),a=i.firstChild,o=a.firstChild,l=o.firstChild,c=l.nextSibling;c.nextSibling;var u=a.nextSibling;return p(o,d(Y,{get each(){return r(Object.keys(s()[0].classSpecific))},children:h=>(()=>{var f=Xg();return p(f,()=>Wg(h)),f})()}),null),p(u,d(Y,{get each(){return e().classLevels.sort((h,f)=>h.info.level-f.info.level)},children:h=>(()=>{var f=Qg(),g=f.firstChild,b=g.nextSibling,m=b.nextSibling;return f.style.setProperty("border","1px solid white"),p(g,()=>h.info.level),p(b,()=>h.profBonus),p(m,()=>h.features.map(y=>y.name).join(", ")),p(f,d(Y,{get each(){return r(Object.keys(h.classSpecific))},children:y=>(()=>{var _=em(),v=_.firstChild;return p(v,()=>n(h.classSpecific[y])),_})()}),null),z(y=>{var _=`${Is.tableRow}`,v=`${Is.feature}`;return _!==y.e&&U(f,y.e=_),v!==y.t&&U(m,y.t=v),y},{e:void 0,t:void 0}),f})()})),z(h=>{var f=`${Is.table}`,g=`${Is.tableRow}`;return f!==h.e&&U(i,h.e=f),g!==h.t&&U(o,h.t=g),h},{e:void 0,t:void 0}),i})()};const nm="_view_tp4uv_1",rm={view:nm};var sm=w("<h4>At Higher Levels: "),im=w("<span>"),am=w("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>");const om=t=>{const e=He(tt),[{"0":n,"1":r},s]=It(t.backgroundClick,["0","1"]),i=()=>t.spell();return ug(),d(vo,{get title(){return i().name},get width(){return e.isMobile()?"100%":"50%"},get height(){return e.isMobile()?"100%":"50%"},backgroundClick:[n,r],get children(){var a=am(),o=a.firstChild,l=o.firstChild,c=l.nextSibling,u=c.firstChild,h=c.nextSibling,f=h.firstChild,g=f.nextSibling;g.nextSibling;var b=h.nextSibling,m=b.firstChild,y=m.nextSibling;y.nextSibling;var _=b.nextSibling;_.firstChild;var v=_.nextSibling;v.firstChild;var C=v.nextSibling;C.firstChild;var x=C.nextSibling;x.firstChild;var k=x.nextSibling;return p(l,()=>i().name),p(c,()=>mp(i().level),u),p(c,()=>i().school,null),p(h,()=>i().castingTime,g),p(b,()=>i().range,y),p(_,()=>vp(i()),null),p(v,()=>i().duration,null),p(C,()=>i().classes.join(", "),null),p(x,()=>i().subClasses.join(", "),null),p(k,()=>i().desc),p(o,d(Z,{get when(){return!!i().higherLevel},get children(){return[sm()," ",(()=>{var I=im();return p(I,()=>i().higherLevel),I})()]}}),null),z(()=>U(a,`${rm.view}`)),a}})},lm="_paginator_1d3k4_1",cm="_pageView_1d3k4_8",hl={paginator:lm,pageView:cm};var um=w("<div><select></select><div><div></div> / <div>"),hm=w("<option>");const bo=t=>{const[e,n]=P(1),[r,s]=P(10),i=t.setPaginatedItems,o=He(tt)?.useStyle(),l=G(()=>t.items().slice((e()-1)*r(),e()*r())),c=G(()=>Math.ceil(t.items().length/r())),u=t.itemsPerPage??[10,20,50,100];return z(()=>{e()>c()&&n(c())}),z(()=>{i(l())}),(()=>{var h=um(),f=h.firstChild,g=f.nextSibling,b=g.firstChild,m=b.nextSibling,y=m.nextSibling;return p(h,d(ye,{get disabled(){return e()===1},onClick:()=>n(1),children:"←←"}),f),p(h,d(ye,{get disabled(){return e()===1},onClick:()=>n(e()-1),children:"←"}),f),f.addEventListener("change",_=>s(+_.currentTarget.value)),p(f,d(Y,{each:u,children:_=>(()=>{var v=hm();return v.value=_,p(v,_),v})()})),p(b,e),p(y,c),p(h,d(ye,{get disabled(){return e()===c()},onClick:()=>n(e()+1),children:"→"}),null),p(h,d(ye,{get disabled(){return e()===c()},onClick:()=>n(c()),children:"→→"}),null),z(_=>{var v=`${o?.accent} ${hl.paginator} `,C=hl.pageView;return v!==_.e&&U(h,_.e=v),C!==_.t&&U(g,_.t=C),_},{e:void 0,t:void 0}),h})()},dm="_searchBar_urvs3_1",dl={searchBar:dm};var fm=w("<div><input type=text><button>"),pm=w('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const ku=t=>{const[e,n]=P(""),r=()=>{const s=e().toLowerCase(),i=t.dataSource().filter(a=>s.trim().length===0?!0:JSON.stringify(a).toLowerCase().includes(s.trim()));t.setResults(i)};return(()=>{var s=fm(),i=s.firstChild,a=i.nextSibling;return i.addEventListener("submit",()=>r()),i.$$keydown=o=>o.key==="Enter"&&r(),i.addEventListener("change",o=>n(o.currentTarget.value)),wt(i,ct({get value(){return e()}},t,{get class(){return`${dl.input} ${t.class??""}`}}),!1,!1),a.$$click=r,p(a,d(gm,{})),z(o=>{var l=dl.searchBar,c=t.tooltip??"Search!";return l!==o.e&&U(s,o.e=l),c!==o.t&&ht(a,"title",o.t=c),o},{e:void 0,t:void 0}),s})()},gm=t=>(()=>{var e=pm();return wt(e,ct(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();Ft(["keydown","click"]);const mm="_select_1joqo_1",vm="_transparent_1joqo_8",fl={select:mm,transparent:vm};var bm=w("<option>");const ce=t=>{fn();const[e,n]=Me(),r=G(()=>Ie(e().theme));return(()=>{var s=bm();return wt(s,ct(t,{get class(){return`${r().primary} ${t.class??""}`}}),!1,!1),s})()};var ym=w("<select>");const Ge=t=>{const[e,n]=It(t,["disableUnselected","class","transparent"]);return(()=>{var r=ym();return wt(r,ct(n,{get class(){return`${fl.select} ${e.transparent?fl.transparent:""} ${e.class??""}`}}),!1,!0),p(r,d(Z,{get when(){return!e.disableUnselected},get children(){return d(ce,{children:"--------"})}}),null),p(r,()=>t.children,null),r})()},_m="_areaStyle_gxfg5_1",wm="_picButton_gxfg5_16",$m="_transparent_gxfg5_23",Ns={areaStyle:_m,picButton:wm,transparent:$m};function Sm({multiple:t=!1,accept:e=""}){const n=document.createElement("input");return n.type="file",n.accept=e,n.multiple=t,n}function km(t){const e=[];if(!t)return e;for(const n in t){const r=+n;if(isNaN(+r))continue;const s=t[r];if(!s)continue;const i={source:URL.createObjectURL(s),name:s.name,size:s.size,file:s};e.push(i)}return e}function Cm(t){const[e,n]=P([]);let r=()=>{};const s=async l=>{l.preventDefault(),l.stopPropagation();const c=l.currentTarget;let u=[];c.files&&(u=km(c.files)),c.removeEventListener("change",s),c.remove(),n(u);try{await r(u)}catch(h){console.error(h)}};return{files:e,selectFiles:l=>{l&&(r=l);const c=Sm(t||{});c.addEventListener("change",s),c.click()},removeFile:l=>{n(c=>c.filter(u=>u.name!==l))},clearFiles:()=>{n([])}}}var xm=w("<div><h1>Modal</h1><div><h2>Upload And image to parse text from");const Tm=t=>{const[e,n]=It(t,["uploadType","setData"]),{files:r,selectFiles:s}=Cm({accept:e.uploadType==="image"?"image/*":"file/*"}),i=fn();return d(vo,{get width(){return i.isMobile()?"80vw":"45vw"},get height(){return i.isMobile()?"45vh":"60vh"},get children(){var a=xm(),o=a.firstChild,l=o.nextSibling;return l.firstChild,p(l,d(ye,{onClick:c=>{s(([u])=>{t.snackbar&&vr(t.snackbar.start),fe.toObservable(u.file.arrayBuffer()).pipe(we(1),Qe(h=>{const f=u.name.split(".")[u.name.split(".").length-1],g=new Uint8Array(h),b=new Blob([g],{type:`image/${f}`});t.setData(URL.createObjectURL(b)),t.snackbar&&vr(t.snackbar.success)})).subscribe({error:h=>{t.snackbar&&vr({...t.snackbar.error})}})})},children:"Upload"}),null),a}})};var Em=w("<span>"),Am=w("<textarea>");const pl=t=>{let e;const[n,r]=It(t,["buttons","minSize","text","setText","class","tooltip","transparent","picToTextEnabled"]),[s,i]=P(!1),[a,o]=P("");function l(){if(e){e.style.height="auto";const c=n.minSize?.height??100,u=e.scrollHeight<c?c:e.scrollHeight;e.style.height=`${u}px`,e.setAttribute("style","height:"+u+"px;overflow-y:hidden;")}}return rc(()=>{l()}),z(()=>{l(),n.text()}),z(()=>{a()&&(vr({message:"Parsing text from image...",closeTimeout:2e3}),pb(a(),n.setText,()=>{l(),vr({message:"Text parsed from image successfully.",closeTimeout:2e3})}))}),[d(Z,{get when(){return n.picToTextEnabled},get children(){var c=Em();return c.style.setProperty("width","inherit"),c.style.setProperty("font-size","1em"),p(c,d(ye,{get styleType(){return n.buttons?.styleType??"accent"},get class(){return`${Ns.picButton}`},onClick:u=>i(h=>!h),get children(){return[d(mb,{width:"30px",height:"30px",style:{fill:"white"}}),d(Z,{get when(){return s()},get children(){return d(Tm,{setData:o,uploadType:"image"})}})]}})),z(()=>U(c,`${n.transparent?Ns.transparent:""}`)),c}}),(()=>{var c=Am();return br(u=>{e=u,l()},c),wt(c,ct(r,{get class(){return`${Ns.areaStyle} ${n.class??""} ${n.transparent?Ns.transparent:""}`},get value(){return n.text()},onInput:u=>{n.setText(u.currentTarget.value),l()},get title(){return n.tooltip}}),!1,!1),c})()]};function yo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let er=yo();function Cu(t){er=t}const xu=/[&<>"']/,Lm=new RegExp(xu.source,"g"),Tu=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Om=new RegExp(Tu.source,"g"),Pm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gl=t=>Pm[t];function Tt(t,e){if(e){if(xu.test(t))return t.replace(Lm,gl)}else if(Tu.test(t))return t.replace(Om,gl);return t}const Rm=/(^|[^\[])\^/g;function Ne(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const r={replace:(s,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Rm,"$1"),n=n.replace(s,a),r},getRegex:()=>new RegExp(n,e)};return r}function ml(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const rs={exec:()=>null};function vl(t,e){const n=t.replace(/\|/g,(i,a,o)=>{let l=!1,c=a;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),r=n.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Mr(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r;){const i=t.charAt(r-s-1);if(i===e&&!n)s++;else if(i!==e&&n)s++;else break}return t.slice(0,r-s)}function Im(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function bl(t,e,n,r){const s=e.href,i=e.title?Tt(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const o={type:"link",raw:n,href:s,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,o}return{type:"image",raw:n,href:s,title:i,text:Tt(a)}}function Nm(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(s=>{const i=s.match(/^\s+/);if(i===null)return s;const[a]=i;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}class mi{options;rules;lexer;constructor(e){this.options=e||er}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Mr(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=Nm(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const s=Mr(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Mr(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=Mr(n[0],`
`).split(`
`),s="",i="";const a=[];for(;r.length>0;){let o=!1;const l=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))l.push(r[c]),o=!0;else if(!o)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),h=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}
${u}`:u,i=i?`${i}
${h}`:h;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=f,r.length===0)break;const g=a[a.length-1];if(g?.type==="code")break;if(g?.type==="blockquote"){const b=g,m=b.raw+`
`+r.join(`
`),y=this.blockquote(m);a[a.length-1]=y,s=s.substring(0,s.length-b.raw.length)+y.raw,i=i.substring(0,i.length-b.text.length)+y.text;break}else if(g?.type==="list"){const b=g,m=b.raw+`
`+r.join(`
`),y=this.list(m);a[a.length-1]=y,s=s.substring(0,s.length-g.raw.length)+y.raw,i=i.substring(0,i.length-b.raw.length)+y.raw,r=m.substring(a[a.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const s=r.length>1,i={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const a=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let l=!1,c="",u="";if(!(n=a.exec(e))||this.rules.block.hr.test(e))break;c=n[0],e=e.substring(c.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),f=e.split(`
`,1)[0],g=!h.trim(),b=0;if(this.options.pedantic?(b=2,u=h.trimStart()):g?b=n[1].length+1:(b=n[2].search(/[^ ]/),b=b>4?1:b,u=h.slice(b),b+=n[1].length),g&&/^ *$/.test(f)&&(c+=f+`
`,e=e.substring(f.length+1),l=!0),!l){const _=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),x=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;e;){const k=e.split(`
`,1)[0];if(f=k,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(f)||x.test(f)||_.test(f)||v.test(e))break;if(f.search(/[^ ]/)>=b||!f.trim())u+=`
`+f.slice(b);else{if(g||h.search(/[^ ]/)>=4||C.test(h)||x.test(h)||v.test(h))break;u+=`
`+f}!g&&!f.trim()&&(g=!0),c+=k+`
`,e=e.substring(k.length+1),h=f.slice(b)}}i.loose||(o?i.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,y;this.options.gfm&&(m=/^\[[ xX]\] /.exec(u),m&&(y=m[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:y,loose:!1,text:u,tokens:[]}),i.raw+=c}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:i}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const r=vl(n[1]),s=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(const o of s)/^ *-+: *$/.test(o)?a.align.push("right"):/^ *:-+: *$/.test(o)?a.align.push("center"):/^ *:-+ *$/.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<r.length;o++)a.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:a.align[o]});for(const o of i)a.rows.push(vl(o,a.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[c]})));return a}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Tt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=Mr(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=Im(n[2],"()");if(a>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let s=n[2],i="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],i=a[3])}else i=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),bl(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const s=(r[2]||r[1]).replace(/\s+/g," "),i=n[s.toLowerCase()];if(!i){const a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return bl(r,i,r[0],this.lexer)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const a=[...s[0]].length-1;let o,l,c=a,u=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+a);(s=h.exec(n))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=[...o].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=[...s[0]][0].length,g=e.slice(0,a+s.index+f+l);if(Math.min(a,l)%2){const m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}const b=g.slice(2,-2);return{type:"strong",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const s=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return s&&i&&(r=r.substring(1,r.length-1)),r=Tt(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=Tt(n[1]),s="mailto:"+r):(r=Tt(n[1]),s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let r,s;if(n[2]==="@")r=Tt(n[0]),s="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=Tt(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=Tt(n[0]),{type:"text",raw:n[0],text:r}}}}const Dm=/^(?: *(?:\n|$))+/,Mm=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Bm=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ms=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,jm=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Eu=/(?:[*+-]|\d{1,9}[.)])/,Au=Ne(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Eu).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_o=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Fm=/^[^\n]+/,wo=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Um=Ne(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",wo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zm=Ne(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Eu).getRegex(),Ti="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$o=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Km=Ne("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",$o).replace("tag",Ti).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Lu=Ne(_o).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ti).getRegex(),Hm=Ne(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Lu).getRegex(),So={blockquote:Hm,code:Mm,def:Um,fences:Bm,heading:jm,hr:ms,html:Km,lheading:Au,list:zm,newline:Dm,paragraph:Lu,table:rs,text:Fm},yl=Ne("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ti).getRegex(),qm={...So,table:yl,paragraph:Ne(_o).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",yl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ti).getRegex()},Wm={...So,html:Ne(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$o).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ne(_o).replace("hr",ms).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Au).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ou=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Gm=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Pu=/^( {2,}|\\)\n(?!\s*$)/,Vm=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,vs="\\p{P}\\p{S}",Ym=Ne(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,vs).getRegex(),Jm=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Zm=Ne(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,vs).getRegex(),Xm=Ne("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,vs).getRegex(),Qm=Ne("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,vs).getRegex(),ev=Ne(/\\([punct])/,"gu").replace(/punct/g,vs).getRegex(),tv=Ne(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nv=Ne($o).replace("(?:-->|$)","-->").getRegex(),rv=Ne("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nv).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),vi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sv=Ne(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",vi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ru=Ne(/^!?\[(label)\]\[(ref)\]/).replace("label",vi).replace("ref",wo).getRegex(),Iu=Ne(/^!?\[(ref)\](?:\[\])?/).replace("ref",wo).getRegex(),iv=Ne("reflink|nolink(?!\\()","g").replace("reflink",Ru).replace("nolink",Iu).getRegex(),ko={_backpedal:rs,anyPunctuation:ev,autolink:tv,blockSkip:Jm,br:Pu,code:Gm,del:rs,emStrongLDelim:Zm,emStrongRDelimAst:Xm,emStrongRDelimUnd:Qm,escape:Ou,link:sv,nolink:Iu,punctuation:Ym,reflink:Ru,reflinkSearch:iv,tag:rv,text:Vm,url:rs},av={...ko,link:Ne(/^!?\[(label)\]\((.*?)\)/).replace("label",vi).getRegex(),reflink:Ne(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",vi).getRegex()},Ha={...ko,escape:Ne(Ou).replace("])","~|])").getRegex(),url:Ne(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ov={...Ha,br:Ne(Pu).replace("{2,}","*").getRegex(),text:Ne(Ha.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ds={normal:So,gfm:qm,pedantic:Wm},Br={normal:ko,gfm:Ha,breaks:ov,pedantic:av};class Vt{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||er,this.options.tokenizer=this.options.tokenizer||new mi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Ds.normal,inline:Br.normal};this.options.pedantic?(n.block=Ds.pedantic,n.inline=Br.pedantic):this.options.gfm&&(n.block=Ds.gfm,this.options.breaks?n.inline=Br.breaks:n.inline=Br.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ds,inline:Br}}static lex(e,n){return new Vt(n).lex(e)}static lexInline(e,n){return new Vt(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,l,c)=>l+"    ".repeat(c.length));let s,i,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(s=o.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(a=e.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(a))){i=n[n.length-1],r&&i?.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s),r=a.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,s,i,a=e,o,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,a,c)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),n.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(i=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class bi{options;parser;constructor(e){this.options=e||er}space(e){return""}code({text:e,lang:n,escaped:r}){const s=(n||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+`
`;return s?'<pre><code class="language-'+Tt(s)+'">'+(r?i:Tt(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:Tt(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let s="";for(let o=0;o<e.items.length;o++){const l=e.items[o];s+=this.listitem(l)}const i=n?"ol":"ul",a=n&&r!==1?' start="'+r+'"':"";return"<"+i+a+`>
`+s+"</"+i+`>
`}listitem(e){let n="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);n+=this.tablerow({text:r});let s="";for(let i=0;i<e.rows.length;i++){const a=e.rows[i];r="";for(let o=0;o<a.length;o++)r+=this.tablecell(a[o]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const s=this.parser.parseInline(r),i=ml(e);if(i===null)return s;e=i;let a='<a href="'+e+'"';return n&&(a+=' title="'+n+'"'),a+=">"+s+"</a>",a}image({href:e,title:n,text:r}){const s=ml(e);if(s===null)return r;e=s;let i=`<img src="${e}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Co{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Yt{options;renderer;textRenderer;constructor(e){this.options=e||er,this.options.renderer=this.options.renderer||new bi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Co}static parse(e,n){return new Yt(n).parse(e)}static parseInline(e,n){return new Yt(n).parseInline(e)}parse(e,n=!0){let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=l||"";continue}}const a=i;switch(a.type){case"space":{r+=this.renderer.space(a);continue}case"hr":{r+=this.renderer.hr(a);continue}case"heading":{r+=this.renderer.heading(a);continue}case"code":{r+=this.renderer.code(a);continue}case"table":{r+=this.renderer.table(a);continue}case"blockquote":{r+=this.renderer.blockquote(a);continue}case"list":{r+=this.renderer.list(a);continue}case"html":{r+=this.renderer.html(a);continue}case"paragraph":{r+=this.renderer.paragraph(a);continue}case"text":{let o=a,l=this.renderer.text(o);for(;s+1<e.length&&e[s+1].type==="text";)o=e[++s],l+=`
`+this.renderer.text(o);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):r+=l;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,n){n=n||this.renderer;let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=o||"";continue}}const a=i;switch(a.type){case"escape":{r+=n.text(a);break}case"html":{r+=n.html(a);break}case"link":{r+=n.link(a);break}case"image":{r+=n.image(a);break}case"strong":{r+=n.strong(a);break}case"em":{r+=n.em(a);break}case"codespan":{r+=n.codespan(a);break}case"br":{r+=n.br(a);break}case"del":{r+=n.del(a);break}case"text":{r+=n.text(a);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}}class ei{options;constructor(e){this.options=e||er}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class lv{defaults=yo();options=this.setOptions;parse=this.parseMarkdown(Vt.lex,Yt.parse);parseInline=this.parseMarkdown(Vt.lexInline,Yt.parseInline);Parser=Yt;Renderer=bi;TextRenderer=Co;Lexer=Vt;Tokenizer=mi;Hooks=ei;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const i=s;for(const a of i.header)r=r.concat(this.walkTokens(a.tokens,n));for(const a of i.rows)for(const o of a)r=r.concat(this.walkTokens(o.tokens,n));break}case"list":{const i=s;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=s;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(a=>{const o=i[a].flat(1/0);r=r.concat(this.walkTokens(o,n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const a=n.renderers[i.name];a?n.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=n[i.level];a?a.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),s.extensions=n),r.renderer){const i=this.defaults.renderer||new bi(this.defaults);for(const a in r.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const o=a,l=r.renderer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}s.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new mi(this.defaults);for(const a in r.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=r.tokenizer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new ei;for(const a in r.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;const o=a,l=r.hooks[o],c=i[o];ei.passThroughHooks.has(a)?i[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(f=>c.call(i,f));const h=l.call(i,u);return c.call(i,h)}:i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,a=r.walkTokens;s.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Vt.lex(e,n??this.defaults)}parser(e,n){return Yt.parse(e,n??this.defaults)}parseMarkdown(e,n){return(s,i)=>{const a={...i},o={...this.defaults,...a},l=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&a.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>n(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(l);try{o.hooks&&(s=o.hooks.preprocess(s));let c=e(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=n(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return l(c)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Tt(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const Jn=new lv;function Oe(t,e){return Jn.parse(t,e)}Oe.options=Oe.setOptions=function(t){return Jn.setOptions(t),Oe.defaults=Jn.defaults,Cu(Oe.defaults),Oe};Oe.getDefaults=yo;Oe.defaults=er;Oe.use=function(...t){return Jn.use(...t),Oe.defaults=Jn.defaults,Cu(Oe.defaults),Oe};Oe.walkTokens=function(t,e){return Jn.walkTokens(t,e)};Oe.parseInline=Jn.parseInline;Oe.Parser=Yt;Oe.parser=Yt.parse;Oe.Renderer=bi;Oe.TextRenderer=Co;Oe.Lexer=Vt;Oe.lexer=Vt.lex;Oe.Tokenizer=mi;Oe.Hooks=ei;Oe.parse=Oe;Oe.options;Oe.setOptions;Oe.use;Oe.walkTokens;Oe.parseInline;Yt.parse;Vt.lex;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:Nu,setPrototypeOf:_l,isFrozen:cv,getPrototypeOf:uv,getOwnPropertyDescriptor:hv}=Object;let{freeze:_t,seal:Pt,create:Du}=Object,{apply:qa,construct:Wa}=typeof Reflect<"u"&&Reflect;_t||(_t=function(e){return e});Pt||(Pt=function(e){return e});qa||(qa=function(e,n,r){return e.apply(n,r)});Wa||(Wa=function(e,n){return new e(...n)});const Ms=At(Array.prototype.forEach),wl=At(Array.prototype.pop),jr=At(Array.prototype.push),ti=At(String.prototype.toLowerCase),qi=At(String.prototype.toString),$l=At(String.prototype.match),Fr=At(String.prototype.replace),dv=At(String.prototype.indexOf),fv=At(String.prototype.trim),Bt=At(Object.prototype.hasOwnProperty),mt=At(RegExp.prototype.test),Ur=pv(TypeError);function At(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return qa(t,e,r)}}function pv(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wa(t,n)}}function ke(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ti;_l&&_l(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(cv(e)||(e[r]=i),s=i)}t[s]=!0}return t}function gv(t){for(let e=0;e<t.length;e++)Bt(t,e)||(t[e]=null);return t}function Fn(t){const e=Du(null);for(const[n,r]of Nu(t))Bt(t,n)&&(Array.isArray(r)?e[n]=gv(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Fn(r):e[n]=r);return e}function zr(t,e){for(;t!==null;){const r=hv(t,e);if(r){if(r.get)return At(r.get);if(typeof r.value=="function")return At(r.value)}t=uv(t)}function n(){return null}return n}const Sl=_t(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wi=_t(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gi=_t(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mv=_t(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vi=_t(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vv=_t(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kl=_t(["#text"]),Cl=_t(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Yi=_t(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xl=_t(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Bs=_t(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bv=Pt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yv=Pt(/<%[\w\W]*|[\w\W]*%>/gm),_v=Pt(/\${[\w\W]*}/gm),wv=Pt(/^data-[\-\w.\u00B7-\uFFFF]/),$v=Pt(/^aria-[\-\w]+$/),Mu=Pt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sv=Pt(/^(?:\w+script|data):/i),kv=Pt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bu=Pt(/^html$/i),Cv=Pt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Tl=Object.freeze({__proto__:null,MUSTACHE_EXPR:bv,ERB_EXPR:yv,TMPLIT_EXPR:_v,DATA_ATTR:wv,ARIA_ATTR:$v,IS_ALLOWED_URI:Mu,IS_SCRIPT_OR_DATA:Sv,ATTR_WHITESPACE:kv,DOCTYPE_NAME:Bu,CUSTOM_ELEMENT:Cv});const Kr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},xv=function(){return typeof window>"u"?null:window},Tv=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function ju(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xv();const e=J=>ju(J);if(e.version="3.1.6",e.removed=[],!t||!t.document||t.document.nodeType!==Kr.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:g}=t,b=l.prototype,m=zr(b,"cloneNode"),y=zr(b,"remove"),_=zr(b,"nextSibling"),v=zr(b,"childNodes"),C=zr(b,"parentNode");if(typeof a=="function"){const J=n.createElement("template");J.content&&J.content.ownerDocument&&(n=J.content.ownerDocument)}let x,k="";const{implementation:I,createNodeIterator:A,createDocumentFragment:K,getElementsByTagName:T}=n,{importNode:N}=r;let O={};e.isSupported=typeof Nu=="function"&&typeof C=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:q,TMPLIT_EXPR:V,DATA_ATTR:B,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:R}=Tl;let{IS_ALLOWED_URI:D}=Tl,L=null;const ee=ke({},[...Sl,...Wi,...Gi,...Vi,...kl]);let $=null;const E=ke({},[...Cl,...Yi,...xl,...Bs]);let j=Object.seal(Du(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,re=null,W=!0,oe=!0,le=!1,de=!0,me=!1,Se=!0,qe=!1,Lt=!1,En=!1,zt=!1,Kt=!1,Ht=!1,tr=!0,nt=!1;const rt="user-content-";let Je=!0,ut=!1,$t={},Zt=null;const nr=ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rr=null;const An=ke({},["audio","video","img","source","image","track"]);let Lr=null;const Or=ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ln="http://www.w3.org/1998/Math/MathML",On="http://www.w3.org/2000/svg",Nt="http://www.w3.org/1999/xhtml";let ne=Nt,ie=!1,ve=null;const at=ke({},[Ln,On,Nt],qi);let Ce=null;const Ae=["application/xhtml+xml","text/html"],Be="text/html";let be=null,Ve=null;const Pe=n.createElement("form"),qt=function(S){return S instanceof RegExp||S instanceof Function},sr=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ve&&Ve===S)){if((!S||typeof S!="object")&&(S={}),S=Fn(S),Ce=Ae.indexOf(S.PARSER_MEDIA_TYPE)===-1?Be:S.PARSER_MEDIA_TYPE,be=Ce==="application/xhtml+xml"?qi:ti,L=Bt(S,"ALLOWED_TAGS")?ke({},S.ALLOWED_TAGS,be):ee,$=Bt(S,"ALLOWED_ATTR")?ke({},S.ALLOWED_ATTR,be):E,ve=Bt(S,"ALLOWED_NAMESPACES")?ke({},S.ALLOWED_NAMESPACES,qi):at,Lr=Bt(S,"ADD_URI_SAFE_ATTR")?ke(Fn(Or),S.ADD_URI_SAFE_ATTR,be):Or,rr=Bt(S,"ADD_DATA_URI_TAGS")?ke(Fn(An),S.ADD_DATA_URI_TAGS,be):An,Zt=Bt(S,"FORBID_CONTENTS")?ke({},S.FORBID_CONTENTS,be):nr,te=Bt(S,"FORBID_TAGS")?ke({},S.FORBID_TAGS,be):{},re=Bt(S,"FORBID_ATTR")?ke({},S.FORBID_ATTR,be):{},$t=Bt(S,"USE_PROFILES")?S.USE_PROFILES:!1,W=S.ALLOW_ARIA_ATTR!==!1,oe=S.ALLOW_DATA_ATTR!==!1,le=S.ALLOW_UNKNOWN_PROTOCOLS||!1,de=S.ALLOW_SELF_CLOSE_IN_ATTR!==!1,me=S.SAFE_FOR_TEMPLATES||!1,Se=S.SAFE_FOR_XML!==!1,qe=S.WHOLE_DOCUMENT||!1,zt=S.RETURN_DOM||!1,Kt=S.RETURN_DOM_FRAGMENT||!1,Ht=S.RETURN_TRUSTED_TYPE||!1,En=S.FORCE_BODY||!1,tr=S.SANITIZE_DOM!==!1,nt=S.SANITIZE_NAMED_PROPS||!1,Je=S.KEEP_CONTENT!==!1,ut=S.IN_PLACE||!1,D=S.ALLOWED_URI_REGEXP||Mu,ne=S.NAMESPACE||Nt,j=S.CUSTOM_ELEMENT_HANDLING||{},S.CUSTOM_ELEMENT_HANDLING&&qt(S.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=S.CUSTOM_ELEMENT_HANDLING.tagNameCheck),S.CUSTOM_ELEMENT_HANDLING&&qt(S.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=S.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),S.CUSTOM_ELEMENT_HANDLING&&typeof S.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=S.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me&&(oe=!1),Kt&&(zt=!0),$t&&(L=ke({},kl),$=[],$t.html===!0&&(ke(L,Sl),ke($,Cl)),$t.svg===!0&&(ke(L,Wi),ke($,Yi),ke($,Bs)),$t.svgFilters===!0&&(ke(L,Gi),ke($,Yi),ke($,Bs)),$t.mathMl===!0&&(ke(L,Vi),ke($,xl),ke($,Bs))),S.ADD_TAGS&&(L===ee&&(L=Fn(L)),ke(L,S.ADD_TAGS,be)),S.ADD_ATTR&&($===E&&($=Fn($)),ke($,S.ADD_ATTR,be)),S.ADD_URI_SAFE_ATTR&&ke(Lr,S.ADD_URI_SAFE_ATTR,be),S.FORBID_CONTENTS&&(Zt===nr&&(Zt=Fn(Zt)),ke(Zt,S.FORBID_CONTENTS,be)),Je&&(L["#text"]=!0),qe&&ke(L,["html","head","body"]),L.table&&(ke(L,["tbody"]),delete te.tbody),S.TRUSTED_TYPES_POLICY){if(typeof S.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ur('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof S.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ur('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=S.TRUSTED_TYPES_POLICY,k=x.createHTML("")}else x===void 0&&(x=Tv(g,s)),x!==null&&typeof k=="string"&&(k=x.createHTML(""));_t&&_t(S),Ve=S}},Pr=ke({},["mi","mo","mn","ms","mtext"]),bs=ke({},["foreignobject","annotation-xml"]),Rr=ke({},["title","style","font","a","script"]),ir=ke({},[...Wi,...Gi,...mv]),ys=ke({},[...Vi,...vv]),Ei=function(S){let H=C(S);(!H||!H.tagName)&&(H={namespaceURI:ne,tagName:"template"});const ae=ti(S.tagName),xe=ti(H.tagName);return ve[S.namespaceURI]?S.namespaceURI===On?H.namespaceURI===Nt?ae==="svg":H.namespaceURI===Ln?ae==="svg"&&(xe==="annotation-xml"||Pr[xe]):!!ir[ae]:S.namespaceURI===Ln?H.namespaceURI===Nt?ae==="math":H.namespaceURI===On?ae==="math"&&bs[xe]:!!ys[ae]:S.namespaceURI===Nt?H.namespaceURI===On&&!bs[xe]||H.namespaceURI===Ln&&!Pr[xe]?!1:!ys[ae]&&(Rr[ae]||!ir[ae]):!!(Ce==="application/xhtml+xml"&&ve[S.namespaceURI]):!1},Ot=function(S){jr(e.removed,{element:S});try{C(S).removeChild(S)}catch{y(S)}},Pn=function(S,H){try{jr(e.removed,{attribute:H.getAttributeNode(S),from:H})}catch{jr(e.removed,{attribute:null,from:H})}if(H.removeAttribute(S),S==="is"&&!$[S])if(zt||Kt)try{Ot(H)}catch{}else try{H.setAttribute(S,"")}catch{}},Rn=function(S){let H=null,ae=null;if(En)S="<remove></remove>"+S;else{const _e=$l(S,/^[\r\n\t ]+/);ae=_e&&_e[0]}Ce==="application/xhtml+xml"&&ne===Nt&&(S='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+S+"</body></html>");const xe=x?x.createHTML(S):S;if(ne===Nt)try{H=new f().parseFromString(xe,Ce)}catch{}if(!H||!H.documentElement){H=I.createDocument(ne,"template",null);try{H.documentElement.innerHTML=ie?k:xe}catch{}}const Ze=H.body||H.documentElement;return S&&ae&&Ze.insertBefore(n.createTextNode(ae),Ze.childNodes[0]||null),ne===Nt?T.call(H,qe?"html":"body")[0]:qe?H.documentElement:Ze},Ir=function(S){return A.call(S.ownerDocument||S,S,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_s=function(S){return S instanceof h&&(typeof S.nodeName!="string"||typeof S.textContent!="string"||typeof S.removeChild!="function"||!(S.attributes instanceof u)||typeof S.removeAttribute!="function"||typeof S.setAttribute!="function"||typeof S.namespaceURI!="string"||typeof S.insertBefore!="function"||typeof S.hasChildNodes!="function")},ws=function(S){return typeof o=="function"&&S instanceof o},Dt=function(S,H,ae){O[S]&&Ms(O[S],xe=>{xe.call(e,H,ae,Ve)})},$s=function(S){let H=null;if(Dt("beforeSanitizeElements",S,null),_s(S))return Ot(S),!0;const ae=be(S.nodeName);if(Dt("uponSanitizeElement",S,{tagName:ae,allowedTags:L}),S.hasChildNodes()&&!ws(S.firstElementChild)&&mt(/<[/\w]/g,S.innerHTML)&&mt(/<[/\w]/g,S.textContent)||S.nodeType===Kr.progressingInstruction||Se&&S.nodeType===Kr.comment&&mt(/<[/\w]/g,S.data))return Ot(S),!0;if(!L[ae]||te[ae]){if(!te[ae]&&pe(ae)&&(j.tagNameCheck instanceof RegExp&&mt(j.tagNameCheck,ae)||j.tagNameCheck instanceof Function&&j.tagNameCheck(ae)))return!1;if(Je&&!Zt[ae]){const xe=C(S)||S.parentNode,Ze=v(S)||S.childNodes;if(Ze&&xe){const _e=Ze.length;for(let St=_e-1;St>=0;--St){const Wt=m(Ze[St],!0);Wt.__removalCount=(S.__removalCount||0)+1,xe.insertBefore(Wt,_(S))}}}return Ot(S),!0}return S instanceof l&&!Ei(S)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&mt(/<\/no(script|embed|frames)/i,S.innerHTML)?(Ot(S),!0):(me&&S.nodeType===Kr.text&&(H=S.textContent,Ms([M,q,V],xe=>{H=Fr(H,xe," ")}),S.textContent!==H&&(jr(e.removed,{element:S.cloneNode()}),S.textContent=H)),Dt("afterSanitizeElements",S,null),!1)},Q=function(S,H,ae){if(tr&&(H==="id"||H==="name")&&(ae in n||ae in Pe))return!1;if(!(oe&&!re[H]&&mt(B,H))){if(!(W&&mt(F,H))){if(!$[H]||re[H]){if(!(pe(S)&&(j.tagNameCheck instanceof RegExp&&mt(j.tagNameCheck,S)||j.tagNameCheck instanceof Function&&j.tagNameCheck(S))&&(j.attributeNameCheck instanceof RegExp&&mt(j.attributeNameCheck,H)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(H))||H==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&mt(j.tagNameCheck,ae)||j.tagNameCheck instanceof Function&&j.tagNameCheck(ae))))return!1}else if(!Lr[H]){if(!mt(D,Fr(ae,ge,""))){if(!((H==="src"||H==="xlink:href"||H==="href")&&S!=="script"&&dv(ae,"data:")===0&&rr[S])){if(!(le&&!mt(X,Fr(ae,ge,"")))){if(ae)return!1}}}}}}return!0},pe=function(S){return S!=="annotation-xml"&&$l(S,R)},Fe=function(S){Dt("beforeSanitizeAttributes",S,null);const{attributes:H}=S;if(!H)return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};let xe=H.length;for(;xe--;){const Ze=H[xe],{name:_e,namespaceURI:St,value:Wt}=Ze,Nr=be(_e);let gt=_e==="value"?Wt:fv(Wt);if(ae.attrName=Nr,ae.attrValue=gt,ae.keepAttr=!0,ae.forceKeepAttr=void 0,Dt("uponSanitizeAttribute",S,ae),gt=ae.attrValue,Se&&mt(/((--!?|])>)|<\/(style|title)/i,gt)){Pn(_e,S);continue}if(ae.forceKeepAttr||(Pn(_e,S),!ae.keepAttr))continue;if(!de&&mt(/\/>/i,gt)){Pn(_e,S);continue}me&&Ms([M,q,V],Ro=>{gt=Fr(gt,Ro," ")});const Po=be(S.nodeName);if(Q(Po,Nr,gt)){if(nt&&(Nr==="id"||Nr==="name")&&(Pn(_e,S),gt=rt+gt),x&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!St)switch(g.getAttributeType(Po,Nr)){case"TrustedHTML":{gt=x.createHTML(gt);break}case"TrustedScriptURL":{gt=x.createScriptURL(gt);break}}try{St?S.setAttributeNS(St,_e,gt):S.setAttribute(_e,gt),_s(S)?Ot(S):wl(e.removed)}catch{}}}Dt("afterSanitizeAttributes",S,null)},Ye=function J(S){let H=null;const ae=Ir(S);for(Dt("beforeSanitizeShadowDOM",S,null);H=ae.nextNode();)Dt("uponSanitizeShadowNode",H,null),!$s(H)&&(H.content instanceof i&&J(H.content),Fe(H));Dt("afterSanitizeShadowDOM",S,null)};return e.sanitize=function(J){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=null,ae=null,xe=null,Ze=null;if(ie=!J,ie&&(J="<!-->"),typeof J!="string"&&!ws(J))if(typeof J.toString=="function"){if(J=J.toString(),typeof J!="string")throw Ur("dirty is not a string, aborting")}else throw Ur("toString is not a function");if(!e.isSupported)return J;if(Lt||sr(S),e.removed=[],typeof J=="string"&&(ut=!1),ut){if(J.nodeName){const Wt=be(J.nodeName);if(!L[Wt]||te[Wt])throw Ur("root node is forbidden and cannot be sanitized in-place")}}else if(J instanceof o)H=Rn("<!---->"),ae=H.ownerDocument.importNode(J,!0),ae.nodeType===Kr.element&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?H=ae:H.appendChild(ae);else{if(!zt&&!me&&!qe&&J.indexOf("<")===-1)return x&&Ht?x.createHTML(J):J;if(H=Rn(J),!H)return zt?null:Ht?k:""}H&&En&&Ot(H.firstChild);const _e=Ir(ut?J:H);for(;xe=_e.nextNode();)$s(xe)||(xe.content instanceof i&&Ye(xe.content),Fe(xe));if(ut)return J;if(zt){if(Kt)for(Ze=K.call(H.ownerDocument);H.firstChild;)Ze.appendChild(H.firstChild);else Ze=H;return($.shadowroot||$.shadowrootmode)&&(Ze=N.call(r,Ze,!0)),Ze}let St=qe?H.outerHTML:H.innerHTML;return qe&&L["!doctype"]&&H.ownerDocument&&H.ownerDocument.doctype&&H.ownerDocument.doctype.name&&mt(Bu,H.ownerDocument.doctype.name)&&(St="<!DOCTYPE "+H.ownerDocument.doctype.name+`>
`+St),me&&Ms([M,q,V],Wt=>{St=Fr(St,Wt," ")}),x&&Ht?x.createHTML(St):St},e.setConfig=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sr(J),Lt=!0},e.clearConfig=function(){Ve=null,Lt=!1},e.isValidAttribute=function(J,S,H){Ve||sr({});const ae=be(J),xe=be(S);return Q(ae,xe,H)},e.addHook=function(J,S){typeof S=="function"&&(O[J]=O[J]||[],jr(O[J],S))},e.removeHook=function(J){if(O[J])return wl(O[J])},e.removeHooks=function(J){O[J]&&(O[J]=[])},e.removeAllHooks=function(){O={}},e}var Ev=ju();const Av="_markStyle_16k43_1",Lv={markStyle:Av};var Ov=w("<div>");const Pv=t=>{const[e,n]=It(t,["text","tooltip","class"]),[r,s]=P();return(()=>{var i=Ov();return br(s,i),wt(i,ct({get class(){return`${Lv.markStyle} ${e.class??""}`},get innerHTML(){return Ev.sanitize(Oe.parse(e.text(),{async:!1,gfm:!0}))},get title(){return e.tooltip}},n),!1,!1),i})()};class Fu extends cn{spells;classes;races;backgrounds;items;feats;constructor(e){super(e),this.version(1).stores({spells:"name",classes:"name",races:"name",backgrounds:"name",items:"name",feats:"name"})}}const Le=new Fu("homebrew");class Rv{classes;setClasses;homebrewClasses$=fe.toObservable(Le.classes.toArray());items;setItems;homebrewItems$=fe.toObservable(Le.items.toArray());feats;setFeats;homebrewFeats$=fe.toObservable(Le.feats.toArray());spells;setSpells;homebrewSpells$=fe.toObservable(Le.spells.toArray());backgrounds;setBackgrounds;homebrewBackgrounds$=fe.toObservable(Le.backgrounds.toArray());races;setRaces;homebrewRaces$=fe.toObservable(Le.races.toArray());constructor(e=[],n=[],r=[],s=[],i=[],a=[]){[this.classes,this.setClasses]=P(e),[this.items,this.setItems]=P(n),[this.feats,this.setFeats]=P(r),[this.spells,this.setSpells]=P(s),[this.backgrounds,this.setBackgrounds]=P(i),[this.races,this.setRaces]=P(a),this.homebrewClasses$.pipe(we(1),Qe(o=>this.setClasses(l=>[...l,...o]))).subscribe(),this.homebrewItems$.pipe(we(1),Qe(o=>this.setItems(l=>[...l,...o]))).subscribe(),this.homebrewFeats$.pipe(we(1),Qe(o=>this.setFeats(l=>[...l,...o]))).subscribe(),this.homebrewSpells$.pipe(we(1),Qe(o=>this.setSpells(l=>[...l,...o]))).subscribe(),this.homebrewBackgrounds$.pipe(we(1),Qe(o=>this.setBackgrounds(l=>[...l,...o]))).subscribe(),this.homebrewRaces$.pipe(we(1),Qe(o=>this.setRaces(l=>[...l,...o]))).subscribe()}addClass=e=>{this.classes().findIndex(n=>n.name===e.name)===-1&&(this.setClasses(n=>[...n,e]),this.addClassToDB(e).subscribe())};addClassToDB=e=>fe.toObservable(Le.classes.add(e)).pipe(we(1));updateClass(e){const n=this.classes().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.classes();r[n]=e,this.setClasses([...r])}updateClassesInDB=()=>{this.homebrewClasses$.pipe(we(1),ze(e=>fe.toObservable(Le.classes.bulkPut(this.classes())))).subscribe()};removeClass=e=>{const n=this.classes().findIndex(s=>s.name===e);if(n===-1)return;const r=this.classes();r.splice(n,1),this.setClasses([...r]),fe.toObservable(Le.classes.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.classes.bulkAdd(this.classes())))).subscribe()};addItem=e=>{this.items().findIndex(n=>n.name===e.name)===-1&&(this.setItems(n=>[...n,e]),this.addItemToDB(e).subscribe())};addItemToDB=e=>fe.toObservable(Le.items.add(e)).pipe(we(1));updateItem=e=>{const n=this.items().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.items();r[n]=e,this.setItems([...r])};updateItemsInDB=()=>{this.homebrewItems$.pipe(we(1),ze(e=>fe.toObservable(Le.items.bulkPut(this.items())))).subscribe()};removeItem=e=>{const n=this.items().findIndex(s=>s.name===e);if(n===-1)return;const r=this.items();r.splice(n,1),this.setItems([...r]),fe.toObservable(Le.items.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.items.bulkAdd(this.items())))).subscribe()};addFeat=e=>{this.feats().findIndex(n=>n.name===e.name)===-1&&(this.setFeats(n=>[...n,e]),this.addFeatToDB(e).subscribe())};addFeatToDB=e=>fe.toObservable(Le.feats.add(e)).pipe(we(1));updateFeat=e=>{const n=this.feats().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.feats();r[n]=e,this.setFeats([...r])};updateFeatsInDB=()=>{this.homebrewFeats$.pipe(we(1),ze(e=>fe.toObservable(Le.feats.bulkPut(this.feats())))).subscribe()};removeFeat=e=>{const n=this.feats().findIndex(s=>s.name===e);if(n===-1)return;const r=this.feats();r.splice(n,1),this.setFeats([...r]),fe.toObservable(Le.feats.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.feats.bulkAdd(this.feats())))).subscribe()};addSpell=e=>{this.spells().findIndex(n=>n.name===e.name)===-1&&(this.setSpells(n=>[...n,e]),this.addSpellToDB(e).subscribe())};addSpellToDB=e=>fe.toObservable(Le.spells.add(e)).pipe(we(1));updateSpell=e=>{const n=this.spells().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.spells();r[n]=e,this.setSpells([...r])};updateSpellsInDB=()=>{this.homebrewSpells$.pipe(we(1),ze(e=>fe.toObservable(Le.spells.bulkPut(this.spells())))).subscribe()};removeSpell=e=>{const n=this.spells().findIndex(s=>s.name===e);if(n===-1)return;const r=this.spells();r.splice(n,1),this.setSpells([...r]),fe.toObservable(Le.spells.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.spells.bulkAdd(this.spells())))).subscribe()};addBackground=e=>{this.backgrounds().findIndex(n=>n.name===e.name)===-1&&(this.setBackgrounds(n=>[...n,e]),this.addBackgroundToDB(e).subscribe())};addBackgroundToDB=e=>fe.toObservable(Le.backgrounds.add(e)).pipe(we(1));updateBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.backgrounds();r[n]=e,this.setBackgrounds([...r]),this.updateBackgroundsInDB()};updateBackgroundsInDB=()=>{this.homebrewBackgrounds$.pipe(we(1),ze(e=>fe.toObservable(Le.backgrounds.bulkPut(this.backgrounds())))).subscribe()};removeBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e);if(n===-1)return;const r=this.backgrounds();r.splice(n,1),this.setBackgrounds([...r]),fe.toObservable(Le.backgrounds.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.backgrounds.bulkAdd(this.backgrounds())))).subscribe()};addRace=e=>{this.races().findIndex(n=>n.name===e.name)===-1&&(this.setRaces(n=>[...n,e]),this.addRaceToDB(e).subscribe())};addRaceToDB=e=>fe.toObservable(Le.races.add(e)).pipe(we(1));updateRace=e=>{const n=this.races().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.races();r[n]=e,this.setRaces([...r]),this.updateRacesInDB().subscribe()};updateRacesInDB=()=>this.homebrewRaces$.pipe(we(1),ze(e=>fe.toObservable(Le.races.bulkPut(this.races()))));removeRace=e=>{const n=this.races().findIndex(s=>s.name===e);if(n===-1)return;const r=this.races().splice(n,1);this.setRaces([...r]),fe.toObservable(Le.races.clear()).pipe(we(1),ze(()=>fe.toObservable(Le.races.bulkAdd(this.races())))).subscribe()}}const kt=new Rv,Rt=new Fu("dndSrd"),[El,Iv]=P([]);function Uu(){const t=fe.toObservable(Rt.backgrounds.toArray());return El().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Backgrounds",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.backgrounds.bulkAdd(n)})):je(e)),Qe(e=>e&&e.length>0?Iv(e):null)).subscribe(),El}const Nv=()=>{const t=Uu();return G(()=>[...t()])},[Al,Dv]=P([]);function xo(){const t=fe.toObservable(Rt.classes.toArray());return Al().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Classes",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.classes.bulkAdd(n)})):je(e)),ze(e=>je(e&&e.concat(kt.classes()))),Qe(e=>e&&e.length>0?Dv(e):null)).subscribe(),Al}const To=()=>{const t=xo();return G(()=>[...t(),...kt.classes()])},[Ll,Mv]=P([]);function zu(){const t=fe.toObservable(Rt.feats.toArray());return Ll().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Feats",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.feats.bulkAdd(n)})):je(e)),Qe(e=>e&&e.length>0?Mv(e):null)).subscribe(),Ll}const[Ol,Bv]=P([]),Ku=()=>{const t=zu(),e=fe.toObservable(Le.feats.toArray());return Ol().length===0&&e.pipe(we(1),Qe(r=>{r.length>0&&Bv(r)})).subscribe(),G(()=>[...t(),...Ol()])},[Pl,jv]=P([]);function Hu(){const t=fe.toObservable(Rt.items.toArray());return Pl().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Items",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.items.bulkAdd(n)})):je(e)),Qe(e=>e&&e.length>0?jv(e):null)).subscribe(),Pl}const Fv=()=>{const t=Hu();return G(()=>[...t()])},[Rl,Uv]=P([]);function qu(){const t=fe.toObservable(Rt.races.toArray());return Rl().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Races",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.races.bulkAdd(n)})):je(e)),Qe(e=>e&&e.length>0?Uv(e):null)).subscribe(),Rl}const zv=()=>{const t=qu();return G(()=>[...t()])},[Il,Kv]=P([]);function Eo(){const t=fe.toObservable(Rt.spells.toArray());return Il().length===0&&t.pipe(we(1),ze(e=>e.length>0?je(e):je([])),ze(e=>e.length===0?fe.post("/api/DnDInfo/Spells",{}).pipe(we(1),Xn(n=>(console.error("Error: ",n),je(null))),Qe(n=>{n&&Rt.spells.bulkAdd(n)})):je(e)),Qe(e=>e&&e.length>0?Kv(e):null)).subscribe(),Il}const Hv=()=>{const t=Eo();return G(()=>[...t()])},qv=[{name:"Gandalf",level:1,class:"Wizard",race:"Elf",subrace:"High Elf",background:"Noble",subclass:"Evocation",stats:{str:8,dex:14,con:12,int:15,wis:13,cha:10},spells:{spellsKnown:["Fireball","Mage Armor","Magic Missile","Shield"],spellsPrepared:["Fireball","Shield","Magic Missile"],alwaysPrepared:[]},skills:{proficient:["Arcana","History"],expertise:["Arcana"]},Features:[]},{name:"Jorden",level:1,class:"Fighter",race:"Dwarf",subrace:"Hill Dwarf",background:"Soldier",subclass:"Champion",stats:{str:12,dex:15,con:14,int:10,wis:13,cha:8},skills:{proficient:["Athletics","Survival"],expertise:["Athletics"]},Features:[]}],[Wv,Gv]=P(qv);function Hw(){return[Wv,Gv]}const Vv=new cn("dndInfo");Vv.version(1).stores({classes:"++id, name"});P(null);function Ga(t){return t.replace(/[_-]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jv={exports:{}};(function(t){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(R,D,L){R[D]=L.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(R,D,L){return Object.defineProperty(R,D,{value:L,enumerable:!0,configurable:!0,writable:!0}),R[D]}try{h({},"")}catch{h=function(D,L,ee){return D[L]=ee}}function f(R,D,L,ee){var $=D&&D.prototype instanceof C?D:C,E=Object.create($.prototype),j=new F(ee||[]);return i(E,"_invoke",{value:M(R,L,j)}),E}n.wrap=f;function g(R,D,L){try{return{type:"normal",arg:R.call(D,L)}}catch(ee){return{type:"throw",arg:ee}}}var b="suspendedStart",m="suspendedYield",y="executing",_="completed",v={};function C(){}function x(){}function k(){}var I={};h(I,l,function(){return this});var A=Object.getPrototypeOf,K=A&&A(A(X([])));K&&K!==r&&s.call(K,l)&&(I=K);var T=k.prototype=C.prototype=Object.create(I);x.prototype=k,i(T,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:x,configurable:!0}),x.displayName=h(k,u,"GeneratorFunction");function N(R){["next","throw","return"].forEach(function(D){h(R,D,function(L){return this._invoke(D,L)})})}n.isGeneratorFunction=function(R){var D=typeof R=="function"&&R.constructor;return D?D===x||(D.displayName||D.name)==="GeneratorFunction":!1},n.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,k):(R.__proto__=k,h(R,u,"GeneratorFunction")),R.prototype=Object.create(T),R},n.awrap=function(R){return{__await:R}};function O(R,D){function L(E,j,te,re){var W=g(R[E],R,j);if(W.type==="throw")re(W.arg);else{var oe=W.arg,le=oe.value;return le&&typeof le=="object"&&s.call(le,"__await")?D.resolve(le.__await).then(function(de){L("next",de,te,re)},function(de){L("throw",de,te,re)}):D.resolve(le).then(function(de){oe.value=de,te(oe)},function(de){return L("throw",de,te,re)})}}var ee;function $(E,j){function te(){return new D(function(re,W){L(E,j,re,W)})}return ee=ee?ee.then(te,te):te()}i(this,"_invoke",{value:$})}N(O.prototype),h(O.prototype,c,function(){return this}),n.AsyncIterator=O,n.async=function(R,D,L,ee,$){$===void 0&&($=Promise);var E=new O(f(R,D,L,ee),$);return n.isGeneratorFunction(D)?E:E.next().then(function(j){return j.done?j.value:E.next()})};function M(R,D,L){var ee=b;return function(E,j){if(ee===y)throw new Error("Generator is already running");if(ee===_){if(E==="throw")throw j;return ge()}for(L.method=E,L.arg=j;;){var te=L.delegate;if(te){var re=q(te,L);if(re){if(re===v)continue;return re}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(ee===b)throw ee=_,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);ee=y;var W=g(R,D,L);if(W.type==="normal"){if(ee=L.done?_:m,W.arg===v)continue;return{value:W.arg,done:L.done}}else W.type==="throw"&&(ee=_,L.method="throw",L.arg=W.arg)}}}function q(R,D){var L=D.method,ee=R.iterator[L];if(ee===a)return D.delegate=null,L==="throw"&&R.iterator.return&&(D.method="return",D.arg=a,q(R,D),D.method==="throw")||L!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+L+"' method")),v;var $=g(ee,R.iterator,D.arg);if($.type==="throw")return D.method="throw",D.arg=$.arg,D.delegate=null,v;var E=$.arg;if(!E)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,v;if(E.done)D[R.resultName]=E.value,D.next=R.nextLoc,D.method!=="return"&&(D.method="next",D.arg=a);else return E;return D.delegate=null,v}N(T),h(T,u,"Generator"),h(T,l,function(){return this}),h(T,"toString",function(){return"[object Generator]"});function V(R){var D={tryLoc:R[0]};1 in R&&(D.catchLoc=R[1]),2 in R&&(D.finallyLoc=R[2],D.afterLoc=R[3]),this.tryEntries.push(D)}function B(R){var D=R.completion||{};D.type="normal",delete D.arg,R.completion=D}function F(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(V,this),this.reset(!0)}n.keys=function(R){var D=Object(R),L=[];for(var ee in D)L.push(ee);return L.reverse(),function $(){for(;L.length;){var E=L.pop();if(E in D)return $.value=E,$.done=!1,$}return $.done=!0,$}};function X(R){if(R){var D=R[l];if(D)return D.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var L=-1,ee=function $(){for(;++L<R.length;)if(s.call(R,L))return $.value=R[L],$.done=!1,$;return $.value=a,$.done=!0,$};return ee.next=ee}}return{next:ge}}n.values=X;function ge(){return{value:a,done:!0}}return F.prototype={constructor:F,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(B),!R)for(var D in this)D.charAt(0)==="t"&&s.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=a)},stop:function(){this.done=!0;var R=this.tryEntries[0],D=R.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var D=this;function L(re,W){return E.type="throw",E.arg=R,D.next=re,W&&(D.method="next",D.arg=a),!!W}for(var ee=this.tryEntries.length-1;ee>=0;--ee){var $=this.tryEntries[ee],E=$.completion;if($.tryLoc==="root")return L("end");if($.tryLoc<=this.prev){var j=s.call($,"catchLoc"),te=s.call($,"finallyLoc");if(j&&te){if(this.prev<$.catchLoc)return L($.catchLoc,!0);if(this.prev<$.finallyLoc)return L($.finallyLoc)}else if(j){if(this.prev<$.catchLoc)return L($.catchLoc,!0)}else if(te){if(this.prev<$.finallyLoc)return L($.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,D){for(var L=this.tryEntries.length-1;L>=0;--L){var ee=this.tryEntries[L];if(ee.tryLoc<=this.prev&&s.call(ee,"finallyLoc")&&this.prev<ee.finallyLoc){var $=ee;break}}$&&(R==="break"||R==="continue")&&$.tryLoc<=D&&D<=$.finallyLoc&&($=null);var E=$?$.completion:{};return E.type=R,E.arg=D,$?(this.method="next",this.next=$.finallyLoc,v):this.complete(E)},complete:function(R,D){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&D&&(this.next=D),v},finish:function(R){for(var D=this.tryEntries.length-1;D>=0;--D){var L=this.tryEntries[D];if(L.finallyLoc===R)return this.complete(L.completion,L.afterLoc),B(L),v}},catch:function(R){for(var D=this.tryEntries.length-1;D>=0;--D){var L=this.tryEntries[D];if(L.tryLoc===R){var ee=L.completion;if(ee.type==="throw"){var $=ee.arg;B(L)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(R,D,L){return this.delegate={iterator:X(R),resultName:D,nextLoc:L},this.method==="next"&&(this.arg=a),v}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Jv);var Ao=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const Zv=Ao;let Nl=0;var Wu=({id:t,action:e,payload:n={}})=>{let r=t;return typeof r>"u"&&(r=Zv("Job",Nl),Nl+=1),{id:r,action:e,payload:n}},Ar={};let Lo=!1;Ar.logging=Lo;Ar.setLogging=t=>{Lo=t};Ar.log=(...t)=>Lo?console.log.apply(void 0,t):null;const Xv=Wu,{log:js}=Ar,Qv=Ao;let Dl=0;var e1=()=>{const t=Qv("Scheduler",Dl),e={},n={};let r=[];Dl+=1;const s=()=>r.length,i=()=>Object.keys(e).length,a=()=>{if(r.length!==0){const h=Object.keys(e);for(let f=0;f<h.length;f+=1)if(typeof n[h[f]]>"u"){r[0](e[h[f]]);break}}},o=(h,f)=>new Promise((g,b)=>{const m=Xv({action:h,payload:f});r.push(async y=>{r.shift(),n[y.id]=m;try{g(await y[h].apply(void 0,[...f,m.id]))}catch(_){b(_)}finally{delete n[y.id],a()}}),js(`[${t}]: Add ${m.id} to JobQueue`),js(`[${t}]: JobQueue length=${r.length}`),a()});return{addWorker:h=>(e[h.id]=h,js(`[${t}]: Add ${h.id}`),js(`[${t}]: Number of workers=${i()}`),a(),h.id),addJob:async(h,...f)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return o(h,f)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),r=[]},getQueueLen:s,getNumWorkers:i}};function t1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function n1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var r1=n1;const s1=r1;var i1=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":s1()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof t1=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const a1=i1("type")==="browser",o1=a1?t=>new URL(t,window.location.href).href:t=>t;var l1=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(e[n]=o1(e[n]))}),e},c1=t=>{const e=[],n=[],r=[],s=[],i=[];return t.blocks&&t.blocks.forEach(a=>{a.paragraphs.forEach(o=>{o.lines.forEach(l=>{l.words.forEach(c=>{c.symbols.forEach(u=>{i.push({...u,page:t,block:a,paragraph:o,line:l,word:c})}),s.push({...c,page:t,block:a,paragraph:o,line:l})}),r.push({...l,page:t,block:a,paragraph:o})}),n.push({...o,page:t,block:a})}),e.push({...a,page:t})}),{...t,blocks:e,paragraphs:n,lines:r,words:s,symbols:i}},Gu={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const u1="tesseract.js",h1="5.1.0",d1="Pure Javascript Multilingual OCR",f1="src/index.js",p1="src/index.d.ts",g1="dist/tesseract.min.js",m1="dist/tesseract.min.js",v1={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},b1={"./src/worker/node/index.js":"./src/worker/browser/index.js"},y1="",_1=["jeromewu"],w1="Apache-2.0",$1={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},S1={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},k1={"@rollup/pluginutils":"^5.0.2"},C1={type:"git",url:"https://github.com/naptha/tesseract.js.git"},x1={url:"https://github.com/naptha/tesseract.js/issues"},T1="https://github.com/naptha/tesseract.js",E1={type:"opencollective",url:"https://opencollective.com/tesseractjs"},A1={name:u1,version:h1,description:d1,main:f1,types:p1,unpkg:g1,jsdelivr:m1,scripts:v1,browser:b1,author:y1,contributors:_1,license:w1,devDependencies:$1,dependencies:S1,overrides:k1,repository:C1,bugs:x1,homepage:T1,collective:E1};var L1={workerBlobURL:!0,logger:()=>{}};const O1=A1.version,P1=L1;var R1={...P1,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${O1}/dist/worker.min.js`},I1=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n},N1=t=>{t.terminate()},D1=(t,e)=>{t.onmessage=({data:n})=>{e(n)}},M1=async(t,e)=>{t.postMessage(e)};const Ji=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(t)}),Va=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await Va(t.src)),t.tagName==="VIDEO"&&(e=await Va(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async r=>{e=await Ji(r),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();e=await Ji(n)}else(t instanceof File||t instanceof Blob)&&(e=await Ji(t));return new Uint8Array(e)};var B1=Va;const j1=R1,F1=I1,U1=N1,z1=D1,K1=M1,H1=B1;var q1={defaultOptions:j1,spawnWorker:F1,terminateWorker:U1,onMessage:z1,send:K1,loadImage:H1};const W1=l1,G1=c1,Mt=Wu,{log:Ml}=Ar,V1=Ao,Nn=Gu,{defaultOptions:Y1,spawnWorker:J1,terminateWorker:Z1,onMessage:X1,loadImage:Bl,send:Q1}=q1;let jl=0;var Vu=async(t="eng",e=Nn.LSTM_ONLY,n={},r={})=>{const s=V1("Worker",jl),{logger:i,errorHandler:a,...o}=W1({...Y1,...n}),l={},c={},u=typeof t=="string"?t.split("+"):t;let h=e,f=r;const g=[Nn.DEFAULT,Nn.LSTM_ONLY].includes(e)&&!o.legacyCore;let b,m;const y=new Promise(($,E)=>{m=$,b=E}),_=$=>{b($.message)};let v=J1(o);v.onerror=_,jl+=1;const C=($,E)=>{l[$]=E},x=($,E)=>{c[$]=E},k=({id:$,action:E,payload:j})=>new Promise((te,re)=>{Ml(`[${s}]: Start ${$}, action=${E}`);const W=`${E}-${$}`;C(W,te),x(W,re),Q1(v,{workerId:s,jobId:$,action:E,payload:j})}),I=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),A=$=>k(Mt({id:$,action:"load",payload:{options:{lstmOnly:g,corePath:o.corePath,logging:o.logging}}})),K=($,E,j)=>k(Mt({id:j,action:"FS",payload:{method:"writeFile",args:[$,E]}})),T=($,E)=>k(Mt({id:E,action:"FS",payload:{method:"readFile",args:[$,{encoding:"utf8"}]}})),N=($,E)=>k(Mt({id:E,action:"FS",payload:{method:"unlink",args:[$]}})),O=($,E,j)=>k(Mt({id:j,action:"FS",payload:{method:$,args:E}})),M=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),q=($,E)=>k(Mt({id:E,action:"loadLanguage",payload:{langs:$,options:{langPath:o.langPath,dataPath:o.dataPath,cachePath:o.cachePath,cacheMethod:o.cacheMethod,gzip:o.gzip,lstmOnly:[Nn.LSTM_ONLY,Nn.TESSERACT_LSTM_COMBINED].includes(h)&&!o.legacyLang}}})),V=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),B=($,E,j,te)=>k(Mt({id:te,action:"initialize",payload:{langs:$,oem:E,config:j}})),F=($="eng",E,j,te)=>{if(g&&[Nn.TESSERACT_ONLY,Nn.TESSERACT_LSTM_COMBINED].includes(E))throw Error("Legacy model requested but code missing.");const re=E||h;h=re;const W=j||f;f=W;const le=(typeof $=="string"?$.split("+"):$).filter(de=>!u.includes(de));return u.push(...le),le.length>0?q(le,te).then(()=>B($,re,W,te)):B($,re,W,te)},X=($={},E)=>k(Mt({id:E,action:"setParameters",payload:{params:$}})),ge=async($,E={},j={blocks:!0,text:!0,hocr:!0,tsv:!0},te)=>k(Mt({id:te,action:"recognize",payload:{image:await Bl($),options:E,output:j}})),R=($="Tesseract OCR Result",E=!1,j)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),k(Mt({id:j,action:"getPDF",payload:{title:$,textonly:E}}))),D=async($,E)=>{if(g)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return k(Mt({id:E,action:"detect",payload:{image:await Bl($)}}))},L=async()=>(v!==null&&(Z1(v),v=null),Promise.resolve());X1(v,({workerId:$,jobId:E,status:j,action:te,data:re})=>{const W=`${te}-${E}`;if(j==="resolve"){Ml(`[${$}]: Complete ${E}`);let oe=re;te==="recognize"?oe=G1(re):te==="getPDF"&&(oe=Array.from({...re,length:Object.keys(re).length})),l[W]({jobId:E,data:oe})}else if(j==="reject")if(c[W](re),te==="load"&&b(re),a)a(re);else throw Error(re);else j==="progress"&&i({...re,userJobId:E})});const ee={id:s,worker:v,setResolve:C,setReject:x,load:I,writeText:K,readText:T,removeFile:N,FS:O,loadLanguage:M,initialize:V,reinitialize:F,setParameters:X,recognize:ge,getPDF:R,detect:D,terminate:L};return A().then(()=>q(t)).then(()=>B(t,e,r)).then(()=>m(ee)).catch(()=>{}),y};const Yu=Vu,eb=async(t,e,n)=>{const r=await Yu(e,1,n);return r.recognize(t).finally(async()=>{await r.terminate()})},tb=async(t,e)=>{const n=await Yu("osd",0,e);return n.detect(t).finally(async()=>{await n.terminate()})};var nb={recognize:eb,detect:tb},rb={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},sb={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const ib=e1,ab=Vu,ob=nb,lb=rb,cb=Gu,ub=sb,{setLogging:hb}=Ar;var db={languages:lb,OEM:cb,PSM:ub,createScheduler:ib,createWorker:ab,setLogging:hb,...ob};const fb=Yv(db),pb=async(t,e,n)=>{const r=await fb.createWorker("eng");r.recognize(t).then(s=>{e(i=>i?i+`
`+s.data.text:s.data.text),r.terminate(),n&&n()})};var gb=w('<svg width=800px height=800px><path d="M3 10H4C4.93188 10 5.39782 10 5.76537 10.1522C6.25542 10.3552 6.64477 10.7446 6.84776 11.2346C7 11.6022 7 12.0681 7 13C7 13.9319 7 14.3978 6.84776 14.7654C6.64477 15.2554 6.25542 15.6448 5.76537 15.8478C5.39782 16 4.93188 16 4 16H3M19 6V5C19 3.89543 18.1046 3 17 3H15C13.8954 3 13 3.89543 13 5V6M6.2 20H17.8C18.9201 20 19.4802 20 19.908 19.782C20.2843 19.5903 20.5903 19.2843 20.782 18.908C21 18.4802 21 17.9201 21 16.8V9.2C21 8.07989 21 7.51984 20.782 7.09202C20.5903 6.71569 20.2843 6.40973 19.908 6.21799C19.4802 6 18.9201 6 17.8 6H6.2C5.0799 6 4.51984 6 4.09202 6.21799C3.71569 6.40973 3.40973 6.71569 3.21799 7.09202C3 7.51984 3 8.07989 3 9.2V16.8C3 17.9201 3 18.4802 3.21799 18.908C3.40973 19.2843 3.71569 19.5903 4.09202 19.782C4.51984 20 5.07989 20 6.2 20ZM17 13C17 14.6569 15.6569 16 14 16C12.3431 16 11 14.6569 11 13C11 11.3431 12.3431 10 14 10C15.6569 10 17 11.3431 17 13Z"stroke=#000000 stroke-width=2 stroke-linecap=round stroke-linejoin=round>');const mb=t=>(()=>{var e=gb();return wt(e,ct(t,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();function vb(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=t;let o,l;const c=async(h=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(o=await yi(()=>import("./workbox-window.prod.es5-HOwwy-x7.js"),__vite__mapDeps([])).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{a?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{i?i("/sw.js",h):s?.(h)}).catch(h=>{a?.(h)})}}return l=u(),c}function Ju(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=t,[o,l]=P(!1),[c,u]=P(!1),h=vb({immediate:e,onOfflineReady(){u(!0),r?.()},onNeedRefresh(){l(!0),n?.()},onRegistered:s,onRegisteredSW:i,onRegisterError:a});return{needRefresh:[o,l],offlineReady:[c,u],updateServiceWorker:h}}const bb="_Container_8liaz_1",yb="_Toast_8liaz_15",_b="_ToastMessage_8liaz_43",wb="_ToastButton_8liaz_51",Hr={Container:bb,Toast:yb,ToastMessage:_b,ToastButton:wb};var $b=w("<span>App ready to work offline"),Sb=w("<button>Reload"),kb=w("<div><div></div><button>Close"),Cb=w("<div>"),xb=w("<span>New content available, click on reload button to update.");const Tb=()=>{const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:s}=Ju({onRegistered(a){console.log("SW Registered: ",a)},onRegisterError(a){console.log("SW registration error",a)}}),i=()=>{e(!1),r(!1)};return(()=>{var a=Cb();return p(a,d(Z,{get when(){return t()||n()},get children(){var o=kb(),l=o.firstChild,c=l.nextSibling;return p(l,d(Z,{get fallback(){return xb()},get when(){return t()},get children(){return $b()}})),p(o,d(Z,{get when(){return n()},get children(){var u=Sb();return u.$$click=()=>s(!0),z(()=>U(u,Hr.ToastButton)),u}}),c),c.$$click=()=>i(),z(u=>{var h=Hr.Toast,f=Hr.Message,g=Hr.ToastButton;return h!==u.e&&U(o,u.e=h),f!==u.t&&U(l,u.t=f),g!==u.a&&U(c,u.a=g),u},{e:void 0,t:void 0,a:void 0}),o}})),z(()=>U(a,Hr.Container)),a})()};Ft(["click"]);const Fl=t=>{const[e,n]=He(Oo),r=$r(()=>t.children);return z(()=>{t.name!==void 0&&n(s=>({...s,[t.name]:r()}))}),G(()=>t.children)},Eb="_tabs_1amks_1",Ab="_tabBody_1amks_19",Ul={tabs:Eb,tabBody:Ab};var Zi=w("<div>"),Lb=w("<b>"),Ob=w("<span>");const Oo=wi(P({})),Pb=t=>d(Oo.Provider,{get value(){return t.value},get children(){return t.children}}),Rb=t=>{const[e,n]=Me(),r=G(()=>Ie(e().theme)),[s,i]=He(Oo),[a,o]=P(Object.keys(s())[0]),l=G(()=>s()[a()]);$r(()=>t.children),z(()=>{o(Object.keys(s())[0])});const c=t.styleType??"accent";return(()=>{var u=Zi();return p(u,d(Pb,{value:[s,i],get children(){return[(()=>{var h=Zi();return p(h,d(Y,{get each(){return Object.keys(s())},children:(f,g)=>(()=>{var b=Ob();return b.$$click=()=>o(f),p(b,d(Z,{get when(){return f===a()},get children(){var m=Lb();return p(m,f),m}}),null),p(b,d(Z,{get when(){return f!==a()},children:f}),null),z(()=>U(b,`${Ie().hover}`)),b})()})),z(()=>U(h,`${r()[c]} ${Ul.tabs}`)),h})(),(()=>{var h=Zi();return p(h,l),z(()=>U(h,`${r()[c]} ${Ul.tabBody}`)),h})()]}})),u})()};Ft(["click"]);var Ib=w("<h1>Home"),Nb=w("<div>Welcome to my app. This is a work in progress."),Db=w("<div>"),Mb=w("<div><div></div><div>");const Bb=()=>{const[t,e]=Me();fn(),G(()=>Ie(t().theme)),xo(),Eo(),zu(),qu(),Hu(),Uu();const[n,r]=P(`This **is** _a_ 
# test`),[s,i]=P("It'll be great eventually.");return d(Ut,{get children(){return[Ib(),d(Rb,{get children(){return[d(Fl,{name:"Welcome",get children(){return d(Wn,{get children(){return[Nb(),(()=>{var a=Db();return a.style.setProperty("width","100%"),a.style.setProperty("padding","15px"),p(a,d(pl,{readOnly:!0,transparent:!0,tooltip:"Testing",text:s,setText:i})),a})()]}})}}),d(Fl,{name:"Markdown",get children(){var a=Mb(),o=a.firstChild,l=o.nextSibling;return a.style.setProperty("height","100%"),o.style.setProperty("width","100%"),o.style.setProperty("height","max-content !important"),p(o,d(Pv,{text:n})),l.style.setProperty("width","100%"),l.style.setProperty("height","max-content"),l.style.setProperty("min-height","200px"),p(l,d(pl,{buttons:{styleType:"tertiary"},picToTextEnabled:!0,onChange:c=>r(c.currentTarget.value),readOnly:!1,transparent:!1,tooltip:"Testing",text:n,setText:r})),a}})]}}),d(Kp,{}),d(Tb,{})]}})};var jb=w("<div>Element 1"),Fb=w("<div>Element 2"),Ub=w("<div>Element 3"),zb=w("<div>Element 4"),Kb=w("<h1>Homebrew");const Hb=()=>{He(tt)?.useStyle();const e=[{name:"Element A",element:jb()},{name:"Element 2",element:Fb()},{name:"Element fred",element:Ub()},{name:"Elem fff",element:zb()}];return d(Ut,{get children(){return[Kb(),d(Er,{elements:e})]}})},qb="_sidebar_1142h_1",Wb="_body_1142h_33",Gb="_bodyMenu_1142h_57",Vb={sidebar:qb,body:Wb,bodyMenu:Gb};var Yb=w("<h1>Create"),zl=w("<div>"),Jb=w("<a><div><p>");const Zb=()=>{const e=He(tt)?.useStyle(),n=[{name:"Classes"},{name:"Races"},{name:"Backgrounds"},{name:"Feats"},{name:"Spells"},{name:"Items"}],[r,s]=P(n);return d(Ut,{get children(){return[Yb(),(()=>{var i=zl();return p(i,d(Y,{get each(){return r()},children:(a,o)=>[(()=>{var l=Jb(),c=l.firstChild,u=c.firstChild;return p(u,()=>a.name),z(h=>{var f=`${e?.primary}`,g=`/homebrew/create/${a.name.toLowerCase()}`,b=`${e?.hover}`;return f!==h.e&&U(l,h.e=f),g!==h.t&&ht(l,"href",h.t=g),b!==h.a&&U(c,h.a=b),h},{e:void 0,t:void 0,a:void 0}),l})(),d(Z,{get when(){return o()===2},get children(){var l=zl();return l.style.setProperty("height","0"),l.style.setProperty("flex-basis","100%"),l}})]})),z(()=>U(i,`${Vb.bodyMenu} `)),i})()]}})};var Xb=w("<td>Options"),Qb=w("<table><thead><tr></tr></thead><tbody>"),ey=w("<th>"),ty=w('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M0 0h24v24H0z"fill=none></path><path d="M12 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4z">'),ny=w("<tr>"),ry=w("<td>");const Dn=t=>{const[e,n]=P(t.data),[r,s]=P(t.data),i=G(()=>r());P([]);const a=G(()=>t.button?i().map(o=>t.button.generateMenuButtons(o)):[]);return[(()=>{var o=Qb(),l=o.firstChild,c=l.firstChild,u=l.nextSibling;return p(c,d(Y,{get each(){return t.keys??[]},children:h=>(()=>{var f=ey();return p(f,()=>Ga(h.toString())),f})()}),null),p(c,d(Z,{get when(){return t.button},get children(){return Xb()}}),null),p(u,d(Y,{get each(){return i()},children:(h,f)=>(()=>{var g=ny();return p(g,d(Y,{get each(){return t.keys},children:b=>(()=>{var m=ry();return p(m,()=>`${h[b]}`),m})()}),null),p(g,d(Z,{get when(){return t.button},get children(){return d(ye,{get enableBackgroundClick(){return t.button?.backgroundClick},get overrideX(){return t.button?.overideX},get overrideY(){return t.button?.overideY},get menuItems(){return a()[f()]},get children(){return ty()}})}}),null),g})()})),o})(),d(Z,{get when(){return t.paginator},get children(){return d(bo,{setPaginatedItems:s,items:e,get itemsPerPage(){return t.paginator}})}})]};var sy=w("<h1>View"),iy=w("<div>");const Kl=()=>{fn(),Me();const t=mc(),e=G(()=>[{name:"Spells",element:d(Dn,{get data(){return kt.spells()},keys:["name","level"],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/spells?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Feats",element:d(Dn,{get data(){return kt.feats()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/feats?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Classes",element:d(Dn,{get data(){return kt.classes()},keys:["name","hitDie"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/classes?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Subclasses",element:d(Dn,{get data(){return kt.classes().flatMap(o=>o.subclasses)},keys:["name","class"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/subclasses?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Items",element:d(Dn,{get data(){return kt.items()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/items?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Backgrounds",element:d(Dn,{get data(){return kt.backgrounds()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/backgrounds?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})},{name:"Races",element:d(Dn,{get data(){return kt.races()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:o=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/races?name=${o.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",o)}}]}})}]),[n,r]=Tn();n.name||r({name:e()[0].name});const s=G(()=>e().findIndex(o=>o.name.toLowerCase()===n.name?.toLowerCase()));z(()=>{console.log("startingIndex",s()),console.log("searchParam",n.name)});const[i,a]=P(s());return z(()=>{r({name:e()[i()].name??"spells"})}),d(Ut,{get children(){return[sy(),(()=>{var o=iy();return o.style.setProperty("text-align","left"),p(o,d(Er,{get startingIndex(){return s()},currentIndex:[i,a],get elements(){return e()}})),o})()]}})},ay="_body_macmv_1",oy="_textArea_macmv_20",ly="_hasCasting_macmv_28",cy="_hasCastingMain_macmv_44",uy="_subclassLevels_macmv_64",hy="_itemStuff_macmv_70",dy="_otherStuff_macmv_90",fy="_buttons_macmv_101",py="_checkbox_macmv_111",gy="_statProf_macmv_116",my="_toolProf_macmv_129",vy="_Tools_macmv_141",by="_Columns_macmv_146",yy="_Column_macmv_146",Xe={body:ay,textArea:oy,hasCasting:ly,hasCastingMain:cy,subclassLevels:uy,itemStuff:hy,otherStuff:dy,buttons:fy,checkbox:py,statProf:gy,toolProf:my,Tools:vy,Columns:by,Column:yy};var _y=w("<div><div><h4>Spells Slots: </h4></div><div>"),wy=w("<div>No Features Found!"),$y=w("<div><h3>Level </h3><h3>Info</h3><div><div>Proficency Bonus: </div></div><div></div><h3>Features</h3><h3>New Class Specific <i>(like barbarian rages)</i></h3><div><br><br>"),Sy=w("<label>"),ky=w("<span>"),Cy=w("<div><div><h4>Name</h4></div><div><h4>Value</h4><textarea></textarea></div><div>"),xy=w("<div><h4>");const Ty=t=>{const[{setClassLevels:e,level:n,features:r,setFeatures:s,name:i,hasSpellCasting:a,classLevels:o,casterType:l,setCasterType:c}]=It(t,["level","features","setFeatures","name","hasSpellCasting","classLevels","setClassLevels","casterType","setCasterType"]),u=y=>{const _=JSON.parse(JSON.stringify(y));return typeof _=="string"?_:Array.isArray(_)?_.join(`
`):"-unknown-"},[h,f]=P(""),[g,b]=P(""),m=y=>o()[n-1]?.spellcasting?y===0?`${o()[n-1]?.spellcasting?.cantrips_known}`:o()[n-1]?.spellcasting?.[`spell_slots_level_${y}`]?`${o()[n-1]?.spellcasting?.[`spell_slots_level_${y}`]}`:"":"";return(()=>{var y=$y(),_=y.firstChild;_.firstChild;var v=_.nextSibling,C=v.nextSibling,x=C.firstChild;x.firstChild;var k=C.nextSibling,I=k.nextSibling,A=I.nextSibling,K=A.nextSibling,T=K.firstChild,N=T.nextSibling;return p(_,n,null),p(x,()=>Math.ceil(n/4)+1,null),p(y,d(Z,{get when(){return a()},get children(){var O=_y(),M=O.firstChild;M.firstChild;var q=M.nextSibling;return p(M,d(Y,{each:[0,1,2,3,4,5,6,7,8,9],children:V=>[(()=>{var B=Sy();return ht(B,"for",`spell_slots_level_${V}`),p(B,V>0?`Level ${V} `:"Cantrips "),B})(),(()=>{var B=ky();return p(B,d($e,{get value(){return m(V)},type:"number",name:`spell_slots_level_${V}`,onChange:F=>{e(X=>{switch(V){case 0:X[n-1].spellcasting={...X[n-1]?.spellcasting,cantrips_known:+F.currentTarget.value};break;case 1:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_1:+F.currentTarget.value};break;case 2:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_2:+F.currentTarget.value};break;case 3:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_3:+F.currentTarget.value};break;case 4:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_4:+F.currentTarget.value};break;case 5:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_5:+F.currentTarget.value};break;case 6:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_6:+F.currentTarget.value};break;case 7:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_7:+F.currentTarget.value};break;case 8:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_8:+F.currentTarget.value};break;case 9:X[n-1].spellcasting={...X[n-1]?.spellcasting,spell_slots_level_9:+F.currentTarget.value};break}return JSON.parse(JSON.stringify(X))})}})),B})()]}),null),p(q,d(Z,{get when(){return!t.useCastingCalc()},get children(){return d($e,{placeholder:"Spells Known",type:"number",onChange:V=>{e(B=>(B[n-1].spellcasting={...B[n-1]?.spellcasting,spells_known:+V.currentTarget.value},JSON.parse(JSON.stringify(B))))}})}}),null),p(q,d(Ge,{get value(){return l()},onChange:V=>{c(V.currentTarget.value)},disableUnselected:!0,get children(){return[d(ce,{value:"",children:"None"}),d(ce,{value:"full",children:"Full Caster"}),d(ce,{value:"halfUp",children:"Half Caster Round Up"}),d(ce,{value:"halfDown",children:"Half Caster Round Down"}),d(ce,{value:"thirdUp",children:"Third Caster Round Up"}),d(ce,{value:"thirdDown",children:"Third Caster Round Down"})]}}),null),z(()=>U(M,`${Xe.hasCasting}`)),O}}),k),p(k,d(ye,{onClick:O=>{s(M=>(M.push({name:`New Feature${M.filter(q=>q.info.level===n).length+1}`,value:"new feature description",info:{className:i(),subclassName:"",level:n,type:"Class Feature",other:""}}),JSON.parse(JSON.stringify(M))))},children:"Add New Feature"}),null),p(k,d(ye,{children:"Add Existing Feature"}),null),p(y,d(Y,{get each(){return r().filter(O=>O?.info?.level===n)},children:(O,M)=>(()=>{var q=Cy(),V=q.firstChild;V.firstChild;var B=V.nextSibling,F=B.firstChild,X=F.nextSibling,ge=B.nextSibling;return p(V,d($e,{get value(){return O.name},onChange:R=>{s(D=>(D[n-1]={name:R.currentTarget.value,value:O.value,info:O.info},JSON.parse(JSON.stringify(D))))}}),null),X.addEventListener("change",R=>{s(D=>(D[n-1]={name:O.name,value:R.currentTarget.value,info:O.info},JSON.parse(JSON.stringify(D))))}),p(ge,d(ye,{onClick:()=>{s(R=>{const D=R.findIndex(L=>L.name===O.name&&L.info.level===n);return R.splice(D,1),JSON.parse(JSON.stringify(R))})},children:"Remove"})),z(()=>U(X,`${Xe.textArea}`)),z(()=>X.value=u(O.value)),q})()}),A),p(y,d(Z,{get when(){return r().filter(O=>O.info.level===n).length===0},get children(){return wy()}}),A),p(K,d($e,{get value(){return h()},onChange:O=>{f(O.currentTarget.value)},placeholder:"Name"}),T),p(K,d($e,{get value(){return g()},onChange:O=>{b(O.currentTarget.value)},type:"number",placeholder:"Value"}),T),p(K,d(ye,{get disabled(){return h().length<1},onClick:O=>{e(M=>(M[n-1].classSpecific[h()]=g(),f(""),b(""),JSON.parse(JSON.stringify(M))))},children:"Add New"}),T),p(K,d(Y,{get each(){return Object.keys(o()[n-1].classSpecific)},children:(O,M)=>(()=>{var q=xy(),V=q.firstChild;return p(V,O),p(q,d($e,{get class(){return`${o()[n-1].classSpecific[O]?"error ":""}`},value:O,onChange:B=>{e(F=>(F[n-1].classSpecific[B.currentTarget.value]=F[n-1].classSpecific[O],JSON.parse(JSON.stringify(F))))}}),null),p(q,d($e,{get value(){return o()[n-1].classSpecific[O]},onChange:B=>{e(F=>(F[n-1].classSpecific[O]=B.currentTarget.value,JSON.parse(JSON.stringify(F))))}}),null),p(q,d(ye,{onClick:B=>{e(F=>(delete F[n-1].classSpecific[O],JSON.parse(JSON.stringify(F))))},children:"Remove"}),null),q})()}),N),z(O=>{var M=`${Xe.otherStuff}`,q=`${Xe.buttons}`;return M!==O.e&&U(C,O.e=M),q!==O.t&&U(k,O.t=q),O},{e:void 0,t:void 0}),y})()},Ey="_body_bpryr_1",Ay="_textArea_bpryr_20",Ly="_checkBox_bpryr_28",Oy="_castingRowOne_bpryr_33",Py="_chips_bpryr_43",Qt={body:Ey,textArea:Ay,checkBox:Ly,castingRowOne:Oy,chips:Py};var Fs=w("<div>"),Ry=w('<div><textarea placeholder="Enter a Feature description..">'),Iy=w("<h1>subclasses"),Ny=w("<div><h2>Choose a class"),Dy=w('<div><textarea placeholder="Enter a Subclass description..">'),My=w("<div><h2>Level up features"),By=w("<div><span><label for=casterType>Caster Type:</label></span><span><label for=castingStat>Casting Stat:"),jy=w("<div><label for=spellsKnown>Spells Known: </label><span><label for=halfCasterRoundUp>Round Up: "),Fy=w("<div><h3>Spells Known </h3><div><label for=slotLevel>Class Level: </label></div><div><label for=slotAmount>Slot Amount: "),Uy=w("<div><label for=hasCantrips>Has Cantrips: </label><label for=ritualCasting>Ritual Casting: "),zy=w("<div><h3>Spells Table</h3><div></div><div>"),Ky=w("<div><h3>Spellcasting Info</h3><div></div><div>"),Hy=w("<div><h2>Spellcasting</h2><div><div><label for=hasCasting>Has Spellcasting: </label></div><div>"),qy=w("<div><div><label>Title: </label></div><div><label>Description: </label><textarea></textarea></div><div>"),en=(t=>(t[t.None=0]="None",t[t.Level=1]="Level",t[t.HalfLevel=2]="HalfLevel",t[t.StatModPlusLevel=3]="StatModPlusLevel",t[t.StatModPlusHalfLevel=4]="StatModPlusHalfLevel",t[t.StatModPlusThirdLevel=5]="StatModPlusThirdLevel",t[t.Other=6]="Other",t))(en||{});const Wy=()=>{const[t,e]=Tn();He(tt);const[n,r]=Me();G(()=>Ie(n().theme));const s=xo(),i=()=>s().map($=>$.name),[a,o]=P(1),l=Eo(),[c,u]=P(!1),[h,f]=P(!1),[g,b]=P(0),[m,y]=P(""),[_,v]=P(!1),[C,x]=P(""),[k,I]=P(!1),[A,K]=P({}),[T,N]=P([]),[O,M]=P(1),[q,V]=P(0),[B,F]=P({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),X=G(()=>{const $=B().class.toLowerCase(),[E]=s().filter(j=>j.name?.toLowerCase()===$?.toLowerCase());if(E&&E.subclassLevels&&E.subclassLevels.length)return E.subclassLevels.map(j=>`${j}`);switch($){case"cleric":return["1","2","6","8","17"];case"druid":case"wizard":return["2","6","10","14"];case"barbarian":return["3","6","10","14"];case"monk":return["3","6","11","17"];case"bard":return["3","6","14"];case"sorcerer":case"warlock":return["1","6","14","18"];case"fighter":return["3","7","10","15","18"];case"paladin":return["3","7","15","20"];case"ranger":return["3","7","11","15"];case"rogue":return["3","9","13","17"];case"forgemaster":return["3","7","11","15","20"];default:return[]}}),ge=G(()=>{const $=s().filter(j=>j.name.toLowerCase()===B().class.toLowerCase()),E=B();return $.length===1&&E.name.trim().length>0&&E.subclassFlavor.trim().length>0&&E.desc.length}),R=()=>{F($=>{const E={info:{className:$.class,subclassName:$.name,level:a(),type:"subclass",other:""},name:"",value:[""]};return{...$,features:[...$.features,E]}})},D=$=>B().features.filter(E=>E.info.level===$),L=$=>({name:`Level ${$}`,element:(()=>{var E=Fs();return p(E,d(Y,{get each(){return D($)},children:(j,te)=>[(()=>{var re=Fs();return p(re,d($e,{placeholder:"Enter a Feature name..",get value(){return j.name},onChange:W=>{F(oe=>{const le=oe.features.filter(Se=>Se.info.level===$),de=oe.features.filter(Se=>Se.info.level!==$),me=le[te()];return me.name=W.currentTarget.value,le.splice(te(),1,me),oe.features=[...de,...le],ns(oe)})}})),re})(),(()=>{var re=Ry(),W=re.firstChild;return W.addEventListener("change",oe=>{F(le=>{const de=le.features.filter(qe=>qe.info.level===$),me=le.features.filter(qe=>qe.info.level!==$),Se=de[te()];return Se.value=oe.currentTarget.value.split(`
`),de.splice(te(),1,Se),le.features=[...me,...de],ns(le)})}),z(()=>U(W,`${Qt.textArea}`)),z(()=>W.value=B().features.filter(oe=>oe.info.level===$)[te()].value.join(`
`)),re})(),(()=>{var re=Fs();return p(re,d(ye,{onClick:W=>{F(oe=>{const le=oe.features.filter(me=>me.info.level===$),de=oe.features.filter(me=>me.info.level!==$);return le.splice(te(),1),oe.features=[...de,...le],ns(oe)})},children:"Remove"})),re})()]})),E})()}),ee=()=>{F({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),o(1),u(!1),f(!1),b(0),y(""),v(!1),x(""),K({})};return z(()=>{c()?F($=>{const E={...$};E.spellcasting={info:E.spellcasting?.info||[],castingLevels:[],name:E.name,spellcastingAbility:C(),casterType:m(),spellsKnownCalc:g(),spellsKnownRoundup:h()};for(let j=1;j<=20;j++)E.spellcasting?.castingLevels.push({level:j,spellcasting:al(j,m(),k())});return E}):F($=>{const E={...$};return delete E.spellcasting,E})}),z(()=>{g()===6&&m().length>0&&F($=>{const E={...$};let j;if(E.spellcasting&&E.spellcasting.castingLevels){const te=T();j=E.spellcasting.castingLevels.map(re=>(re.spellcasting=al(re.level,m(),k()),te.forEach(W=>{W.level===re.level&&(re.spellcasting={...re.spellcasting,spells_known:W.amount})}),re))}else j=E.spellcasting?.castingLevels||[];return E.spellcasting={info:E.spellcasting?.info||[],castingLevels:j,name:E.name,spellcastingAbility:C(),casterType:m(),spellsKnownCalc:g(),spellsKnownRoundup:h()},E})}),z(()=>{if(t.name&&t.subclass){if(t.name!==B().class&&t.subclass!==B().name){const[$]=s().filter(E=>E.name.toLowerCase()===t.name.toLowerCase());if($){const[E]=$.subclasses.filter(j=>j.name.toLowerCase()===t.subclass.toLowerCase());F(E)}}}else e({name:B().class,subclass:B().name})}),d(Ut,{get children(){return[Iy(),(()=>{var $=Ny();return $.firstChild,p($,d(Ge,{get value(){return B().class},onChange:E=>{F(j=>({...j,class:E.currentTarget.value}))},get children(){return d(Y,{get each(){return i()},children:E=>d(ce,{value:`${E}`,children:E})})}}),null),$})(),(()=>{var $=Dy(),E=$.firstChild;return p($,d($e,{placeholder:"Enter a Subclass name..",get value(){return B().name},onChange:j=>F(te=>({...te,name:j.currentTarget.value}))}),E),p($,d($e,{placeholder:"Enter a Subclass flavor..",get value(){return B().subclassFlavor},onChange:j=>F(te=>({...te,subclassFlavor:j.currentTarget.value}))}),E),E.addEventListener("change",j=>F(te=>({...te,desc:j.currentTarget.value.split(`
`)}))),z(()=>U(E,`${Qt.textArea}`)),z(()=>E.value=B().desc.join(`
`)),$})(),(()=>{var $=My();return $.firstChild,p($,d(Ge,{get value(){return a()},onChange:E=>{const j=parseInt(E.currentTarget.value);o(j)},get children(){return d(Y,{get each(){return X()},children:E=>d(ce,{value:`${E}`,children:E})})}}),null),p($,d(ye,{onClick:R,children:"Add Feature"}),null),p($,d(Er,{get elements(){return X().map(E=>L(+E))}}),null),$})(),(()=>{var $=Hy(),E=$.firstChild,j=E.nextSibling,te=j.firstChild;te.firstChild;var re=te.nextSibling;return p(te,d($e,{get class(){return`${Qt.checkBox}`},get checked(){return c()},onChange:W=>u(W.currentTarget.checked),type:"checkbox",name:"hasCasting"}),null),p(j,d(Z,{get when(){return c()},get children(){return[(()=>{var W=By(),oe=W.firstChild;oe.firstChild;var le=oe.nextSibling;return le.firstChild,p(oe,d(Ge,{name:"casterType",get value(){return m()},onChange:de=>y(de.currentTarget.value),get children(){return[d(ce,{value:"half",children:"Half Caster"}),d(ce,{value:"third",children:"Third Caster"})]}}),null),p(le,d(Ge,{name:"castingStat",get value(){return C()},onChange:de=>x(de.currentTarget.value),get children(){return d(Y,{each:["Intelligence","Wisdom","Charisma"],children:de=>d(ce,{value:de,children:de})})}}),null),z(()=>U(W,`${Qt.castingRowOne}`)),W})(),(()=>{var W=jy(),oe=W.firstChild,le=oe.nextSibling;return le.firstChild,p(W,d(Ge,{name:"spellsKnown",get value(){return g()},onChange:de=>b(+de.currentTarget.value),get children(){return[d(ce,{value:"0",children:"None"}),d(ce,{value:"1",children:"Level"}),d(ce,{value:"2",children:"Half Level"}),d(ce,{value:"3",children:"Stat Modifier + Level"}),d(ce,{value:"4",children:"Stat Modifier + Half Level"}),d(ce,{value:"5",children:"Stat Modifier + Third Level"}),d(ce,{value:"6",children:"Other"})]}}),le),p(le,d($e,{get class(){return`${Qt.checkBox}`},type:"checkbox",name:"halfCasterRoundUp",get checked(){return h()},onChange:de=>f(de.currentTarget.checked)}),null),W})(),d(Z,{get when(){return g()===6},get children(){return[(()=>{var W=Fy(),oe=W.firstChild,le=oe.nextSibling;le.firstChild;var de=le.nextSibling;return de.firstChild,p(le,d(Ge,{name:"slotLevel",disableUnselected:!0,onChange:me=>{M(+me.currentTarget.value)},get children(){return d(Y,{get each(){return gp(20)},children:me=>d(ce,{value:me,get children(){return["Level ",me]}})})}}),null),p(de,d($e,{name:"slotAmount",type:"number",min:0,onChange:me=>{V(+me.currentTarget.value)}}),null),p(W,d(ye,{onClick:me=>{T().map(Se=>Se.level).includes(O())||N(Se=>[...Se,{level:O(),amount:q()}].sort((qe,Lt)=>+qe.level-+Lt.level))},children:"Add"}),null),W})(),(()=>{var W=Fs();return p(W,d($n,{get key(){return`Level ${O()}`},get value(){return`${q()}`}}),null),p(W,d(Y,{get each(){return T()},children:oe=>d($n,{get key(){return`Level ${oe.level}`},get value(){return`${oe.amount}`},remove:()=>{N(le=>le.filter(de=>de.level!==oe.level))}})}),null),z(()=>U(W,`${Qt.chips}`)),W})()]}}),(()=>{var W=Uy(),oe=W.firstChild,le=oe.nextSibling;return p(W,d($e,{get class(){return`${Qt.checkBox}`},type:"checkbox",name:"hasCantrips",get checked(){return k()},onChange:de=>I(de.currentTarget.checked)}),le),p(W,d($e,{get class(){return`${Qt.checkBox}`},type:"checkbox",name:"ritualCasting",get checked(){return _()},onChange:de=>v(de.currentTarget.checked)}),null),W})(),(()=>{var W=zy(),oe=W.firstChild,le=oe.nextSibling,de=le.nextSibling;return p(le,d(Ge,{get value(){return JSON.stringify(A())},onChange:me=>K(JSON.parse(me.currentTarget.value)),get children(){return d(Y,{get each(){return l()},children:me=>d(ce,{get value(){return JSON.stringify(me)},get children(){return me.name}})})}}),null),p(le,d(ye,{onClick:me=>F(Se=>({...Se,spells:[...Se.spells,A()]})),children:"Add Spell"}),null),p(de,d(Y,{get each(){return B().spells},children:me=>d($n,{get key(){return pp(+me.level)},get value(){return me.name},remove:()=>{F(Se=>({...Se,spells:Se.spells.filter(qe=>qe.name!==me.name)}))}})})),W})(),(()=>{var W=Ky(),oe=W.firstChild,le=oe.nextSibling,de=le.nextSibling;return p(le,d(ye,{onClick:me=>{F(Se=>{const qe=[...Se.spellcasting?.info||[]];return qe.push({name:"",desc:[]}),{...Se,spellcasting:{...Se.spellcasting,info:qe}}})},children:"Add Info"})),p(de,d(Y,{get each(){return B().spellcasting?.info||[]},children:(me,Se)=>(()=>{var qe=qy(),Lt=qe.firstChild,En=Lt.firstChild,zt=Lt.nextSibling,Kt=zt.firstChild,Ht=Kt.nextSibling,tr=zt.nextSibling;return p(Lt,d($e,{get name(){return`nameInput${Se()}`},get value(){return me.name},onChange:nt=>{F(rt=>{const Je=[...rt.spellcasting?.info||[]];return Je[Se()]={...Je[Se()],name:nt.currentTarget.value},{...rt,spellcasting:{...rt.spellcasting,info:Je}}})}}),null),Ht.addEventListener("change",nt=>{F(rt=>{const Je=[...rt.spellcasting?.info||[]];return Je[Se()]={...Je[Se()],desc:nt.currentTarget.value.split(`
`)},{...rt,spellcasting:{...rt.spellcasting,info:Je}}})}),p(tr,d(ye,{onClick:nt=>{F(rt=>{const Je=[...rt.spellcasting?.info||[]];return Je.splice(Se(),1),{...rt,spellcasting:{...rt.spellcasting,info:Je}}})},children:"Remove"})),z(nt=>{var rt=`nameInput${Se()}`,Je=`descInput${Se()}`,ut=`${Qt.textArea}`,$t=`descInput${Se()}`;return rt!==nt.e&&ht(En,"for",nt.e=rt),Je!==nt.t&&ht(Kt,"for",nt.t=Je),ut!==nt.a&&U(Ht,nt.a=ut),$t!==nt.o&&ht(Ht,"name",nt.o=$t),nt},{e:void 0,t:void 0,a:void 0,o:void 0}),z(()=>Ht.value=me.desc.join(`
`)),qe})()})),W})()]}}),re),p(re,d(Z,{get when(){return ge()},get children(){return d(ye,{onClick:W=>{const oe=s().filter(le=>le.name===B().class)[0];oe.subclasses=[...oe.subclasses,B()],kt.updateClass(oe),kt.updateClassesInDB(),ee()},children:"Save"})}})),$})()]}})};var Gy=w("<h1>Classes"),Vy=w("<div><div><h3>Name</h3><h3>Hit Die</h3><h3>Stat Proficiency</h3><div><div></div><div></div></div><h3>Armor Proficiency</h3><div></div><h3>Weapon Proficiency</h3><div></div></div><div><h3>Skill Proficiency</h3><div><div><h3><label for=SkillChoice>Choose: </label></h3></div></div><h3>Starting Equipment</h3><div><div><div></div><div></div></div><div><div><div><h4>Choices </h4></div><div>"),Yy=w("<h3>Tool Proficiency"),Jy=w("<div><h3><label for=ToolChoice>Choose: </label></h3><div><label for=all> All"),Zy=w("<div><h3>Subclass Levels</h3><div>"),Xy=w("<div><div><label for=spellList>Spell List</label></div><div><label for=spellAbility>Spellcasting Ability </label></div><div><label for=levelGained>Gained at Level: </label></div><div><label for=useCastingCalc>Use Casting Calculation"),Qy=w("<div><label for=spellsKnownCalc>Spells Known Calculation</label><label for=spellsKnownRoundup>Round Up Spells Known?"),Hl=w("<div>"),e0=w("<div><h4>Spellcasting</h4><label for=HasSpellCasting>Has SpellCasting?</label><h3>Level up Features"),ql=w("<div><label>:"),Wl=w("<div><label>"),t0=w("<label> "),n0=w("<div><div><span>Choose : <!> </span></div><div>"),r0=w("<label>"),s0=w("<p>"),i0=w('<p><textarea placeholder="Enter Section Description...">');const a0=()=>{const[t,e]=Tn(),[n,r]=P(""),[s,i]=P(0);P([]);const[a,o]=P([]),[l,c]=P([]),[u,h]=P(1),[f,g]=P([]),[b,m]=P([]),[y,_]=P([]),[v,C]=P(1),[x,k]=P([]),[I,A]=P(0),[K,T]=P(""),[N,O]=P(1),[M,q]=P(-1),[V,B]=P(1),[F,X]=P(1),[ge,R]=P([]),[D,L]=P(""),[ee,$]=P(1),[E,j]=P(""),[te,re]=P(!1),[W,oe]=P(""),[le,de]=P(!1),[me,Se]=P(en.None),[qe,Lt]=P(!1);He(tt);const[En,zt]=Me();G(()=>Ie(En().theme));const[Kt,Ht]=P(new Array(20).fill(0).map((ne,ie)=>ie+1)),tr=["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"],nt=Fv(),rt=To(),Je=G(()=>nt().filter(ne=>ne.equipmentCategory==="Tools")),[ut,$t]=P({class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]}),[Zt,nr]=P(new Array(20).fill({info:{className:"",subclassName:"",level:0,type:"",other:""},level:0,profBonus:0,features:[],classSpecific:{},spellcasting:{}}).map((ne,ie)=>({...ne,info:{...ne.info,level:ie+1},level:ie+1,profBonus:Math.ceil((ie+1)/4)+1}))),[rr,An]=P(new Array(20).fill({info:{className:n(),subclassName:"",level:0,type:"",other:""},name:"",value:""}).map((ne,ie)=>({...ne,info:{...ne.info,level:ie+1}}))),[Lr,Or]=P([]),Ln=G(()=>{switch(N()){case 1:return ut()?.choice1;case 2:return ut()?.choice2;case 3:return ut()?.choice3;case 4:return ut()?.choice4;default:return ut()?.choice1}}),On=G(()=>({name:n(),hitDie:s(),proficiencies:l(),proficiencyChoices:f()?.length?[{choose:u(),type:"Skill",choices:f()}]:[],savingThrows:a(),startingEquipment:ut(),classLevels:Zt().map(ie=>({...ie,info:{...ie.info,className:n()},features:rr().filter(ve=>ve?.info?.level===ie?.info?.level)})),features:rr(),subclasses:Lr(),subclassLevels:x(),spellcasting:te()?{level:ee(),name:E(),spellcastingAbility:D(),casterType:W(),info:ge(),spellsKnownCalc:me(),spellsKnownRoundup:qe()}:void 0,id:0})),Nt=ne=>{const ie=ut();let ve=[];switch(ne){case 1:ve=ie.choice1;break;case 2:ve=ie.choice2;break;case 3:ve=ie.choice3;break;case 4:ve=ie.choice4;break}switch(M()>=0?M()>=0&&M()<ie.choice1.length&&ve[M()].choices.push({item:K(),quantity:V(),desc:[]}):ve.push({choose:F(),type:"",choices:[{item:K(),quantity:V(),desc:[]}]}),ne){case 1:ie.choice1=ve;break;case 2:ie.choice2=ve;break;case 3:ie.choice3=ve;break;case 4:ie.choice4=ve;break}console.log("Adding Item: ",ie),$t(()=>JSON.parse(JSON.stringify(ie))),console.log("Starting Equipment: ",ut())};return z(()=>{if(console.log("Search Param: ",t),t.name){const ne=rt().find(ie=>ie.name===t.name);console.log("Found Class: ",ne),ne&&n()!==ne.name&&(r(ne.name),i(ne.hitDie),c(ne.proficiencies),h(ne.proficiencyChoices[0]?.choose??0),g(ne.proficiencyChoices[0]?.choices.map(ie=>ie.replace("Skill:","").trim())),o(ne.savingThrows),$t(ne.startingEquipment?ne.startingEquipment:{class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]}),nr(ne.classLevels),!ne.features?.length||ne.classLevels?.length>ne.features?.length?An(ne.classLevels.sort((ie,ve)=>ie.level-ve.level).flatMap(ie=>ie.features).map((ie,ve)=>({...ie,info:{...ie.info,className:ne.name,level:ve+1}}))):An(ne.features),Or(ne.subclasses),k(ne.subclassLevels),L(ne.spellcasting?.spellcastingAbility||""),$(ne.spellcasting?.level||1),j(ne.classLevels.filter(ie=>!!ie.spellcasting).length>0?ne.classLevels.filter(ie=>!!ie.spellcasting)[0].info.className:""),re(!!ne.spellcasting||ne.classLevels.map(ie=>!!ie.spellcasting).includes(!0)),oe(ne.spellcasting?.casterType||""),de(!!ne.spellcasting),Se(ne.spellcasting?.spellsKnownCalc||en.None),Lt(!!ne.spellcasting?.spellsKnownRoundup))}}),z(()=>{console.log("Current Class: ",On())}),d(Ut,{get children(){return[Gy(),(()=>{var ne=Vy(),ie=ne.firstChild,ve=ie.firstChild,at=ve.nextSibling,Ce=at.nextSibling,Ae=Ce.nextSibling,Be=Ae.firstChild,be=Be.nextSibling,Ve=Ae.nextSibling,Pe=Ve.nextSibling,qt=Pe.nextSibling,sr=qt.nextSibling,Pr=ie.nextSibling,bs=Pr.firstChild,Rr=bs.nextSibling,ir=Rr.firstChild,ys=ir.firstChild,Ei=Rr.nextSibling,Ot=Ei.nextSibling,Pn=Ot.firstChild,Rn=Pn.firstChild,Ir=Rn.nextSibling,_s=Pn.nextSibling,ws=_s.firstChild,Dt=ws.firstChild,$s=Dt.nextSibling;return p(ie,d($e,{get value(){return n()},placeholder:"What is the class name?",onInput:Q=>r(Q.currentTarget.value),transparent:!0}),at),p(ie,d(Ge,{get value(){return s()},transparent:!0,onChange:Q=>i(+Q.currentTarget.value),get children(){return[d(ce,{value:4,children:"d4"}),d(ce,{value:6,children:"d6"}),d(ce,{value:8,children:"d8"}),d(ce,{value:10,children:"d10"}),d(ce,{value:12,children:"d12"})]}}),Ce),p(Be,d(Y,{each:["STR","DEX","CON"],children:Q=>(()=>{var pe=ql(),Fe=pe.firstChild,Ye=Fe.firstChild;return ht(Fe,"for",Q),p(Fe,Q,Ye),p(pe,d($e,{type:"checkbox",get checked(){return a().includes(Q)},onChange:J=>J.currentTarget.checked?o(S=>[...S,Q]):o(S=>S.filter(H=>H!==Q))}),null),pe})()})),p(be,d(Y,{each:["INT","WIS","CHA"],children:Q=>(()=>{var pe=ql(),Fe=pe.firstChild,Ye=Fe.firstChild;return ht(Fe,"for",Q),p(Fe,Q,Ye),p(pe,d($e,{type:"checkbox",get checked(){return a().includes(Q)},onChange:J=>J.currentTarget.checked?o(S=>[...S,Q]):o(S=>S.filter(H=>H!==Q))}),null),pe})()})),p(Pe,d(Y,{each:["Light Armor","Medium Armor","Shields","Heavy Armor"],children:Q=>(()=>{var pe=Wl(),Fe=pe.firstChild;return ht(Fe,"for",Q),p(Fe,Q),p(pe,d($e,{type:"checkbox",get checked(){return l().map(Ye=>Ye.toLowerCase()).includes(Q.toLowerCase())},onChange:Ye=>Ye.currentTarget.checked?c(J=>JSON.parse(JSON.stringify([...J,Q]))):c(J=>(J=J.filter(S=>S!==Q),JSON.parse(JSON.stringify(J))))}),null),pe})()})),p(sr,d(Y,{each:["Simple Weapons","Martial Weapons"],children:Q=>(()=>{var pe=Wl(),Fe=pe.firstChild;return ht(Fe,"for",Q),p(Fe,Q),p(pe,d($e,{type:"checkbox",get checked(){return l().map(Ye=>Ye.toLowerCase()).includes(Q.toLowerCase())},onChange:Ye=>Ye.currentTarget.checked?c(J=>JSON.parse(JSON.stringify([...J,Q]))):c(J=>JSON.parse(JSON.stringify(J.filter(S=>S!==Q))))}),null),pe})()})),p(ir,d($e,{type:"number",name:"SkillChoice",transparent:!0,placeholder:"Can choose how many?",get value(){return u()},onInput:Q=>h(+Q.currentTarget.value)}),null),p(ir,d(Y,{each:tr,children:Q=>(()=>{var pe=t0(),Fe=pe.firstChild;return ht(pe,"for",Q),p(pe,Q,Fe),p(pe,d($e,{type:"checkbox",get checked(){return f()?.map(Ye=>Ye.toLowerCase()).includes(Q.toLowerCase())},onChange:Ye=>Ye.currentTarget.checked?g(J=>JSON.parse(JSON.stringify([...J,Q]))):g(J=>JSON.parse(JSON.stringify(J.filter(S=>S!==Q))))}),null),pe})()}),null),p(Rn,d(Ge,{get value(){return N()},transparent:!0,onChange:Q=>O(+Q.currentTarget.value),disableUnselected:!0,get children(){return d(Y,{each:[1,2,3,4],children:Q=>d(ce,{value:Q,get children(){return["Choice ",Q]}})})}}),null),p(Rn,d(Ge,{get value(){return M()},transparent:!0,onChange:Q=>q(+Q.currentTarget.value),get children(){return d(Y,{get each(){return Ln()},children:(Q,pe)=>d(ce,{get value(){return pe()},get children(){return["Item ",G(()=>pe()+1)]}})})}}),null),p(Rn,d(ye,{onClick:Q=>Nt(N()),children:"+"}),null),p(Ir,d($e,{placeholder:"AMNT",type:"number",transparent:!0,style:{width:"14%"},get value(){return V()},onInput:Q=>B(+Q.currentTarget.value)}),null),p(Ir,d(Ge,{onChange:Q=>{T(Q.currentTarget.value)},transparent:!0,get value(){return K()},get children(){return d(Y,{get each(){return nt()},children:Q=>d(ce,{get value(){return Q.name},get children(){return Q.name}})})}}),null),p($s,d(Y,{get each(){return Ln()},children:(Q,pe)=>(()=>{var Fe=n0(),Ye=Fe.firstChild,J=Ye.firstChild,S=J.firstChild,H=S.nextSibling;H.nextSibling;var ae=Ye.nextSibling;return p(J,d($e,{type:"number",placeholder:"How many can be chosen?",get value(){return Q.choose},transparent:!0,onInput:xe=>X(+xe.currentTarget.value)}),H),p(ae,d(Y,{get each(){return Q.choices},children:(xe,Ze)=>d($n,{get key(){return xe.item},get value(){return`${xe.quantity}`},remove:()=>{$t(_e=>{switch(N()){case 1:_e.choice1[pe()].choices.splice(Ze(),1),_e.choice1[pe()].choices.length===0&&_e.choice1.splice(pe(),1),_e.choice1=[..._e.choice1];break;case 2:_e.choice2[pe()].choices.splice(Ze(),1),_e.choice2[pe()].choices.length===0&&_e.choice2.splice(pe(),1),_e.choice2=[..._e.choice2];break;case 3:_e.choice3[pe()].choices.splice(Ze(),1),_e.choice3[pe()].choices.length===0&&_e.choice3.splice(pe(),1),_e.choice3=[..._e.choice3];break;case 4:_e.choice4[pe()].choices.splice(Ze(),1),_e.choice4[pe()].choices.length===0&&_e.choice4.splice(pe(),1),_e.choice4=[..._e.choice4];break}return JSON.parse(JSON.stringify(_e))})}})})),z(()=>U(Fe,Xe.itemStuff)),Fe})()})),z(Q=>{var pe=Xe.Columns,Fe=`${Xe.Column}`,Ye=`${Xe.statProf}`,J=`${Xe.statProf}`,S=`${Xe.statProf}`,H=`${Xe.Column}`,ae=`${Xe.statProf}`,xe=Xe.Tools;return pe!==Q.e&&U(ne,Q.e=pe),Fe!==Q.t&&U(ie,Q.t=Fe),Ye!==Q.a&&U(Ae,Q.a=Ye),J!==Q.o&&U(Pe,Q.o=J),S!==Q.i&&U(sr,Q.i=S),H!==Q.n&&U(Pr,Q.n=H),ae!==Q.s&&U(Rr,Q.s=ae),xe!==Q.h&&U(ys,Q.h=xe),Q},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),ne})(),Yy(),(()=>{var ne=Jy(),ie=ne.firstChild,ve=ie.nextSibling,at=ve.firstChild,Ce=at.firstChild;return p(ne,d($e,{type:"number",name:"ToolChoice",placeholder:"Can choose how many?",transparent:!0,get value(){return v()},onInput:Ae=>C(+Ae.currentTarget.value)}),ve),p(at,d($e,{type:"checkbox",get checked(){return y().length===Je().length},onChange:Ae=>Ae.currentTarget.checked?_(Je().map(Be=>Be.name)):_([])}),Ce),p(ve,d(Y,{get each(){return Je()},children:Ae=>(()=>{var Be=r0();return p(Be,d($e,{type:"checkbox",get checked(){return y().includes(Ae.name)},onChange:be=>be.currentTarget.checked?_(Ve=>[...Ve,Ae.name]):_(Ve=>Ve.filter(Pe=>Pe!==Ae.name))}),null),p(Be,()=>Ae.name,null),z(()=>ht(Be,"for",Ae.name)),Be})()}),null),z(Ae=>{var Be=Xe.Tools,be=`${Xe.toolProf}`;return Be!==Ae.e&&U(ie,Ae.e=Be),be!==Ae.t&&U(ve,Ae.t=be),Ae},{e:void 0,t:void 0}),ne})(),(()=>{var ne=Zy(),ie=ne.firstChild,ve=ie.nextSibling;return p(ne,d(Ge,{disableUnselected:!0,transparent:!0,get value(){return I()},onChange:at=>{A(+at.currentTarget.value)},get children(){return[d(ce,{value:0,children:"None"}),d(Y,{get each(){return Kt()},children:at=>d(ce,{value:at,get children(){return["Level ",at]}})})]}}),ve),p(ne,d(ye,{onClick:at=>{k(Ce=>Ce.includes(I())?Ce:[...Ce,I()])},children:"Add Subclass Level"}),ve),p(ve,d(Y,{get each(){return x()},children:at=>d($n,{key:"Level",get value(){return at.toString()},remove:()=>{k(Ce=>Ce.filter(Ae=>Ae!==at))}})})),z(()=>U(ve,`${Xe.subclassLevels}`)),ne})(),(()=>{var ne=e0(),ie=ne.firstChild,ve=ie.nextSibling,at=ve.nextSibling;return p(ne,d($e,{type:"checkbox",get class(){return`${Xe.checkbox}`},get checked(){return te()},onChange:Ce=>re(Ce.currentTarget.checked)}),at),p(ne,d(Z,{get when(){return te()},get children(){return[(()=>{var Ce=Xy(),Ae=Ce.firstChild;Ae.firstChild;var Be=Ae.nextSibling;Be.firstChild;var be=Be.nextSibling;be.firstChild;var Ve=be.nextSibling;return Ve.firstChild,p(Ae,d(Ge,{onChange:Pe=>j(Pe.currentTarget.value),name:"spellList",disableUnselected:!0,transparent:!0,get children(){return[d(Y,{get each(){return rt().filter(Pe=>Pe.classLevels.flatMap(qt=>qt.spellcasting?Object.keys(qt.spellcasting).length>0:!1).includes(!0))},children:Pe=>d(ce,{get value(){return Pe.name.trim()},get children(){return Pe.name.trim()}})}),d(ce,{get value(){return G(()=>n().trim()!=="")()?n():"CurrentClass"},get children(){return G(()=>n().trim()!=="")()?n():"CurrentClass"}})]}}),null),p(Be,d(Ge,{onChange:Pe=>L(Pe.currentTarget.value),name:"spellAbility",transparent:!0,get value(){return D()},disableUnselected:!0,get children(){return d(Y,{each:["Intelligence","Wisdom","Charisma"],children:Pe=>d(ce,{value:Pe,children:Pe})})}}),null),p(be,d($e,{onChange:Pe=>$(+Pe.currentTarget.value),min:1,max:20,type:"number",name:"levelGained"}),null),p(Ve,d($e,{type:"checkbox",get class(){return`${Xe.checkbox}`},get checked(){return le()},onChange:Pe=>de(Pe.currentTarget.checked)}),null),z(()=>U(Ce,Xe.hasCastingMain)),Ce})(),d(Z,{get when(){return le()},get children(){var Ce=Qy(),Ae=Ce.firstChild,Be=Ae.nextSibling;return p(Ce,d(Ge,{onChange:be=>Se(+be.currentTarget.value),transparent:!0,get value(){return me()},name:"spellsKnownCalc",disableUnselected:!0,get children(){return[d(ce,{get value(){return en.None},children:"None"}),d(ce,{get value(){return en.Level},children:"Level"}),d(ce,{get value(){return en.HalfLevel},children:"Half Level"}),d(ce,{get value(){return en.StatModPlusLevel},children:"Stat Modifier + Level"}),d(ce,{get value(){return en.StatModPlusHalfLevel},children:"Stat Modifier + Half Level"}),d(ce,{get value(){return en.StatModPlusThirdLevel},children:"Stat Modifier + Third Level"})]}}),Be),p(Ce,d($e,{type:"checkbox",get class(){return`${Xe.checkbox}`},get checked(){return qe()},onChange:be=>Lt(be.currentTarget.checked)}),null),Ce}}),(()=>{var Ce=Hl();return p(Ce,d(ye,{onClick:Ae=>{R(Be=>[...Be,{name:"",desc:[""]}])},children:"Add Spellcasting Info Section"}),null),p(Ce,d(Y,{get each(){return ge()},children:(Ae,Be)=>[(()=>{var be=s0();return p(be,d($e,{onChange:Ve=>R(Pe=>(Pe[Be()].name=Ve.currentTarget.value,[...Pe])),placeholder:"Enter Section Title..."})),be})(),(()=>{var be=i0(),Ve=be.firstChild;return Ve.addEventListener("change",Pe=>R(qt=>(qt[Be()].desc=[Pe.currentTarget.value],[...qt]))),z(()=>U(Ve,Xe.textArea)),be})(),d(ye,{onClick:be=>{R(Ve=>(Ve.splice(Be(),1),[...Ve]))},children:"Remove"})]}),null),Ce})()]}}),at),p(ne,d(Er,{get elements(){return Kt().map(Ce=>({name:`Level ${Ce}`,element:d(Ty,{setClassLevels:nr,useCastingCalc:le,classLevels:Zt,hasSpellCasting:te,allClasses:rt,features:rr,setFeatures:An,name:n,level:Ce,casterType:W,setCasterType:oe})}))}}),null),ne})(),(()=>{var ne=Hl();return p(ne,d(ye,{onClick:()=>{kt.classes().map(ie=>ie.name).includes(n())||(kt.addClass(On()),oe(""),L(""),$(1),j(""),re(!1),R([]),r(""),i(0),o([]),c([]),h(1),g([]),m([]),_([]),C(1),k([]),A(0),$t({class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]}),nr(new Array(20).fill({info:{className:"",subclassName:"",level:0,type:"",other:""},level:0,profBonus:0,features:[],classSpecific:{}}).map((ie,ve)=>({...ie,info:{...ie.info,level:ve+1},level:ve+1,profBonus:Math.ceil((ve+1)/4)+1}))),An(new Array(20).fill({info:{className:n(),subclassName:"",level:0,type:"",other:""},name:"",value:""}).map((ie,ve)=>({...ie,info:{...ie.info,level:ve+1}}))),Or([]))},children:"Save Class"})),ne})()]}})};var o0=w("<h1>Items"),l0=w("<h2>Item Types"),c0=w("<div>"),u0=w("<div><p>damage</p><p>properties</p><p>description</p><p>cost</p><p>weight</p><p>description"),h0=w("<div><p>armor class</p><p>strength requirement</p><p>stealth disadvantage</p><p>description</p><p>cost</p><p>weight"),d0=w("<div><p>description</p><p>cost</p><p>weight</p><p>consumable");const f0=()=>{He(tt);const[t,e]=Me();return G(()=>Ie(t().theme)),d(Ut,{get children(){return[o0(),l0(),(()=>{var n=c0();return p(n,d(Er,{get elements(){return[{name:"Weapon",element:u0()},{name:"Armor",element:h0()},{name:"Item",element:d0()}]}})),n})()]}})},p0="_body_1fr9g_1",g0="_name_1fr9g_24",m0="_featHomebrew_1fr9g_28",v0="_featName_1fr9g_1",b0="_removeChipButton_1fr9g_42",y0="_preRequisites_1fr9g_49",_0="_Description_1fr9g_63",w0="_chipBar_1fr9g_77",qr={body:p0,name:g0,featHomebrew:m0,featName:v0,removeChipButton:b0,preRequisites:y0,Description:_0,chipBar:w0};var $0=w("<h1>Feats"),Xi=w("<div>"),S0=w("<div class=featHomebrew><div><h2>Add Name</h2></div><div><h2>Add Pre-Requisites</h2><div><button>Add</button></div><div></div></div><div><h2>Description</h2><textarea id=featDescription name=featDescription></textarea></div><button>Add Feat"),_n=(t=>(t[t.AbilityScore=0]="AbilityScore",t[t.Class=1]="Class",t[t.CharacterLevel=2]="CharacterLevel",t))(_n||{});const k0=()=>{He(tt);const[t,e]=Me();G(()=>Ie(t().theme));const n=To();Ku();const r=new Cd({}),[s,i]=P([]),[a,o]=P(0),[l,c]=P(""),[u,h]=P("str"),[f,g]=P("0"),[b,m]=P(""),[y,_]=P(!1),v=()=>{i([]),o(0),c(""),h("str"),g("0"),m("")},C=x=>{switch(a()){case 0:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:_n[0],other:""},name:u(),value:f()}]);break;case 1:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:_n[1],other:""},name:u(),value:f()}]);break;case 2:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:_n[2],other:""},name:u(),value:f()}]);break}};return z(()=>{switch(a()){case 0:h("STR"),g("0");break;case 1:h("Class"),g("Barbarian");break;case 2:h("Barbarian"),g("0");break}}),z(()=>{const x={};x.name=l(),x.preReqs=s(),x.desc=[b()],r.next(x)}),z(()=>{y()&&(kt.addFeat(r.value),_(!1),v())}),d(Ut,{get children(){return[$0(),(()=>{var x=S0(),k=x.firstChild;k.firstChild;var I=k.nextSibling,A=I.firstChild,K=A.nextSibling,T=K.firstChild,N=K.nextSibling,O=I.nextSibling,M=O.firstChild,q=M.nextSibling,V=O.nextSibling;return p(k,d($e,{type:"text",id:"featName",get value(){return l()},onChange:B=>c(B.currentTarget.value)}),null),p(K,d(Ge,{get value(){return a()},onChange:B=>o(()=>+B.currentTarget.value),disableUnselected:!0,get children(){return[d(ce,{get value(){return 0},children:"Ability Score"}),d(ce,{get value(){return 1},children:"Class"}),d(ce,{get value(){return 2},children:"Class Level"})]}}),T),p(K,d(ss,{get children(){return[d(Ct,{get when(){return a()===0},get children(){var B=Xi();return p(B,d(Ge,{onChange:F=>h(F.currentTarget.value),get children(){return[d(ce,{value:"STR",children:"Strength"}),d(ce,{value:"DEX",children:"Dexterity"}),d(ce,{value:"CON",children:"Constitution"}),d(ce,{value:"INT",children:"Intelligence"}),d(ce,{value:"WIS",children:"Wisdom"}),d(ce,{value:"CHA",children:"Charisma"})]}}),null),p(B,d($e,{type:"number",onChange:F=>g(F.currentTarget.value)}),null),B}}),d(Ct,{get when(){return a()===1},get children(){var B=Xi();return p(B,d(Ge,{onChange:F=>{h("Class"),g(F.currentTarget.value)},get children(){return d(Y,{get each(){return n()},children:F=>d(ce,{get value(){return F.name},get children(){return F.name}})})}})),B}}),d(Ct,{get when(){return a()===2},get children(){var B=Xi();return p(B,d(Ge,{onChange:F=>h(F.currentTarget.value),get children(){return d(Y,{get each(){return n()},children:F=>d(ce,{get value(){return F.name},get children(){return F.name}})})}}),null),p(B,d($e,{type:"number",onChange:F=>g(F.currentTarget.value)}),null),B}})]}}),T),T.$$click=C,p(N,d($n,{get key(){return u()},get value(){return f()}}),null),p(N,d(Y,{get each(){return s()},children:(B,F)=>d($n,{get key(){return B.name},get value(){return B.value},remove:()=>i(X=>X.filter((ge,R)=>R!==F()))})}),null),q.addEventListener("change",B=>m(B.currentTarget.value)),V.$$click=()=>_(!0),z(B=>{var F=`${qr.name}`,X=`${qr.preRequisites}`,ge=s().length>=10,R=`${qr.chipBar}`,D=`${qr.Description}`,L=`${qr.addButton}`;return F!==B.e&&U(k,B.e=F),X!==B.t&&U(I,B.t=X),ge!==B.a&&(T.disabled=B.a=ge),R!==B.o&&U(N,B.o=R),D!==B.i&&U(O,B.i=D),L!==B.n&&U(V,B.n=L),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),z(()=>q.value=b()),x})()]}})};Ft(["click"]);var C0=w("<h1>backgrounds"),x0=w("<div><p>ideals</p><p>bonds</p><p>flaws</p><p>personality traits</p><p>background features</p><p>languages</p><p>skills</p><p>tools");const T0=()=>{He(tt);const[t,e]=Me();return G(()=>Ie(t().theme)),d(Ut,{get children(){return[C0(),x0()]}})};var E0=w("<h1>spells"),A0=w("<p>name"),L0=w("<p>level"),O0=w("<p>school"),P0=w("<p>casting time"),R0=w("<p>range"),I0=w("<p>components"),N0=w("<p>duration"),D0=w("<p>description"),M0=w("<p>classes list");const B0=()=>{He(tt);const[t,e]=Me();return G(()=>Ie(t().theme)),d(Ut,{get children(){return[E0(),A0(),L0(),O0(),P0(),R0(),I0(),N0(),D0(),M0()]}})};var j0=w("<h1>races"),F0=w("<div><p>name</p><p>size</p><p>speed</p><p>ability score increase</p><p>age range</p><p>features");const U0=()=>{He(tt);const[t,e]=Me();return G(()=>Ie(t().theme)),d(Ut,{get children(){return[j0(),F0()]}})},z0="_SpellsBody_zr12h_1",K0="_materials_needed_zr12h_1",H0="_headerBar_zr12h_23",q0="_view_zr12h_39",W0="_center_zr12h_75",cr={SpellsBody:z0,materials_needed:K0,headerBar:H0,view:q0,center:W0},G0="_searchBar_1fns4_1",V0="_booleanSelect_1fns4_46",Y0="_chipBar_1fns4_77",J0="_all_1fns4_84",Z0="_none_1fns4_88",X0="_top_1fns4_92",Q0="_bottom_1fns4_96",e_="_left_1fns4_100",t_="_right_1fns4_104",Qi={searchBar:G0,booleanSelect:V0,chipBar:Y0,all:J0,none:Z0,top:X0,bottom:Q0,left:e_,right:t_},n_="_chipbar_1uyza_1",r_="_chipContainer_1uyza_7",s_="_leftArrow_1uyza_20",i_="_rightArrow_1uyza_26",Us={chipbar:n_,chipContainer:r_,leftArrow:s_,rightArrow:i_};var Gl=w("<span>"),a_=w("<div><div><span>");const o_=t=>{const[e,n]=P(!1),[r,s]=P(!1),i=c=>{s(a.scrollLeft!==a.scrollWidth-a.clientWidth),n(a.scrollLeft>0),a.scrollLeft<=0&&n(!1)};rc(()=>{a&&a.addEventListener("scroll",i)}),Sn(()=>{a&&a.removeEventListener("scroll",i)});let a;z(()=>{t.chips().length>0&&i()});const o=()=>{a.scrollLeft-=100,i()},l=()=>{a.scrollLeft+=100,i(),n(!0)};return d(Z,{get when(){return t.chips().length>0},get children(){var c=a_(),u=c.firstChild,h=u.firstChild;p(c,d(Z,{get when(){return e()},get children(){var g=Gl();return p(g,d(ye,{onClick:o,children:"←"})),z(()=>U(g,`${Us.leftArrow}`)),g}}),u);var f=a;return typeof f=="function"?br(f,u):a=u,p(h,d(ye,{onClick:()=>t.setChips([]),children:"Clear All"})),p(u,d(Y,{get each(){return t.chips()},children:(g,b)=>d($n,{get key(){return g.key},get value(){return g.value},remove:()=>t.setChips(m=>[...m].filter((y,_)=>_!==b()))})}),null),p(c,d(Z,{get when(){return r()},get children(){var g=Gl();return p(g,d(ye,{onClick:l,children:"→"})),z(()=>U(g,`${Us.rightArrow}`)),g}}),null),z(g=>{var b=`${Us.chipbar}`,m=`${Us.chipContainer}`;return b!==g.e&&U(c,g.e=b),m!==g.t&&U(u,g.t=m),g},{e:void 0,t:void 0}),c}})};var l_=w("<div id=booleanBar><label for=falsebox>"),c_=w("<div><div>"),u_=w("<option>"),h_=w('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const d_=t=>{const[e,n]=P({key:"",value:""}),[r,s]=P("name"),[i,a]=P(""),[o,l]=P(!1),[c,u]=P([]),h=b=>{if(Array.isArray(t.spellsSrd()[0][b]))if(typeof(t.spellsSrd()[0][b]&&Array.isArray(t.spellsSrd()[0][b])?t.spellsSrd()[0][b][0]:null)=="string"){const _=t.spellsSrd().flatMap(v=>v[b]?.toString().includes(",")?v[b]?.toString().split(","):v[b]?.toString());return[...new Set(_)].sort().filter(v=>!!v)}else return[...new Set(...t.spellsSrd().flatMap(_=>Array.isArray(_[b])?_[b]:[]))].sort().filter(_=>!!_);const m=new Set;return t.spellsSrd().map(y=>y[b]&&!Array.isArray(y[b])?y[b]:"").map(y=>m.add(`${y}`)),[...m].sort().filter(y=>!!y)},f=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"];z(()=>{t.setSearchResults(t.spellsSrd().filter(b=>b&&c().length>0?![...new Set(c().map(C=>C.key))].map(C=>c().filter(x=>x.key===C)).map(C=>C.map(x=>{const k=b[x.key];if(k)switch(!0){case typeof k=="string":return k.toLowerCase().includes(x.value.toLowerCase());case Array.isArray(k):return k.join(" ").toLowerCase().includes(x.value.toLowerCase());case typeof k=="boolean":return` ${k} `.toLowerCase().includes(x.value.toLowerCase())}return!1})).map(C=>C.includes(!0)).includes(!1):!0))}),z(()=>{t.spellsSrd().length>0&&typeof t.spellsSrd()[0][r()]=="boolean"&&a(`${o()}`)}),z(()=>{u(b=>e().key?[...b,e()]:b),a(""),document.getElementById("searchBar")&&(document.getElementById("searchBar").value="")});const g=b=>{if(b==="concentration")return"Conc";if(b==="damageType")return"Dmg Type";const m=y=>(y.charAt(0).toUpperCase()+y.slice(1)).replace(/([A-Z])/g," $1").trim();return b.startsWith("is")?m(b.replace("is","")):m(b)};return(()=>{var b=c_(),m=b.firstChild;return b.style.setProperty("width","100%"),p(m,d(ye,{transparent:!0,onClick:()=>n(y=>({key:r(),value:Ga(i())})),get children(){return d(f_,{})}}),null),p(m,d(Ge,{get class(){return`${Qi.all}`},disableUnselected:!0,onChange:y=>s(y.target.value),id:"chipDropdown",get children(){return d(Y,{get each(){return Object.keys(t.spellsSrd()[0]).filter(y=>!["materials_Needed","higherLevel","page"].includes(y))},children:y=>d(ce,{value:y,get children(){return g(y)}})})}}),null),p(m,d(ss,{get children(){return[d(Ct,{get when(){return Array.isArray(t.spellsSrd()[0][r()])||["damageType","castingTime","range","duration"].includes(r())},get children(){return d(Ge,{onChange:y=>a(y.currentTarget.value),get children(){return d(Y,{get each(){return h(r())},children:y=>(()=>{var _=u_();return _.value=y,p(_,y),_})()})}})}}),d(Ct,{get when(){return typeof t.spellsSrd()[0][r()]=="boolean"},get children(){var y=l_(),_=y.firstChild;return p(y,d($e,{type:"checkbox",get checked(){return o()},id:"booleanCheckbox",onchange:()=>{l(!o()),a(`${o()}`)}}),_),p(_,d(Z,{get when(){return!o()},children:"false"}),null),p(_,d(Z,{get when(){return o()},children:"true"}),null),z(()=>U(y,`${Qi.booleanSelect}`)),y}}),d(Ct,{get when(){return typeof t.spellsSrd()[0][r()]=="string"},get children(){return d(ss,{get fallback(){return d($e,{id:"searchBar",onChange:y=>a(y.currentTarget.value),onKeyDown:y=>{y.key==="Enter"&&n(_=>({key:r(),value:Ga(y.currentTarget.value)}))},placeholder:"Search Spells...",get value(){return i()},type:"text"})},get children(){return d(Ct,{get when(){return["school","level"].includes(r())},get children(){return d(Ge,{onChange:y=>a(y.currentTarget.value),get children(){return[d(Z,{get when(){return r()==="school"},get children(){return d(Y,{each:f,children:y=>d(ce,{value:y,children:y})})}}),d(Z,{get when(){return r()==="level"},get children(){return d(Y,{each:[0,1,2,3,4,5,6,7,8,9],children:y=>d(ce,{value:y,children:y})})}})]}})}})}})}})]}}),null),p(b,d(o_,{chips:c,setChips:u}),null),z(()=>U(m,`${Qi.searchBar}`)),b})()},f_=t=>(()=>{var e=h_();return wt(e,ct(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();var p_=w("<div><h1>Spells</h1><br><ul></ul><div>"),g_=w("<div><span></span> <span>"),m_=w("<h4>At Higher Levels: "),v_=w("<span>"),b_=w("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>"),y_=w("<div><span></span><span>"),__=w("<hr>");const Vl=()=>{const t=He(tt),[e,n]=Me(),r=G(()=>Ie(e().theme)),s=Hv(),[i,a]=Tn();i.name||a({name:s()[0]?.name});const o=s().filter(v=>v.name?.toLowerCase()===(i?.name||s()[0]?.name).toLowerCase())[0],[l,c]=P(o),[u,h]=P([]),[f,g]=P([]),[b,m]=P(!1),y=v=>{switch(v){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${v}th`}},_=v=>{const C=[];return v.isVerbal&&C.push("V"),v.isSomatic&&C.push("S"),v.isMaterial&&C.push("M"),v.materials_Needed?[C.join(", "),v.materials_Needed??null].join(", "):C.join(", ")};return z(()=>{a({name:l()?.name??""})}),(()=>{var v=p_(),C=v.firstChild,x=C.nextSibling,k=x.nextSibling,I=k.nextSibling;return p(v,d(d_,{searchResults:f,setSearchResults:g,spellsSrd:s}),k),p(k,d(Y,{get each(){return u()},children:(A,K)=>[d(Z,{get when(){return!t?.isMobile()},get children(){return d(Wn,{extraLogic:()=>c(A),get startOpen(){return l().name===A.name},get children(){return[(()=>{var T=g_(),N=T.firstChild,O=N.nextSibling,M=O.nextSibling;return p(N,()=>A.name),p(M,()=>y(A.level)),z(()=>U(T,`${cr.headerBar}`)),T})(),(()=>{var T=b_(),N=T.firstChild,O=N.firstChild,M=O.nextSibling,q=M.firstChild,V=M.nextSibling,B=V.firstChild,F=B.nextSibling;F.nextSibling;var X=V.nextSibling,ge=X.firstChild,R=ge.nextSibling;R.nextSibling;var D=X.nextSibling;D.firstChild;var L=D.nextSibling;L.firstChild;var ee=L.nextSibling;ee.firstChild;var $=ee.nextSibling;$.firstChild;var E=$.nextSibling;return p(O,()=>A.name),p(M,()=>y(A.level),q),p(M,()=>A.school,null),p(V,()=>A.castingTime,F),p(X,()=>A.range,R),p(D,()=>_(A),null),p(L,()=>A.duration,null),p(ee,()=>A.classes.join(", "),null),p($,()=>A.subClasses.join(", "),null),p(E,()=>A.desc),p(N,d(Z,{get when(){return!!A.higherLevel},get children(){return[m_()," ",(()=>{var j=v_();return p(j,()=>A.higherLevel),j})()]}}),null),z(()=>U(T,`${cr.view}`)),T})()]}})}}),d(Z,{get when(){return t?.isMobile()},get children(){return[(()=>{var T=y_(),N=T.firstChild,O=N.nextSibling;return N.$$click=()=>{c(A),m(M=>!M)},p(N,()=>A.name),O.$$click=()=>{c(A),m(M=>!M)},p(O,()=>y(A.level)),z(()=>U(T,`${cr.headerBar}`)),T})(),__(),d(Z,{get when(){return b()},get children(){return d(om,{spell:l,backgroundClick:[b,m]})}})]}})]})),p(I,d(bo,{items:f,setPaginatedItems:h})),z(A=>{var K=`${r()?.primary} ${cr.SpellsBody}`,T=`${cr.center}`,N=`${cr.center}`;return K!==A.e&&U(v,A.e=K),T!==A.t&&U(C,A.t=T),N!==A.a&&U(I,A.a=N),A},{e:void 0,t:void 0,a:void 0}),v})()};Ft(["click"]);const w_="_featsList_1hcnd_1",$_="_PreReqsBar_1hcnd_17",S_="_body_1hcnd_29",ea={featsList:w_,PreReqsBar:$_,body:S_};var k_=w("<div><div><h1>Feats</h1><div></div><ol>"),C_=w("<li> <button></button>"),Yl=w("<div>"),Jl=w("<br>"),x_=w("<div>Description:"),ta=w("<span>"),T_=w("<div>Ability Score Requirement: "),E_=w("<span> of "),A_=w("<div>Class Requirement:"),L_=w("<div>class level Requirement:"),O_=w("<span> "),P_=w("<div>classes Requirement:");const R_=()=>{const[t,e]=P([]),[n,r]=P([]),s=G(()=>n().length===0?t():n()),[i,a]=P([]),o=v=>i().includes(v),l=v=>o(v)?a(i().filter(C=>C!==v)):a([...i(),v]);He(tt);const[c,u]=Me(),h=G(()=>Ie(c().theme)),f=Ku(),[g,b]=Tn();g.name||b({name:f()[0]?.name});const m=f().filter(v=>v.name?.toLowerCase()===(g.name||f()[0]?.name).toLowerCase())[0],[y,_]=P(m);return z(()=>{b({name:y()?.name})}),(()=>{var v=k_(),C=v.firstChild,x=C.firstChild,k=x.nextSibling,I=k.nextSibling;return k.style.setProperty("height","5vh"),k.style.setProperty("width","45%"),p(k,d(ku,{placeholder:"Search Feats...",dataSource:f,setResults:r})),p(I,d(Y,{get each(){return s()},children:(A,K)=>[(()=>{var T=C_(),N=T.firstChild,O=N.nextSibling;return p(T,()=>A.name,N),O.$$click=()=>{l(K()),_(A)},p(O,()=>o(K())?"↑":"↓"),T})(),d(Z,{get when(){return o(K())},get children(){return[(()=>{var T=Yl();return p(T,d(Y,{get each(){return y().preReqs},children:N=>(()=>{var O=Yl();return p(O,d(ss,{get children(){return[d(Ct,{get when(){return N.info.type===_n[0]},get children(){return[T_(),(()=>{var M=E_(),q=M.firstChild;return p(M,()=>N.name,q),p(M,()=>N.value,null),M})()]}}),d(Ct,{get when(){return N.info.type===_n[1]},get children(){return[A_(),(()=>{var M=ta();return p(M,()=>N.value),M})()]}}),d(Ct,{get when(){return N.info.type===_n[2]},get children(){return[L_(),(()=>{var M=O_(),q=M.firstChild;return p(M,()=>N.name,q),p(M,()=>N.value,null),M})()]}}),d(Ct,{get when(){return N.info.type===_n[3]},get children(){return[P_(),(()=>{var M=ta();return p(M,()=>N.name),M})()]}})]}})),O})()})),z(()=>U(T,`${ea.PreReqsBar}`)),T})(),Jl(),x_(),(()=>{var T=ta();return p(T,d(Y,{get each(){return y().desc},children:(N,O)=>[N,Jl()]})),T})()]}})]})),p(C,d(bo,{items:f,setPaginatedItems:e}),null),z(A=>{var K=`${h()?.primary} ${ea.featsList}`,T=`${ea.body}`;return K!==A.e&&U(v,A.e=K),T!==A.t&&U(C,A.t=T),A},{e:void 0,t:void 0}),v})()};Ft(["click"]);const I_="_sidebar_18u2w_9",N_="_sidebar_shown_18u2w_37",D_="_wrapper_18u2w_43",M_="_thePage_18u2w_48",B_="_outerStyles_18u2w_59",j_="_SelectorBar_18u2w_67",F_="_fixed_18u2w_79",U_="_flexrow_18u2w_93",z_="_wrap_18u2w_43",K_="_abilityscore_18u2w_103",H_="_sideBarBtn_18u2w_110",q_="_animate_18u2w_124",W_="_slidein_18u2w_1",zs={sidebar:I_,sidebar_shown:N_,wrapper:D_,thePage:M_,outerStyles:B_,SelectorBar:j_,fixed:F_,flexrow:U_,wrap:z_,abilityscore:K_,sideBarBtn:H_,animate:q_,slidein:W_},G_="_subrace_1t2pp_1",V_={subrace:G_};var Y_=w("<div><h3>Sub Races"),Mn=w("<br>"),Zl=w("<div>"),J_=w("<span>languages:"),na=w("<span>"),Z_=w("<h3>languages to choose from"),X_=w("<div><span>name: </span><br><br><span>Ability Score increases:</span><br>"),Q_=w("<span><br><span></span> <span></span><br>"),ew=w("<span>: ");const tw=t=>{Ie();let e=t.race;return d(Z,{get when(){return e?.subRaces?.length>0},get children(){return d(Wn,{get children(){return[Y_(),(()=>{var n=Zl();return p(n,d(Z,{get when(){return e?.subRaces.length>0},get children(){return[Mn(),(()=>{var r=Zl();return p(r,d(Y,{get each(){return e?.subRaces},children:s=>[(()=>{var i=X_(),a=i.firstChild;a.firstChild;var o=a.nextSibling,l=o.nextSibling,c=l.nextSibling,u=c.nextSibling;return p(a,()=>s.name,null),p(i,d(Z,{get when(){return s.abilityBonuses.length>0},get children(){return d(Y,{get each(){return s.abilityBonuses},children:h=>(()=>{var f=Q_(),g=f.firstChild,b=g.nextSibling,m=b.nextSibling,y=m.nextSibling;return p(b,()=>h.name),p(y,()=>h.value),f})()})}}),u),p(i,d(Z,{get when(){return s.traits.length>0},get children(){return d(Y,{get each(){return s.traits},children:h=>[Mn(),(()=>{var f=ew(),g=f.firstChild;return p(f,()=>h.name,g),f})(),Mn(),(()=>{var f=na();return p(f,()=>h.value),f})(),Mn()]})}}),u),p(i,d(Z,{get when(){return s.languages.length>0},get children(){return[J_(),Mn(),(()=>{var h=na();return p(h,()=>s.languages.join(", ")),h})()]}}),null),p(i,d(Z,{get when(){return s.languageChoice.choices.length>0},get children(){return[Z_(),d(Y,{get each(){return s.languageChoice.choices},children:h=>[(()=>{var f=na();return p(f,h),f})(),Mn()]})]}}),null),z(h=>{var f=`${s.name}`,g=`${V_.subrace}`;return f!==h.e&&ht(i,"id",h.e=f),g!==h.t&&U(i,h.t=g),h},{e:void 0,t:void 0}),i})(),Mn()]})),r})()]}})),n})()]}})}})};var nw=w("<div><div><h1></h1><h2> traits</h2><div><h3>Ability Score Increases: </h3><div></div><h3>Age:</h3><span></span><h3>Alignment:</h3><span></span><h3>Size:</h3><span></span><h3>Speed:</h3><span>ft</span><h3>Race Specific Traits:</h3><span></span><h3>Proficiencies</h3><div></div><h3>Languages:</h3><br>"),ra=w("<br>"),sa=w("<span>"),rw=w("<div>: ");const sw=t=>{let e=t.styles,n=t.dndSrdRace;return(()=>{var r=nw(),s=r.firstChild,i=s.firstChild,a=i.nextSibling,o=a.firstChild,l=a.nextSibling,c=l.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling,g=f.nextSibling,b=g.nextSibling,m=b.nextSibling,y=m.nextSibling,_=y.nextSibling,v=_.nextSibling,C=v.firstChild,x=v.nextSibling,k=x.nextSibling,I=k.nextSibling,A=I.nextSibling,K=A.nextSibling,T=K.nextSibling;return p(i,()=>n().name),p(a,()=>n().name,o),p(u,d(Y,{get each(){return n().abilityBonuses},children:N=>[ra(),(()=>{var O=sa();return p(O,()=>N.name),O})()," ",(()=>{var O=sa();return p(O,()=>N.value),O})(),ra()]})),p(f,()=>n()?.age),p(b,()=>n()?.alignment),p(y,()=>n()?.sizeDescription),p(v,()=>n()?.speed,C),p(k,d(Y,{get each(){return n()?.traits},children:N=>[(()=>{var O=rw(),M=O.firstChild;return p(O,()=>N?.name,M),p(O,d(Y,{get each(){return N?.value},children:q=>(()=>{var V=sa();return p(V,q),z(()=>U(V,`${e.wrap}`)),V})()}),null),O})(),ra()]})),p(A,()=>n()?.startingProficencies?.map(N=>N?.value)?.join(`
`)),p(l,()=>n()?.languageDesc,T),p(l,d(tw,{styles:e,get race(){return n()}}),null),z(N=>{var O=`${e.thePage}`,M=`${n().name}`,q=`${e.abilityscore}`,V=`${e.wrap}`,B=`${e.wrap}`,F=`${e.wrap}`;return O!==N.e&&U(r,N.e=O),M!==N.t&&ht(i,"id",N.t=M),q!==N.a&&U(u,N.a=q),V!==N.o&&U(f,N.o=V),B!==N.i&&U(b,N.i=B),F!==N.n&&U(y,N.n=F),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};var iw=w("<div id=racesComp><h1>Races</h1><div><button>←</button><span></span><button>→</button></div><div>");const aw=()=>{const t=zv();He(tt);const[e,n]=Me(),r=G(()=>Ie(e().theme));P([]);const[s,i]=Tn(),a=t()?.findIndex(u=>u.name?.toLowerCase()===s?.name?.toLowerCase()),[o,l]=P(a>=0?a:0);s.name||i({name:t().length>0?t()[o()].name:"dragonborn"});const c=G(()=>t().length>0&&o()>=0&&o()<t().length?t()[o()]:{});return z(()=>{i({name:t().length>0?c()?.name:"Dragonborn"})}),(()=>{var u=iw(),h=u.firstChild,f=h.nextSibling,g=f.firstChild,b=g.nextSibling,m=b.nextSibling,y=f.nextSibling;return g.$$click=()=>o()===0?l(_=>t().length-1):l(_=>_-1),p(b,()=>c().name),m.$$click=()=>o()===t().length-1?l(_=>0):l(_=>_+1),p(y,d(sw,{styles:zs,dndSrdRace:c})),z(_=>{var v=`${r().primary} ${zs.outerStyles}`,C=`${zs.SelectorBar}`,x=`${zs.wrapper}`;return v!==_.e&&U(u,_.e=v),C!==_.t&&U(f,_.t=C),x!==_.a&&U(y,_.a=x),_},{e:void 0,t:void 0,a:void 0}),u})()};Ft(["click"]);const ow="_allBackgrounds_osalx_1",lw="_backgrounds_osalx_12",cw="_feature_osalx_23",uw="_totalPanel_osalx_27",hw="_body_osalx_31",Wr={allBackgrounds:ow,backgrounds:lw,feature:cw,totalPanel:uw,body:hw};var dw=w("<div><h1>Backgrounds</h1><div></div><div></div>"),fw=w("<div>"),pw=w("<div><h2></h2><div></div><h3></h3><h3>choose: </h3><div></div><br><h3>Starting Equipment</h3><div></div><br><div></div><h3>Skill Proficiencies</h3><div>"),gw=w("<span><h3></h3><br><span>"),Gr=w("<br>"),ia=w("<span>"),mw=w("<h3>Choose: "),vw=w("<span> ");const bw=()=>{He(tt);const[t,e]=Me(),n=G(()=>Ie(t().theme)),r=Nv(),[s,i]=P(r()||[]),a=G(()=>{if(s().length===0)return r()}),[o,l]=Tn();o.name||l({name:r()[0]?.name});const c=r().filter(g=>g.name?.toLowerCase()===(o?.name||r()[0]?.name).toLowerCase())[0],[u,h]=P(c);z(()=>{l({name:u()?.name})});const f=g=>{h(g)};return(()=>{var g=dw(),b=g.firstChild,m=b.nextSibling,y=m.nextSibling;return m.style.setProperty("width","35%"),m.style.setProperty("height","5vh"),m.style.setProperty("margin","0 auto"),p(m,d(ku,{placeholder:"Search Backgrounds...",dataSource:r,setResults:i})),p(y,d(Y,{get each(){return a()},children:_=>d(Wn,{get extraSetter(){return f(_)},styles:Wr,get children(){return[(()=>{var v=fw();return p(v,()=>u().name),v})(),(()=>{var v=pw(),C=v.firstChild,x=C.nextSibling,k=x.nextSibling,I=k.nextSibling;I.firstChild;var A=I.nextSibling,K=A.nextSibling,T=K.nextSibling,N=T.nextSibling,O=N.nextSibling,M=O.nextSibling,q=M.nextSibling,V=q.nextSibling;return p(C,()=>u().name),p(x,d(Y,{get each(){return u().feature},children:B=>[(()=>{var F=gw(),X=F.firstChild,ge=X.nextSibling,R=ge.nextSibling;return p(X,()=>B.name),p(R,()=>B.value),z(()=>U(R,`${Wr.feature}`)),F})(),Gr()]})),p(k,()=>u().languageChoice.type),p(I,()=>u().languageChoice.choose,null),p(A,d(Y,{get each(){return u().languageChoice.choices},children:B=>[(()=>{var F=ia();return p(F,B),F})(),Gr()]})),p(N,d(Y,{get each(){return u().startingEquipment},children:B=>[(()=>{var F=ia();return p(F,()=>B.item),F})(),Gr()]})),p(M,d(Y,{get each(){return u().startingEquipmentChoices},children:B=>[(()=>{var F=mw();return F.firstChild,p(F,()=>B.choose,null),F})(),d(Y,{get each(){return B.choices},children:F=>[(()=>{var X=vw(),ge=X.firstChild;return p(X,()=>F.quantity,ge),p(X,()=>F.item,null),X})(),Gr()]})]})),p(V,d(Y,{get each(){return u().startingProficiencies},children:B=>[(()=>{var F=ia();return p(F,()=>B.value),F})(),Gr()]})),z(()=>U(v,`${Wr.body}`)),v})()]}})})),z(_=>{var v=`${n()?.primary} ${Wr.allBackgrounds}`,C=`${Wr.backgrounds}`;return v!==_.e&&U(g,_.e=v),C!==_.t&&U(y,_.t=C),_},{e:void 0,t:void 0}),g})()},yw="_CenterPage_h7g95_1",_w="_eachPage_h7g95_8",ww="_Center_h7g95_1",$w="_CenterTable_h7g95_18",Sw="_subClasses_h7g95_28",Bn={CenterPage:yw,eachPage:_w,Center:ww,CenterTable:$w,subClasses:Sw};var kw=w("<h4>Spells Gained"),ur=w("<span>"),lt=w("<br>"),Cw=w("<div><h3></h3><span></span><br><span></span><br><span>"),xw=w("<h5> <!> "),Tw=w("<span> <!> "),Ew=w("<div><h2>Skills"),Xl=w("<div><br>"),Aw=w("<div><h2>Starting Equipment"),Lw=w("<div><h2>Features"),Ow=w("<div>"),Pw=w("<div><div><span></span></div><hr><div><h1></h1><div></div><h2>Proficiencies</h2><span>Armor: </span><span></span><br><span>Weapons: <!> </span><br><span>Tools:</span><br><br><span>Saving Throws: </span><br><br><br><br><div>"),Rw=w("<span>Choose: "),Iw=w("<h3>choice 1"),Ks=w("<span>choose: "),Hs=w("<span>or"),aa=w("<div><br><br><span>"),Nw=w("<h3>choice 2"),Dw=w("<h3>choice 3"),Mw=w("<h3>choice 4"),Bw=w("<div><br><span>"),jw=w("<div><h3></h3><span>");const Fw=()=>{He(tt);const[t,e]=Me(),n=G(()=>Ie(t().theme)),r=To(),[s,i]=Tn(),a=r().findIndex(g=>g.name.toLowerCase()===s.name?.toLowerCase()),[o,l]=P(a>=0?a:0);s.name||i({name:r().length>0?r()[o()].name:"barbarian"});const c=G(()=>r().length>0&&o()>=0&&o()<r().length?r()[o()]:{}),u=G(()=>c().subclasses?.length>0?c().subclasses:[]);z(()=>{i({name:r().length>0?c().name:"barbarian"}),console.table(c())});const h=g=>{const b=JSON.parse(JSON.stringify(g));return typeof b=="string"?b:Array.isArray(b)?b.join(`
 
`):"-unknown-"},f=g=>g().map(b=>({name:b.name,element:(()=>{var m=Cw(),y=m.firstChild,_=y.nextSibling,v=_.nextSibling,C=v.nextSibling,x=C.nextSibling,k=x.nextSibling;return p(y,()=>b.name),p(_,()=>b.desc?.join(` 
`)),p(C,()=>b.subclassFlavor),p(m,d(Z,{get when(){return b.spells?.length>=1},get children(){return[kw(),(()=>{var I=ur();return p(I,()=>b.spells?.join(`
`)),I})(),lt()]}}),k),p(k,d(Y,{get each(){return b.features},children:I=>[(()=>{var A=xw(),K=A.firstChild,T=K.nextSibling;return T.nextSibling,p(A,()=>I.name,T),A})(),(()=>{var A=Tw(),K=A.firstChild,T=K.nextSibling;return T.nextSibling,p(A,()=>h(I?.value),T),A})()]})),m})()}));return(()=>{var g=Pw(),b=g.firstChild,m=b.firstChild,y=b.nextSibling,_=y.nextSibling,v=_.firstChild,C=v.nextSibling,x=C.nextSibling,k=x.nextSibling;k.firstChild;var I=k.nextSibling,A=I.nextSibling,K=A.nextSibling,T=K.firstChild,N=T.nextSibling;N.nextSibling;var O=K.nextSibling,M=O.nextSibling;M.firstChild;var q=M.nextSibling,V=q.nextSibling,B=V.nextSibling;B.firstChild;var F=B.nextSibling,X=F.nextSibling,ge=X.nextSibling,R=ge.nextSibling,D=R.nextSibling;return p(b,d(ye,{onClick:()=>o()===0?l(L=>r().length-1):l(L=>L-1),children:"←"}),m),p(m,()=>c().name),p(b,d(ye,{onClick:()=>o()===r().length-1?l(L=>0):l(L=>L+1),children:"→"}),null),y.style.setProperty("width","100%"),p(v,()=>c().name),p(C,d(tm,{Class:()=>c()})),p(k,()=>c().proficiencies.filter(L=>L.toLowerCase().includes("armor")).join(", "),null),p(I,d(Z,{get when(){return!!c().proficiencies.filter(L=>L.toLowerCase()==="shields").length},children:", Shields"})),p(K,()=>c().proficiencies.filter(L=>L.toLowerCase().includes("weapons")).join(", "),N),p(M,d(Z,{get when(){return G(()=>!c().proficiencies.map(L=>L.toLowerCase()).includes("tools"))()&&!c().proficiencies.map(L=>L.toLowerCase()).includes("kit")},children:"None"}),null),p(M,d(Z,{get when(){return!c().proficiencies.map(L=>L.toLowerCase()).includes("kit")},get children(){return c().proficiencies.filter(L=>L.toLowerCase().includes("kit"))}}),null),p(M,d(Z,{get when(){return!c().proficiencies.map(L=>L.toLowerCase()).includes("tools")},get children(){return c().proficiencies.filter(L=>L.toLowerCase().includes("tools")).join(", ")}}),null),p(B,()=>c().savingThrows.join(", "),null),p(_,d(Wn,{get class(){return`${Bn.Center}`},style:{width:"50%"},get children(){return[Ew(),(()=>{var L=Xl(),ee=L.firstChild;return p(L,d(Z,{get when(){return c().proficiencyChoices.length>0},get children(){return d(Y,{get each(){return c().proficiencyChoices},children:$=>[lt(),(()=>{var E=Rw();return E.firstChild,p(E,()=>$.choose,null),E})(),lt(),d(Y,{get each(){return $.choices},children:E=>[(()=>{var j=ur();return p(j,E),j})(),lt()]})]})}}),ee),L})()]}}),ge),p(_,d(Wn,{get class(){return`${Bn.Center}`},style:{width:"50%"},get children(){return[Aw(),(()=>{var L=Xl();return L.firstChild,p(L,d(Z,{get when(){return c().startingEquipment.choice1.length>=1},get children(){return d(Y,{get each(){return c().startingEquipment.choice1},children:(ee,$)=>(()=>{var E=aa(),j=E.firstChild,te=j.nextSibling,re=te.nextSibling;return p(E,d(Z,{get when(){return $()<1},get children(){return Iw()}}),j),p(E,d(Z,{get when(){return $()<1},get children(){var W=Ks();return W.firstChild,p(W,()=>ee.choose,null),W}}),te),p(re,d(Y,{get each(){return ee.choices},children:(W,oe)=>[lt(),(()=>{var le=ur();return p(le,()=>W.item),le})(),lt()]})),p(E,d(Z,{get when(){return $()<=0},get children(){return[lt(),Hs()]}}),null),E})()})}}),null),p(L,d(Z,{get when(){return c().startingEquipment.choice2},get children(){return d(Y,{get each(){return c().startingEquipment.choice2},children:(ee,$)=>(()=>{var E=aa(),j=E.firstChild,te=j.nextSibling,re=te.nextSibling;return p(E,d(Z,{get when(){return $()<1},get children(){return Nw()}}),j),p(E,d(Z,{get when(){return $()<1},get children(){var W=Ks();return W.firstChild,p(W,()=>ee.choose,null),W}}),te),p(re,d(Y,{get each(){return ee.choices},children:W=>[lt(),(()=>{var oe=ur();return p(oe,()=>W.item),oe})(),lt()]})),p(E,d(Z,{get when(){return $()<=0},get children(){return[lt(),Hs()]}}),null),E})()})}}),null),p(L,d(Z,{get when(){return c().startingEquipment.choice3},get children(){return d(Y,{get each(){return c().startingEquipment.choice3},children:(ee,$)=>(()=>{var E=aa(),j=E.firstChild,te=j.nextSibling,re=te.nextSibling;return p(E,d(Z,{get when(){return $()<1},get children(){return Dw()}}),j),p(E,d(Z,{get when(){return $()<1},get children(){var W=Ks();return W.firstChild,p(W,()=>ee.choose,null),W}}),te),p(re,d(Y,{get each(){return ee.choices},children:W=>[lt(),(()=>{var oe=ur();return p(oe,()=>W.item),oe})(),lt()]})),p(E,d(Z,{get when(){return $()<=0},get children(){return[lt(),Hs()]}}),null),E})()})}}),null),p(L,d(Z,{get when(){return c().startingEquipment.choice4},get children(){return d(Y,{get each(){return c().startingEquipment.choice4},children:(ee,$)=>(()=>{var E=Bw(),j=E.firstChild,te=j.nextSibling;return p(E,d(Z,{get when(){return $()<1},get children(){return Mw()}}),j),p(E,d(Z,{get when(){return $()<1},get children(){var re=Ks();return re.firstChild,p(re,()=>ee.choose,null),re}}),te),p(te,d(Y,{get each(){return ee.choices},children:re=>[lt(),(()=>{var W=ur();return p(W,()=>re.item),W})(),lt()]})),p(E,d(Z,{get when(){return $()<=0},get children(){return[lt(),Hs()]}}),null),E})()})}}),null),L})()]}}),R),p(_,d(Wn,{get class(){return`${Bn.Center}`},style:{width:"50%"},get children(){return[Lw(),(()=>{var L=Ow();return p(L,d(Y,{get each(){return c().classLevels},children:ee=>[d(Z,{get when(){return ee.features.filter($=>!!$.name.trim()||!!$.value).length>0},get children(){return lt()}}),d(Y,{get each(){return ee.features},children:$=>d(Z,{get when(){return!!$.name.trim()||!!$.value.trim()},get children(){var E=jw(),j=E.firstChild,te=j.nextSibling;return p(j,()=>$.name),p(te,()=>h(JSON.parse(JSON.stringify($.value))&&typeof JSON.parse(JSON.stringify($.value))=="object"&&JSON.parse(JSON.stringify($.value))!==void 0?JSON.stringify($.value):$.value)),E}})}),d(Z,{get when(){return ee.features.filter($=>!!$.name.trim()||!!$.value).length>0},get children(){return lt()}})]})),L})()]}}),D),p(D,d(Er,{notFoundName:"Subclasses",get elements(){return f(u)}})),z(L=>{var ee=`${n()?.primary} ${Bn.CenterPage}`,$=`${Bn.eachPage}`,E=`${Bn.CenterTable}`,j=`${Bn.subClasses}`;return ee!==L.e&&U(g,L.e=ee),$!==L.t&&U(_,L.t=$),E!==L.a&&U(C,L.a=E),j!==L.o&&U(D,L.o=j),L},{e:void 0,t:void 0,a:void 0,o:void 0}),g})()},Zu=Za(()=>yi(()=>import("./characters-siP_FC20.js"),__vite__mapDeps([0,1]))),Xu=Za(()=>yi(()=>import("./create-Pq2h4Py6.js"),__vite__mapDeps([2,1]))),Qu=Za(()=>yi(()=>import("./view-uEUcvwLg.js"),__vite__mapDeps([3,4]))),Uw=document.getElementById("root"),zw=60*1e3;Ju({onRegisteredSW(t,e){e&&setInterval(()=>{Zu.preload(),Xu.preload(),Qu.preload(),e.update()},zw)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){console.log("onNeedRefresh")},onOfflineReady(){console.log("onOfflineReady")}});Ch(()=>d(ud,{root:lg,get children(){return[d(Ue,{path:"/",component:Bb}),d(Ue,{path:"/characters",get children(){return[d(Ue,{path:"/",component:Zu}),d(Ue,{path:"/view",component:Qu}),d(Ue,{path:"/create",component:Xu})]}}),d(Ue,{path:"/info",get children(){return[d(Ue,{path:"/races",component:aw}),d(Ue,{path:"/spells",component:Vl}),d(Ue,{path:"/feats",component:R_}),d(Ue,{path:"/classes",component:Fw}),d(Ue,{path:"/backgrounds",component:bw}),d(Ue,{path:"/*any",component:Vl})]}}),d(Ue,{path:"/homebrew",get children(){return[d(Ue,{path:"/",component:Hb}),d(Ue,{path:"/view",component:Kl}),d(Ue,{path:"/create",get children(){return[d(Ue,{path:"/",component:Zb}),d(Ue,{path:"/classes",component:a0}),d(Ue,{path:"/subclasses",component:Wy}),d(Ue,{path:"/items",component:f0}),d(Ue,{path:"/feats",component:k0}),d(Ue,{path:"/backgrounds",component:T0}),d(Ue,{path:"/spells",component:B0}),d(Ue,{path:"/races",component:U0})]}}),d(Ue,{path:"/*any",component:Kl})]}})]}}),Uw);export{ye as B,Y as F,d as a,z as b,G as c,U as d,Hw as e,To as f,Me as g,Hv as h,p as i,Ku as j,zv as k,Fv as l,Nv as m,P as n,Kw as o,Tn as p,ht as s,w as t,Ie as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/characters-siP_FC20.js","assets/characters-i2fzY9Kk.css","assets/create-Pq2h4Py6.js","assets/view-uEUcvwLg.js","assets/view-aa-IgBHj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
