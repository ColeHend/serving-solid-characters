(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const gh="modulepreload",mh=function(t){return"/"+t},za={},Js=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=mh(o),o in za)return;za[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":gh,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},me={context:void 0,registry:void 0};function Er(t){me.context=t}const vh=(t,e)=>t===e,Ds=Symbol("solid-proxy"),bh=Symbol("solid-track"),Ms={equals:vh};let oc=hc;const Zt=1,Ns=2,ac={owned:null,cleanups:null,context:null,owner:null},fi={};var ve=null;let pi=null,yh=null,ke=null,Qe=null,Ht=null,Qs=0;function qn(t,e){const n=ke,r=ve,s=t.length===0,i=e===void 0?r:e,o=s?ac:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?t:()=>t(()=>Ue(()=>ti(o)));ve=o,ke=null;try{return Gt(a,!0)}finally{ke=n,ve=r}}function M(t,e){e=e?Object.assign({},Ms,e):Ms;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),uc(n,s));return[cc.bind(n),r]}function Ka(t,e,n){const r=ei(t,e,!0,Zt);ir(r)}function z(t,e,n){const r=ei(t,e,!1,Zt);ir(r)}function tr(t,e,n){oc=xh;const r=ei(t,e,!1,Zt);(!n||!n.render)&&(r.user=!0),Ht?Ht.push(r):ir(r)}function H(t,e,n){n=n?Object.assign({},Ms,n):Ms;const r=ei(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ir(r),cc.bind(r)}function _h(t){return t&&typeof t=="object"&&"then"in t}function wh(t,e,n){let r,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,s=t,i=e||{}):(r=t,s=e,i=n||{});let o=null,a=fi,l=null,c=!1,u="initialValue"in i,h=typeof r=="function"&&H(r);const d=new Set,[m,y]=(i.storage||M)(i.initialValue),[p,b]=M(void 0),[_,v]=M(void 0,{equals:!1}),[w,C]=M(u?"ready":"unresolved");if(me.context){l=`${me.context.id}${me.context.count++}`;let T;i.ssrLoadFrom==="initial"?a=i.initialValue:me.load&&(T=me.load(l))&&(a=T)}function k(T,O,N,P){return o===T&&(o=null,P!==void 0&&(u=!0),(T===a||O===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(P,{value:O})),a=fi,A(O,N)),O}function A(T,O){Gt(()=>{O===void 0&&y(()=>T),C(O!==void 0?"errored":u?"ready":"unresolved"),b(O);for(const N of d.keys())N.decrement();d.clear()},!1)}function S(){const T=Sh,O=m(),N=p();if(N!==void 0&&!o)throw N;return ke&&!ke.user&&T&&Ka(()=>{_(),o&&(T.resolved||d.has(T)||(T.increment(),d.add(T)))}),O}function K(T=!0){if(T!==!1&&c)return;c=!1;const O=h?h():r;if(O==null||O===!1){k(o,Ue(m));return}const N=a!==fi?a:Ue(()=>s(O,{value:m(),refetching:T}));return _h(N)?(o=N,"value"in N?(N.status==="success"?k(o,N.value,void 0,O):k(o,void 0,void 0,O),N):(c=!0,queueMicrotask(()=>c=!1),Gt(()=>{C(u?"refreshing":"pending"),v()},!1),N.then(P=>k(N,P,void 0,O),P=>k(N,void 0,fc(P),O)))):(k(o,N,void 0,O),N)}return Object.defineProperties(S,{state:{get:()=>w()},error:{get:()=>p()},loading:{get(){const T=w();return T==="pending"||T==="refreshing"}},latest:{get(){if(!u)return S();const T=p();if(T&&!o)throw T;return m()}}}),h?Ka(()=>K(!1)):K(!1),[S,{refetch:K,mutate:y}]}function Ue(t){if(ke===null)return t();const e=ke;ke=null;try{return t()}finally{ke=e}}function lc(t,e,n){const r=Array.isArray(t);let s,i=n&&n.defer;return o=>{let a;if(r){a=Array(t.length);for(let c=0;c<t.length;c++)a[c]=t[c]()}else a=t();if(i){i=!1;return}const l=Ue(()=>e(a,s,o));return s=a,l}}function Xt(t){tr(()=>Ue(t))}function ln(t){return ve===null||(ve.cleanups===null?ve.cleanups=[t]:ve.cleanups.push(t)),t}function Bs(){return ve}function jo(t,e){const n=ve,r=ke;ve=t,ke=null;try{return Gt(e,!0)}catch(s){Uo(s)}finally{ve=n,ke=r}}function $h(t){const e=ke,n=ve;return Promise.resolve().then(()=>{ke=e,ve=n;let r;return Gt(t,!1),ke=ve=null,r?r.done:void 0})}function Pn(t,e){const n=Symbol("context");return{id:n,Provider:Th(n),defaultValue:t}}function Se(t){return ve&&ve.context&&ve.context[t.id]!==void 0?ve.context[t.id]:t.defaultValue}function Rn(t){const e=H(t),n=H(()=>Yi(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Sh;function cc(){if(this.sources&&this.state)if(this.state===Zt)ir(this);else{const t=Qe;Qe=null,Gt(()=>js(this),!1),Qe=t}if(ke){const t=this.observers?this.observers.length:0;ke.sources?(ke.sources.push(this),ke.sourceSlots.push(t)):(ke.sources=[this],ke.sourceSlots=[t]),this.observers?(this.observers.push(ke),this.observerSlots.push(ke.sources.length-1)):(this.observers=[ke],this.observerSlots=[ke.sources.length-1])}return this.value}function uc(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Gt(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],o=pi&&pi.running;o&&pi.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?Qe.push(i):Ht.push(i),i.observers&&dc(i)),o||(i.state=Zt)}if(Qe.length>1e6)throw Qe=[],new Error},!1)),e}function ir(t){if(!t.fn)return;ti(t);const e=Qs;kh(t,t.value,e)}function kh(t,e,n){let r;const s=ve,i=ke;ke=ve=t;try{r=t.fn(e)}catch(o){return t.pure&&(t.state=Zt,t.owned&&t.owned.forEach(ti),t.owned=null),t.updatedAt=n+1,Uo(o)}finally{ke=i,ve=s}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?uc(t,r):t.value=r,t.updatedAt=n)}function ei(t,e,n,r=Zt,s){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:ve,context:ve?ve.context:null,pure:n};return ve===null||ve!==ac&&(ve.owned?ve.owned.push(i):ve.owned=[i]),i}function Fs(t){if(t.state===0)return;if(t.state===Ns)return js(t);if(t.suspense&&Ue(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Qs);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Zt)ir(t);else if(t.state===Ns){const r=Qe;Qe=null,Gt(()=>js(t,e[0]),!1),Qe=r}}function Gt(t,e){if(Qe)return t();let n=!1;e||(Qe=[]),Ht?n=!0:Ht=[],Qs++;try{const r=t();return Ch(n),r}catch(r){n||(Ht=null),Qe=null,Uo(r)}}function Ch(t){if(Qe&&(hc(Qe),Qe=null),t)return;const e=Ht;Ht=null,e.length&&Gt(()=>oc(e),!1)}function hc(t){for(let e=0;e<t.length;e++)Fs(t[e])}function xh(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:Fs(r)}if(me.context){if(me.count){me.effects||(me.effects=[]),me.effects.push(...t.slice(0,n));return}else me.effects&&(t=[...me.effects,...t],n+=me.effects.length,delete me.effects);Er()}for(e=0;e<n;e++)Fs(t[e])}function js(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const s=r.state;s===Zt?r!==e&&(!r.updatedAt||r.updatedAt<Qs)&&Fs(r):s===Ns&&js(r,e)}}}function dc(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Ns,n.pure?Qe.push(n):Ht.push(n),n.observers&&dc(n))}}function ti(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ti(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function fc(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Uo(t,e=ve){throw fc(t)}function Yi(t){if(typeof t=="function"&&!t.length)return Yi(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=Yi(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function Th(t,e){return function(r){let s;return z(()=>s=Ue(()=>(ve.context={...ve.context,[t]:r.value},Rn(()=>r.children))),void 0),s}}const Eh=Symbol("fallback");function Ha(t){for(let e=0;e<t.length;e++)t[e]()}function Ah(t,e,n={}){let r=[],s=[],i=[],o=0,a=e.length>1?[]:null;return ln(()=>Ha(i)),()=>{let l=t()||[],c,u;return l[bh],Ue(()=>{let d=l.length,m,y,p,b,_,v,w,C,k;if(d===0)o!==0&&(Ha(i),i=[],r=[],s=[],o=0,a&&(a=[])),n.fallback&&(r=[Eh],s[0]=qn(A=>(i[0]=A,n.fallback())),o=1);else if(o===0){for(s=new Array(d),u=0;u<d;u++)r[u]=l[u],s[u]=qn(h);o=d}else{for(p=new Array(d),b=new Array(d),a&&(_=new Array(d)),v=0,w=Math.min(o,d);v<w&&r[v]===l[v];v++);for(w=o-1,C=d-1;w>=v&&C>=v&&r[w]===l[C];w--,C--)p[C]=s[w],b[C]=i[w],a&&(_[C]=a[w]);for(m=new Map,y=new Array(C+1),u=C;u>=v;u--)k=l[u],c=m.get(k),y[u]=c===void 0?-1:c,m.set(k,u);for(c=v;c<=w;c++)k=r[c],u=m.get(k),u!==void 0&&u!==-1?(p[u]=s[c],b[u]=i[c],a&&(_[u]=a[c]),u=y[u],m.set(k,u)):i[c]();for(u=v;u<d;u++)u in p?(s[u]=p[u],i[u]=b[u],a&&(a[u]=_[u],a[u](u))):s[u]=qn(h);s=s.slice(0,o=d),r=l.slice(0)}return s});function h(d){if(i[u]=d,a){const[m,y]=M(u);return a[u]=y,e(l[u],m)}return e(l[u])}}}function f(t,e){return Ue(()=>t(e||{}))}function ts(){return!0}const Zi={get(t,e,n){return e===Ds?n:t.get(e)},has(t,e){return e===Ds?!0:t.has(e)},set:ts,deleteProperty:ts,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:ts,deleteProperty:ts}},ownKeys(t){return t.keys()}};function gi(t){return(t=typeof t=="function"?t():t)?t:{}}function Lh(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function Oe(...t){let e=!1;for(let o=0;o<t.length;o++){const a=t[o];e=e||!!a&&Ds in a,t[o]=typeof a=="function"?(e=!0,H(a)):a}if(e)return new Proxy({get(o){for(let a=t.length-1;a>=0;a--){const l=gi(t[a])[o];if(l!==void 0)return l}},has(o){for(let a=t.length-1;a>=0;a--)if(o in gi(t[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<t.length;a++)o.push(...Object.keys(gi(t[a])));return[...new Set(o)]}},Zi);const n={},r=Object.create(null);for(let o=t.length-1;o>=0;o--){const a=t[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=h.get?{enumerable:!0,configurable:!0,get:Lh.bind(n[u]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const d=n[u];d&&(h.get?d.push(h.get.bind(a)):h.value!==void 0&&d.push(()=>h.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function et(t,...e){if(Ds in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(a){return o.includes(a)?t[a]:void 0},has(a){return o.includes(a)&&a in t},keys(){return o.filter(a=>a in t)}},Zi));return i.push(new Proxy({get(o){return s.has(o)?void 0:t[o]},has(o){return s.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!s.has(o))}},Zi)),i}const n={},r=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of e)c.includes(s)&&(a=!0,o?r[l][s]=i.value:Object.defineProperty(r[l],s,i)),++l;a||(o?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}function zo(t){let e,n;const r=s=>{const i=me.context;if(i){const[a,l]=M();me.count||(me.count=0),me.count++,(n||(n=t())).then(c=>{Er(i),me.count--,l(()=>c.default),Er()}),e=a}else if(!e){const[a]=wh(()=>(n||(n=t())).then(l=>l.default));e=a}let o;return H(()=>(o=e())&&Ue(()=>{if(!i)return o(s);const a=me.context;Er(i);const l=o(s);return Er(a),l}))};return r.preload=()=>n||((n=t()).then(s=>e=()=>s.default),n),r}const pc=t=>`Stale read from <${t}>.`;function Y(t){const e="fallback"in t&&{fallback:()=>t.fallback};return H(Ah(()=>t.each,t.children,e||void 0))}function G(t){const e=t.keyed,n=H(()=>t.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return H(()=>{const r=n();if(r){const s=t.children;return typeof s=="function"&&s.length>0?Ue(()=>s(e?r:()=>{if(!Ue(n))throw pc("Show");return t.when})):s}return t.fallback},void 0,void 0)}function Nr(t){let e=!1;const n=(i,o)=>(e?i[1]===o[1]:!i[1]==!o[1])&&i[2]===o[2],r=Rn(()=>t.children),s=H(()=>{let i=r();Array.isArray(i)||(i=[i]);for(let o=0;o<i.length;o++){const a=i[o].when;if(a)return e=!!i[o].keyed,[o,a,i[o]]}return[-1]},void 0,{equals:n});return H(()=>{const[i,o,a]=s();if(i<0)return t.fallback;const l=a.children;return typeof l=="function"&&l.length>0?Ue(()=>l(e?o:()=>{if(Ue(s)[0]!==i)throw pc("Match");return a.when})):l},void 0,void 0)}function ct(t){return t}const Ph=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Rh=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Ph]),Oh=new Set(["innerHTML","textContent","innerText","children"]),Ih=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Dh=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Mh(t,e){const n=Dh[t];return typeof n=="object"?n[e]?n.$:void 0:n}const Nh=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Bh={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Fh(t,e,n){let r=n.length,s=e.length,i=r,o=0,a=0,l=e[s-1].nextSibling,c=null;for(;o<s||a<i;){if(e[o]===n[a]){o++,a++;continue}for(;e[s-1]===n[i-1];)s--,i--;if(s===o){const u=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)t.insertBefore(n[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[a]===e[s-1]){const u=e[--s].nextSibling;t.insertBefore(n[a++],e[o++].nextSibling),t.insertBefore(n[--i],u),e[s]=n[i]}else{if(!c){c=new Map;let h=a;for(;h<i;)c.set(n[h],h++)}const u=c.get(e[o]);if(u!=null)if(a<u&&u<i){let h=o,d=1,m;for(;++h<s&&h<i&&!((m=c.get(e[h]))==null||m!==u+d);)d++;if(d>u-a){const y=e[o];for(;a<u;)t.insertBefore(n[a++],y)}else t.replaceChild(n[a++],e[o++])}else o++;else e[o++].remove()}}}const qa="_$DX_DELEGATE";function Xi(t,e,n,r={}){let s;return qn(i=>{s=i,e===document?t():g(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{s(),e.textContent=""}}function $(t,e,n){let r;const s=()=>{const o=document.createElement("template");return o.innerHTML=t,n?o.content.firstChild.firstChild:o.content.firstChild},i=e?()=>Ue(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function bt(t,e=window.document){const n=e[qa]||(e[qa]=new Set);for(let r=0,s=t.length;r<s;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,qh))}}function wt(t,e,n){me.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function jh(t,e,n,r){me.context||(r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r))}function j(t,e){me.context||(e==null?t.removeAttribute("class"):t.className=e)}function Uh(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const s=n[0];t.addEventListener(e,n[0]=i=>s.call(t,n[1],i))}else t.addEventListener(e,n)}function zh(t,e,n={}){const r=Object.keys(e||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||e[a]||(Wa(t,a,!1),delete n[a])}for(i=0,o=r.length;i<o;i++){const a=r[i],l=!!e[a];!a||a==="undefined"||n[a]===l||!l||(Wa(t,a,!0),n[a]=l)}return n}function Ko(t,e,n){if(!e)return n?wt(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let s,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)s=e[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Ie(t,e={},n,r){const s={};return r||z(()=>s.children=nr(t,e.children,s.children)),z(()=>e.ref&&e.ref(t)),z(()=>Kh(t,e,n,!0,s,!0)),s}function cn(t,e,n){return Ue(()=>t(e,n))}function g(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return nr(t,e,r,n);z(s=>nr(t,e(),s,n),r)}function Kh(t,e,n,r,s={},i=!1){e||(e={});for(const o in s)if(!(o in e)){if(o==="children")continue;s[o]=Va(t,o,null,s[o],n,i)}for(const o in e){if(o==="children"){r||nr(t,e.children);continue}const a=e[o];s[o]=Va(t,o,a,s[o],n,i)}}function Hh(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Wa(t,e,n){const r=e.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)t.classList.toggle(r[s],n)}function Va(t,e,n,r,s,i){let o,a,l,c,u;if(e==="style")return Ko(t,n,r);if(e==="classList")return zh(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);r&&t.removeEventListener(h,r),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);r&&t.removeEventListener(h,r,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=Nh.has(h);if(!d&&r){const m=Array.isArray(r)?r[0]:r;t.removeEventListener(h,m)}(d||n)&&(Uh(t,h,n,d),d&&bt([h]))}else if(e.slice(0,5)==="attr:")wt(t,e.slice(5),n);else if((u=e.slice(0,5)==="prop:")||(l=Oh.has(e))||!s&&((c=Mh(e,t.tagName))||(a=Rh.has(e)))||(o=t.nodeName.includes("-"))){if(u)e=e.slice(5),a=!0;else if(me.context)return n;e==="class"||e==="className"?j(t,n):o&&!a&&!l?t[Hh(e)]=n:t[c||e]=n}else{const h=s&&e.indexOf(":")>-1&&Bh[e.split(":")[0]];h?jh(t,h,e,n):wt(t,Ih[e]||e,n)}return n}function qh(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),me.registry&&!me.done&&(me.done=_$HY.done=!0);n;){const r=n[e];if(r&&!n.disabled){const s=n[`${e}Data`];if(s!==void 0?r.call(n,s,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function nr(t,e,n,r,s){if(me.context){!n&&(n=[...t.childNodes]);let a=[];for(let l=0;l<n.length;l++){const c=n[l];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():a.push(c)}n=a}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=r!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(me.context)return n;if(i==="number"&&(e=e.toString()),o){let a=n[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),n=jn(t,n,r,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(me.context)return n;n=jn(t,n,r)}else{if(i==="function")return z(()=>{let a=e();for(;typeof a=="function";)a=a();n=nr(t,a,n,r)}),()=>n;if(Array.isArray(e)){const a=[],l=n&&Array.isArray(n);if(Ji(a,e,n,s))return z(()=>n=nr(t,a,n,r,!0)),()=>n;if(me.context){if(!a.length)return n;if(r===void 0)return[...t.childNodes];let c=a[0],u=[c];for(;(c=c.nextSibling)!==r;)u.push(c);return n=u}if(a.length===0){if(n=jn(t,n,r),o)return n}else l?n.length===0?Ga(t,a,r):Fh(t,n,a):(n&&jn(t),Ga(t,a));n=a}else if(e.nodeType){if(me.context&&e.parentNode)return n=o?[e]:e;if(Array.isArray(n)){if(o)return n=jn(t,n,r,e);jn(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Ji(t,e,n,r){let s=!1;for(let i=0,o=e.length;i<o;i++){let a=e[i],l=n&&n[i],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))s=Ji(t,a,l)||s;else if(c==="function")if(r){for(;typeof a=="function";)a=a();s=Ji(t,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else t.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?t.push(l):t.push(document.createTextNode(u))}}return s}function Ga(t,e,n=null){for(let r=0,s=e.length;r<s;r++)t.insertBefore(e[r],n)}function jn(t,e,n,r){if(n===void 0)return t.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(s!==a){const l=a.parentNode===t;!i&&!o?l?t.replaceChild(s,a):t.insertBefore(s,n):l&&a.remove()}else i=!0}}else t.insertBefore(s,n);return[s]}const Wh=!1,Vh="http://www.w3.org/2000/svg";function Gh(t,e=!1){return e?document.createElementNS(Vh,t):document.createElement(t)}function Ho(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,s=Bs();let i,o=!!me.context;return tr(()=>{o&&(Bs().user=o=!1),i||(i=jo(s,()=>H(()=>t.children)));const a=r();if(a instanceof HTMLHeadElement){const[l,c]=M(!1),u=()=>c(!0);qn(h=>g(a,()=>l()?h():i(),null)),ln(u)}else{const l=Gh(t.isSVG?"g":"div",t.isSVG),c=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),g(c,i),a.appendChild(l),t.ref&&t.ref(l),ln(()=>a.removeChild(l))}},void 0,{render:!o}),n}function gc(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of t)a.listener({...o,from:a.location,retry:l=>{l&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:r}}let Qi;function qo(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Qi=window.history.state._depth}qo();function Yh(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Zh(t,e){let n=!1;return()=>{const r=Qi;qo();const s=r==null?null:Qi-r;if(n){n=!1;return}s&&e(s)?(n=!0,window.history.go(-s)):t()}}const Xh=/^(?:[a-z0-9]+:)?\/\//i,Jh=/^\/+|(\/)\/+$/g,mc="http://sr";function Sn(t,e=!1){const n=t.replace(Jh,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function ks(t,e,n){if(Xh.test(e))return;const r=Sn(t),s=n&&Sn(n);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Sn(e,!i)}function Qh(t,e){if(t==null)throw new Error(e);return t}function ed(t,e){return Sn(t).replace(/\/*(\*.*)?$/g,"")+Sn(e)}function vc(t){const e={};return t.searchParams.forEach((n,r)=>{e[r]=n}),e}function td(t,e,n){const[r,s]=t.split("/*",2),i=r.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:o?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const m=i[d],y=l[d],p=m[0]===":",b=p?m.slice(1):m;if(p&&mi(y,h(b)))u.params[b]=y;else if(p||!mi(y,m))return null;u.path+=`/${y}`}if(s){const d=c?l.slice(-c).join("/"):"";if(mi(d,h(s)))u.params[s]=d;else return null}return u}}function mi(t,e){const n=r=>r.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function nd(t){const[e,n]=t.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function bc(t){const e=new Map,n=Bs();return new Proxy({},{get(r,s){return e.has(s)||jo(n,()=>e.set(s,H(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function rd(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([s,i])=>{i==null||i===""?n.delete(s):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function yc(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),r=t.slice(e.index+e[0].length);const s=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=e[1]),r=r.slice(e[0].length);return yc(r).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const sd=100,_c=Pn(),Wo=Pn(),qr=()=>Qh(Se(_c),"<A> and 'use' router primitives can be only used inside a Route."),id=()=>Se(Wo)||qr().base,od=t=>{const e=id();return H(()=>e.resolvePath(t()))},ad=t=>{const e=qr();return H(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},wc=()=>qr().navigatorFactory(),$c=()=>qr().location,C2=()=>qr().params,fn=()=>{const t=$c(),e=wc(),n=(r,s)=>{const i=Ue(()=>t.pathname+rd(t.search,r)+t.hash);e(i,{scroll:!1,resolve:!1,...s})};return[t.query,n]};function ld(t,e=""){const{component:n,load:r,children:s,info:i}=t,o=!s||Array.isArray(s)&&!s.length,a={key:t,component:n,load:r,info:i};return Sc(t.path).reduce((l,c)=>{for(const u of yc(c)){const h=ed(e,u);let d=o?h:h.split("/*",1)[0];d=d.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),l.push({...a,originalPath:c,pattern:d,matcher:td(d,!o,t.matchFilters)})}return l},[])}function cd(t,e=0){return{routes:t,score:nd(t[t.length-1])*1e4-e,matcher(n){const r=[];for(let s=t.length-1;s>=0;s--){const i=t[s],o=i.matcher(n);if(!o)return null;r.unshift({...o,route:i})}return r}}}function Sc(t){return Array.isArray(t)?t:[t]}function kc(t,e="",n=[],r=[]){const s=Sc(t);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=ld(a,e);for(const c of l){n.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)kc(a.children,c.pattern,n,r);else{const h=cd([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((i,o)=>o.score-i.score)}function vi(t,e){for(let n=0,r=t.length;n<r;n++){const s=t[n].matcher(e);if(s)return s}return[]}function ud(t,e){const n=new URL(mc),r=H(l=>{const c=t();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),l}},n,{equals:(l,c)=>l.href===c.href}),s=H(()=>r().pathname),i=H(()=>r().search,!0),o=H(()=>r().hash),a=()=>"";return{get pathname(){return s()},get search(){return i()},get hash(){return o()},get state(){return e()},get key(){return a()},query:bc(lc(i,()=>vc(r())))}}let jt;function hd(){return jt}function dd(t,e,n,r={}){const{signal:[s,i],utils:o={}}=t,a=o.parsePath||(P=>P),l=o.renderPath||(P=>P),c=o.beforeLeave||gc(),u=ks("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[h,d]=M(!1),m=async P=>{d(!0);try{await $h(P)}finally{d(!1)}},[y,p]=M(s().value),[b,_]=M(s().state),v=ud(y,b),w=[],C=M([]),k=H(()=>typeof r.transformUrl=="function"?vi(e(),r.transformUrl(v.pathname)):vi(e(),v.pathname)),A=bc(()=>{const P=k(),Z={};for(let U=0;U<P.length;U++)Object.assign(Z,P[U].params);return Z}),S={pattern:u,path:()=>u,outlet:()=>null,resolvePath(P){return ks(u,P)}};return z(()=>{const{value:P,state:Z}=s();Ue(()=>{m(()=>{jt="native",P!==y()&&p(P),_(Z),C[1]([])}).then(()=>{jt=void 0})})}),{base:S,location:v,params:A,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:T,matches:k,beforeLeave:c,preloadRoute:N,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:C};function K(P,Z,U){Ue(()=>{if(typeof Z=="number"){Z&&(o.go?o.go(Z):console.warn("Router integration does not support relative routing"));return}const{replace:F,resolve:B,scroll:W,state:ee}={replace:!1,resolve:!0,scroll:!0,...U},L=B?P.resolvePath(Z):ks("",Z);if(L===void 0)throw new Error(`Path '${Z}' is not a routable path`);if(w.length>=sd)throw new Error("Too many redirects");const R=y();if((L!==R||ee!==b())&&!Wh){if(c.confirm(L,U)){const I=w.push({value:R,replace:F,scroll:W,state:b()});m(()=>{jt="navigate",p(L),_(ee),C[1]([])}).then(()=>{w.length===I&&(jt=void 0,O({value:L,state:ee}))})}}})}function T(P){return P=P||Se(Wo)||S,(Z,U)=>K(P,Z,U)}function O(P){const Z=w[0];Z&&((P.value!==Z.value||P.state!==Z.state)&&i({...P,replace:Z.replace,scroll:Z.scroll}),w.length=0)}function N(P,Z){const U=vi(e(),P.pathname),F=jt;jt="preload";for(let B in U){const{route:W,params:ee}=U[B];W.component&&W.component.preload&&W.component.preload();const{load:L}=W;Z&&L&&jo(n(),()=>L({params:ee,location:{pathname:P.pathname,search:P.search,hash:P.hash,query:vc(P),state:null,key:""},intent:"preload"}))}jt=F}}function fd(t,e,n,r){const{base:s,location:i,params:o}=t,{pattern:a,component:l,load:c}=r().route,u=H(()=>r().path);l&&l.preload&&l.preload();const h=c?c({params:o,location:i,intent:jt||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>l?f(l,{params:o,location:i,data:h,get children(){return n()}}):n(),resolvePath(m){return ks(s.path(),m,u())}}}const pd=t=>e=>{const{base:n}=e,r=Rn(()=>e.children),s=H(()=>kc(r(),e.base||""));let i;const o=dd(t,s,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(o),f(_c.Provider,{value:o,get children(){return f(gd,{routerState:o,get root(){return e.root},get load(){return e.rootLoad},get children(){return[H(()=>(i=Bs())&&null),f(md,{routerState:o,get branches(){return s()}})]}})}})};function gd(t){const e=t.routerState.location,n=t.routerState.params,r=H(()=>t.load&&Ue(()=>{t.load({params:n,location:e,intent:hd()||"initial"})}));return f(G,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>f(s,{params:n,location:e,get data(){return r()},get children(){return t.children}})})}function md(t){const e=[];let n;const r=H(lc(t.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const h=i&&i[c],d=s[c];o&&h&&d.route.key===h.route.key?l[c]=o[c]:(a=!1,e[c]&&e[c](),qn(m=>{e[c]=m,l[c]=fd(t.routerState,l[c-1]||t.routerState.base,Ya(()=>r()[c+1]),()=>t.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),o&&a?o:(n=l[0],l)}));return Ya(()=>r()&&n)()}const Ya=t=>()=>f(G,{get when(){return t()},keyed:!0,children:e=>f(Wo.Provider,{value:e,get children(){return e.outlet()}})}),Ae=t=>{const e=Rn(()=>t.children);return Oe(t,{get children(){return e()}})};function vd([t,e],n,r){return[n?()=>n(t()):t,r?s=>e(r(s)):e]}function bd(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function yd(t){let e=!1;const n=s=>typeof s=="string"?{value:s}:s,r=vd(M(n(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),s));return t.init&&ln(t.init((s=t.get())=>{e=!0,r[1](n(s)),e=!1})),pd({signal:r,create:t.create,utils:t.utils})}function _d(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function wd(t,e){const n=bd(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const $d=new Map;function Sd(t=!0,e=!1,n="/_server",r){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a={};function l(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function c(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const b=p.composedPath().find(A=>A instanceof Node&&A.nodeName.toUpperCase()==="A");if(!b||e&&!b.hasAttribute("link"))return;const _=l(b),v=_?b.href.baseVal:b.href;if((_?b.target.baseVal:b.target)||!v&&!b.hasAttribute("state"))return;const C=(b.getAttribute("rel")||"").split(/\s+/);if(b.hasAttribute("download")||C&&C.includes("external"))return;const k=_?new URL(v,document.baseURI):new URL(v);if(!(k.origin!==window.location.origin||i&&k.pathname&&!k.pathname.toLowerCase().startsWith(i.toLowerCase())))return[b,k]}function u(p){const b=c(p);if(!b)return;const[_,v]=b,w=s.parsePath(v.pathname+v.search+v.hash),C=_.getAttribute("state");p.preventDefault(),o(w,{resolve:!1,replace:_.hasAttribute("replace"),scroll:!_.hasAttribute("noscroll"),state:C&&JSON.parse(C)})}function h(p){const b=c(p);if(!b)return;const[_,v]=b;typeof r=="function"&&(v.pathname=r(v.pathname)),a[v.pathname]||s.preloadRoute(v,_.getAttribute("preload")!=="false")}function d(p){const b=c(p);if(!b)return;const[_,v]=b;typeof r=="function"&&(v.pathname=r(v.pathname)),!a[v.pathname]&&(a[v.pathname]=setTimeout(()=>{s.preloadRoute(v,_.getAttribute("preload")!=="false"),delete a[v.pathname]},200))}function m(p){const b=c(p);if(!b)return;const[,_]=b;typeof r=="function"&&(_.pathname=r(_.pathname)),a[_.pathname]&&(clearTimeout(a[_.pathname]),delete a[_.pathname])}function y(p){if(p.defaultPrevented)return;let b=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!b)return;if(!b.startsWith("https://action/")){const v=new URL(b,mc);if(b=s.parsePath(v.pathname+v.search),!b.startsWith(n))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const _=$d.get(b);if(_){p.preventDefault();const v=new FormData(p.target);p.submitter&&p.submitter.name&&v.append(p.submitter.name,p.submitter.value),_.call({r:s,f:p.target},v)}}bt(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",d),document.addEventListener("mouseout",m),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",y),ln(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",d),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",y)})}}function kd(t){const e=()=>{const r=window.location.pathname+window.location.search;return{value:t.transformUrl?t.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},n=gc();return yd({get:e,set({value:r,replace:s,scroll:i,state:o}){s?window.history.replaceState(Yh(o),"",r):window.history.pushState(o,"",r),wd(window.location.hash.slice(1),i),qo()},init:r=>_d(window,"popstate",Zh(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:Sd(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(t)}var Cd=$("<a>");function wn(t){t=Oe({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=et(t,["href","state","class","activeClass","inactiveClass","end"]),n=od(()=>t.href),r=ad(n),s=$c(),i=H(()=>{const o=n();if(o===void 0)return[!1,!1];const a=Sn(o.split(/[?#]/,1)[0]).toLowerCase(),l=Sn(s.pathname).toLowerCase();return[t.end?a===l:l.startsWith(a),a===l]});return(()=>{var o=Cd();return Ie(o,Oe(e,{get href(){return r()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}var eo=function(t,e){return eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},eo(t,e)};function or(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");eo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function xd(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Cc(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function rr(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function to(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function no(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Wn(t){return this instanceof Wn?(this.v=t,this):new Wn(t)}function Td(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){r[d]&&(s[d]=function(m){return new Promise(function(y,p){i.push([d,m,y,p])>1||a(d,m)})})}function a(d,m){try{l(r[d](m))}catch(y){h(i[0][3],y)}}function l(d){d.value instanceof Wn?Promise.resolve(d.value.v).then(c,u):h(i[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,m){d(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Ed(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rr=="function"?rr(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Fe(t){return typeof t=="function"}function xc(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bi=xc(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function ro(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ni=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=rr(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(Fe(u))try{u()}catch(p){i=p instanceof bi?p.errors:[p]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=rr(h),m=d.next();!m.done;m=d.next()){var y=m.value;try{Za(y)}catch(p){i=i??[],p instanceof bi?i=no(no([],to(i)),to(p.errors)):i.push(p)}}}catch(p){r={error:p}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}}if(i)throw new bi(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Za(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&ro(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&ro(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Tc=ni.EMPTY;function Ec(t){return t instanceof ni||t&&"closed"in t&&Fe(t.remove)&&Fe(t.add)&&Fe(t.unsubscribe)}function Za(t){Fe(t)?t():t.unsubscribe()}var Ac={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lc={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,no([t,e],to(n)))},clearTimeout:function(t){var e=Lc.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Pc(t){Lc.setTimeout(function(){throw t})}function Xa(){}function Cs(t){t()}var Vo=function(t){or(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Ec(n)&&n.add(r)):r.destination=Rd,r}return e.create=function(n,r,s){return new so(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ni),Ad=Function.prototype.bind;function yi(t,e){return Ad.call(t,e)}var Ld=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){ns(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){ns(r)}else ns(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ns(n)}},t}(),so=function(t){or(e,t);function e(n,r,s){var i=t.call(this)||this,o;if(Fe(n)||!n)o={next:n??void 0,error:r??void 0,complete:s??void 0};else{var a;i&&Ac.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},o={next:n.next&&yi(n.next,a),error:n.error&&yi(n.error,a),complete:n.complete&&yi(n.complete,a)}):o=n}return i.destination=new Ld(o),i}return e}(Vo);function ns(t){Pc(t)}function Pd(t){throw t}var Rd={closed:!0,next:Xa,error:Pd,complete:Xa},Go=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Rc(t){return t}function Od(t){return t.length===0?Rc:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var it=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=Dd(e)?e:new so(e,n,r);return Cs(function(){var o=s,a=o.operator,l=o.source;i.add(a?a.call(i,l):l?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Ja(n),new n(function(s,i){var o=new so({next:function(a){try{e(a)}catch(l){i(l),o.unsubscribe()}},error:i,complete:s});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Go]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Od(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Ja(e),new e(function(r,s){var i;n.subscribe(function(o){return i=o},function(o){return s(o)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function Ja(t){var e;return(e=t??Ac.Promise)!==null&&e!==void 0?e:Promise}function Id(t){return t&&Fe(t.next)&&Fe(t.error)&&Fe(t.complete)}function Dd(t){return t&&t instanceof Vo||Id(t)&&Ec(t)}function Md(t){return Fe(t?.lift)}function On(t){return function(e){if(Md(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tn(t,e,n,r,s){return new Nd(t,e,n,r,s)}var Nd=function(t){or(e,t);function e(n,r,s,i,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=i?function(c){try{i(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Vo),Bd=xc(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Oc=function(t){or(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Qa(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Bd},e.prototype.next=function(n){var r=this;Cs(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=rr(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(c){s={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Cs(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Cs(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,o=s.isStopped,a=s.observers;return i||o?Tc:(this.currentObservers=null,a.push(n),new ni(function(){r.currentObservers=null,ro(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,o=r.isStopped;s?n.error(i):o&&n.complete()},e.prototype.asObservable=function(){var n=new it;return n.source=this,n},e.create=function(n,r){return new Qa(n,r)},e}(it),Qa=function(t){or(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:Tc},e}(Oc),Fd=function(t){or(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,i=n._value;if(r)throw s;return this._throwIfClosed(),i},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Oc),jd=new it(function(t){return t.complete()});function Ud(t){return t&&Fe(t.schedule)}function zd(t){return t[t.length-1]}function Kd(t){return Ud(zd(t))?t.pop():void 0}var Ic=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Dc(t){return Fe(t?.then)}function Mc(t){return Fe(t[Go])}function Nc(t){return Symbol.asyncIterator&&Fe(t?.[Symbol.asyncIterator])}function Bc(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Hd(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fc=Hd();function jc(t){return Fe(t?.[Fc])}function Uc(t){return Td(this,arguments,function(){var n,r,s,i;return Cc(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Wn(n.read())];case 3:return r=o.sent(),s=r.value,i=r.done,i?[4,Wn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Wn(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function zc(t){return Fe(t?.getReader)}function ar(t){if(t instanceof it)return t;if(t!=null){if(Mc(t))return qd(t);if(Ic(t))return Wd(t);if(Dc(t))return Vd(t);if(Nc(t))return Kc(t);if(jc(t))return Gd(t);if(zc(t))return Yd(t)}throw Bc(t)}function qd(t){return new it(function(e){var n=t[Go]();if(Fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wd(t){return new it(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Vd(t){return new it(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,Pc)})}function Gd(t){return new it(function(e){var n,r;try{for(var s=rr(t),i=s.next();!i.done;i=s.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function Kc(t){return new it(function(e){Zd(t,e).catch(function(n){return e.error(n)})})}function Yd(t){return Kc(Uc(t))}function Zd(t,e){var n,r,s,i;return xd(this,void 0,void 0,function(){var o,a;return Cc(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ed(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function an(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function Hc(t,e){return e===void 0&&(e=0),On(function(n,r){n.subscribe(Tn(r,function(s){return an(r,t,function(){return r.next(s)},e)},function(){return an(r,t,function(){return r.complete()},e)},function(s){return an(r,t,function(){return r.error(s)},e)}))})}function qc(t,e){return e===void 0&&(e=0),On(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Xd(t,e){return ar(t).pipe(qc(e),Hc(e))}function Jd(t,e){return ar(t).pipe(qc(e),Hc(e))}function Qd(t,e){return new it(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ef(t,e){return new it(function(n){var r;return an(n,e,function(){r=t[Fc](),an(n,e,function(){var s,i,o;try{s=r.next(),i=s.value,o=s.done}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),function(){return Fe(r?.return)&&r.return()}})}function Wc(t,e){if(!t)throw new Error("Iterable cannot be null");return new it(function(n){an(n,e,function(){var r=t[Symbol.asyncIterator]();an(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function tf(t,e){return Wc(Uc(t),e)}function nf(t,e){if(t!=null){if(Mc(t))return Xd(t,e);if(Ic(t))return Qd(t,e);if(Dc(t))return Jd(t,e);if(Nc(t))return Wc(t,e);if(jc(t))return ef(t,e);if(zc(t))return tf(t,e)}throw Bc(t)}function rf(t,e){return e?nf(t,e):ar(t)}function Ee(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Kd(t);return rf(t,n)}function sf(t,e){return On(function(n,r){var s=0;n.subscribe(Tn(r,function(i){r.next(t.call(e,i,s++))}))})}function of(t,e,n,r,s,i,o,a){var l=[],c=0,u=0,h=!1,d=function(){h&&!l.length&&!c&&e.complete()},m=function(p){return c<r?y(p):l.push(p)},y=function(p){i&&e.next(p),c++;var b=!1;ar(n(p,u++)).subscribe(Tn(e,function(_){s?.(_),i?m(_):e.next(_)},function(){b=!0},void 0,function(){if(b)try{c--;for(var _=function(){var v=l.shift();o?an(e,o,function(){return y(v)}):y(v)};l.length&&c<r;)_();d()}catch(v){e.error(v)}}))};return t.subscribe(Tn(e,m,function(){h=!0,d()})),function(){a?.()}}function io(t,e,n){return n===void 0&&(n=1/0),Fe(e)?io(function(r,s){return sf(function(i,o){return e(r,i,s,o)})(ar(t(r,s)))},n):(typeof e=="number"&&(n=e),On(function(r,s){return of(r,s,t,n)}))}function In(t){return On(function(e,n){var r=null,s=!1,i;r=e.subscribe(Tn(n,void 0,void 0,function(o){i=ar(t(o,In(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Le(t,e){return Fe(e)?io(t,e,1):io(t,1)}function de(t){return t<=0?function(){return jd}:On(function(e,n){var r=0;e.subscribe(Tn(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Be(t,e,n){var r=Fe(t)||e||n?{next:t,error:e,complete:n}:t;return r?On(function(s,i){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;s.subscribe(Tn(i,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Rc}class af{loggedIn=M({});tokenValue=M("");set token(e){this.tokenValue[1](e),this.loggedIn[1]({Authorization:`Bearer ${e}`})}get token(){return this.tokenValue[0]}clearToken(){this.loggedIn[1]({Authorization:""})}toObservable(e){return new it(n=>{e.then(r=>{n.next(r)}).catch(r=>n.error(r)).finally(()=>n.complete())})}post(e,n,r){return new it(s=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r?.headers,...this.loggedIn[0]()},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{s.next(i)}).catch(i=>s.error(i)).finally(()=>s.complete())})}get(e,n){return new it(r=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...n?.headers,...this.loggedIn[0]()}}).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{r.next(s)}).catch(s=>r.error(s)).finally(()=>r.complete())})}}const ce=new af,Pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,je=Object.keys,Je=Array.isArray;function ot(t,e){return typeof e!="object"||je(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Pe.Promise||(Pe.Promise=Promise);const Br=Object.getPrototypeOf,lf={}.hasOwnProperty;function ft(t,e){return lf.call(t,e)}function sr(t,e){typeof e=="function"&&(e=e(Br(t))),(typeof Reflect>"u"?je:Reflect.ownKeys)(e).forEach(n=>{qt(t,n,e[n])})}const Vc=Object.defineProperty;function qt(t,e,n,r){Vc(t,e,ot(n&&ft(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Vn(t){return{from:function(e){return t.prototype=Object.create(e.prototype),qt(t.prototype,"constructor",t),{extend:sr.bind(null,t.prototype)}}}}const cf=Object.getOwnPropertyDescriptor;function Yo(t,e){let n;return cf(t,e)||(n=Br(t))&&Yo(n,e)}const uf=[].slice;function Us(t,e,n){return uf.call(t,e,n)}function Gc(t,e){return e(t)}function Ar(t){if(!t)throw new Error("Assertion Failed")}function Yc(t){Pe.setImmediate?setImmediate(t):setTimeout(t,0)}function Zc(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function Wt(t,e){if(ft(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=Wt(t,e[r]);n.push(i)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:Wt(a,e.substr(o+1))}}function $t(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Ar(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)$t(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var o=e.substr(0,i),a=e.substr(i+1);if(a==="")n===void 0?Je(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&ft(t,o)||(l=t[o]={}),$t(l,a,n)}}else n===void 0?Je(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Xc(t){var e={};for(var n in t)ft(t,n)&&(e[n]=t[n]);return e}const hf=[].concat;function Jc(t){return hf.apply([],t)}const Qc="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Jc([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Pe[t]),df=Qc.map(t=>Pe[t]);Zc(Qc,t=>[t,!0]);let rn=null;function Wr(t){rn=typeof WeakMap<"u"&&new WeakMap;const e=oo(t);return rn=null,e}function oo(t){if(!t||typeof t!="object")return t;let e=rn&&rn.get(t);if(e)return e;if(Je(t)){e=[],rn&&rn.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(oo(t[n]))}else if(df.indexOf(t.constructor)>=0)e=t;else{const i=Br(t);for(var s in e=i===Object.prototype?{}:Object.create(i),rn&&rn.set(t,e),t)ft(t,s)&&(e[s]=oo(t[s]))}return e}const{toString:ff}={};function ao(t){return ff.call(t).slice(8,-1)}const lo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pf=typeof lo=="symbol"?function(t){var e;return t!=null&&(e=t[lo])&&e.apply(t)}:function(){return null},Hn={};function zt(t){var e,n,r,s;if(arguments.length===1){if(Je(t))return t.slice();if(this===Hn&&typeof t=="string")return[t];if(s=pf(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Zo=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function eu(t,e){Lt=t,tu=e}var tu=()=>!0;const gf=!new Error("").stack;function Dn(){if(gf)try{throw Dn.arguments,new Error}catch(t){return t}return new Error}function co(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(tu).map(r=>`
`+r).join("")):""}var nu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(nu),mf={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Gn(t,e){this._e=Dn(),this.name=t,this.message=e}function ru(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function zs(t,e,n,r){this._e=Dn(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=ru(t,e)}function Pr(t,e){this._e=Dn(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=ru(t,e)}Vn(Gn).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+co(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Vn(zs).from(Gn),Vn(Pr).from(Gn);var Jo=Xo.reduce((t,e)=>(t[e]=e+"Error",t),{});const vf=Gn;var le=Xo.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=Dn(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=mf[e]||n,this.inner=null)}return Vn(r).from(vf),t[e]=r,t},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var el=nu.reduce((t,e)=>(t[e+"Error"]=le[e],t),{}),xs=Xo.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=le[e]),t),{});function xe(){}function Fr(t){return t}function bf(t,e){return t==null||t===Fr?e:function(n){return e(t(n))}}function En(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function yf(t,e){return t===xe?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?En(r,this.onsuccess):r),s&&(this.onerror=this.onerror?En(s,this.onerror):s),i!==void 0?i:n}}function _f(t,e){return t===xe?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?En(n,this.onsuccess):n),r&&(this.onerror=this.onerror?En(r,this.onerror):r)}}function wf(t,e){return t===xe?e:function(n){var r=t.apply(this,arguments);ot(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?En(s,this.onsuccess):s),i&&(this.onerror=this.onerror?En(i,this.onerror):i),r===void 0?o===void 0?void 0:o:ot(r,o)}}function $f(t,e){return t===xe?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Qo(t,e){return t===xe?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}xs.ModifyError=zs,xs.DexieError=Gn,xs.BulkError=Pr;var jr={};const su=100,[uo,Ks,ho]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Br(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Br(e),t]})(),iu=Ks&&Ks.then,Ts=uo&&uo.constructor,ea=!!ho;var fo=!1,Sf=ho?()=>{ho.then(rs)}:Pe.setImmediate?setImmediate.bind(null,rs):Pe.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{rs(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(rs,0)},Rr=function(t,e){Lr.push([t,e]),Hs&&(Sf(),Hs=!1)},po=!0,Hs=!0,kn=[],Es=[],go=null,mo=Fr,Yn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:rl,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{rl(t[0],t[1])}catch{}})}},se=Yn,Lr=[],Cn=0,As=[];function J(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=xe,this._lib=!1;var e=this._PSD=se;if(Lt&&(this._stackHolder=Dn(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==jr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&bo(this,this._value))}this._state=null,this._value=null,++e.ref,au(this,t)}const vo={get:function(){var t=se,e=qs;function n(r,s){var i=!t.global&&(t!==se||e!==qs);const o=i&&!Yt();var a=new J((l,c)=>{ta(this,new ou(Ws(r,t,i,o),Ws(s,t,i,o),l,c,t))});return Lt&&uu(a,this),a}return n.prototype=jr,n},set:function(t){qt(this,"then",t&&t.prototype===jr?vo:{get:function(){return t},set:vo.set})}};function ou(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function au(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Vr();n&&typeof n.then=="function"?au(t,(s,i)=>{n instanceof J?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,lu(t)),r&&Gr()}},bo.bind(null,t))}catch(n){bo(t,n)}}function bo(t,e){if(Es.push(e),t._state===null){var n=t._lib&&Vr();e=mo(e),t._state=!1,t._value=e,Lt&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){s&&s(o)}}(()=>{var r=Yo(e,"stack");e._promise=t,qt(e,"stack",{get:()=>fo?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){kn.some(s=>s._value===r._value)||kn.push(r)}(t),lu(t),n&&Gr()}}function lu(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)ta(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),Cn===0&&(++Cn,Rr(()=>{--Cn==0&&na()},[]))}function ta(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Cn,Rr(kf,[n,t,e])}else t._listeners.push(e)}function kf(t,e,n){try{go=e;var r,s=e._value;e._state?r=t(s):(Es.length&&(Es=[]),r=t(s),Es.indexOf(s)===-1&&function(i){for(var o=kn.length;o;)if(kn[--o]._value===i._value)return void kn.splice(o,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{go=null,--Cn==0&&na(),--n.psd.ref||n.psd.finalize()}}function cu(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,o=t._value;o!=null?(s=o.name||"Error",i=o.message||o,r=co(o,0)):(s=o,i=""),e.push(s+(i?": "+i:"")+r)}return Lt&&((r=co(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&cu(t._prev,e,n)),e}function uu(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function rs(){Vr()&&Gr()}function Vr(){var t=po;return po=!1,Hs=!1,t}function Gr(){var t,e,n;do for(;Lr.length>0;)for(t=Lr,Lr=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Lr.length>0);po=!0,Hs=!0}function na(){var t=kn;kn=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=As.slice(0),n=e.length;n;)e[--n]()}function ss(t){return new J(jr,!1,t)}function Re(t,e){var n=se;return function(){var r=Vr(),s=se;try{return hn(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{hn(s,!1),r&&Gr()}}}sr(J.prototype,{then:vo,_then:function(t,e){ta(this,new ou(null,null,t,e,se))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):ss(r)):this.then(null,r=>r&&r.name===e?n(r):ss(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),ss(e)))},stack:{get:function(){if(this._stack)return this._stack;try{fo=!0;var t=cu(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{fo=!1}}},timeout:function(t,e){return t<1/0?new J((n,r)=>{var s=setTimeout(()=>r(new le.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&qt(J.prototype,Symbol.toStringTag,"Dexie.Promise"),Yn.env=hu(),sr(J,{all:function(){var t=zt.apply(null,arguments).map(is);return new J(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>J.resolve(s).then(o=>{t[i]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof J)return t;if(t&&typeof t.then=="function")return new J((n,r)=>{t.then(n,r)});var e=new J(jr,!0,t);return uu(e,go),e},reject:ss,race:function(){var t=zt.apply(null,arguments).map(is);return new J((e,n)=>{t.map(r=>J.resolve(r).then(e,n))})},PSD:{get:()=>se,set:t=>se=t},totalEchoes:{get:()=>qs},newPSD:un,usePSD:cr,scheduler:{get:()=>Rr,set:t=>{Rr=t}},rejectionMapper:{get:()=>mo,set:t=>{mo=t}},follow:(t,e)=>new J((n,r)=>un((s,i)=>{var o=se;o.unhandleds=[],o.onunhandled=i,o.finalize=En(function(){(function(a){function l(){a(),As.splice(As.indexOf(l),1)}As.push(l),++Cn,Rr(()=>{--Cn==0&&na()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),Ts&&(Ts.allSettled&&qt(J,"allSettled",function(){const t=zt.apply(null,arguments).map(is);return new J(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>J.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),Ts.any&&typeof AggregateError<"u"&&qt(J,"any",function(){const t=zt.apply(null,arguments).map(is);return new J((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,o)=>J.resolve(i).then(a=>e(a),a=>{s[o]=a,--r||n(new AggregateError(s))}))})}));const Xe={awaits:0,echoes:0,id:0};var Cf=0,Ls=[],_i=0,qs=0,xf=0;function un(t,e,n,r){var s=se,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++xf;var o=Yn.env;i.env=ea?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:tl(o.nthen,i),gthen:tl(o.gthen,i)}:{},e&&ot(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=cr(i,t,n,r);return i.ref===0&&i.finalize(),a}function lr(){return Xe.id||(Xe.id=++Cf),++Xe.awaits,Xe.echoes+=su,Xe.id}function Yt(){return!!Xe.awaits&&(--Xe.awaits==0&&(Xe.id=0),Xe.echoes=Xe.awaits*su,!0)}function is(t){return Xe.echoes&&t&&t.constructor===Ts?(lr(),t.then(e=>(Yt(),e),e=>(Yt(),ze(e)))):t}function Tf(t){++qs,Xe.echoes&&--Xe.echoes!=0||(Xe.echoes=Xe.id=0),Ls.push(se),hn(t,!0)}function Ef(){var t=Ls[Ls.length-1];Ls.pop(),hn(t,!1)}function hn(t,e){var n=se;if((e?!Xe.echoes||_i++&&t===se:!_i||--_i&&t===se)||du(e?Tf.bind(null,t):Ef),t!==se&&(se=t,n===Yn&&(Yn.env=hu()),ea)){var r=Yn.env.Promise,s=t.env;Ks.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(Pe,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function hu(){var t=Pe.Promise;return ea?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Pe,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Ks.then,gthen:t.prototype.then}:{}}function cr(t,e,n,r,s){var i=se;try{return hn(t,!0),e(n,r,s)}finally{hn(i,!1)}}function du(t){iu.call(uo,t)}function Ws(t,e,n,r){return typeof t!="function"?t:function(){var s=se;n&&lr(),hn(e,!0);try{return t.apply(this,arguments)}finally{hn(s,!1),r&&du(Yt)}}}function tl(t,e){return function(n,r){return t.call(this,Ws(n,e),Ws(r,e))}}(""+iu).indexOf("[native code]")===-1&&(lr=Yt=xe);const nl="unhandledrejection";function rl(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(Pe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(nl,!0,!0),ot(r,s)):Pe.CustomEvent&&ot(r=new CustomEvent(nl,{detail:s}),s),r&&Pe.dispatchEvent&&(dispatchEvent(r),!Pe.PromiseRejectionEvent&&Pe.onunhandledrejection))try{Pe.onunhandledrejection(r)}catch{}Lt&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ze=J.reject;function yo(t,e,n,r){if(t.idbdb&&(t._state.openComplete||se.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Jo.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>yo(t,e,n,r))):ze(i)}return s._promise(e,(i,o)=>un(()=>(se.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return ze(new le.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ze(new le.DatabaseClosed);t.open().catch(xe)}return t._state.dbReadyPromise.then(()=>yo(t,e,n,r))}const sl="3.2.4",$n="",_o=-1/0,Bt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fu="String expected.",Or=[],ri=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Af=ri,Lf=ri,pu=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),si="__dbnames",wi="readonly",$i="readwrite";function An(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const gu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function os(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Wr(e))[t],e)}class Pf{_trans(e,n,r){const s=this._tx||se.trans,i=this.name;function o(l,c,u){if(!u.schema[i])throw new le.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const a=Vr();try{return s&&s.db===this.db?s===se.trans?s._promise(e,o,r):un(()=>s._promise(e,o,r),{trans:s,transless:se.transless||se}):yo(this.db,e,[this.name],o)}finally{a&&Gr()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Je(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=je(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==$n)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Lt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[a,l]=n.reduce(([c,u],h)=>{const d=s[h],m=e[h];return[c||d,c||!d?An(u,d&&d.multi?y=>{const p=Wt(y,h);return Je(p)&&p.some(b=>o(m,b))}:y=>o(m,Wt(y,h))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Je(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(ft(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ot(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=os(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?J.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{$t(e,s,o)}catch{}return o})}update(e,n){if(typeof e!="object"||Je(e))return this.where(":id").equals(e).modify(n);{const r=Wt(e,this.schema.primKey.keyPath);if(r===void 0)return ze(new le.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?je(n).forEach(s=>{$t(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=os(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?J.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{$t(e,s,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?J.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:gu})).then(e=>e.numFailures?J.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(os(l)):e;return this.core.mutate({trans:o,type:"add",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:d,lastResult:m,failures:y})=>{if(h===0)return i?d:m;throw new Pr(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,y)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(os(l)):e;return this.core.mutate({trans:o,type:"put",keys:s,values:u,wantResults:i}).then(({numFailures:h,results:d,lastResult:m,failures:y})=>{if(h===0)return i?d:m;throw new Pr(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,y)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new Pr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function Ir(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[o].subscribe.apply(null,c),t}if(typeof o=="string")return e[o]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(o,a,l){if(typeof o!="object"){var c;a||(a=$f),l||(l=xe);var u={subscribers:[],fire:l,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=a(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(d){return d!==h}),u.fire=u.subscribers.reduce(a,l)}};return e[o]=n[o]=u,u}je(c=o).forEach(function(h){var d=c[h];if(Je(d))i(h,c[h][0],c[h][1]);else{if(d!=="asap")throw new le.InvalidArgument("Invalid event config");var m=i(h,Fr,function(){for(var y=arguments.length,p=new Array(y);y--;)p[y]=arguments[y];m.subscribers.forEach(function(b){Yc(function(){b.apply(null,p)})})})}})}}function gr(t,e){return Vn(e).from({prototype:t}),e}function Un(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Si(t,e){t.filter=An(t.filter,e)}function ki(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>An(r(),e()):e,t.justLimit=n&&!r}function Ps(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new le.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function il(t,e,n){const r=Ps(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function as(t,e,n,r){const s=t.replayFilter?An(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},o=(a,l,c)=>{if(!s||s(l,c,d=>l.stop(d),d=>l.fail(d))){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),ft(i,h)||(i[h]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),ol(il(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return ol(il(t,r,n),An(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function ol(t,e,n,r){var s=Re(r?(i,o,a)=>n(r(i),o,a):n);return t.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();e&&!e(i,a=>o=a,a=>{i.stop(a),o=xe},a=>{i.fail(a),o=xe})||s(i.value,i,a=>o=a),o()})})}function st(t,e){try{const n=al(t),r=al(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let c=0;c<l;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return o===a?0:o<a?-1:1}(ll(t),ll(e));case"Array":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let c=0;c<l;++c){const u=st(s[c],i[c]);if(u!==0)return u}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function al(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=ao(t);return n==="ArrayBuffer"?"binary":n}function ll(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Rf{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ze.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ze.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=An(n.algorithm,e)}_iterate(e,n){return as(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ot(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>as(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(Un(r,!0))return s.count({trans:n,query:{index:Ps(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return as(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[s]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var h=o(c,i),d=o(u,i);return h<d?-a:h>d?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Un(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=Ps(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return as(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Un(n)?ki(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):ki(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ki(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return Si(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return Si(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=An(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Un(n,!0)&&n.limit>0)return this._read(s=>{var i=Ps(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Si(this._ctx,function(s){var i=s.primaryKey.toString(),o=ft(r,i);return r[i]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=je(e),o=i.length;s=function(p){for(var b=!1,_=0;_<o;++_){var v=i[_],w=e[v];Wt(p,v)!==w&&($t(p,v,w),b=!0)}return b}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let d=0;const m=[],y=(p,b)=>{const{failures:_,numFailures:v}=b;d+=p-v;for(let w of je(_))h.push(_[w])};return this.clone().primaryKeys().then(p=>{const b=_=>{const v=Math.min(u,p.length-_);return a.getMany({trans:r,keys:p.slice(_,_+v),cache:"immutable"}).then(w=>{const C=[],k=[],A=l?[]:null,S=[];for(let T=0;T<v;++T){const O=w[T],N={value:Wr(O),primKey:p[_+T]};s.call(N,N.value,N)!==!1&&(N.value==null?S.push(p[_+T]):l||st(c(O),c(N.value))===0?(k.push(N.value),l&&A.push(p[_+T])):(S.push(p[_+T]),C.push(N.value)))}const K=Un(n)&&n.limit===1/0&&(typeof e!="function"||e===Ci)&&{index:n.index,range:n.range};return Promise.resolve(C.length>0&&a.mutate({trans:r,type:"add",values:C}).then(T=>{for(let O in T.failures)S.splice(parseInt(O),1);y(C.length,T)})).then(()=>(k.length>0||K&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:A,values:k,criteria:K,changeSpec:typeof e!="function"&&e}).then(T=>y(k.length,T))).then(()=>(S.length>0||K&&e===Ci)&&a.mutate({trans:r,type:"delete",keys:S,criteria:K}).then(T=>y(S.length,T))).then(()=>p.length>_+v&&b(_+u))})};return b(0).then(()=>{if(h.length>0)throw new zs("Error modifying one or more objects",h,d,m);return p.length})})})}delete(){var e=this._ctx,n=e.range;return Un(e)&&(e.isPrimKey&&!Lf||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new zs("Could not delete some values",Object.keys(a).map(h=>a[h]),o-u);return o-u}))}):this.modify(Ci)}}const Ci=(t,e)=>e.value=null;function Of(t,e){return t<e?-1:t===e?0:1}function If(t,e){return t>e?-1:t===e?0:1}function ut(t,e,n){var r=t instanceof vu?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function zn(t){return new t.Collection(t,()=>mu("")).limit(0)}function Df(t,e,n,r,s,i){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return s(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):s(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;s(t[l],c)<0&&(a=l)}return o<r.length&&i==="next"?t+n.substr(t.length):o<t.length&&i==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function ls(t,e,n,r){var s,i,o,a,l,c,u,h=n.length;if(!n.every(p=>typeof p=="string"))return ut(t,fu);function d(p){s=function(_){return _==="next"?v=>v.toUpperCase():v=>v.toLowerCase()}(p),i=function(_){return _==="next"?v=>v.toLowerCase():v=>v.toUpperCase()}(p),o=p==="next"?Of:If;var b=n.map(function(_){return{lower:i(_),upper:s(_)}}).sort(function(_,v){return o(_.lower,v.lower)});a=b.map(function(_){return _.upper}),l=b.map(function(_){return _.lower}),c=p,u=p==="next"?"":r}d("next");var m=new t.Collection(t,()=>nn(a[0],l[h-1]+r));m._ondirectionchange=function(p){d(p)};var y=0;return m._addAlgorithm(function(p,b,_){var v=p.key;if(typeof v!="string")return!1;var w=i(v);if(e(w,l,y))return!0;for(var C=null,k=y;k<h;++k){var A=Df(v,w,a[k],l[k],o,c);A===null&&C===null?y=k+1:(C===null||o(C,A)>0)&&(C=A)}return b(C!==null?function(){p.continue(C+u)}:_),!1}),m}function nn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function mu(t){return{type:1,lower:t,upper:t}}class vu{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?zn(this):new this.Collection(this,()=>nn(e,n,!r,!s))}catch{return ut(this,Bt)}}equals(e){return e==null?ut(this,Bt):new this.Collection(this,()=>mu(e))}above(e){return e==null?ut(this,Bt):new this.Collection(this,()=>nn(e,void 0,!0))}aboveOrEqual(e){return e==null?ut(this,Bt):new this.Collection(this,()=>nn(e,void 0,!1))}below(e){return e==null?ut(this,Bt):new this.Collection(this,()=>nn(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ut(this,Bt):new this.Collection(this,()=>nn(void 0,e))}startsWith(e){return typeof e!="string"?ut(this,fu):this.between(e,e+$n,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):ls(this,(n,r)=>n.indexOf(r[0])===0,[e],$n)}equalsIgnoreCase(e){return ls(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=zt.apply(Hn,arguments);return e.length===0?zn(this):ls(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=zt.apply(Hn,arguments);return e.length===0?zn(this):ls(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,$n)}anyOf(){const e=zt.apply(Hn,arguments);let n=this._cmp;try{e.sort(n)}catch{return ut(this,Bt)}if(e.length===0)return zn(this);const r=new this.Collection(this,()=>nn(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,o,a)=>{const l=i.key;for(;n(l,e[s])>0;)if(++s,s===e.length)return o(a),!1;return n(l,e[s])===0||(o(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[_o,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=zt.apply(Hn,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ut(this,Bt)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[_o,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,a=this._max;if(e.length===0)return zn(this);if(!e.every(v=>v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0))return ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,h=s;function d(v,w){return h(v[0],w[0])}try{u=e.reduce(function(v,w){let C=0,k=v.length;for(;C<k;++C){const A=v[C];if(r(w[0],A[1])<0&&r(w[1],A[0])>0){A[0]=o(A[0],w[0]),A[1]=a(A[1],w[1]);break}}return C===k&&v.push(w),v},[]),u.sort(d)}catch{return ut(this,Bt)}let m=0;const y=c?v=>s(v,u[m][1])>0:v=>s(v,u[m][1])>=0,p=l?v=>i(v,u[m][0])>0:v=>i(v,u[m][0])>=0;let b=y;const _=new this.Collection(this,()=>nn(u[0][0],u[u.length-1][1],!l,!c));return _._ondirectionchange=v=>{v==="next"?(b=y,h=s):(b=p,h=i),u.sort(d)},_._addAlgorithm((v,w,C)=>{for(var k=v.key;b(k);)if(++m,m===u.length)return w(C),!1;return!!function(A){return!y(A)&&!p(A)}(k)||(this._cmp(k,u[m][1])===0||this._cmp(k,u[m][0])===0||w(()=>{h===s?v.continue(u[m][0]):v.continue(u[m][1])}),!1)}),_}startsWithAnyOf(){const e=zt.apply(Hn,arguments);return e.every(n=>typeof n=="string")?e.length===0?zn(this):this.inAnyRange(e.map(n=>[n,n+$n])):ut(this,"startsWithAnyOf() only works with strings")}}function Tt(t){return Re(function(e){return Ur(e),t(e.target.error),!1})}function Ur(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const zr="storagemutated",sn="x-storagemutated-1",dn=Ir(null,zr);class Mf{_lock(){return Ar(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this}_unlock(){if(Ar(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{cr(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&se.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Ar(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new le.DatabaseClosed(r);case"MissingAPIError":throw new le.MissingAPI(r.message,r);default:throw new le.OpenFailed(r)}if(!this.active)throw new le.TransactionInactive;return Ar(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Re(s=>{Ur(s),this._reject(e.error)}),e.onabort=Re(s=>{Ur(s),this.active&&this._reject(new le.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=Re(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&dn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ze(new le.ReadOnly("Transaction is readonly"));if(!this.active)return ze(new le.TransactionInactive);if(this._locked())return new J((i,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,o)},se])});if(r)return un(()=>{var i=new J((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new J((i,o)=>{var a=n(i,o,this);a&&a.then&&a.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=J.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new J((o,a)=>{r.then(l=>n._waitingQueue.push(Re(o.bind(null,l))),l=>n._waitingQueue.push(Re(a.bind(null,l)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(ft(n,e))return n[e];const r=this.schema[e];if(!r)throw new le.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function wo(t,e,n,r,s,i,o){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+bu(e)}}function bu(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function yu(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Zc(n,r=>[r.name,r])}}let Kr=t=>{try{return t.only([[]]),Kr=()=>[[]],[[]]}catch{return Kr=()=>$n,$n}};function $o(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Wt(r,e)}(t):e=>Wt(e,t)}function cl(t){return[].slice.call(t)}let Nf=0;function Dr(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Bf(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:h,upperOpen:d}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!d):u===void 0?e.lowerBound(c,!!h):e.bound(c,u,!!h,!!d)}const{schema:s,hasGetAll:i}=function(l,c){const u=cl(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(h=>c.objectStore(h)).map(h=>{const{keyPath:d,autoIncrement:m}=h,y=Je(d),p=d==null,b={},_={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p,compound:y,keyPath:d,autoIncrement:m,unique:!0,extractKey:$o(d)},indexes:cl(h.indexNames).map(v=>h.index(v)).map(v=>{const{name:w,unique:C,multiEntry:k,keyPath:A}=v,S={name:w,compound:Je(A),keyPath:A,unique:C,multiEntry:k,extractKey:$o(A)};return b[Dr(A)]=S,S}),getIndexByKeyPath:v=>b[Dr(v)]};return b[":id"]=_.primaryKey,d!=null&&(b[Dr(d)]=_.primaryKey),_})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=s.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:h,type:d,keys:m,values:y,range:p}){return new Promise((b,_)=>{b=Re(b);const v=h.objectStore(u),w=v.keyPath==null,C=d==="put"||d==="add";if(!C&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:k}=m||y||{length:1};if(m&&y&&m.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let A;const S=[],K=[];let T=0;const O=P=>{++T,Ur(P)};if(d==="deleteRange"){if(p.type===4)return b({numFailures:T,failures:K,results:[],lastResult:void 0});p.type===3?S.push(A=v.clear()):S.push(A=v.delete(r(p)))}else{const[P,Z]=C?w?[y,m]:[y,null]:[m,null];if(C)for(let U=0;U<k;++U)S.push(A=Z&&Z[U]!==void 0?v[d](P[U],Z[U]):v[d](P[U])),A.onerror=O;else for(let U=0;U<k;++U)S.push(A=v[d](P[U])),A.onerror=O}const N=P=>{const Z=P.target.result;S.forEach((U,F)=>U.error!=null&&(K[F]=U.error)),b({numFailures:T,failures:K,results:d==="delete"?m:S.map(U=>U.result),lastResult:Z})};A.onerror=P=>{O(P),N(P)},A.onsuccess=N})},getMany:({trans:h,keys:d})=>new Promise((m,y)=>{m=Re(m);const p=h.objectStore(u),b=d.length,_=new Array(b);let v,w=0,C=0;const k=S=>{const K=S.target;_[K._pos]=K.result,++C===w&&m(_)},A=Tt(y);for(let S=0;S<b;++S)d[S]!=null&&(v=p.get(d[S]),v._pos=S,v.onsuccess=k,v.onerror=A,++w);w===0&&m(_)}),get:({trans:h,key:d})=>new Promise((m,y)=>{m=Re(m);const p=h.objectStore(u).get(d);p.onsuccess=b=>m(b.target.result),p.onerror=Tt(y)}),query:function(h){return d=>new Promise((m,y)=>{m=Re(m);const{trans:p,values:b,limit:_,query:v}=d,w=_===1/0?void 0:_,{index:C,range:k}=v,A=p.objectStore(u),S=C.isPrimaryKey?A:A.index(C.name),K=r(k);if(_===0)return m({result:[]});if(h){const T=b?S.getAll(K,w):S.getAllKeys(K,w);T.onsuccess=O=>m({result:O.target.result}),T.onerror=Tt(y)}else{let T=0;const O=b||!("openKeyCursor"in S)?S.openCursor(K):S.openKeyCursor(K),N=[];O.onsuccess=P=>{const Z=O.result;return Z?(N.push(b?Z.value:Z.primaryKey),++T===_?m({result:N}):void Z.continue()):m({result:N})},O.onerror=Tt(y)}})}(i),openCursor:function({trans:h,values:d,query:m,reverse:y,unique:p}){return new Promise((b,_)=>{b=Re(b);const{index:v,range:w}=m,C=h.objectStore(u),k=v.isPrimaryKey?C:C.index(v.name),A=y?p?"prevunique":"prev":p?"nextunique":"next",S=d||!("openKeyCursor"in k)?k.openCursor(r(w),A):k.openKeyCursor(r(w),A);S.onerror=Tt(_),S.onsuccess=Re(K=>{const T=S.result;if(!T)return void b(null);T.___id=++Nf,T.done=!1;const O=T.continue.bind(T);let N=T.continuePrimaryKey;N&&(N=N.bind(T));const P=T.advance.bind(T),Z=()=>{throw new Error("Cursor not stopped")};T.trans=h,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=Re(_),T.next=function(){let U=1;return this.start(()=>U--?this.continue():this.stop()).then(()=>this)},T.start=U=>{const F=new Promise((W,ee)=>{W=Re(W),S.onerror=Tt(ee),T.fail=ee,T.stop=L=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=Z,W(L)}}),B=()=>{if(S.result)try{U()}catch(W){T.fail(W)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return S.onsuccess=Re(W=>{S.onsuccess=B,B()}),T.continue=O,T.continuePrimaryKey=N,T.advance=P,B(),F},b(T)},_)})},count({query:h,trans:d}){const{index:m,range:y}=h;return new Promise((p,b)=>{const _=d.objectStore(u),v=m.isPrimaryKey?_:_.index(m.name),w=r(y),C=w?v.count(w):v.count();C.onsuccess=Re(k=>p(k.target.result)),C.onerror=Tt(b)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Kr(e),schema:s}}function So({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(u,h){return h.reduce((d,{create:m})=>({...d,...m(d)}),u)}(Bf(i,o,l),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(o=>o.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function Vs({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(o=>{const a=Yo(o,s);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?qt(o,s,{get(){return this.table(s)},set(l){Vc(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new t.Table(s,i))})})}function ko({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Ff(t,e){return t._cfg.version-e._cfg.version}function jf(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),a=se.transless||se;un(()=>{se.trans=i,se.transless=a,e===0?(je(s).forEach(l=>{xi(n,l,s[l].primKey,s[l].indexes)}),So(t,n),J.follow(()=>t.on.populate.fire(i)).catch(o)):function({_novip:l},c,u,h){const d=[],m=l._versions;let y=l._dbSchema=xo(l,l.idbdb,h),p=!1;const b=m.filter(v=>v._cfg.version>=c);function _(){return d.length?J.resolve(d.shift()(u.idbtrans)).then(_):J.resolve()}return b.forEach(v=>{d.push(()=>{const w=y,C=v._cfg.dbschema;To(l,w,h),To(l,C,h),y=l._dbSchema=C;const k=_u(w,C);k.add.forEach(S=>{xi(h,S[0],S[1].primKey,S[1].indexes)}),k.change.forEach(S=>{if(S.recreate)throw new le.Upgrade("Not yet support for changing primary key");{const K=h.objectStore(S.name);S.add.forEach(T=>Co(K,T)),S.change.forEach(T=>{K.deleteIndex(T.name),Co(K,T)}),S.del.forEach(T=>K.deleteIndex(T))}});const A=v._cfg.contentUpgrade;if(A&&v._cfg.version>c){So(l,h),u._memoizedTables={},p=!0;let S=Xc(C);k.del.forEach(N=>{S[N]=w[N]}),ko(l,[l.Transaction.prototype]),Vs(l,[l.Transaction.prototype],je(S),S),u.schema=S;const K=Zo(A);let T;K&&lr();const O=J.follow(()=>{if(T=A(u),T&&K){var N=Yt.bind(null,null);T.then(N,N)}});return T&&typeof T.then=="function"?J.resolve(T):O.then(()=>T)}}),d.push(w=>{(!p||!Af)&&function(C,k){[].slice.call(k.db.objectStoreNames).forEach(A=>C[A]==null&&k.db.deleteObjectStore(A))}(v._cfg.dbschema,w),ko(l,[l.Transaction.prototype]),Vs(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),_().then(()=>{var v,w;w=h,je(v=y).forEach(C=>{w.db.objectStoreNames.contains(C)||xi(w,C,v[C].primKey,v[C].indexes)})})}(t,e,i,n).catch(o)})}function _u(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!ri)o.recreate=!0,n.change.push(o);else{const a=s.idxByName,l=i.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const u=a[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function xi(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Co(s,i)),s}function Co(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function xo(t,e,n){const r={};return Us(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const a=wo(bu(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),l=[];for(let u=0;u<i.indexNames.length;++u){const h=i.index(i.indexNames[u]);o=h.keyPath;var c=wo(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);l.push(c)}r[s]=yu(s,a,l)}),r}function To({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+Us(c).join("+")+"]";if(e[i]){const h=e[i].idxByName[u];h&&(h.name=l,delete e[i].idxByName[u],e[i].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pe.WorkerGlobalScope&&Pe instanceof Pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Uf{_parseStoresSpec(e,n){je(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return wo(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Je(c),a===0)}),i=s.shift();if(i.multi)throw new le.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")}),n[r]=yu(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ot(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(o=>{ot(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,ko(n,[n._allTables,n,n.Transaction.prototype]),Vs(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],je(i),i),n._storeNames=je(i),this}upgrade(e){return this._cfg.contentUpgrade=Qo(this._cfg.contentUpgrade||xe,e),this}}function ra(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Vt(si,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function sa(t){return t&&typeof t.databases=="function"}function Eo(t){return un(function(){return se.letThrough=!0,t()})}function zf(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Kf(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ze(e.dbOpenError):t);Lt&&(e.openCanceller._stackHolder=Dn()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new le.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,o=null,a=!1;return J.race([r,(typeof navigator>"u"?J.resolve():zf()).then(()=>new J((l,c)=>{if(s(),!n)throw new le.MissingAPI;const u=t.name,h=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!h)throw new le.MissingAPI;h.onerror=Tt(c),h.onblocked=Re(t._fireOnBlocked),h.onupgradeneeded=Re(d=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Ur,o.abort(),h.result.close();const y=n.deleteDatabase(u);y.onsuccess=y.onerror=Re(()=>{c(new le.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{o.onerror=Tt(c);var m=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=m<1,t._novip.idbdb=h.result,jf(t,m/10,o,c)}},c),h.onsuccess=Re(()=>{o=null;const d=t._novip.idbdb=h.result,m=Us(d.objectStoreNames);if(m.length>0)try{const p=d.transaction((y=m).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:b},_,v){b.verno=_.version/10;const w=b._dbSchema=xo(0,_,v);b._storeNames=Us(_.objectStoreNames,0),Vs(b,[b._allTables],je(w),w)}(t,d,p):(To(t,t._dbSchema,p),function(b,_){const v=_u(xo(0,b.idbdb,_),b._dbSchema);return!(v.add.length||v.change.some(w=>w.add.length||w.change.length))}(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),So(t,p)}catch{}var y;Or.push(t),d.onversionchange=Re(p=>{e.vcFired=!0,t.on("versionchange").fire(p)}),d.onclose=Re(p=>{t.on("close").fire(p)}),a&&function({indexedDB:p,IDBKeyRange:b},_){!sa(p)&&_!==si&&ra(p,b).put({name:_}).catch(xe)}(t._deps,u),l()},c)}))]).then(()=>(s(),e.onReadyBeingFired=[],J.resolve(Eo(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(Qo,xe);return e.onReadyBeingFired=[],J.resolve(Eo(()=>c(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),ze(l)}).finally(()=>{e.openComplete=!0,i()})}function Ao(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return o=>{var a=i(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):Je(l)?Promise.all(l).then(n,r):n(l)}}return s(e)()}function Hf(t,e,n){var r=arguments.length;if(r<2)throw new le.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Jc(s),n]}function wu(t,e,n,r,s){return J.resolve().then(()=>{const i=se.transless||se,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===Jo.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>wu(t,e,n,null,s))):ze(h)}const l=Zo(s);let c;l&&lr();const u=J.follow(()=>{if(c=s.call(o,o),c)if(l){var h=Yt.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Ao(c))},a);return(c&&typeof c.then=="function"?J.resolve(c).then(h=>o.active?h:ze(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),ze(h)))})}function cs(t,e,n){const r=Je(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const qf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function o(u,h,d){const m=Dr(u),y=s[m]=s[m]||[],p=u==null?0:typeof u=="string"?1:u.length,b=h>0,_={...d,isVirtual:b,keyTail:h,keyLength:p,extractKey:$o(u),unique:!b&&d.unique};return y.push(_),_.isPrimaryKey||i.push(_),p>1&&o(p===2?u[0]:u.slice(0,p-1),h+1,d),y.sort((v,w)=>v.keyTail-w.keyTail),_}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[a];for(const u of r.indexes)o(u.keyPath,0,u);function l(u){const h=u.query.index;return h.isVirtual?{...u,query:{index:h,range:(d=u.query.range,m=h.keyTail,{type:d.type===1?2:d.type,lower:cs(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:cs(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var d,m}return{...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(u){const h=s[Dr(u)];return h&&h[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:h,isVirtual:d,keyLength:m}=u.query.index;return d?n.openCursor(l(u)).then(y=>y&&function(p){return Object.create(p,{continue:{value:function(_){_!=null?p.continue(cs(_,u.reverse?t.MAX_KEY:t.MIN_KEY,h)):u.unique?p.continue(p.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,h)):p.continue()}},continuePrimaryKey:{value(_,v){p.continuePrimaryKey(cs(_,t.MAX_KEY,h),v)}},primaryKey:{get:()=>p.primaryKey},key:{get(){const _=p.key;return m===1?_[0]:_.slice(0,m)}},value:{get:()=>p.value}})}(y)):n.openCursor(u)}}}}}};function ia(t,e,n,r){return n=n||{},r=r||"",je(t).forEach(s=>{if(ft(e,s)){var i=t[s],o=e[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const a=ao(i);a!==ao(o)?n[r+s]=e[s]:a==="Object"?ia(i,o,n,r+s+"."):i!==o&&(n[r+s]=e[s])}else i!==o&&(n[r+s]=e[s])}else n[r+s]=void 0}),je(e).forEach(s=>{ft(t,s)||(n[r+s]=e[s])}),n}const Wf={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=se.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(i.type){case"add":if(l.fire===xe)break;return o._promise("readwrite",()=>u(i),!0);case"put":if(l.fire===xe&&c.fire===xe)break;return o._promise("readwrite",()=>u(i),!0);case"delete":if(a.fire===xe)break;return o._promise("readwrite",()=>u(i),!0);case"deleteRange":if(a.fire===xe)break;return o._promise("readwrite",()=>function(d){return h(d.trans,d.range,1e4)}(i),!0)}return n.mutate(i);function u(d){const m=se.trans,y=d.keys||function(p,b){return b.type==="delete"?b.keys:b.keys||b.values.map(p.extractKey)}(r,d);if(!y)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:y}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(p,b,_){return b.type==="add"?Promise.resolve([]):p.getMany({trans:b.trans,keys:_,cache:"immutable"})}(n,d,y).then(p=>{const b=y.map((_,v)=>{const w=p[v],C={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(C,_,w,m);else if(d.type==="add"||w===void 0){const k=l.fire.call(C,_,d.values[v],m);_==null&&k!=null&&(_=k,d.keys[v]=_,r.outbound||$t(d.values[v],r.keyPath,_))}else{const k=ia(w,d.values[v]),A=c.fire.call(C,k,_,w,m);if(A){const S=d.values[v];Object.keys(A).forEach(K=>{ft(S,K)?S[K]=A[K]:$t(S,K,A[K])})}}return C});return n.mutate(d).then(({failures:_,results:v,numFailures:w,lastResult:C})=>{for(let k=0;k<y.length;++k){const A=v?v[k]:y[k],S=b[k];A==null?S.onerror&&S.onerror(_[k]):S.onsuccess&&S.onsuccess(d.type==="put"&&p[k]?d.values[k]:A)}return{failures:_,results:v,numFailures:w,lastResult:C}}).catch(_=>(b.forEach(v=>v.onerror&&v.onerror(_)),Promise.reject(_)))})}function h(d,m,y){return n.query({trans:d,values:!1,query:{index:r,range:m},limit:y}).then(({result:p})=>u({type:"delete",keys:p,trans:d}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):p.length<y?{failures:[],numFailures:0,lastResult:void 0}:h(d,{...m,lower:p[p.length-1],lowerOpen:!0},y)))}}}}})};function $u(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)st(e.keys[s],t[i])===0&&(r.push(n?Wr(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const Vf={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=$u(r.keys,r.trans._cache,r.cache==="clone");return s?J.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Wr(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function oa(t){return!("from"in t)}const Ut=function(t,e){if(!this){const n=new Ut;return t&&"d"in t&&ot(n,t),n}ot(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Hr(t,e,n){const r=st(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(oa(t))return ot(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(st(n,t.from)<0)return s?Hr(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},ul(t);if(st(e,t.to)>0)return i?Hr(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},ul(t);st(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),st(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;s&&!t.l&&Gs(t,s),i&&o&&Gs(t,i)}function Gs(t,e){oa(e)||function n(r,{from:s,to:i,l:o,r:a}){Hr(r,s,i),o&&n(r,o),a&&n(r,a)}(t,e)}function Gf(t,e){const n=Lo(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=Lo(t);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(st(a.from,s.to)<=0&&st(a.to,s.from)>=0)return!0;st(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Lo(t){let e=oa(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&st(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||st(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function ul(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o={...t},a=t[s];t.from=a.from,t.to=a.to,t[s]=a[s],o[s]=a[i],t[i]=o,o.d=hl(o)}t.d=hl(t)}function hl({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}sr(Ut.prototype,{add(t){return Gs(this,t),this},addKey(t){return Hr(this,t,t),this},addKeys(t){return t.forEach(e=>Hr(this,e,e)),this},[lo](){return Lo(this)}});const Yf={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Ut(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:a,outbound:l}=o,c={...s,mutate:d=>{const m=d.trans,y=m.mutatedParts||(m.mutatedParts={}),p=A=>{const S=`idb://${e}/${r}/${A}`;return y[S]||(y[S]=new Ut)},b=p(""),_=p(":dels"),{type:v}=d;let[w,C]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const k=d.trans._cache;return s.mutate(d).then(A=>{if(Je(w)){v!=="delete"&&(w=A.results),b.addKeys(w);const S=$u(w,k);S||v==="add"||_.addKeys(w),(S||C)&&function(K,T,O,N){function P(Z){const U=K(Z.name||"");function F(W){return W!=null?Z.extractKey(W):null}const B=W=>Z.multiEntry&&Je(W)?W.forEach(ee=>U.addKey(ee)):U.addKey(W);(O||N).forEach((W,ee)=>{const L=O&&F(O[ee]),R=N&&F(N[ee]);st(L,R)!==0&&(L!=null&&B(L),R!=null&&B(R))})}T.indexes.forEach(P)}(p,i,S,C)}else if(w){const S={from:w.lower,to:w.upper};_.add(S),b.add(S)}else b.add(n),_.add(n),i.indexes.forEach(S=>p(S.name).add(n));return A})}},u=({query:{index:d,range:m}})=>{var y,p;return[d,new Ut((y=m.lower)!==null&&y!==void 0?y:t.MIN_KEY,(p=m.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},h={get:d=>[o,new Ut(d.key)],getMany:d=>[o,new Ut().addKeys(d.keys)],count:u,query:u,openCursor:u};return je(h).forEach(d=>{c[d]=function(m){const{subscr:y}=se;if(y){const p=C=>{const k=`idb://${e}/${r}/${C}`;return y[k]||(y[k]=new Ut)},b=p(""),_=p(":dels"),[v,w]=h[d](m);if(p(v.name||"").add(w),!v.isPrimaryKey){if(d!=="count"){const C=d==="query"&&l&&m.values&&s.query({...m,values:!1});return s[d].apply(this,arguments).then(k=>{if(d==="query"){if(l&&m.values)return C.then(({result:S})=>(b.addKeys(S),k));const A=m.values?k.result.map(a):k.result;m.values?b.addKeys(A):_.addKeys(A)}else if(d==="openCursor"){const A=k,S=m.values;return A&&Object.create(A,{key:{get:()=>(_.addKey(A.primaryKey),A.key)},primaryKey:{get(){const K=A.primaryKey;return _.addKey(K),K}},value:{get:()=>(S&&b.addKey(A.primaryKey),A.value)}})}return k})}_.add(n)}}return s[d].apply(this,arguments)}}),c}}}};class Vt{constructor(e,n){this._middlewares={},this.verno=0;const r=Vt.dependencies;this._options=n={addons:Vt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new J(a=>{i.dbReadyResolve=a}),i.openCanceller=new J((a,l)=>{i.cancelOpen=l}),this._state=i,this.name=e,this.on=Ir(this,"populate","blocked","versionchange","close",{ready:[Qo,xe]}),this.on.ready.subscribe=Gc(this.on.ready.subscribe,a=>(l,c)=>{Vt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||J.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const h=this;c||a(function d(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,gr(Rf.prototype,function(a,l){this.db=o;let c=gu,u=null;if(l)try{c=l()}catch(y){u=y}const h=a._ctx,d=h.table,m=d.hook.reading.fire;this._ctx={table:d,index:h.index,isPrimKey:!h.index||d.schema.primKey.keyPath&&h.index===d.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:h.or,valueMapper:m!==Fr?m:null}})),this.Table=function(a){return gr(Pf.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:Ir(null,{creating:[yf,xe],reading:[bf,Fr],updating:[wf,xe],deleting:[_f,xe]})})}(this),this.Transaction=function(a){return gr(Mf.prototype,function(l,c,u,h,d){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=Ir(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J((m,y)=>{this._resolve=m,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var y=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):y&&this.idbtrans&&this.idbtrans.abort(),ze(m)})})}(this),this.Version=function(a){return gr(Uf.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return gr(vu.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:u};const h=a._deps.indexedDB;if(!h)throw new le.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(d,m)=>h.cmp(m,d),this._max=(d,m)=>h.cmp(d,m)>0?d:m,this._min=(d,m)=>h.cmp(d,m)<0?d:m,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Kr(n.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Or.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(qf),this.use(Wf),this.use(Yf),this.use(Vf),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new le.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Ff),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?e():new J((n,r)=>{if(this._state.openComplete)return r(new le.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new le.DatabaseClosed);this.open().catch(xe)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Kf(this)}_close(){const e=this._state,n=Or.indexOf(this);if(n>=0&&Or.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new J(r=>{e.dbReadyResolve=r}),e.openCanceller=new J((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new le.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new J((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=Re(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!sa(a)&&c!==si&&ra(a,l).delete(c).catch(xe)})(this._deps,this.name),r()}),o.onerror=Tt(s),o.onblocked=this._fireOnBlocked};if(e)throw new le.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return je(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Hf.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=se.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===wi)o=wi;else{if(e!="rw"&&e!=$i)throw new le.InvalidArgument("Invalid transaction mode: "+e);o=$i}if(s){if(s.mode===wi&&o===$i){if(!i)throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new le.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(u,h)=>{h(c)}):ze(c)}const l=wu.bind(null,this,o,a,s,r);return s?s._promise(o,l,"lock"):se.trans?cr(se.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!ft(this._allTables,e))throw new le.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Zf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Xf{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Zf](){return this}}function Su(t,e){return je(e).forEach(n=>{Gs(t[n]||(t[n]=new Ut),e[n])}),t}function Jf(t){let e,n=!1;const r=new Xf(s=>{const i=Zo(t);let o=!1,a={},l={};const c={get closed(){return o},unsubscribe:()=>{o=!0,dn.storagemutated.unsubscribe(m)}};s.start&&s.start(c);let u=!1,h=!1;function d(){return je(l).some(p=>a[p]&&Gf(a[p],l[p]))}const m=p=>{Su(a,p),d()&&y()},y=()=>{if(u||o)return;a={};const p={},b=function(_){i&&lr();const v=()=>un(t,{subscr:_,trans:null}),w=se.trans?cr(se.transless,v):v();return i&&w.then(Yt,Yt),w}(p);h||(dn(zr,m),h=!0),u=!0,Promise.resolve(b).then(_=>{n=!0,e=_,u=!1,o||(d()?y():(a={},l=p,s.next&&s.next(_)))},_=>{u=!1,n=!1,s.error&&s.error(_),c.unsubscribe()})};return y(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let Po;try{Po={indexedDB:Pe.indexedDB||Pe.mozIndexedDB||Pe.webkitIndexedDB||Pe.msIndexedDB,IDBKeyRange:Pe.IDBKeyRange||Pe.webkitIDBKeyRange}}catch{Po={indexedDB:null,IDBKeyRange:null}}const gn=Vt;function Rs(t){let e=Kt;try{Kt=!0,dn.storagemutated.fire(t)}finally{Kt=e}}sr(gn,{...xs,delete:t=>new gn(t,{addons:[]}).delete(),exists:t=>new gn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return sa(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==si)):ra(e,n).toCollection().primaryKeys()}(gn.dependencies).then(t)}catch{return ze(new le.MissingAPI)}},defineClass:()=>function(t){ot(this,t)},ignoreTransaction:t=>se.trans?cr(se.transless,t):t(),vip:Eo,async:function(t){return function(){try{var e=Ao(t.apply(this,arguments));return e&&typeof e.then=="function"?e:J.resolve(e)}catch(n){return ze(n)}}},spawn:function(t,e,n){try{var r=Ao(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:J.resolve(r)}catch(s){return ze(s)}},currentTransaction:{get:()=>se.trans||null},waitFor:function(t,e){const n=J.resolve(typeof t=="function"?gn.ignoreTransaction(t):t).timeout(e||6e4);return se.trans?se.trans.waitFor(n):n},Promise:J,debug:{get:()=>Lt,set:t=>{eu(t,t==="dexie"?()=>!0:pu)}},derive:Vn,extend:ot,props:sr,override:Gc,Events:Ir,on:dn,liveQuery:Jf,extendObservabilitySet:Su,getByKeyPath:Wt,setByKeyPath:$t,delByKeyPath:function(t,e){typeof e=="string"?$t(t,e,void 0):"length"in e&&[].map.call(e,function(n){$t(t,n,void 0)})},shallowClone:Xc,deepClone:Wr,getObjectDiff:ia,cmp:st,asap:Yc,minKey:_o,addons:[],connections:Or,errnames:Jo,dependencies:Po,semVer:sl,version:sl.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),gn.maxKey=Kr(gn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(dn(zr,t=>{if(!Kt){let e;ri?(e=document.createEvent("CustomEvent"),e.initCustomEvent(sn,!0,!0,t)):e=new CustomEvent(sn,{detail:t}),Kt=!0,dispatchEvent(e),Kt=!1}}),addEventListener(sn,({detail:t})=>{Kt||Rs(t)}));let Kt=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(sn);typeof t.unref=="function"&&t.unref(),dn(zr,e=>{Kt||t.postMessage(e)}),t.onmessage=e=>{e.data&&Rs(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){dn(zr,e=>{try{Kt||(typeof localStorage<"u"&&localStorage.setItem(sn,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:sn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===sn){const n=JSON.parse(e.newValue);n&&Rs(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===sn&&Rs(e.changedParts)})}J.rejectionMapper=function(t,e){if(!t||t instanceof Gn||t instanceof TypeError||t instanceof SyntaxError||!t.name||!el[t.name])return t;var n=new el[t.name](e||t.message,t);return"stack"in t&&qt(n,"stack",{get:function(){return this.inner.stack}}),n},eu(Lt,pu);class Qf extends Vt{userSettings;constructor(e){super(e),this.version(1).stores({userSettings:"userId"})}}const ku=new Qf("userSettings"),[dl,Ro]=M({userId:0,username:"",email:"",theme:"light"}),[ep,fl]=M(!1);function we(t){return t&&fl(!1),ep()||(fl(!0),np().pipe(de(1),Be(e=>{e.length>0&&e[0].userId===dl().userId&&Ro(e[0])})).subscribe()),[dl,Ro]}function tp(t,e){ku.userSettings.put(t).then(()=>{e&&e()}).catch(n=>{console.error(n)}),Ro(t)}function np(){return ce.toObservable(ku.userSettings.toArray())}const rp="_body_ylqsn_1",sp="_primary_ylqsn_14",ip="_accent_ylqsn_24",op="_tertiary_ylqsn_30",ap="_warn_ylqsn_35",lp="_hover_ylqsn_39",cp="_popup_ylqsn_53",Qt={body:rp,primary:sp,accent:ip,tertiary:op,warn:ap,hover:lp,popup:cp},up="_body_1c3w6_1",hp="_primary_1c3w6_14",dp="_accent_1c3w6_24",fp="_tertiary_1c3w6_30",pp="_warn_1c3w6_35",gp="_hover_1c3w6_39",mp="_popup_1c3w6_53",en={body:up,primary:hp,accent:dp,tertiary:fp,warn:pp,hover:gp,popup:mp},yn=function(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor),t},vp="_active_88uab_1",bp="_inactive_88uab_6",yp="_navbar_88uab_11",Ti={active:vp,inactive:bp,navbar:yp};var _p=$('<svg width=40 height=40 viewBox="0 0 83 88"fill=none xmlns=http://www.w3.org/2000/svg><path d="M31.125 57.75C31.125 57.0207 31.3983 56.3212 31.8847 55.8055C32.3711 55.2897 33.0308 55 33.7188 55H49.2812C49.9692 55 50.6289 55.2897 51.1153 55.8055C51.6017 56.3212 51.875 57.0207 51.875 57.75C51.875 58.4793 51.6017 59.1788 51.1153 59.6945C50.6289 60.2103 49.9692 60.5 49.2812 60.5H33.7188C33.0308 60.5 32.3711 60.2103 31.8847 59.6945C31.3983 59.1788 31.125 58.4793 31.125 57.75ZM20.75 41.25C20.75 40.5207 21.0233 39.8212 21.5097 39.3055C21.9961 38.7897 22.6558 38.5 23.3438 38.5H59.6562C60.3442 38.5 61.0039 38.7897 61.4903 39.3055C61.9767 39.8212 62.25 40.5207 62.25 41.25C62.25 41.9793 61.9767 42.6788 61.4903 43.1945C61.0039 43.7103 60.3442 44 59.6562 44H23.3438C22.6558 44 21.9961 43.7103 21.5097 43.1945C21.0233 42.6788 20.75 41.9793 20.75 41.25ZM10.375 24.75C10.375 24.0207 10.6483 23.3212 11.1347 22.8055C11.6211 22.2897 12.2808 22 12.9688 22H70.0312C70.7192 22 71.3789 22.2897 71.8653 22.8055C72.3517 23.3212 72.625 24.0207 72.625 24.75C72.625 25.4793 72.3517 26.1788 71.8653 26.6945C71.3789 27.2103 70.7192 27.5 70.0312 27.5H12.9688C12.2808 27.5 11.6211 27.2103 11.1347 26.6945C10.6483 26.1788 10.375 25.4793 10.375 24.75Z"fill=white>');const wp=()=>_p();var $p=$("<li><div>"),Sp=$("<div><div><span></span><ul>"),kp=$("<li>");const Cp=t=>{const[e,n]=we(),r=H(()=>ye(e().theme));M(!1),M(!1);const[s,i]=M(window.location.pathname),o=[{Name:"Home",Link:"/"},{Name:"Characters",Link:"/characters"},{Name:"Info",Link:"/info"},{Name:"Homebrew",Link:"/homebrew"}],[{list:[a,l]},c]=et(t,["list"]),u=h=>s()==="/"&&h.Link==="/"||s().startsWith(h.Link)&&s()!=="/"&&h.Link!=="/"?Ti.active:Ti.inactive;return z(()=>{c.isMobile&&l(!1)}),(()=>{var h=Sp(),d=h.firstChild,m=d.firstChild,y=m.nextSibling;return g(m,f(wn,{href:"/",children:"MySite"})),g(y,f(G,{get when(){return c.isMobile},get children(){var p=$p(),b=p.firstChild;return g(b,f(wn,{href:"/",children:"MySite"})),p}}),null),g(y,f(Y,{each:o,children:(p,b)=>f(G,{get when(){return!c.isMobile||b()===0||a()},get children(){var _=kp();return g(_,f(wn,{onClick:()=>i(p.Link),get href(){return p.Link},get children(){return p.Name}})),z(()=>j(_,`${r()?.accent} ${r()?.hover} ${u(p)}`)),_}})}),null),g(d,f(he,{onClick:()=>l(p=>!p),get children(){return f(wp,{})}}),null),z(p=>{var b=`${r()?.primary} ${Ti.navbar}`,_=`${c.style??""}`,v=c.isMobile?{margin:"0 auto",width:"min-content"}:{};return b!==p.e&&j(h,p.e=b),_!==p.t&&j(d,p.t=_),p.a=Ko(y,v,p.a),p},{e:void 0,t:void 0,a:void 0}),h})()};var xp=(t,e)=>{tr(()=>{const n=r=>{const s=t();!s||s.contains(r.target)||e(r)};document.addEventListener("click",n),ln(()=>document.removeEventListener("click",n))})},aa=xp,Tp=$("<b>X"),Ep=$("<div><div style=display:flex;justify-content:space-between;><h2 style=margin-left:5%></h2><span>");const ii=t=>{const[e,n]=we();Se(De);const r=H(()=>ye(e().theme)),[s,i]=t.backgroundClick??M(!0),o=Pt(),a=t.translate?.x??"-50%",l=t.translate?.y??"-50%",[c,u]=M();return aa(c,()=>{i(h=>!h)}),f(Ho,{get children(){var h=Ep(),d=h.firstChild,m=d.firstChild,y=m.nextSibling;return cn(u,h),`translate(${a},${l})`!=null?h.style.setProperty("transform",`translate(${a},${l})`):h.style.removeProperty("transform"),h.style.setProperty("padding","0px"),h.style.setProperty("padding-bottom","5px"),g(m,()=>t.title??"Modal"),g(y,f(he,{onClick:()=>i(p=>!p),get children(){return Tp()}})),g(h,()=>t.children,null),z(p=>{var b=t.width?t.width:o.isMobile()?"90vw":"45vw",_=t.height?t.height:o.isMobile()?"90vh":"60vh",v=`${r()?.popup} ${r()?.primary}`,w=r()?.accent;return b!==p.e&&((p.e=b)!=null?h.style.setProperty("width",b):h.style.removeProperty("width")),_!==p.t&&((p.t=_)!=null?h.style.setProperty("height",_):h.style.removeProperty("height")),v!==p.a&&j(h,p.a=v),w!==p.o&&j(d,p.o=w),p},{e:void 0,t:void 0,a:void 0,o:void 0}),h}})};function pl(t,e,n=!1){const r=i=>i===0?"cantrips_known":`spell_slots_level_${i}`,s={};if(e==="half")switch(n&&(t<10?s[r(0)]=2:t<14?s[r(0)]=3:s[r(0)]=4),t){case 2:s[r(1)]=2;break;case 3:case 4:s[r(1)]=3;break;case 5:case 6:s[r(1)]=4,s[r(2)]=2;break;case 7:case 8:s[r(1)]=4,s[r(2)]=3;break;case 9:case 10:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 11:case 12:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 13:case 14:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break;case 15:case 16:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=2;break;case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=3,s[r(5)]=1;break}else switch(n&&(t<10?s[r(0)]=2:s[r(0)]=3),t){case 3:s[r(1)]=2;break;case 4:case 5:case 6:s[r(1)]=3;break;case 7:case 8:case 9:s[r(1)]=4,s[r(2)]=2;break;case 10:case 11:case 12:s[r(1)]=4,s[r(2)]=3;break;case 13:case 14:case 15:s[r(1)]=4,s[r(2)]=3,s[r(3)]=2;break;case 16:case 17:case 18:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3;break;case 19:case 20:s[r(1)]=4,s[r(2)]=3,s[r(3)]=3,s[r(4)]=1;break}return s}const Ap=t=>{switch(t){case 0:return"Cantrip";case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`;default:return`${t}th`}};function Zn(t){return JSON.parse(JSON.stringify(t))}function Lp(t){return Array.from({length:t},(e,n)=>n+1)}const Pp=t=>{switch(t){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${t}th`}},Rp=t=>{const e=[];return t.isVerbal&&e.push("V"),t.isSomatic&&e.push("S"),t.isMaterial&&e.push("M"),t.materials_Needed?[e.join(", "),t.materials_Needed??null].join(", "):e.join(", ")},Cu=t=>{const e=JSON.parse(JSON.stringify(t));return typeof e=="string"?e:Array.isArray(e)?e.join(`
 
`):"-unknown-"};var Op=$('<svg width=46 height=44><path d="M24.15 12.7875L37.6625 25.575C39.1 26.95 39.1 29.15 37.6625 30.525C36.225 31.9 33.925 31.9 32.4875 30.525L24.15 22.6875C23.4312 22 22.425 22 21.7062 22.6875L13.3687 30.525C11.9312 31.9 9.63123 31.9 8.19373 30.525C6.75623 29.15 6.75623 26.95 8.19373 25.575L21.7062 12.7875C22.425 12.2375 23.575 12.2375 24.15 12.7875Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>'),Ip=$('<svg width=44 height=43><path d="M20.7625 31.8469L7.83752 19.35C6.46252 18.0062 6.46252 15.8562 7.83752 14.5125C9.21252 13.1687 11.4125 13.1687 12.7875 14.5125L20.7625 22.1719C21.45 22.8437 22.4125 22.8437 23.1 22.1719L31.075 14.5125C32.45 13.1687 34.65 13.1687 36.025 14.5125C37.4 15.8562 37.4 18.0062 36.025 19.35L23.1 31.8469C22.55 32.3844 21.45 32.3844 20.7625 31.8469Z"stroke=white stroke-width=2 stroke-miterlimit=10 stroke-linecap=round stroke-linejoin=round>');const la=t=>(()=>{var e=Op();return Ie(e,Oe(t,{viewBox:"0 0 46 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),ca=t=>(()=>{var e=Ip();return Ie(e,Oe(t,{viewBox:"0 0 44 43",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();var Dp=$('<svg width=26 height=17 viewBox="0 0 26 17"fill=none xmlns=http://www.w3.org/2000/svg><path d="M25.9732 8.37285C25.9671 8.35975 25.8692 8.14406 25.6726 7.78919C24.6176 5.88731 20.727 0 13.0002 0C3.83202 0 0.0644916 8.28892 0.0271169 8.37285C-0.00903897 8.45467 -0.00903897 8.54533 0.0271169 8.6275C0.0644916 8.71108 3.83202 17 13.0002 17C20.7229 17 24.6135 11.1191 25.6706 9.21435C25.868 8.85771 25.9667 8.6406 25.9728 8.6275C26.009 8.54533 26.009 8.45467 25.9732 8.37285ZM13.0002 16.2917C5.00282 16.2917 1.35026 9.51894 0.846515 8.49965C1.34945 7.47894 4.99226 0.708333 13.0002 0.708333C20.9975 0.708333 24.6501 7.48106 25.1538 8.50035C24.6509 9.52106 21.0081 16.2917 13.0002 16.2917Z"fill=white></path><path d="M13.0002 2.83475C9.41018 2.83475 6.50024 5.37164 6.50024 8.50141C6.50024 11.6312 9.41018 14.1681 13.0002 14.1681C16.5902 14.1681 19.5001 11.6312 19.5001 8.50141C19.5001 5.37164 16.5902 2.83475 13.0002 2.83475ZM13.0002 13.4597C9.85909 13.4597 7.31274 11.2398 7.31274 8.50141C7.31274 5.763 9.85909 3.54308 13.0002 3.54308C16.1413 3.54308 18.6876 5.763 18.6876 8.50141C18.6876 11.2398 16.1413 13.4597 13.0002 13.4597Z"fill=white></path><path d="M13.0002 5.66809C11.2054 5.66809 9.75024 6.93672 9.75024 8.50142C9.75024 10.0661 11.2054 11.3348 13.0002 11.3348C14.795 11.3348 16.2502 10.0661 16.2502 8.50142C16.2502 6.93672 14.795 5.66809 13.0002 5.66809ZM13.0002 10.6264C11.6543 10.6264 10.5627 9.67478 10.5627 8.50142C10.5627 7.32807 11.6543 6.37642 13.0002 6.37642C14.3461 6.37642 15.4377 7.32807 15.4377 8.50142C15.4377 9.67478 14.3461 10.6264 13.0002 10.6264Z"fill=white></path><path d="M13.0002 7.08333C12.7755 7.08333 12.5939 7.24164 12.5939 7.43749C12.5939 7.63335 12.7755 7.79166 13.0002 7.79166C13.4487 7.79166 13.8127 8.109 13.8127 8.5C13.8127 8.69585 13.9943 8.85416 14.2189 8.85416C14.4436 8.85416 14.6252 8.69585 14.6252 8.5C14.6252 7.71764 13.8976 7.08333 13.0002 7.08333Z"fill=white>');const Mp=()=>Dp();var Np=$('<svg width=50 height=50><path fill-rule=evenodd clip-rule=evenodd d="M20.8333 4.16663C19.6827 4.16663 18.75 5.09938 18.75 6.24996V9.54533C17.3015 10.1316 15.9551 10.915 14.7439 11.8617L11.887 10.2123C11.4085 9.93604 10.8398 9.86117 10.3061 10.0042C9.77239 10.1472 9.31737 10.4964 9.0411 10.9749L4.87443 18.1917C4.29914 19.1882 4.64054 20.4623 5.63697 21.0377L8.49283 22.6864C8.3876 23.4433 8.33331 24.2158 8.33331 25C8.33331 25.7841 8.3876 26.5564 8.49283 27.3135L5.63699 28.9622C5.15847 29.2385 4.80933 29.6935 4.66631 30.2272C4.52331 30.761 4.59816 31.3295 4.87443 31.8081L9.0411 39.025C9.31737 39.5035 9.77241 39.8527 10.3061 39.9958C10.8398 40.1387 11.4085 40.0639 11.887 39.7877L14.7439 38.1381C15.9552 39.0847 17.3015 39.8683 18.75 40.4545V43.75C18.75 44.9006 19.6827 45.8333 20.8333 45.8333H29.1667C30.3171 45.8333 31.25 44.9006 31.25 43.75V40.4545C32.6984 39.8683 34.0448 39.0847 35.2561 38.1381L38.113 39.7877C38.5915 40.0639 39.16 40.1387 39.6938 39.9958C40.2275 39.8527 40.6825 39.5035 40.9588 39.0252L45.1255 31.8083C45.4017 31.3298 45.4767 30.761 45.3336 30.2272C45.1907 29.6937 44.8415 29.2385 44.363 28.9622L41.5071 27.3135C41.6123 26.5566 41.6667 25.7841 41.6667 25C41.6667 24.2158 41.6123 23.4433 41.5071 22.6864L44.363 21.0377C45.3594 20.4623 45.7009 19.1881 45.1255 18.1917L40.9588 10.9748C40.6825 10.4963 40.2275 10.1471 39.6938 10.0041C39.16 9.86113 38.5915 9.93598 38.113 10.2123L35.2561 11.8617C34.0448 10.915 32.6984 10.1316 31.25 9.54533V6.24996C31.25 5.09938 30.3171 4.16663 29.1667 4.16663H20.8333ZM22.9167 11.0205V8.33329H27.0834V11.0205C27.0834 11.9422 27.689 12.7544 28.5723 13.0173C30.4705 13.5822 32.1823 14.5874 33.5882 15.9172C34.2575 16.5505 35.2634 16.6687 36.0615 16.208L38.3921 14.8624L40.4755 18.4708L38.1477 19.8147C37.3502 20.2751 36.9496 21.2043 37.1623 22.1002C37.3827 23.0287 37.5 23.9993 37.5 25C37.5 26.0006 37.3827 26.9712 37.1623 27.8997C36.9496 28.7956 37.3502 29.7248 38.1477 30.1852L40.4755 31.5291L38.3921 35.1375L36.0613 33.7918C35.2634 33.3312 34.2575 33.4493 33.588 34.0827C32.1823 35.4125 30.4705 36.4177 28.5723 36.9825C27.689 37.2454 27.0834 38.0577 27.0834 38.9793V41.6666H22.9167V38.9793C22.9167 38.0577 22.3109 37.2454 21.4275 36.9825C19.5294 36.4177 17.8177 35.4125 16.4118 34.0827C15.7424 33.4493 14.7365 33.3312 13.9385 33.7918L11.6079 35.1375L9.52454 31.5291L11.8522 30.1852C12.6496 29.7248 13.0502 28.7956 12.8376 27.8997C12.6171 26.9712 12.5 26.0006 12.5 25C12.5 23.9993 12.6171 23.0287 12.8376 22.1002C13.0502 21.2043 12.6496 20.2751 11.8522 19.8147L9.52454 18.4709L11.6079 14.8624L13.9385 16.208C14.7365 16.6687 15.7424 16.5505 16.4118 15.9172C17.8176 14.5874 19.5294 13.5822 21.4275 13.0173C22.3109 12.7544 22.9167 11.9422 22.9167 11.0205ZM20.8333 25C20.8333 22.6987 22.6988 20.8333 25 20.8333C27.3013 20.8333 29.1667 22.6987 29.1667 25C29.1667 27.3012 27.3013 29.1666 25 29.1666C22.6988 29.1666 20.8333 27.3012 20.8333 25ZM25 16.6666C20.3976 16.6666 16.6667 20.3976 16.6667 25C16.6667 29.6022 20.3976 33.3333 25 33.3333C29.6023 33.3333 33.3334 29.6022 33.3334 25C33.3334 20.3976 29.6023 16.6666 25 16.6666Z"fill=black>');const Bp=t=>(()=>{var e=Np();return Ie(e,Oe(t,{viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();var Fp=$('<svg width=21 height=19 viewBox="0 0 21 19"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_19_710)><path d="M20.6154 3.70551L16.903 0.346669C16.3905 -0.11705 15.56 -0.11705 15.0468 0.346965C15.0468 0.346965 0.39736 13.6012 0.197532 13.782C-0.001968 13.9622 7.37507e-07 14.2487 7.37507e-07 14.2487L0.000328863 18.4047C0.000328863 18.7327 0.294329 18.9984 0.656251 18.9987H2.29359C2.29458 18.9987 5.25 18.9987 5.25 18.9987C5.25 18.9987 5.56599 19.0011 5.76581 18.82C5.96564 18.6389 20.6154 5.38434 20.6154 5.38434C21.1286 4.92062 21.1286 4.16983 20.6154 3.70551ZM12.2574 3.70997L13.4174 4.75972L2.28047 14.8365L1.12022 13.7868L12.2574 3.70997ZM2.74444 15.2563L13.8813 5.17979L15.2736 6.43943L4.13634 16.5157L2.74444 15.2563ZM0.984704 18.4047C0.803251 18.4047 0.656251 18.2723 0.656579 18.1081V17.6382L1.5038 18.4047H0.984704ZM2.43174 18.405L0.656579 16.7989L0.656907 14.2072L5.29692 18.4053H2.43174V18.405ZM5.76089 17.9852L4.60064 16.9355L15.7379 6.85951L16.8978 7.90897L5.76089 17.9852ZM17.3618 7.48918L12.7217 3.29018L13.6497 2.45062L18.2903 6.64932L17.3618 7.48918ZM20.1515 4.96515L18.754 6.22954L14.1136 2.03084L15.5108 0.767044C15.7674 0.534887 16.1831 0.534887 16.4391 0.76645L20.1515 4.12529C20.4077 4.35745 20.4074 4.733 20.1515 4.96515Z"fill=white></path></g><defs><clipPath id=clip0_19_710><rect width=21 height=19 fill=white>');const jp=()=>Fp();var Up=$('<svg width=8 height=38><path d="M8 33.6154C8 34.7783 7.57857 35.8935 6.82843 36.7158C6.07828 37.5381 5.06087 38 4 38C2.93913 38 1.92172 37.5381 1.17157 36.7158C0.421427 35.8935 0 34.7783 0 33.6154C0 32.4525 0.421427 31.3373 1.17157 30.515C1.92172 29.6927 2.93913 29.2308 4 29.2308C5.06087 29.2308 6.07828 29.6927 6.82843 30.515C7.57857 31.3373 8 32.4525 8 33.6154ZM8 19C8 20.1629 7.57857 21.2781 6.82843 22.1004C6.07828 22.9227 5.06087 23.3846 4 23.3846C2.93913 23.3846 1.92172 22.9227 1.17157 22.1004C0.421427 21.2781 0 20.1629 0 19C0 17.8371 0.421427 16.7219 1.17157 15.8996C1.92172 15.0773 2.93913 14.6154 4 14.6154C5.06087 14.6154 6.07828 15.0773 6.82843 15.8996C7.57857 16.7219 8 17.8371 8 19ZM8 4.38462C8 5.54749 7.57857 6.66273 6.82843 7.48501C6.07828 8.30728 5.06087 8.76923 4 8.76923C2.93913 8.76923 1.92172 8.30728 1.17157 7.48501C0.421427 6.66273 0 5.54749 0 4.38462C0 3.22174 0.421427 2.1065 1.17157 1.28422C1.92172 0.461949 2.93913 0 4 0C5.06087 0 6.07828 0.461949 6.82843 1.28422C7.57857 2.1065 8 3.22174 8 4.38462Z"fill=black>');const zp=t=>(()=>{var e=Up();return Ie(e,Oe(t,{viewBox:"0 0 8 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})(),Kp="_settingContainer_1pcjr_1",Hp="_settingTabs_1pcjr_7",qp="_settingBody_1pcjr_29",Wp="_active_1pcjr_39",us={settingContainer:Kp,settingTabs:Hp,settingBody:qp,active:Wp},Vp="_snack_1yjw2_1",Gp="_error_1yjw2_33",Yp="_success_1yjw2_40",Zp="_warning_1yjw2_46",Xp="_open_1yjw2_52",Jp="_slideIn_1yjw2_1",Qp="_close_1yjw2_56",eg="_slideOut_1yjw2_1",Oo={snack:Vp,error:Gp,success:Yp,warning:Zp,open:Xp,slideIn:Jp,close:Qp,slideOut:eg};var tg=$("<div>"),ng=$("<div><span>");const[gl,xu]=M([]),Xn=t=>{xu(e=>[...e,t])},rg=t=>{xu(e=>e.filter((n,r)=>r!==t))},sg=()=>{const[t,e]=we();return H(()=>ye(t().theme)),f(G,{get when(){return gl().length>0},get children(){var n=tg();return g(n,f(Y,{get each(){return gl()},children:(r,s)=>f(ig,Oe(r,{get index(){return s()},onClose:()=>rg(s())}))})),z(()=>j(n,Oo.snackContainer)),n}})},ig=t=>{Pt();const[e,n]=we(),[r,s]=M(!0),i=H(()=>ye(e().theme));t.closeTimeout&&setTimeout(()=>t.onClose(),t.closeTimeout),t.closeTimeout||setTimeout(()=>t.onClose(),5e3);const o=Math.floor(t.message.length/17);return f(Ho,{get mount(){return document.body},get children(){return f(G,{get when(){return r()},get children(){var a=ng(),l=a.firstChild;return g(l,()=>t.message),g(a,f(he,{get onClick(){return t.onClose},children:"X"}),null),z(c=>{var u=`${10+t.index*(50+o*8)}px`,h=`${i().primary} ${Oo.snack} ${Oo[t.severity??"info"]}`;return u!==c.e&&((c.e=u)!=null?a.style.setProperty("bottom",u):a.style.removeProperty("bottom")),h!==c.t&&j(a,c.t=h),c},{e:void 0,t:void 0}),a}})}})};var og=$("<div><h3>General</h3>"),ag=$("<option value=dark>Dark"),lg=$("<option value=light>Light"),cg=$("<div><h3>Theme</h3><label for=themeChange>Change Theme "),ug=$("<div><h3>Account</h3>"),hg=$("<div><div><ul></ul></div><div><div>"),dg=$("<li>");const fg=t=>{const[e,n]=M(["General","Theme","Account"]),[r,s]=M("Theme");return(()=>{var i=hg(),o=i.firstChild,a=o.firstChild,l=o.nextSibling,c=l.firstChild;return g(a,f(Y,{get each(){return e()},children:u=>(()=>{var h=dg();return h.$$click=d=>s(u),g(h,u),z(()=>j(h,r()===u?us.active:"")),h})()})),g(l,f(Nr,{get children(){return[f(ct,{get when(){return r()==="General"},get children(){return og()}}),f(ct,{get when(){return r()==="Theme"},get children(){var u=cg(),h=u.firstChild;return h.nextSibling,g(u,f(Ve,{name:"themeChange",onChange:d=>t.setDefaultUserSettings(m=>(m.theme=d.target.value,Zn(m))),get children(){return[ag(),lg()]}}),null),u}}),f(ct,{get when(){return r()==="Account"},get children(){return ug()}})]}}),c),g(c,f(he,{onClick:u=>tp(t.defaultUserSettings(),()=>Xn({message:"Settings Saved Successfully!",severity:"success",closeTimeout:4e3})),children:"Save Settings"})),z(u=>{var h=us.settingContainer,d=us.settingTabs,m=us.settingBody;return h!==u.e&&j(i,u.e=h),d!==u.t&&j(o,u.t=d),m!==u.a&&j(l,u.a=m),u},{e:void 0,t:void 0,a:void 0}),i})()};bt(["click"]);function Pt(){return Se(De)}const pg="_topper_1h9yq_1",gg="_navOpen_1h9yq_26",mg="_navClosed_1h9yq_45",Ei={topper:pg,navOpen:gg,navClosed:mg};var vg=$("<span><div><h2>Navigation</h2></div><div class=theLine>"),bg=$("<ul class=sideBody>"),yg=$("<div class=sidebar><div class=sideHead><h2></h2><span></span></div><div class=theLine>"),_g=$("<span>"),wg=$("<li><h3>");const $g=t=>{const[{userStyle:e,defaultShowList:n,setDefaultShowList:r,defaultIsMobile:s,setDefaultIsMobile:i,defaultUserSettings:o,setDefaultUserSettings:a},l]=et(t,["userStyle","defaultShowList","setDefaultShowList","defaultIsMobile","setDefaultIsMobile","defaultUserSettings","setDefaultUserSettings"]),[c,u]=M(!1),h=Pt(),[d,m]=M([{Name:"Characters",Link:"/characters",isOpen:!1,children:[{Name:"View",Link:"/characters/view",isOpen:!1},{Name:"Create",Link:"/characters/create",isOpen:!1}]},{Name:"Info",Link:"/info",isOpen:!1,children:[{Name:"Spells",Link:"/info/spells",isOpen:!1},{Name:"Feats",Link:"/info/feats",isOpen:!1},{Name:"Classes",Link:"/info/classes",isOpen:!1},{Name:"Backgrounds",Link:"/info/backgrounds",isOpen:!1},{Name:"Items",Link:"/info/items",isOpen:!1},{Name:"Races",Link:"/info/races",isOpen:!1}]},{Name:"Homebrew",Link:"/homebrew",isOpen:!1,children:[{Name:"Spells",Link:"/homebrew/view?name=spells",isOpen:!1},{Name:"Feats",Link:"/homebrew/view?name=feats",isOpen:!1},{Name:"Classes",Link:"/homebrew/view?name=classes",isOpen:!1},{Name:"Subclasses",Link:"/homebrew/view?name=subclasses",isOpen:!1},{Name:"Backgrounds",Link:"/homebrew/view?name=backgrounds",isOpen:!1},{Name:"Items",Link:"/homebrew/view?name=items",isOpen:!1},{Name:"Races",Link:"/homebrew/view?name=races",isOpen:!1}]}].sort((b,_)=>b.Name>_.Name?1:-1)),y=b=>b.replace("view","create").replace("?name=","/"),p=()=>[{name:"Login",action:()=>{console.log("Login")},condition:()=>!0},{name:"Register",action:()=>{console.log("Register")},condition:()=>!0},{name:"Logout",action:()=>{console.log("Logout")},condition:()=>!0},{name:"Profile",action:()=>{console.log("Profile")},condition:()=>!0}];return(()=>{var b=vg(),_=b.firstChild;return _.firstChild,_.nextSibling,g(_,f(he,{get children(){return[f(Bp,{height:30,onClick:v=>u(w=>!w)}),f(G,{get when(){return c()},get children(){return f(ii,{title:"Settings",get width(){return h.isMobile()?"90vw":"45vw"},get height(){return h.isMobile()?"90vh":"60vh"},backgroundClick:[c,u],get children(){return f(fg,{userStyle:e,defaultUserSettings:o,setDefaultUserSettings:a})}})}})]}}),null),g(_,f(he,{enableBackgroundClick:!0,get menuItems(){return p()},get overrideX(){return s()?"42vw":"93vw"},get children(){return f(zp,{height:30})}}),null),g(b,f(Y,{get each(){return d()},children:v=>(()=>{var w=yg(),C=w.firstChild,k=C.firstChild,A=k.nextSibling;return C.nextSibling,g(k,f(wn,{onClick:()=>r(S=>!S),get href(){return v.Link},get children(){return v.Name}})),A.$$click=()=>m(S=>(v.isOpen=!v.isOpen,Zn([...S.filter(K=>K.Name!==v.Name),v].sort((K,T)=>K.Name>T.Name?1:-1)))),g(A,(()=>{var S=H(()=>!!v.isOpen);return()=>S()?f(la,{}):f(ca,{})})()),g(w,f(G,{get when(){return v.isOpen},get children(){var S=bg();return g(S,f(Y,{get each(){return v.children},children:K=>(()=>{var T=wg(),O=T.firstChild;return g(O,f(wn,{onClick:()=>r(N=>!N),get href(){return K.Link},get children(){return K.Name}})),g(T,f(G,{get when(){return K.Link.includes("homebrew")},get children(){var N=_g();return g(N,f(wn,{onClick:()=>r(P=>!P),get href(){return y(K.Link)},get children(){return f(jp,{})}}),null),g(N,f(wn,{onClick:()=>r(P=>!P),get href(){return K.Link},get children(){return f(Mp,{})}}),null),N}}),null),T})()})),S}}),null),z(()=>j(A,`${e().hover}`)),w})()}),null),z(v=>{var w=`${e().primary} ${n()?`${Ei.navOpen}`:`${Ei.navClosed}`}`,C=`${e().accent} ${Ei.topper}`;return w!==v.e&&j(b,v.e=w),C!==v.t&&j(_,v.t=C),v},{e:void 0,t:void 0}),b})()};bt(["click"]);var Sg=$("<div><div class=body><span>");const kg={isMobile:M(yn())[0],showList:M(!1),useStyle:()=>({body:"",primary:"",accent:"",tertiary:"",warn:"",hover:"",popup:"",table:""}),getMouse:()=>({x:0,y:0})},De=Pn(kg),Cg=t=>f(De.Provider,{get value(){return t.value},get children(){return t.children}}),xg=t=>{const[e,n]=we(),r=H(()=>ye(e().theme)),[s,i]=M(!yn()),[o,a]=M(yn()),[l,c]=M({x:0,y:0});z(()=>{s(),a(yn())});const u=()=>{yn()?i(!1):i(window.matchMedia("only screen and (max-width: 768px)").matches)};a(yn()),window.addEventListener("resize",u),z(()=>{yn()||window.innerWidth<=768});const h=m=>c({x:m.clientX,y:m.clientY});Xt(()=>{window.addEventListener("mousemove",h)}),ln(()=>{window.removeEventListener("mousemove",h)});const{isMobile:d}=Pt();return f(Cg,{value:{isMobile:o,showList:[s,i],useStyle:ye,getMouse:()=>l()},get children(){var m=Sg(),y=m.firstChild,p=y.firstChild;return m.style.setProperty("height","100vh"),g(m,f(Cp,{get isMobile(){return d()},style:"margin-bottom: 15px;",list:[s,i]}),y),g(p,()=>t.children),g(y,f(G,{get when(){return s()},get children(){return f($g,{userStyle:r,defaultShowList:s,setDefaultShowList:i,defaultIsMobile:o,setDefaultIsMobile:a,defaultUserSettings:e,setDefaultUserSettings:n})}}),null),z(b=>{var _=r().body,v=`${s()?"openFirst":"closeFirst"}`;return _!==b.e&&j(m,b.e=_),v!==b.t&&j(p,b.t=v),b},{e:void 0,t:void 0}),m}})},Tg={body:en.body,primary:en.primary,accent:en.accent,tertiary:en.tertiary,warn:en.warn,hover:en.hover,popup:en.popup,table:en.table},ml={body:Qt.body,primary:Qt.primary,accent:Qt.accent,tertiary:Qt.tertiary,warn:Qt.warn,hover:Qt.hover,popup:Qt.popup,table:Qt.table};function ye(t){const[e,n]=we();switch(t??e().theme){case"light":return document.body.style.backgroundColor="#fff",Tg;case"dark":return document.body.style.backgroundColor="#000",ml;default:return ml}}function Eg(){const[t,e]=we();return Se(De),H(()=>ye(t().theme))}const Ag="_menuButtons_1grs9_1",Lg="_menuButton_1grs9_1",Pg="_customButtonStyle_1grs9_26",Rg="_transparent_1grs9_36",hs={menuButtons:Ag,menuButton:Lg,customButtonStyle:Pg,transparent:Rg};var Og=$("<button>"),Ig=$("<div><ul>"),Dg=$("<li><button>");const he=t=>{const[e,n]=M({show:!1,lastX:0,lastY:0}),r=H(()=>!!t.menuItems&&e().show),s=H(()=>t.menuItems?.filter(y=>y.condition?y.condition():!0)??[]),i=Pt(),[o,a]=we(),l=t.styleType??"accent",c=H(()=>ye(o().theme)),u=H(()=>c()[l]),[h,d]=M(),m=H(()=>({position:"absolute",top:t.overrideY??`${e().lastY}px`,left:t.overrideX??`${e().lastX<45?e().lastX-+(h()?h().width:"0"):e().lastX}px`,display:`${e().show?"block":"none"}`}));return aa(h,()=>{const y=Math.abs(i.getMouse().x-e().lastX)<20,p=Math.abs(i.getMouse().y-e().lastY)<20;e().show&&!y&&!p&&Object.keys(t).includes("enableBackgroundClick")&&n({show:!1,lastX:0,lastY:0})}),[(()=>{var y=Og();return Ie(y,Oe(t,{onClick:p=>{t.menuItems?.length&&n({show:!e().show,lastX:p.clientX+(p.view?.scrollX??0),lastY:p.clientY+(p.view?.scrollY??0)}),t.onClick&&t.onClick(p)},get class(){return`${u()} ${c()?.hover} ${hs.customButtonStyle} ${t.transparent?hs.transparent:""} ${t.class??""} `}}),!1,!0),g(y,()=>t.children),y})(),f(Ho,{get mount(){return document.getElementById("root")},get children(){return f(G,{get when(){return r()},get children(){var y=Ig(),p=y.firstChild;return cn(d,y),g(p,f(Y,{get each(){return t.menuItems??[]},children:b=>f(G,{get when(){return H(()=>!!(!b.condition||b.condition()))()&&r()},get children(){var _=Dg(),v=_.firstChild;return v.addEventListener("click",b.action),g(v,()=>b.name),z(w=>{var C=`${100/s().length}%`,k=`${c().hover}`,A=`${c().accent} ${hs.menuButton}`;return C!==w.e&&((w.e=C)!=null?_.style.setProperty("height",C):_.style.removeProperty("height")),k!==w.t&&j(_,w.t=k),A!==w.a&&j(v,w.a=A),w},{e:void 0,t:void 0,a:void 0}),_}})})),z(b=>{var _=`${c()?.popup} ${c()?.primary} ${t.menuStyle??""}`,v=m(),w=`${hs.menuButtons}`;return _!==b.e&&j(y,b.e=_),b.t=Ko(y,v,b.t),w!==b.a&&j(p,b.a=w),b},{e:void 0,t:void 0,a:void 0}),y}})}})]},Mg="_carouselHeader_uoqig_1",Ng="_carousel_uoqig_1",Bg="_carouselSlides_uoqig_24",Fg="_carouselSlide_uoqig_24",jg="_carouselButton_uoqig_37",tn={carouselHeader:Mg,carousel:Ng,carouselSlides:Bg,carouselSlide:Fg,carouselButton:jg};var Ug=$("<div>No <!> Found"),zg=$("<div>No Elements Found"),Kg=$("<div><div><div><div></div></div></div><div>");const oi=({startingIndex:t=0,...e})=>{const[n,r]=M(t),[s,i]=et(e,["currentIndex"]),o=()=>s.currentIndex?s.currentIndex[0]():n(),a=m=>s.currentIndex?s.currentIndex[1](m):r(m),l=H(()=>e.elements.length===2?o():n()),c=H(()=>e.elements.length>0?e.elements[l()].name:e.notFoundName?`No ${e.notFoundName} Found`:"No Elements Found"),u=H(()=>e.elements.length>0?e.elements[l()].element:e.notFoundName?(()=>{var m=Ug(),y=m.firstChild,p=y.nextSibling;return p.nextSibling,g(m,()=>e.notFoundName,p),m})():zg()),h=()=>{l()!==e.elements.length-1?r(m=>m+1):r(0)},d=()=>{l()!==0?r(m=>m-1):r(e.elements.length-1)};return z(()=>{e.currentIndex&&a(l())}),(()=>{var m=Kg(),y=m.firstChild,p=y.firstChild,b=p.firstChild,_=y.nextSibling;return g(y,f(he,{get class(){return`${tn.carouselButton}`},onClick:d,children:""}),p),g(b,c),g(y,f(he,{get class(){return`${tn.carouselButton} `},onClick:h,children:""}),null),g(_,u),z(v=>{var w=`${tn.carousel}`,C=`${tn.carouselHeader}`,k=`${tn.carouselSlides} ${tn.header}`,A=`${tn.carouselSlide}`,S=`${tn.carouselSlide}`;return w!==v.e&&j(m,v.e=w),C!==v.t&&j(y,v.t=C),k!==v.a&&j(p,v.a=k),A!==v.o&&j(b,v.o=A),S!==v.i&&j(_,v.i=S),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),m})()},Hg="_Chip_466ds_1",qg="_removeChipButton_466ds_21",vl={Chip:Hg,removeChipButton:qg};var Wg=$("<span><span></span><span>:</span><span>");const dt=t=>{const[e,n]=we(),r=H(()=>ye(e().theme));return(()=>{var s=Wg(),i=s.firstChild,o=i.nextSibling,a=o.nextSibling;return g(i,()=>t.key),g(a,()=>t.value),g(s,f(G,{get when(){return!!t.remove},get children(){return f(he,{get class(){return`${r().hover} ${vl.removeChipButton}`},get onClick(){return t.remove},children:"X"})}}),null),z(()=>j(s,`${r().tertiary} ${vl.Chip} ${t.class??""}`)),s})()},Vg="_compBody_1xaw7_1",Gg={compBody:Vg};var Yg=$("<div>");const St=t=>{const[e,n]=et(t,["children","class"]),[r,s]=we();Pt();const i=H(()=>ye(r().theme));return(()=>{var o=Yg();return Ie(o,Oe(n,{get class(){return`${i().primary} ${Gg.compBody} ${e.class??""}`}}),!1,!0),g(o,()=>e.children),o})()},Zg="_header_nb7qb_1",Xg="_body_nb7qb_26",Jg="_totalPanel_nb7qb_35",Ai={header:Zg,body:Xg,totalPanel:Jg};var Qg=$("<div>"),em=$("<div><div><span>");const xn=t=>{const[e,n]=M(!!t.startOpen),[r,s]=we();Se(De);const i=H(()=>ye(r().theme));return(()=>{var o=em(),a=o.firstChild,l=a.firstChild;return Ie(o,Oe({get class(){return`${Ai.totalPanel} ${t.styles}`}},t),!1,!0),g(l,()=>t.children[0]),g(a,f(he,{onClick:()=>{n(c=>!c),t.extraLogic&&t.extraLogic()},get class(){return`${i()?.hover}`},get children(){return[f(G,{get when(){return!e()},get children(){return f(ca,{})}}),f(G,{get when(){return e()},get children(){return f(la,{})}})]}}),null),g(o,f(G,{get when(){return e()},get children(){var c=Qg();return g(c,()=>t.children[1]),z(()=>j(c,`${i()?.accent} ${Ai.body}`)),c}}),null),z(()=>j(a,`${i()?.accent} ${Ai.header}`)),o})()},tm="_input_o7xzf_2",nm="_error_o7xzf_44",rm="_success_o7xzf_47",sm="_warning_o7xzf_50",im="_info_o7xzf_53",om="_disabled_o7xzf_56",am="_checkbox_o7xzf_60",lm="_transparent_o7xzf_64",bl={input:tm,error:nm,success:rm,warning:sm,info:im,disabled:om,checkbox:am,transparent:lm},Tu=Pn({getName:()=>"",setName:()=>{},getTextInside:()=>!0,setTextInside:()=>{},getFocused:()=>!1,setFocused:()=>{},getValue:()=>"",setValue:()=>{},getFieldType:()=>"",setFieldType:()=>{}}),cm=t=>{const[e,n]=M(t.name??""),[r,s]=M(!0),[i,o]=M(!1),[a,l]=M(t.value??""),[c,u]=M(t.type??"text");return f(Tu.Provider,{value:{getName:e,setName:n,getTextInside:r,setTextInside:s,getFocused:i,setFocused:o,getValue:a,setValue:l,getFieldType:c,setFieldType:u},get children(){return t.children}})};function ua(){return Se(Tu)}var um=$("<input>");const Ze=t=>{const[e,n]=et(t,["tooltip","transparent","value","onChange"]),r=o=>["checkbox"].includes(o??"text"),s=ua(),i=H(()=>s.getValue?s.getValue():t.value);return Xt(()=>{s.getName&&s.setFieldType(t.type??"text")}),(()=>{var o=um();return Ie(o,Oe(n,{get placeholder(){return H(()=>!!(s.getName()&&s.getTextInside()))()?s.getName():t.placeholder},get value(){return i()},onFocus:a=>{s.getName&&(s.setFocused(!0),s.setTextInside(!1))},onBlur:a=>{s.setFocused&&s.setFocused(!1)},get type(){return H(()=>s.getFieldType().length>0)()?s.getFieldType():t.type},onChange:a=>{s.getName&&(a.currentTarget.value?(s.setValue(a.currentTarget.value),s.setTextInside(!1),s.setFocused(!0)):a.currentTarget.checked?(s.setValue(a.currentTarget.checked?"true":""),s.setFocused(!0),s.setTextInside(!1)):a.currentTarget.checked||(s.setValue(a.currentTarget.checked?"true":""),s.setFocused(!1),s.setTextInside(!0))),t.onChange&&t.onChange(a)},get class(){return`${bl.input} ${e.transparent&&!r(n.type)?bl.transparent:""} ${t.class??""}`},get title(){return e.tooltip}}),!1,!1),o})()};function hm(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const dm="_feature_fg9e7_1",fm="_table_fg9e7_5",pm="_tableRow_fg9e7_9",gm="_tableCell_fg9e7_13",ds={feature:dm,table:fm,tableRow:pm,tableCell:gm};var mm=$("<table><thead><tr><th>Level</th><th>PB</th><th>Features</th></tr></thead><tbody>"),vm=$("<th>"),bm=$("<tr><td></td><td></td><td>"),ym=$("<td><span>");const _m=t=>{const e=t.Class,n=i=>{switch(t.Class().name.toLowerCase()){case"rogue":case"monk":if(!Number.isNaN(+i))return i;const o=JSON.parse(i);return`${JSON.parse(o).DiceCount}d${JSON.parse(o).DiceValue}`}return i},r=i=>t.Class().name.toLowerCase()==="sorcerer"?i.slice(1):i,s=()=>t.Class()?.classLevels?.sort((a,l)=>Object.keys(l.classSpecific).length-Object.keys(a.classSpecific).length);return(()=>{var i=mm(),o=i.firstChild,a=o.firstChild,l=a.firstChild,c=l.nextSibling;c.nextSibling;var u=o.nextSibling;return g(a,f(Y,{get each(){return r(Object.keys(s()[0].classSpecific))},children:h=>(()=>{var d=vm();return g(d,()=>hm(h)),d})()}),null),g(u,f(Y,{get each(){return e().classLevels.sort((h,d)=>h.info.level-d.info.level)},children:h=>(()=>{var d=bm(),m=d.firstChild,y=m.nextSibling,p=y.nextSibling;return d.style.setProperty("border","1px solid white"),g(m,()=>h.info.level),g(y,()=>h.profBonus),g(p,()=>h.features.map(b=>b.name).join(", ")),g(d,f(Y,{get each(){return r(Object.keys(h.classSpecific))},children:b=>(()=>{var _=ym(),v=_.firstChild;return g(v,()=>n(h.classSpecific[b])),_})()}),null),z(b=>{var _=`${ds.tableRow}`,v=`${ds.feature}`;return _!==b.e&&j(d,b.e=_),v!==b.t&&j(p,b.t=v),b},{e:void 0,t:void 0}),d})()})),z(h=>{var d=`${ds.table}`,m=`${ds.tableRow}`;return d!==h.e&&j(i,h.e=d),m!==h.t&&j(a,h.t=m),h},{e:void 0,t:void 0}),i})()},wm="_CenterPage_khgy5_1",$m="_eachPage_khgy5_36",Sm="_subClasses_khgy5_51",km="_dropCard_khgy5_56",Cm="_flexbox_khgy5_81",xm="_innerFlexBox_khgy5_86",Tm="_left_khgy5_104",xt={CenterPage:wm,eachPage:$m,subClasses:Sm,dropCard:km,flexbox:Cm,innerFlexBox:xm,left:Tm},Em="_paginator_179x7_1",Am="_pageView_179x7_11",yl={paginator:Em,pageView:Am},Lm="_select_1joqo_1",Pm="_transparent_1joqo_8",_l={select:Lm,transparent:Pm};var Rm=$("<option>");const _e=t=>{Pt();const[e,n]=we(),r=H(()=>ye(e().theme));return(()=>{var s=Rm();return Ie(s,Oe(t,{get class(){return`${r().primary} ${t.class??""}`}}),!1,!1),s})()};var Om=$("<select>");const Ve=t=>{const[e,n]=et(t,["disableUnselected","class","transparent"]);return(()=>{var r=Om();return Ie(r,Oe(n,{get class(){return`${_l.select} ${e.transparent?_l.transparent:""} ${e.class??""}`}}),!1,!0),g(r,f(G,{get when(){return!e.disableUnselected},get children(){return f(_e,{children:"--------"})}}),null),g(r,()=>t.children,null),r})()};var Im=$("<div><div><div></div> / <div>"),Dm=$("<option>");const ai=t=>{const[e,n]=M(1),[r,s]=M(t.itemsPerPage?.[0]??10),o=Se(De)?.useStyle(),a=H(()=>t.items().slice((e()-1)*r(),e()*r())),l=H(()=>Math.ceil(t.items().length/r())),c=t.itemsPerPage??[10,20,50,100];return z(()=>{e()>l()&&n(l())}),z(()=>{t.setPaginatedItems(a())}),(()=>{var u=Im(),h=u.firstChild,d=h.firstChild,m=d.nextSibling,y=m.nextSibling;return g(u,f(he,{get disabled(){return e()===1},onClick:()=>n(1),children:""}),h),g(u,f(he,{get disabled(){return e()===1},onClick:()=>n(e()-1),children:""}),h),g(u,f(Ve,{disableUnselected:!0,transparent:!0,onChange:p=>s(+p.currentTarget.value),get children(){return f(Y,{each:c,children:p=>(()=>{var b=Dm();return b.value=p,g(b,p),b})()})}}),h),g(d,e),g(y,l),g(u,f(he,{get disabled(){return e()===l()},onClick:()=>n(e()+1),children:""}),null),g(u,f(he,{get disabled(){return e()===l()},onClick:()=>n(l()),children:""}),null),z(p=>{var b=`${o?.accent} ${yl.paginator} `,_=yl.pageView;return b!==p.e&&j(u,p.e=b),_!==p.t&&j(h,p.t=_),p},{e:void 0,t:void 0}),u})()};var Mm=$("<h4>Spells Gained"),Nm=$("<span>"),Bm=$("<br>"),Fm=$("<div><h3></h3><span></span><br><span></span><br><span>"),jm=$("<li><span></span>"),Um=$("<h5> <!> "),zm=$("<span> <!> ");const Km=t=>{const[e,n]=M(!1),[r,s]=we(),i=H(()=>ye(r().theme));return(()=>{var o=jm(),a=o.firstChild;return a.$$click=()=>n(l=>!l),g(a,()=>t.subclass.name),g(o,f(G,{get when(){return e()},get children(){return f(ii,{width:"50vw",height:"max-content",maxHeight:"90vh",backgroundClick:[e,n],get children(){var l=Fm(),c=l.firstChild,u=c.nextSibling,h=u.nextSibling,d=h.nextSibling,m=d.nextSibling,y=m.nextSibling;return g(c,()=>t.subclass.name),g(u,()=>t.subclass.desc?.join(` 
`)),g(d,()=>t.subclass.subclassFlavor),g(l,f(G,{get when(){return t.subclass.spells?.length>=1},get children(){return[Mm(),(()=>{var p=Nm();return g(p,()=>t.subclass.spells?.join(`
`)),p})(),Bm()]}}),y),g(y,f(Y,{get each(){return t.subclass.features},children:p=>[(()=>{var b=Um(),_=b.firstChild,v=_.nextSibling;return v.nextSibling,g(b,()=>p.name,v),b})(),(()=>{var b=zm(),_=b.firstChild,v=_.nextSibling;return v.nextSibling,g(b,()=>Cu(p?.value),v),b})()]})),l}})}}),null),z(()=>j(a,`${i()?.hover}`)),o})()};bt(["click"]);var Hm=$("<div><h2>Skills"),wl=$("<div><br>"),qm=$("<div><h2>Starting Equipment"),Wm=$("<div><h2>Features"),Vm=$("<div><div>"),Gm=$("<div><div><h1></h1><div></div><span><h2>Proficiencies</h2><span>Armor: </span><span></span><br><span>Weapons: <!> </span><br><span>Tools:</span><br><br><span>Saving Throws: </span></span><br><br><br><br><div>"),nt=$("<br>"),Ym=$("<span>Choose: "),mr=$("<span>"),Zm=$("<h3>choice 1"),fs=$("<span>choose: "),ps=$("<span>or"),Li=$("<div><br><br><span>"),Xm=$("<h3>choice 2"),Jm=$("<h3>choice 3"),Qm=$("<h3>choice 4"),ev=$("<div><br><span>"),tv=$("<div><h3></h3><span>"),nv=$("<div>");const rv=t=>{Se(De);const[e,n]=we(),r=H(()=>ye(e().theme)),[s,i]=M([]),o=H(()=>t.currentClass().subclasses?.length>0?t.currentClass().subclasses:[]),a=H(()=>t.currentClass().classLevels.map(l=>l.features).flat());return(()=>{var l=Gm(),c=l.firstChild,u=c.firstChild,h=u.nextSibling,d=h.nextSibling,m=d.firstChild,y=m.nextSibling;y.firstChild;var p=y.nextSibling,b=p.nextSibling,_=b.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var C=_.nextSibling,k=C.nextSibling;k.firstChild;var A=k.nextSibling,S=A.nextSibling,K=S.nextSibling;K.firstChild;var T=d.nextSibling,O=T.nextSibling,N=O.nextSibling,P=N.nextSibling,Z=P.nextSibling;return g(u,()=>t.currentClass().name),g(h,f(_m,{Class:()=>t.currentClass()})),g(y,()=>t.currentClass().proficiencies.filter(U=>U.toLowerCase().includes("armor")).join(", "),null),g(p,f(G,{get when(){return!!t.currentClass().proficiencies.filter(U=>U.toLowerCase()==="shields").length},children:", Shields"})),g(_,()=>t.currentClass().proficiencies.filter(U=>U.toLowerCase().includes("weapons")).join(", "),w),g(k,f(G,{get when(){return H(()=>!t.currentClass().proficiencies.map(U=>U.toLowerCase()).includes("tools"))()&&!t.currentClass().proficiencies.map(U=>U.toLowerCase()).includes("kit")},children:"None"}),null),g(k,f(G,{get when(){return!t.currentClass().proficiencies.map(U=>U.toLowerCase()).includes("kit")},get children(){return t.currentClass().proficiencies.filter(U=>U.toLowerCase().includes("kit"))}}),null),g(k,f(G,{get when(){return!t.currentClass().proficiencies.map(U=>U.toLowerCase()).includes("tools")},get children(){return t.currentClass().proficiencies.filter(U=>U.toLowerCase().includes("tools")).join(", ")}}),null),g(K,()=>t.currentClass().savingThrows.join(", "),null),g(c,f(xn,{get class(){return`${xt.dropCard}`},get children(){return[Hm(),(()=>{var U=wl(),F=U.firstChild;return g(U,f(G,{get when(){return t.currentClass().proficiencyChoices.length>0},get children(){return f(Y,{get each(){return t.currentClass().proficiencyChoices},children:B=>[nt(),(()=>{var W=Ym();return W.firstChild,g(W,()=>B.choose,null),W})(),nt(),f(Y,{get each(){return B.choices},children:W=>[(()=>{var ee=mr();return g(ee,W),ee})(),nt()]})]})}}),F),U})()]}}),N),g(c,f(xn,{get class(){return`${xt.dropCard}`},get children(){return[qm(),(()=>{var U=wl();return U.firstChild,g(U,f(G,{get when(){return t.currentClass().startingEquipment.choice1.length>=1},get children(){return f(Y,{get each(){return t.currentClass().startingEquipment.choice1},children:(F,B)=>(()=>{var W=Li(),ee=W.firstChild,L=ee.nextSibling,R=L.nextSibling;return g(W,f(G,{get when(){return B()<1},get children(){return Zm()}}),ee),g(W,f(G,{get when(){return B()<1},get children(){var I=fs();return I.firstChild,g(I,()=>F.choose,null),I}}),L),g(R,f(Y,{get each(){return F.choices},children:(I,te)=>[nt(),(()=>{var E=mr();return g(E,()=>I.item),E})(),nt()]})),g(W,f(G,{get when(){return B()<=0},get children(){return[nt(),ps()]}}),null),W})()})}}),null),g(U,f(G,{get when(){return t.currentClass().startingEquipment.choice2},get children(){return f(Y,{get each(){return t.currentClass().startingEquipment.choice2},children:(F,B)=>(()=>{var W=Li(),ee=W.firstChild,L=ee.nextSibling,R=L.nextSibling;return g(W,f(G,{get when(){return B()<1},get children(){return Xm()}}),ee),g(W,f(G,{get when(){return B()<1},get children(){var I=fs();return I.firstChild,g(I,()=>F.choose,null),I}}),L),g(R,f(Y,{get each(){return F.choices},children:I=>[nt(),(()=>{var te=mr();return g(te,()=>I.item),te})(),nt()]})),g(W,f(G,{get when(){return B()<=0},get children(){return[nt(),ps()]}}),null),W})()})}}),null),g(U,f(G,{get when(){return t.currentClass().startingEquipment.choice3},get children(){return f(Y,{get each(){return t.currentClass().startingEquipment.choice3},children:(F,B)=>(()=>{var W=Li(),ee=W.firstChild,L=ee.nextSibling,R=L.nextSibling;return g(W,f(G,{get when(){return B()<1},get children(){return Jm()}}),ee),g(W,f(G,{get when(){return B()<1},get children(){var I=fs();return I.firstChild,g(I,()=>F.choose,null),I}}),L),g(R,f(Y,{get each(){return F.choices},children:I=>[nt(),(()=>{var te=mr();return g(te,()=>I.item),te})(),nt()]})),g(W,f(G,{get when(){return B()<=0},get children(){return[nt(),ps()]}}),null),W})()})}}),null),g(U,f(G,{get when(){return t.currentClass().startingEquipment.choice4},get children(){return f(Y,{get each(){return t.currentClass().startingEquipment.choice4},children:(F,B)=>(()=>{var W=ev(),ee=W.firstChild,L=ee.nextSibling;return g(W,f(G,{get when(){return B()<1},get children(){return Qm()}}),ee),g(W,f(G,{get when(){return B()<1},get children(){var R=fs();return R.firstChild,g(R,()=>F.choose,null),R}}),L),g(L,f(Y,{get each(){return F.choices},children:R=>[nt(),(()=>{var I=mr();return g(I,()=>R.item),I})(),nt()]})),g(W,f(G,{get when(){return B()<=0},get children(){return[nt(),ps()]}}),null),W})()})}}),null),U})()]}}),P),g(c,f(xn,{get class(){return`${xt.dropCard}`},get children(){return[Wm(),(()=>{var U=Vm(),F=U.firstChild;return g(U,f(Y,{get each(){return s()},children:(B,W)=>(()=>{var ee=nv();return g(ee,f(G,{get when(){return!!B.name.trim()||!!B.value.trim()},get children(){var L=tv(),R=L.firstChild,I=R.nextSibling;return g(R,()=>B.name),g(I,()=>Cu(JSON.parse(JSON.stringify(B.value))&&typeof JSON.parse(JSON.stringify(B.value))=="object"&&JSON.parse(JSON.stringify(B.value))!==void 0?JSON.stringify(B.value):B.value)),z(()=>j(L,`${xt.innerFlexBox}`)),L}})),z(()=>j(ee,`${xt.flexbox}`)),ee})()}),F),g(F,f(ai,{items:a,setPaginatedItems:i,itemsPerPage:[2,3,4,5,10]})),z(()=>j(F,`${xt.Center}`)),U})()]}}),Z),g(Z,f(Y,{get each(){return o()},children:U=>f(Km,{subclass:U})})),z(U=>{var F=`${r()?.primary} ${xt.CenterPage}`,B=`${xt.eachPage}`,W=`${xt.left}`,ee=`${xt.subClasses}`;return F!==U.e&&j(l,U.e=F),B!==U.t&&j(c,U.t=B),W!==U.a&&j(d,U.a=W),ee!==U.o&&j(Z,U.o=ee),U},{e:void 0,t:void 0,a:void 0,o:void 0}),l})()},sv="_view_tp4uv_1",iv={view:sv};var ov=$("<h4>At Higher Levels: "),av=$("<span>"),lv=$("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>");const cv=t=>{const e=Se(De),[{"0":n,"1":r},s]=et(t.backgroundClick,["0","1"]),i=()=>t.spell();return Eg(),f(ii,{get title(){return i().name},get width(){return e.isMobile()?"100%":"50%"},get height(){return e.isMobile()?"100%":"50%"},backgroundClick:[n,r],get children(){var o=lv(),a=o.firstChild,l=a.firstChild,c=l.nextSibling,u=c.firstChild,h=c.nextSibling,d=h.firstChild,m=d.nextSibling;m.nextSibling;var y=h.nextSibling,p=y.firstChild,b=p.nextSibling;b.nextSibling;var _=y.nextSibling;_.firstChild;var v=_.nextSibling;v.firstChild;var w=v.nextSibling;w.firstChild;var C=w.nextSibling;C.firstChild;var k=C.nextSibling;return g(l,()=>i().name),g(c,()=>Pp(i().level),u),g(c,()=>i().school,null),g(h,()=>i().castingTime,m),g(y,()=>i().range,b),g(_,()=>Rp(i()),null),g(v,()=>i().duration,null),g(w,()=>i().classes.join(", "),null),g(C,()=>i().subClasses.join(", "),null),g(k,()=>i().desc),g(a,f(G,{get when(){return!!i().higherLevel},get children(){return[ov()," ",(()=>{var A=av();return g(A,()=>i().higherLevel),A})()]}}),null),z(()=>j(o,`${iv.view}`)),o}})},uv="_searchBar_urvs3_1",$l={searchBar:uv};var hv=$("<div><input type=text><button>"),dv=$('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const Eu=t=>{const[e,n]=M(""),r=()=>{const s=e().toLowerCase(),i=t.dataSource().filter(o=>s.trim().length===0?!0:JSON.stringify(o).toLowerCase().includes(s.trim()));i.length>1?t.setResults(i):t.setResults(t.dataSource())};return t.setResults(t.dataSource()),(()=>{var s=hv(),i=s.firstChild,o=i.nextSibling;return i.$$keydown=a=>a.key==="Enter"&&r(),i.addEventListener("change",a=>n(a.currentTarget.value)),Ie(i,Oe({get value(){return e()}},t,{get class(){return`${$l.input} ${t.class??""}`}}),!1,!1),o.$$click=r,g(o,f(fv,{})),z(a=>{var l=$l.searchBar,c=t.tooltip??"Search!";return l!==a.e&&j(s,a.e=l),c!==a.t&&wt(o,"title",a.t=c),a},{e:void 0,t:void 0}),s})()},fv=t=>(()=>{var e=dv();return Ie(e,Oe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();bt(["keydown","click"]);const pv="_areaStyle_gxfg5_1",gv="_picButton_gxfg5_16",mv="_transparent_gxfg5_23",gs={areaStyle:pv,picButton:gv,transparent:mv};function vv({multiple:t=!1,accept:e=""}){const n=document.createElement("input");return n.type="file",n.accept=e,n.multiple=t,n}function bv(t){const e=[];if(!t)return e;for(const n in t){const r=+n;if(isNaN(+r))continue;const s=t[r];if(!s)continue;const i={source:URL.createObjectURL(s),name:s.name,size:s.size,file:s};e.push(i)}return e}function yv(t){const[e,n]=M([]);let r=()=>{};const s=async l=>{l.preventDefault(),l.stopPropagation();const c=l.currentTarget;let u=[];c.files&&(u=bv(c.files)),c.removeEventListener("change",s),c.remove(),n(u);try{await r(u)}catch(h){console.error(h)}};return{files:e,selectFiles:l=>{l&&(r=l);const c=vv(t||{});c.addEventListener("change",s),c.click()},removeFile:l=>{n(c=>c.filter(u=>u.name!==l))},clearFiles:()=>{n([])}}}var _v=$("<div><h1>Modal</h1><div><h2>Upload And image to parse text from");const wv=t=>{const[e,n]=et(t,["uploadType","setData"]),{files:r,selectFiles:s}=yv({accept:e.uploadType==="image"?"image/*":"file/*"}),i=Pt();return f(ii,{get width(){return i.isMobile()?"80vw":"45vw"},get height(){return i.isMobile()?"45vh":"60vh"},get children(){var o=_v(),a=o.firstChild,l=a.nextSibling;return l.firstChild,g(l,f(he,{onClick:c=>{s(([u])=>{t.snackbar&&Xn(t.snackbar.start),ce.toObservable(u.file.arrayBuffer()).pipe(de(1),Be(h=>{const d=u.name.split(".")[u.name.split(".").length-1],m=new Uint8Array(h),y=new Blob([m],{type:`image/${d}`});t.setData(URL.createObjectURL(y)),t.snackbar&&Xn(t.snackbar.success)})).subscribe({error:h=>{t.snackbar&&Xn({...t.snackbar.error})}})})},children:"Upload"}),null),o}})};var $v=$("<span>"),Sv=$("<textarea>");const Pi=t=>{let e;const[n,r]=et(t,["buttons","minSize","text","setText","class","tooltip","transparent","picToTextEnabled"]),[s,i]=M(!1),[o,a]=M(""),l=ua();function c(){if(e){e.style.height="auto";const u=n.minSize?.height??100,h=e.scrollHeight<u?u:e.scrollHeight;e.style.height=`${h}px`,e.setAttribute("style","height:"+h+"px;overflow-y:hidden;")}}return Xt(()=>{c(),l.setFieldType("textarea")}),z(()=>{c(),n.text()}),z(()=>{o()&&(Xn({message:"Parsing text from image...",closeTimeout:2e3}),ly(o(),n.setText,()=>{c(),Xn({message:"Text parsed from image successfully.",closeTimeout:2e3})}))}),[f(G,{get when(){return n.picToTextEnabled},get children(){var u=$v();return u.style.setProperty("width","inherit"),u.style.setProperty("font-size","1em"),g(u,f(he,{get styleType(){return n.buttons?.styleType??"accent"},get class(){return`${gs.picButton}`},onClick:h=>i(d=>!d),get children(){return[f(uy,{width:"30px",height:"30px",style:{fill:"white"}}),f(G,{get when(){return s()},get children(){return f(wv,{setData:a,uploadType:"image"})}})]}})),z(()=>j(u,`${n.transparent?gs.transparent:""}`)),u}}),(()=>{var u=Sv();return cn(h=>{e=h,c()},u),Ie(u,Oe(r,{onFocus:h=>{l.getName&&(l.setFocused(!0),l.setTextInside(!1))},onBlur:h=>{l.setFocused&&l.setFocused(!1)},get placeholder(){return H(()=>!!(l.getName&&l.getTextInside()))()?l.getName():t.placeholder},get class(){return`${gs.areaStyle} ${n.class??""} ${n.transparent?gs.transparent:""}`},get value(){return n.text()},onInput:h=>{n.setText(h.currentTarget.value),c(),l.getName&&h.currentTarget.value&&(l.setValue(h.currentTarget.value),l.setTextInside(!1),l.setFocused(!0))},get title(){return n.tooltip}}),!1,!1),u})()]};function ha(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Mn=ha();function Au(t){Mn=t}const Lu=/[&<>"']/,kv=new RegExp(Lu.source,"g"),Pu=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Cv=new RegExp(Pu.source,"g"),xv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sl=t=>xv[t];function ht(t,e){if(e){if(Lu.test(t))return t.replace(kv,Sl)}else if(Pu.test(t))return t.replace(Cv,Sl);return t}const Tv=/(^|[^\[])\^/g;function Ce(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Tv,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}function kl(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Mr={exec:()=>null};function Cl(t,e){const n=t.replace(/\|/g,(i,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=n.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function vr(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r;){const i=t.charAt(r-s-1);if(i===e&&!n)s++;else if(i!==e&&n)s++;else break}return t.slice(0,r-s)}function Ev(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function xl(t,e,n,r){const s=e.href,i=e.title?ht(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:n,href:s,title:i,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:n,href:s,title:i,text:ht(o)}}function Av(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(s=>{const i=s.match(/^\s+/);if(i===null)return s;const[o]=i;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}class Ys{options;rules;lexer;constructor(e){this.options=e||Mn}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:vr(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=Av(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const s=vr(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:vr(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=vr(n[0],`
`).split(`
`),s="",i="";const o=[];for(;r.length>0;){let a=!1;const l=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),h=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}
${u}`:u,i=i?`${i}
${h}`:h;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=d,r.length===0)break;const m=o[o.length-1];if(m?.type==="code")break;if(m?.type==="blockquote"){const y=m,p=y.raw+`
`+r.join(`
`),b=this.blockquote(p);o[o.length-1]=b,s=s.substring(0,s.length-y.raw.length)+b.raw,i=i.substring(0,i.length-y.text.length)+b.text;break}else if(m?.type==="list"){const y=m,p=y.raw+`
`+r.join(`
`),b=this.list(p);o[o.length-1]=b,s=s.substring(0,s.length-m.raw.length)+b.raw,i=i.substring(0,i.length-y.raw.length)+b.raw,r=p.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const s=r.length>1,i={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,c="",u="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;c=n[0],e=e.substring(c.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),d=e.split(`
`,1)[0],m=!h.trim(),y=0;if(this.options.pedantic?(y=2,u=h.trimStart()):m?y=n[1].length+1:(y=n[2].search(/[^ ]/),y=y>4?1:y,u=h.slice(y),y+=n[1].length),m&&/^ *$/.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),l=!0),!l){const _=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,y-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:\`\`\`|~~~)`),C=new RegExp(`^ {0,${Math.min(3,y-1)}}#`);for(;e;){const k=e.split(`
`,1)[0];if(d=k,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),w.test(d)||C.test(d)||_.test(d)||v.test(e))break;if(d.search(/[^ ]/)>=y||!d.trim())u+=`
`+d.slice(y);else{if(m||h.search(/[^ ]/)>=4||w.test(h)||C.test(h)||v.test(h))break;u+=`
`+d}!m&&!d.trim()&&(m=!0),c+=k+`
`,e=e.substring(k.length+1),h=d.slice(y)}}i.loose||(a?i.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let p=null,b;this.options.gfm&&(p=/^\[[ xX]\] /.exec(u),p&&(b=p[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:c,task:!!p,checked:b,loose:!1,text:u,tokens:[]}),i.raw+=c}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:i}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const r=Cl(n[1]),s=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(const a of i)o.rows.push(Cl(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:ht(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=vr(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=Ev(n[2],"()");if(o>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let s=n[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],i=o[3])}else i=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),xl(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const s=(r[2]||r[1]).replace(/\s+/g," "),i=n[s.toLowerCase()];if(!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return xl(r,i,r[0],this.lexer)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...s[0]].length-1;let a,l,c=o,u=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);(s=h.exec(n))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const d=[...s[0]][0].length,m=e.slice(0,o+s.index+d+l);if(Math.min(o,l)%2){const p=m.slice(1,-1);return{type:"em",raw:m,text:p,tokens:this.lexer.inlineTokens(p)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const s=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return s&&i&&(r=r.substring(1,r.length-1)),r=ht(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=ht(n[1]),s="mailto:"+r):(r=ht(n[1]),s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let r,s;if(n[2]==="@")r=ht(n[0]),s="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=ht(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=ht(n[0]),{type:"text",raw:n[0],text:r}}}}const Lv=/^(?: *(?:\n|$))+/,Pv=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Rv=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Yr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ov=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ru=/(?:[*+-]|\d{1,9}[.)])/,Ou=Ce(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ru).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),da=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Iv=/^[^\n]+/,fa=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Dv=Ce(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",fa).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Mv=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ru).getRegex(),li="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",pa=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Nv=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",pa).replace("tag",li).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Iu=Ce(da).replace("hr",Yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex(),Bv=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Iu).getRegex(),ga={blockquote:Bv,code:Pv,def:Dv,fences:Rv,heading:Ov,hr:Yr,html:Nv,lheading:Ou,list:Mv,newline:Lv,paragraph:Iu,table:Mr,text:Iv},Tl=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex(),Fv={...ga,table:Tl,paragraph:Ce(da).replace("hr",Yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Tl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex()},jv={...ga,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",pa).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(da).replace("hr",Yr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ou).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Du=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Uv=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Mu=/^( {2,}|\\)\n(?!\s*$)/,zv=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zr="\\p{P}\\p{S}",Kv=Ce(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Zr).getRegex(),Hv=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,qv=Ce(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Zr).getRegex(),Wv=Ce("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Zr).getRegex(),Vv=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Zr).getRegex(),Gv=Ce(/\\([punct])/,"gu").replace(/punct/g,Zr).getRegex(),Yv=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zv=Ce(pa).replace("(?:-->|$)","-->").getRegex(),Xv=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zv).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Zs=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jv=Ce(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Zs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Nu=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",Zs).replace("ref",fa).getRegex(),Bu=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",fa).getRegex(),Qv=Ce("reflink|nolink(?!\\()","g").replace("reflink",Nu).replace("nolink",Bu).getRegex(),ma={_backpedal:Mr,anyPunctuation:Gv,autolink:Yv,blockSkip:Hv,br:Mu,code:Uv,del:Mr,emStrongLDelim:qv,emStrongRDelimAst:Wv,emStrongRDelimUnd:Vv,escape:Du,link:Jv,nolink:Bu,punctuation:Kv,reflink:Nu,reflinkSearch:Qv,tag:Xv,text:zv,url:Mr},eb={...ma,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",Zs).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Zs).getRegex()},Io={...ma,escape:Ce(Du).replace("])","~|])").getRegex(),url:Ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},tb={...Io,br:Ce(Mu).replace("{2,}","*").getRegex(),text:Ce(Io.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ms={normal:ga,gfm:Fv,pedantic:jv},br={normal:ma,gfm:Io,breaks:tb,pedantic:eb};class Et{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Mn,this.options.tokenizer=this.options.tokenizer||new Ys,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:ms.normal,inline:br.normal};this.options.pedantic?(n.block=ms.pedantic,n.inline=br.pedantic):this.options.gfm&&(n.block=ms.gfm,this.options.breaks?n.inline=br.breaks:n.inline=br.gfm),this.tokenizer.rules=n}static get rules(){return{block:ms,inline:br}}static lex(e,n){return new Et(n).lex(e)}static lexInline(e,n){return new Et(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let s,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){i=n[n.length-1],r&&i?.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s),r=o.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,s,i,o=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),n.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let d;this.options.extensions.startInline.forEach(m=>{d=m.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(i=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class Xs{options;parser;constructor(e){this.options=e||Mn}space(e){return""}code({text:e,lang:n,escaped:r}){const s=(n||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+`
`;return s?'<pre><code class="language-'+ht(s)+'">'+(r?i:ht(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:ht(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let s="";for(let a=0;a<e.items.length;a++){const l=e.items[a];s+=this.listitem(l)}const i=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+s+"</"+i+`>
`}listitem(e){let n="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);n+=this.tablerow({text:r});let s="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const s=this.parser.parseInline(r),i=kl(e);if(i===null)return s;e=i;let o='<a href="'+e+'"';return n&&(o+=' title="'+n+'"'),o+=">"+s+"</a>",o}image({href:e,title:n,text:r}){const s=kl(e);if(s===null)return r;e=s;let i=`<img src="${e}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class va{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class At{options;renderer;textRenderer;constructor(e){this.options=e||Mn,this.options.renderer=this.options.renderer||new Xs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new va}static parse(e,n){return new At(n).parse(e)}static parseInline(e,n){return new At(n).parseInline(e)}parse(e,n=!0){let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=i,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}const o=i;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;s+1<e.length&&e[s+1].type==="text";)a=e[++s],l+=`
`+this.renderer.text(a);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):r+=l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,n){n=n||this.renderer;let r="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=a||"";continue}}const o=i;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}}class Os{options;constructor(e){this.options=e||Mn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class nb{defaults=ha();options=this.setOptions;parse=this.parseMarkdown(Et.lex,At.parse);parseInline=this.parseMarkdown(Et.lexInline,At.parseInline);Parser=At;Renderer=Xs;TextRenderer=va;Lexer=Et;Tokenizer=Ys;Hooks=Os;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const i=s;for(const o of i.header)r=r.concat(this.walkTokens(o.tokens,n));for(const o of i.rows)for(const a of o)r=r.concat(this.walkTokens(a.tokens,n));break}case"list":{const i=s;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=s;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{const a=i[o].flat(1/0);r=r.concat(this.walkTokens(a,n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=n.renderers[i.name];o?n.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[i.level];o?o.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),s.extensions=n),r.renderer){const i=this.defaults.renderer||new Xs(this.defaults);for(const o in r.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=r.renderer[a],c=i[a];i[a]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}s.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Ys(this.defaults);for(const o in r.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],c=i[a];i[a]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new Os;for(const o in r.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.hooks[a],c=i[a];Os.passThroughHooks.has(o)?i[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(d=>c.call(i,d));const h=l.call(i,u);return c.call(i,h)}:i[a]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,o=r.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Et.lex(e,n??this.defaults)}parser(e,n){return At.parse(e,n??this.defaults)}parseMarkdown(e,n){return(s,i)=>{const o={...i},a={...this.defaults,...o},l=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&o.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(s):s).then(c=>e(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>n(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(l);try{a.hooks&&(s=a.hooks.preprocess(s));let c=e(s,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let u=n(c,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(c){return l(c)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+ht(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const Ln=new nb;function $e(t,e){return Ln.parse(t,e)}$e.options=$e.setOptions=function(t){return Ln.setOptions(t),$e.defaults=Ln.defaults,Au($e.defaults),$e};$e.getDefaults=ha;$e.defaults=Mn;$e.use=function(...t){return Ln.use(...t),$e.defaults=Ln.defaults,Au($e.defaults),$e};$e.walkTokens=function(t,e){return Ln.walkTokens(t,e)};$e.parseInline=Ln.parseInline;$e.Parser=At;$e.parser=At.parse;$e.Renderer=Xs;$e.TextRenderer=va;$e.Lexer=Et;$e.lexer=Et.lex;$e.Tokenizer=Ys;$e.Hooks=Os;$e.parse=$e;$e.options;$e.setOptions;$e.use;$e.walkTokens;$e.parseInline;At.parse;Et.lex;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:Fu,setPrototypeOf:El,isFrozen:rb,getPrototypeOf:sb,getOwnPropertyDescriptor:ib}=Object;let{freeze:at,seal:mt,create:ju}=Object,{apply:Do,construct:Mo}=typeof Reflect<"u"&&Reflect;at||(at=function(e){return e});mt||(mt=function(e){return e});Do||(Do=function(e,n,r){return e.apply(n,r)});Mo||(Mo=function(e,n){return new e(...n)});const vs=pt(Array.prototype.forEach),Al=pt(Array.prototype.pop),yr=pt(Array.prototype.push),Is=pt(String.prototype.toLowerCase),Ri=pt(String.prototype.toString),Ll=pt(String.prototype.match),_r=pt(String.prototype.replace),ob=pt(String.prototype.indexOf),ab=pt(String.prototype.trim),_t=pt(Object.prototype.hasOwnProperty),rt=pt(RegExp.prototype.test),wr=lb(TypeError);function pt(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Do(t,e,r)}}function lb(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Mo(t,n)}}function pe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Is;El&&El(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(rb(e)||(e[r]=i),s=i)}t[s]=!0}return t}function cb(t){for(let e=0;e<t.length;e++)_t(t,e)||(t[e]=null);return t}function _n(t){const e=ju(null);for(const[n,r]of Fu(t))_t(t,n)&&(Array.isArray(r)?e[n]=cb(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=_n(r):e[n]=r);return e}function $r(t,e){for(;t!==null;){const r=ib(t,e);if(r){if(r.get)return pt(r.get);if(typeof r.value=="function")return pt(r.value)}t=sb(t)}function n(){return null}return n}const Pl=at(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Oi=at(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ii=at(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ub=at(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Di=at(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hb=at(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Rl=at(["#text"]),Ol=at(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mi=at(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Il=at(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bs=at(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),db=mt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fb=mt(/<%[\w\W]*|[\w\W]*%>/gm),pb=mt(/\${[\w\W]*}/gm),gb=mt(/^data-[\-\w.\u00B7-\uFFFF]/),mb=mt(/^aria-[\-\w]+$/),Uu=mt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vb=mt(/^(?:\w+script|data):/i),bb=mt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zu=mt(/^html$/i),yb=mt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Dl=Object.freeze({__proto__:null,MUSTACHE_EXPR:db,ERB_EXPR:fb,TMPLIT_EXPR:pb,DATA_ATTR:gb,ARIA_ATTR:mb,IS_ALLOWED_URI:Uu,IS_SCRIPT_OR_DATA:vb,ATTR_WHITESPACE:bb,DOCTYPE_NAME:zu,CUSTOM_ELEMENT:yb});const Sr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},_b=function(){return typeof window>"u"?null:window},wb=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Ku(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_b();const e=ne=>Ku(ne);if(e.version="3.1.6",e.removed=[],!t||!t.document||t.document.nodeType!==Sr.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:m}=t,y=l.prototype,p=$r(y,"cloneNode"),b=$r(y,"remove"),_=$r(y,"nextSibling"),v=$r(y,"childNodes"),w=$r(y,"parentNode");if(typeof o=="function"){const ne=n.createElement("template");ne.content&&ne.content.ownerDocument&&(n=ne.content.ownerDocument)}let C,k="";const{implementation:A,createNodeIterator:S,createDocumentFragment:K,getElementsByTagName:T}=n,{importNode:O}=r;let N={};e.isSupported=typeof Fu=="function"&&typeof w=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:Z,TMPLIT_EXPR:U,DATA_ATTR:F,ARIA_ATTR:B,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:ee,CUSTOM_ELEMENT:L}=Dl;let{IS_ALLOWED_URI:R}=Dl,I=null;const te=pe({},[...Pl,...Oi,...Ii,...Di,...Rl]);let E=null;const D=pe({},[...Ol,...Mi,...Il,...bs]);let q=Object.seal(ju(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),re=null,ie=null,X=!0,oe=!0,ae=!1,ue=!0,fe=!1,ge=!0,Me=!1,Rt=!1,dr=!1,Ot=!1,pn=!1,It=!1,Xr=!0,He=!1;const Ge="user-content-";let qe=!0,Jt=!1,Dt={},Nn=null;const Sa=pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ka=null;const Ca=pe({},["audio","video","img","source","image","track"]);let ci=null;const xa=pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jr="http://www.w3.org/1998/Math/MathML",Qr="http://www.w3.org/2000/svg",Mt="http://www.w3.org/1999/xhtml";let Bn=Mt,ui=!1,hi=null;const lh=pe({},[Jr,Qr,Mt],Ri);let fr=null;const ch=["application/xhtml+xml","text/html"],uh="text/html";let Ke=null,Fn=null;const hh=n.createElement("form"),Ta=function(x){return x instanceof RegExp||x instanceof Function},di=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Fn&&Fn===x)){if((!x||typeof x!="object")&&(x={}),x=_n(x),fr=ch.indexOf(x.PARSER_MEDIA_TYPE)===-1?uh:x.PARSER_MEDIA_TYPE,Ke=fr==="application/xhtml+xml"?Ri:Is,I=_t(x,"ALLOWED_TAGS")?pe({},x.ALLOWED_TAGS,Ke):te,E=_t(x,"ALLOWED_ATTR")?pe({},x.ALLOWED_ATTR,Ke):D,hi=_t(x,"ALLOWED_NAMESPACES")?pe({},x.ALLOWED_NAMESPACES,Ri):lh,ci=_t(x,"ADD_URI_SAFE_ATTR")?pe(_n(xa),x.ADD_URI_SAFE_ATTR,Ke):xa,ka=_t(x,"ADD_DATA_URI_TAGS")?pe(_n(Ca),x.ADD_DATA_URI_TAGS,Ke):Ca,Nn=_t(x,"FORBID_CONTENTS")?pe({},x.FORBID_CONTENTS,Ke):Sa,re=_t(x,"FORBID_TAGS")?pe({},x.FORBID_TAGS,Ke):{},ie=_t(x,"FORBID_ATTR")?pe({},x.FORBID_ATTR,Ke):{},Dt=_t(x,"USE_PROFILES")?x.USE_PROFILES:!1,X=x.ALLOW_ARIA_ATTR!==!1,oe=x.ALLOW_DATA_ATTR!==!1,ae=x.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=x.SAFE_FOR_TEMPLATES||!1,ge=x.SAFE_FOR_XML!==!1,Me=x.WHOLE_DOCUMENT||!1,Ot=x.RETURN_DOM||!1,pn=x.RETURN_DOM_FRAGMENT||!1,It=x.RETURN_TRUSTED_TYPE||!1,dr=x.FORCE_BODY||!1,Xr=x.SANITIZE_DOM!==!1,He=x.SANITIZE_NAMED_PROPS||!1,qe=x.KEEP_CONTENT!==!1,Jt=x.IN_PLACE||!1,R=x.ALLOWED_URI_REGEXP||Uu,Bn=x.NAMESPACE||Mt,q=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&Ta(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&Ta(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(oe=!1),pn&&(Ot=!0),Dt&&(I=pe({},Rl),E=[],Dt.html===!0&&(pe(I,Pl),pe(E,Ol)),Dt.svg===!0&&(pe(I,Oi),pe(E,Mi),pe(E,bs)),Dt.svgFilters===!0&&(pe(I,Ii),pe(E,Mi),pe(E,bs)),Dt.mathMl===!0&&(pe(I,Di),pe(E,Il),pe(E,bs))),x.ADD_TAGS&&(I===te&&(I=_n(I)),pe(I,x.ADD_TAGS,Ke)),x.ADD_ATTR&&(E===D&&(E=_n(E)),pe(E,x.ADD_ATTR,Ke)),x.ADD_URI_SAFE_ATTR&&pe(ci,x.ADD_URI_SAFE_ATTR,Ke),x.FORBID_CONTENTS&&(Nn===Sa&&(Nn=_n(Nn)),pe(Nn,x.FORBID_CONTENTS,Ke)),qe&&(I["#text"]=!0),Me&&pe(I,["html","head","body"]),I.table&&(pe(I,["tbody"]),delete re.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw wr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw wr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=x.TRUSTED_TYPES_POLICY,k=C.createHTML("")}else C===void 0&&(C=wb(m,s)),C!==null&&typeof k=="string"&&(k=C.createHTML(""));at&&at(x),Fn=x}},Ea=pe({},["mi","mo","mn","ms","mtext"]),Aa=pe({},["foreignobject","annotation-xml"]),dh=pe({},["title","style","font","a","script"]),La=pe({},[...Oi,...Ii,...ub]),Pa=pe({},[...Di,...hb]),fh=function(x){let V=w(x);(!V||!V.tagName)&&(V={namespaceURI:Bn,tagName:"template"});const Q=Is(x.tagName),Te=Is(V.tagName);return hi[x.namespaceURI]?x.namespaceURI===Qr?V.namespaceURI===Mt?Q==="svg":V.namespaceURI===Jr?Q==="svg"&&(Te==="annotation-xml"||Ea[Te]):!!La[Q]:x.namespaceURI===Jr?V.namespaceURI===Mt?Q==="math":V.namespaceURI===Qr?Q==="math"&&Aa[Te]:!!Pa[Q]:x.namespaceURI===Mt?V.namespaceURI===Qr&&!Aa[Te]||V.namespaceURI===Jr&&!Ea[Te]?!1:!Pa[Q]&&(dh[Q]||!La[Q]):!!(fr==="application/xhtml+xml"&&hi[x.namespaceURI]):!1},kt=function(x){yr(e.removed,{element:x});try{w(x).removeChild(x)}catch{b(x)}},es=function(x,V){try{yr(e.removed,{attribute:V.getAttributeNode(x),from:V})}catch{yr(e.removed,{attribute:null,from:V})}if(V.removeAttribute(x),x==="is"&&!E[x])if(Ot||pn)try{kt(V)}catch{}else try{V.setAttribute(x,"")}catch{}},Ra=function(x){let V=null,Q=null;if(dr)x="<remove></remove>"+x;else{const We=Ll(x,/^[\r\n\t ]+/);Q=We&&We[0]}fr==="application/xhtml+xml"&&Bn===Mt&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const Te=C?C.createHTML(x):x;if(Bn===Mt)try{V=new d().parseFromString(Te,fr)}catch{}if(!V||!V.documentElement){V=A.createDocument(Bn,"template",null);try{V.documentElement.innerHTML=ui?k:Te}catch{}}const Ye=V.body||V.documentElement;return x&&Q&&Ye.insertBefore(n.createTextNode(Q),Ye.childNodes[0]||null),Bn===Mt?T.call(V,Me?"html":"body")[0]:Me?V.documentElement:Ye},Oa=function(x){return S.call(x.ownerDocument||x,x,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ia=function(x){return x instanceof h&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof u)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},Da=function(x){return typeof a=="function"&&x instanceof a},Nt=function(x,V,Q){N[x]&&vs(N[x],Te=>{Te.call(e,V,Q,Fn)})},Ma=function(x){let V=null;if(Nt("beforeSanitizeElements",x,null),Ia(x))return kt(x),!0;const Q=Ke(x.nodeName);if(Nt("uponSanitizeElement",x,{tagName:Q,allowedTags:I}),x.hasChildNodes()&&!Da(x.firstElementChild)&&rt(/<[/\w]/g,x.innerHTML)&&rt(/<[/\w]/g,x.textContent)||x.nodeType===Sr.progressingInstruction||ge&&x.nodeType===Sr.comment&&rt(/<[/\w]/g,x.data))return kt(x),!0;if(!I[Q]||re[Q]){if(!re[Q]&&Ba(Q)&&(q.tagNameCheck instanceof RegExp&&rt(q.tagNameCheck,Q)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Q)))return!1;if(qe&&!Nn[Q]){const Te=w(x)||x.parentNode,Ye=v(x)||x.childNodes;if(Ye&&Te){const We=Ye.length;for(let lt=We-1;lt>=0;--lt){const Ct=p(Ye[lt],!0);Ct.__removalCount=(x.__removalCount||0)+1,Te.insertBefore(Ct,_(x))}}}return kt(x),!0}return x instanceof l&&!fh(x)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&rt(/<\/no(script|embed|frames)/i,x.innerHTML)?(kt(x),!0):(fe&&x.nodeType===Sr.text&&(V=x.textContent,vs([P,Z,U],Te=>{V=_r(V,Te," ")}),x.textContent!==V&&(yr(e.removed,{element:x.cloneNode()}),x.textContent=V)),Nt("afterSanitizeElements",x,null),!1)},Na=function(x,V,Q){if(Xr&&(V==="id"||V==="name")&&(Q in n||Q in hh))return!1;if(!(oe&&!ie[V]&&rt(F,V))){if(!(X&&rt(B,V))){if(!E[V]||ie[V]){if(!(Ba(x)&&(q.tagNameCheck instanceof RegExp&&rt(q.tagNameCheck,x)||q.tagNameCheck instanceof Function&&q.tagNameCheck(x))&&(q.attributeNameCheck instanceof RegExp&&rt(q.attributeNameCheck,V)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(V))||V==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&rt(q.tagNameCheck,Q)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Q))))return!1}else if(!ci[V]){if(!rt(R,_r(Q,ee,""))){if(!((V==="src"||V==="xlink:href"||V==="href")&&x!=="script"&&ob(Q,"data:")===0&&ka[x])){if(!(ae&&!rt(W,_r(Q,ee,"")))){if(Q)return!1}}}}}}return!0},Ba=function(x){return x!=="annotation-xml"&&Ll(x,L)},Fa=function(x){Nt("beforeSanitizeAttributes",x,null);const{attributes:V}=x;if(!V)return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:E};let Te=V.length;for(;Te--;){const Ye=V[Te],{name:We,namespaceURI:lt,value:Ct}=Ye,pr=Ke(We);let tt=We==="value"?Ct:ab(Ct);if(Q.attrName=pr,Q.attrValue=tt,Q.keepAttr=!0,Q.forceKeepAttr=void 0,Nt("uponSanitizeAttribute",x,Q),tt=Q.attrValue,ge&&rt(/((--!?|])>)|<\/(style|title)/i,tt)){es(We,x);continue}if(Q.forceKeepAttr||(es(We,x),!Q.keepAttr))continue;if(!ue&&rt(/\/>/i,tt)){es(We,x);continue}fe&&vs([P,Z,U],Ua=>{tt=_r(tt,Ua," ")});const ja=Ke(x.nodeName);if(Na(ja,pr,tt)){if(He&&(pr==="id"||pr==="name")&&(es(We,x),tt=Ge+tt),C&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!lt)switch(m.getAttributeType(ja,pr)){case"TrustedHTML":{tt=C.createHTML(tt);break}case"TrustedScriptURL":{tt=C.createScriptURL(tt);break}}try{lt?x.setAttributeNS(lt,We,tt):x.setAttribute(We,tt),Ia(x)?kt(x):Al(e.removed)}catch{}}}Nt("afterSanitizeAttributes",x,null)},ph=function ne(x){let V=null;const Q=Oa(x);for(Nt("beforeSanitizeShadowDOM",x,null);V=Q.nextNode();)Nt("uponSanitizeShadowNode",V,null),!Ma(V)&&(V.content instanceof i&&ne(V.content),Fa(V));Nt("afterSanitizeShadowDOM",x,null)};return e.sanitize=function(ne){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,Q=null,Te=null,Ye=null;if(ui=!ne,ui&&(ne="<!-->"),typeof ne!="string"&&!Da(ne))if(typeof ne.toString=="function"){if(ne=ne.toString(),typeof ne!="string")throw wr("dirty is not a string, aborting")}else throw wr("toString is not a function");if(!e.isSupported)return ne;if(Rt||di(x),e.removed=[],typeof ne=="string"&&(Jt=!1),Jt){if(ne.nodeName){const Ct=Ke(ne.nodeName);if(!I[Ct]||re[Ct])throw wr("root node is forbidden and cannot be sanitized in-place")}}else if(ne instanceof a)V=Ra("<!---->"),Q=V.ownerDocument.importNode(ne,!0),Q.nodeType===Sr.element&&Q.nodeName==="BODY"||Q.nodeName==="HTML"?V=Q:V.appendChild(Q);else{if(!Ot&&!fe&&!Me&&ne.indexOf("<")===-1)return C&&It?C.createHTML(ne):ne;if(V=Ra(ne),!V)return Ot?null:It?k:""}V&&dr&&kt(V.firstChild);const We=Oa(Jt?ne:V);for(;Te=We.nextNode();)Ma(Te)||(Te.content instanceof i&&ph(Te.content),Fa(Te));if(Jt)return ne;if(Ot){if(pn)for(Ye=K.call(V.ownerDocument);V.firstChild;)Ye.appendChild(V.firstChild);else Ye=V;return(E.shadowroot||E.shadowrootmode)&&(Ye=O.call(r,Ye,!0)),Ye}let lt=Me?V.outerHTML:V.innerHTML;return Me&&I["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&rt(zu,V.ownerDocument.doctype.name)&&(lt="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+lt),fe&&vs([P,Z,U],Ct=>{lt=_r(lt,Ct," ")}),C&&It?C.createHTML(lt):lt},e.setConfig=function(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};di(ne),Rt=!0},e.clearConfig=function(){Fn=null,Rt=!1},e.isValidAttribute=function(ne,x,V){Fn||di({});const Q=Ke(ne),Te=Ke(x);return Na(Q,Te,V)},e.addHook=function(ne,x){typeof x=="function"&&(N[ne]=N[ne]||[],yr(N[ne],x))},e.removeHook=function(ne){if(N[ne])return Al(N[ne])},e.removeHooks=function(ne){N[ne]&&(N[ne]=[])},e.removeAllHooks=function(){N={}},e}var $b=Ku();const Sb="_markStyle_16k43_1",kb={markStyle:Sb};var Cb=$("<div>");const xb=t=>{const[e,n]=et(t,["text","tooltip","class"]),[r,s]=M();return(()=>{var i=Cb();return cn(s,i),Ie(i,Oe({get class(){return`${kb.markStyle} ${e.class??""}`},get innerHTML(){return $b.sanitize($e.parse(e.text(),{async:!1,gfm:!0}))},get title(){return e.tooltip}},n),!1,!1),i})()};class Hu extends Vt{spells;classes;races;backgrounds;items;feats;constructor(e){super(e),this.version(1).stores({spells:"name",classes:"name",races:"name",backgrounds:"name",items:"name",feats:"name"})}}const be=new Hu("homebrew");class Tb{classes;setClasses;homebrewClasses$=ce.toObservable(be.classes.toArray());items;setItems;homebrewItems$=ce.toObservable(be.items.toArray());feats;setFeats;homebrewFeats$=ce.toObservable(be.feats.toArray());spells;setSpells;homebrewSpells$=ce.toObservable(be.spells.toArray());backgrounds;setBackgrounds;homebrewBackgrounds$=ce.toObservable(be.backgrounds.toArray());races;setRaces;homebrewRaces$=ce.toObservable(be.races.toArray());constructor(e=[],n=[],r=[],s=[],i=[],o=[]){[this.classes,this.setClasses]=M(e),[this.items,this.setItems]=M(n),[this.feats,this.setFeats]=M(r),[this.spells,this.setSpells]=M(s),[this.backgrounds,this.setBackgrounds]=M(i),[this.races,this.setRaces]=M(o),this.homebrewClasses$.pipe(de(1),Be(a=>this.setClasses(l=>[...l,...a]))).subscribe(),this.homebrewItems$.pipe(de(1),Be(a=>this.setItems(l=>[...l,...a]))).subscribe(),this.homebrewFeats$.pipe(de(1),Be(a=>this.setFeats(l=>[...l,...a]))).subscribe(),this.homebrewSpells$.pipe(de(1),Be(a=>this.setSpells(l=>[...l,...a]))).subscribe(),this.homebrewBackgrounds$.pipe(de(1),Be(a=>this.setBackgrounds(l=>[...l,...a]))).subscribe(),this.homebrewRaces$.pipe(de(1),Be(a=>this.setRaces(l=>[...l,...a]))).subscribe()}addClass=e=>{this.classes().findIndex(n=>n.name===e.name)===-1&&(this.setClasses(n=>[...n,e]),this.addClassToDB(e).subscribe())};addClassToDB=e=>ce.toObservable(be.classes.add(e)).pipe(de(1));updateClass(e){const n=this.classes().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.classes();r[n]=e,this.setClasses([...r])}updateClassesInDB=()=>{this.homebrewClasses$.pipe(de(1),Le(e=>ce.toObservable(be.classes.bulkPut(this.classes())))).subscribe()};removeClass=e=>{const n=this.classes().findIndex(s=>s.name===e);if(n===-1)return;const r=this.classes();r.splice(n,1),this.setClasses([...r]),ce.toObservable(be.classes.clear()).pipe(de(1),Le(()=>ce.toObservable(be.classes.bulkAdd(this.classes())))).subscribe()};addItem=e=>{this.items().findIndex(n=>n.name===e.name)===-1&&(this.setItems(n=>[...n,e]),this.addItemToDB(e).subscribe())};addItemToDB=e=>ce.toObservable(be.items.add(e)).pipe(de(1));updateItem=e=>{const n=this.items().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.items();r[n]=e,this.setItems([...r])};updateItemsInDB=()=>{this.homebrewItems$.pipe(de(1),Le(e=>ce.toObservable(be.items.bulkPut(this.items())))).subscribe()};removeItem=e=>{const n=this.items().findIndex(s=>s.name===e);if(n===-1)return;const r=this.items();r.splice(n,1),this.setItems([...r]),ce.toObservable(be.items.clear()).pipe(de(1),Le(()=>ce.toObservable(be.items.bulkAdd(this.items())))).subscribe()};addFeat=e=>{this.feats().findIndex(n=>n.name===e.name)===-1&&(this.setFeats(n=>[...n,e]),this.addFeatToDB(e).subscribe())};addFeatToDB=e=>ce.toObservable(be.feats.add(e)).pipe(de(1));updateFeat=e=>{const n=this.feats().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.feats();r[n]=e,this.setFeats([...r])};updateFeatsInDB=()=>{this.homebrewFeats$.pipe(de(1),Le(e=>ce.toObservable(be.feats.bulkPut(this.feats())))).subscribe()};removeFeat=e=>{const n=this.feats().findIndex(s=>s.name===e);if(n===-1)return;const r=this.feats();r.splice(n,1),this.setFeats([...r]),ce.toObservable(be.feats.clear()).pipe(de(1),Le(()=>ce.toObservable(be.feats.bulkAdd(this.feats())))).subscribe()};addSpell=e=>{this.spells().findIndex(n=>n.name===e.name)===-1&&(this.setSpells(n=>[...n,e]),this.addSpellToDB(e).subscribe())};addSpellToDB=e=>ce.toObservable(be.spells.add(e)).pipe(de(1));updateSpell=e=>{const n=this.spells().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.spells();r[n]=e,this.setSpells([...r])};updateSpellsInDB=()=>{this.homebrewSpells$.pipe(de(1),Le(e=>ce.toObservable(be.spells.bulkPut(this.spells())))).subscribe()};removeSpell=e=>{const n=this.spells().findIndex(s=>s.name===e);if(n===-1)return;const r=this.spells();r.splice(n,1),this.setSpells([...r]),ce.toObservable(be.spells.clear()).pipe(de(1),Le(()=>ce.toObservable(be.spells.bulkAdd(this.spells())))).subscribe()};addBackground=e=>{this.backgrounds().findIndex(n=>n.name===e.name)===-1&&(this.setBackgrounds(n=>[...n,e]),this.addBackgroundToDB(e).subscribe())};addBackgroundToDB=e=>ce.toObservable(be.backgrounds.add(e)).pipe(de(1));updateBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.backgrounds();r[n]=e,this.setBackgrounds([...r]),this.updateBackgroundsInDB()};updateBackgroundsInDB=()=>{this.homebrewBackgrounds$.pipe(de(1),Le(e=>ce.toObservable(be.backgrounds.bulkPut(this.backgrounds())))).subscribe()};removeBackground=e=>{const n=this.backgrounds().findIndex(s=>s.name===e);if(n===-1)return;const r=this.backgrounds();r.splice(n,1),this.setBackgrounds([...r]),ce.toObservable(be.backgrounds.clear()).pipe(de(1),Le(()=>ce.toObservable(be.backgrounds.bulkAdd(this.backgrounds())))).subscribe()};addRace=e=>{this.races().findIndex(n=>n.name===e.name)===-1&&(this.setRaces(n=>[...n,e]),this.addRaceToDB(e).subscribe())};addRaceToDB=e=>ce.toObservable(be.races.add(e)).pipe(de(1));updateRace=e=>{const n=this.races().findIndex(s=>s.name===e.name);if(n===-1)return;const r=this.races();r[n]=e,this.setRaces([...r]),this.updateRacesInDB().subscribe()};updateRacesInDB=()=>this.homebrewRaces$.pipe(de(1),Le(e=>ce.toObservable(be.races.bulkPut(this.races()))));removeRace=e=>{const n=this.races().findIndex(s=>s.name===e);if(n===-1)return;const r=this.races().splice(n,1);this.setRaces([...r]),ce.toObservable(be.races.clear()).pipe(de(1),Le(()=>ce.toObservable(be.races.bulkAdd(this.races())))).subscribe()}}const gt=new Tb,vt=new Hu("dndSrd"),[Ml,Eb]=M([]);function qu(){const t=ce.toObservable(vt.backgrounds.toArray());return Ml().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Backgrounds",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.backgrounds.bulkAdd(n)})):Ee(e)),Be(e=>e&&e.length>0?Eb(e):null)).subscribe(),Ml}const Ab=()=>{const t=qu();return H(()=>[...t()])},[Nl,Lb]=M([]);function ba(){const t=ce.toObservable(vt.classes.toArray());return Nl().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Classes",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.classes.bulkAdd(n)})):Ee(e)),Le(e=>Ee(e&&e.concat(gt.classes()))),Be(e=>e&&e.length>0?Lb(e):null)).subscribe(),Nl}const Wu=()=>{const t=ba();return H(()=>[...t(),...gt.classes()])},[Bl,Pb]=M([]);function Vu(){const t=ce.toObservable(vt.feats.toArray());return Bl().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Feats",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.feats.bulkAdd(n)})):Ee(e)),Be(e=>e&&e.length>0?Pb(e):null)).subscribe(),Bl}const[Fl,Rb]=M([]),Gu=()=>{const t=Vu(),e=ce.toObservable(be.feats.toArray());return Fl().length===0&&e.pipe(de(1),Be(r=>{r.length>0&&Rb(r)})).subscribe(),H(()=>[...t(),...Fl()])},[jl,Ob]=M([]);function Ib(){const t=ce.toObservable(vt.items.toArray());return jl().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Items",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.items.bulkAdd(n)})):Ee(e)),Be(e=>e&&e.length>0?Ob(e):null)).subscribe(),jl}const[Ul,Db]=M([]);function Yu(){const t=ce.toObservable(vt.races.toArray());return Ul().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Races",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.races.bulkAdd(n)})):Ee(e)),Be(e=>e&&e.length>0?Db(e):null)).subscribe(),Ul}const Mb=()=>{const t=Yu();return H(()=>[...t()])},[zl,Nb]=M([]);function ya(){const t=ce.toObservable(vt.spells.toArray());return zl().length===0&&t.pipe(de(1),Le(e=>e.length>0?Ee(e):Ee([])),Le(e=>e.length===0?ce.post("/api/DnDInfo/Spells",{}).pipe(de(1),In(n=>(console.error("Error: ",n),Ee(null))),Be(n=>{n&&vt.spells.bulkAdd(n)})):Ee(e)),Be(e=>e&&e.length>0?Nb(e):null)).subscribe(),zl}const Bb=()=>{const t=ya();return H(()=>[...t()])},Fb=[{name:"Gandalf",level:1,class:"Wizard",race:"Elf",subrace:"High Elf",background:"Noble",subclass:"Evocation",stats:{str:8,dex:14,con:12,int:15,wis:13,cha:10},spells:{spellsKnown:["Fireball","Mage Armor","Magic Missile","Shield"],spellsPrepared:["Fireball","Shield","Magic Missile"],alwaysPrepared:[]},skills:{proficient:["Arcana","History"],expertise:["Arcana"]},Features:[]},{name:"Jorden",level:1,class:"Fighter",race:"Dwarf",subrace:"Hill Dwarf",background:"Soldier",subclass:"Champion",stats:{str:12,dex:15,con:14,int:10,wis:13,cha:8},skills:{proficient:["Athletics","Survival"],expertise:["Athletics"]},Features:[]}],[jb,Ub]=M(Fb);function x2(){return[jb,Ub]}const zb=new Vt("dndInfo");zb.version(1).stores({classes:"++id, name"});M(null);function No(t){return t.replace(/[_-]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hb={exports:{}};(function(t){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(L,R,I){L[R]=I.value},o,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function h(L,R,I){return Object.defineProperty(L,R,{value:I,enumerable:!0,configurable:!0,writable:!0}),L[R]}try{h({},"")}catch{h=function(R,I,te){return R[I]=te}}function d(L,R,I,te){var E=R&&R.prototype instanceof w?R:w,D=Object.create(E.prototype),q=new B(te||[]);return i(D,"_invoke",{value:P(L,I,q)}),D}n.wrap=d;function m(L,R,I){try{return{type:"normal",arg:L.call(R,I)}}catch(te){return{type:"throw",arg:te}}}var y="suspendedStart",p="suspendedYield",b="executing",_="completed",v={};function w(){}function C(){}function k(){}var A={};h(A,l,function(){return this});var S=Object.getPrototypeOf,K=S&&S(S(W([])));K&&K!==r&&s.call(K,l)&&(A=K);var T=k.prototype=w.prototype=Object.create(A);C.prototype=k,i(T,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:C,configurable:!0}),C.displayName=h(k,u,"GeneratorFunction");function O(L){["next","throw","return"].forEach(function(R){h(L,R,function(I){return this._invoke(R,I)})})}n.isGeneratorFunction=function(L){var R=typeof L=="function"&&L.constructor;return R?R===C||(R.displayName||R.name)==="GeneratorFunction":!1},n.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,k):(L.__proto__=k,h(L,u,"GeneratorFunction")),L.prototype=Object.create(T),L},n.awrap=function(L){return{__await:L}};function N(L,R){function I(D,q,re,ie){var X=m(L[D],L,q);if(X.type==="throw")ie(X.arg);else{var oe=X.arg,ae=oe.value;return ae&&typeof ae=="object"&&s.call(ae,"__await")?R.resolve(ae.__await).then(function(ue){I("next",ue,re,ie)},function(ue){I("throw",ue,re,ie)}):R.resolve(ae).then(function(ue){oe.value=ue,re(oe)},function(ue){return I("throw",ue,re,ie)})}}var te;function E(D,q){function re(){return new R(function(ie,X){I(D,q,ie,X)})}return te=te?te.then(re,re):re()}i(this,"_invoke",{value:E})}O(N.prototype),h(N.prototype,c,function(){return this}),n.AsyncIterator=N,n.async=function(L,R,I,te,E){E===void 0&&(E=Promise);var D=new N(d(L,R,I,te),E);return n.isGeneratorFunction(R)?D:D.next().then(function(q){return q.done?q.value:D.next()})};function P(L,R,I){var te=y;return function(D,q){if(te===b)throw new Error("Generator is already running");if(te===_){if(D==="throw")throw q;return ee()}for(I.method=D,I.arg=q;;){var re=I.delegate;if(re){var ie=Z(re,I);if(ie){if(ie===v)continue;return ie}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(te===y)throw te=_,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);te=b;var X=m(L,R,I);if(X.type==="normal"){if(te=I.done?_:p,X.arg===v)continue;return{value:X.arg,done:I.done}}else X.type==="throw"&&(te=_,I.method="throw",I.arg=X.arg)}}}function Z(L,R){var I=R.method,te=L.iterator[I];if(te===o)return R.delegate=null,I==="throw"&&L.iterator.return&&(R.method="return",R.arg=o,Z(L,R),R.method==="throw")||I!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+I+"' method")),v;var E=m(te,L.iterator,R.arg);if(E.type==="throw")return R.method="throw",R.arg=E.arg,R.delegate=null,v;var D=E.arg;if(!D)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,v;if(D.done)R[L.resultName]=D.value,R.next=L.nextLoc,R.method!=="return"&&(R.method="next",R.arg=o);else return D;return R.delegate=null,v}O(T),h(T,u,"Generator"),h(T,l,function(){return this}),h(T,"toString",function(){return"[object Generator]"});function U(L){var R={tryLoc:L[0]};1 in L&&(R.catchLoc=L[1]),2 in L&&(R.finallyLoc=L[2],R.afterLoc=L[3]),this.tryEntries.push(R)}function F(L){var R=L.completion||{};R.type="normal",delete R.arg,L.completion=R}function B(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(U,this),this.reset(!0)}n.keys=function(L){var R=Object(L),I=[];for(var te in R)I.push(te);return I.reverse(),function E(){for(;I.length;){var D=I.pop();if(D in R)return E.value=D,E.done=!1,E}return E.done=!0,E}};function W(L){if(L){var R=L[l];if(R)return R.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var I=-1,te=function E(){for(;++I<L.length;)if(s.call(L,I))return E.value=L[I],E.done=!1,E;return E.value=o,E.done=!0,E};return te.next=te}}return{next:ee}}n.values=W;function ee(){return{value:o,done:!0}}return B.prototype={constructor:B,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(F),!L)for(var R in this)R.charAt(0)==="t"&&s.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=o)},stop:function(){this.done=!0;var L=this.tryEntries[0],R=L.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var R=this;function I(ie,X){return D.type="throw",D.arg=L,R.next=ie,X&&(R.method="next",R.arg=o),!!X}for(var te=this.tryEntries.length-1;te>=0;--te){var E=this.tryEntries[te],D=E.completion;if(E.tryLoc==="root")return I("end");if(E.tryLoc<=this.prev){var q=s.call(E,"catchLoc"),re=s.call(E,"finallyLoc");if(q&&re){if(this.prev<E.catchLoc)return I(E.catchLoc,!0);if(this.prev<E.finallyLoc)return I(E.finallyLoc)}else if(q){if(this.prev<E.catchLoc)return I(E.catchLoc,!0)}else if(re){if(this.prev<E.finallyLoc)return I(E.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(L,R){for(var I=this.tryEntries.length-1;I>=0;--I){var te=this.tryEntries[I];if(te.tryLoc<=this.prev&&s.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var E=te;break}}E&&(L==="break"||L==="continue")&&E.tryLoc<=R&&R<=E.finallyLoc&&(E=null);var D=E?E.completion:{};return D.type=L,D.arg=R,E?(this.method="next",this.next=E.finallyLoc,v):this.complete(D)},complete:function(L,R){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&R&&(this.next=R),v},finish:function(L){for(var R=this.tryEntries.length-1;R>=0;--R){var I=this.tryEntries[R];if(I.finallyLoc===L)return this.complete(I.completion,I.afterLoc),F(I),v}},catch:function(L){for(var R=this.tryEntries.length-1;R>=0;--R){var I=this.tryEntries[R];if(I.tryLoc===L){var te=I.completion;if(te.type==="throw"){var E=te.arg;F(I)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(L,R,I){return this.delegate={iterator:W(L),resultName:R,nextLoc:I},this.method==="next"&&(this.arg=o),v}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Hb);var _a=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const qb=_a;let Kl=0;var Zu=({id:t,action:e,payload:n={}})=>{let r=t;return typeof r>"u"&&(r=qb("Job",Kl),Kl+=1),{id:r,action:e,payload:n}},ur={};let wa=!1;ur.logging=wa;ur.setLogging=t=>{wa=t};ur.log=(...t)=>wa?console.log.apply(void 0,t):null;const Wb=Zu,{log:ys}=ur,Vb=_a;let Hl=0;var Gb=()=>{const t=Vb("Scheduler",Hl),e={},n={};let r=[];Hl+=1;const s=()=>r.length,i=()=>Object.keys(e).length,o=()=>{if(r.length!==0){const h=Object.keys(e);for(let d=0;d<h.length;d+=1)if(typeof n[h[d]]>"u"){r[0](e[h[d]]);break}}},a=(h,d)=>new Promise((m,y)=>{const p=Wb({action:h,payload:d});r.push(async b=>{r.shift(),n[b.id]=p;try{m(await b[h].apply(void 0,[...d,p.id]))}catch(_){y(_)}finally{delete n[b.id],o()}}),ys(`[${t}]: Add ${p.id} to JobQueue`),ys(`[${t}]: JobQueue length=${r.length}`),o()});return{addWorker:h=>(e[h.id]=h,ys(`[${t}]: Add ${h.id}`),ys(`[${t}]: Number of workers=${i()}`),o(),h.id),addJob:async(h,...d)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return a(h,d)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),r=[]},getQueueLen:s,getNumWorkers:i}};function Yb(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Zb(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Xb=Zb;const Jb=Xb;var Qb=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Jb()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Yb=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const e1=Qb("type")==="browser",t1=e1?t=>new URL(t,window.location.href).href:t=>t;var n1=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(e[n]=t1(e[n]))}),e},r1=t=>{const e=[],n=[],r=[],s=[],i=[];return t.blocks&&t.blocks.forEach(o=>{o.paragraphs.forEach(a=>{a.lines.forEach(l=>{l.words.forEach(c=>{c.symbols.forEach(u=>{i.push({...u,page:t,block:o,paragraph:a,line:l,word:c})}),s.push({...c,page:t,block:o,paragraph:a,line:l})}),r.push({...l,page:t,block:o,paragraph:a})}),n.push({...a,page:t,block:o})}),e.push({...o,page:t})}),{...t,blocks:e,paragraphs:n,lines:r,words:s,symbols:i}},Xu={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const s1="tesseract.js",i1="5.1.0",o1="Pure Javascript Multilingual OCR",a1="src/index.js",l1="src/index.d.ts",c1="dist/tesseract.min.js",u1="dist/tesseract.min.js",h1={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},d1={"./src/worker/node/index.js":"./src/worker/browser/index.js"},f1="",p1=["jeromewu"],g1="Apache-2.0",m1={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},v1={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},b1={"@rollup/pluginutils":"^5.0.2"},y1={type:"git",url:"https://github.com/naptha/tesseract.js.git"},_1={url:"https://github.com/naptha/tesseract.js/issues"},w1="https://github.com/naptha/tesseract.js",$1={type:"opencollective",url:"https://opencollective.com/tesseractjs"},S1={name:s1,version:i1,description:o1,main:a1,types:l1,unpkg:c1,jsdelivr:u1,scripts:h1,browser:d1,author:f1,contributors:p1,license:g1,devDependencies:m1,dependencies:v1,overrides:b1,repository:y1,bugs:_1,homepage:w1,collective:$1};var k1={workerBlobURL:!0,logger:()=>{}};const C1=S1.version,x1=k1;var T1={...x1,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${C1}/dist/worker.min.js`},E1=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n},A1=t=>{t.terminate()},L1=(t,e)=>{t.onmessage=({data:n})=>{e(n)}},P1=async(t,e)=>{t.postMessage(e)};const Ni=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(t)}),Bo=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await Bo(t.src)),t.tagName==="VIDEO"&&(e=await Bo(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async r=>{e=await Ni(r),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();e=await Ni(n)}else(t instanceof File||t instanceof Blob)&&(e=await Ni(t));return new Uint8Array(e)};var R1=Bo;const O1=T1,I1=E1,D1=A1,M1=L1,N1=P1,B1=R1;var F1={defaultOptions:O1,spawnWorker:I1,terminateWorker:D1,onMessage:M1,send:N1,loadImage:B1};const j1=n1,U1=r1,yt=Zu,{log:ql}=ur,z1=_a,mn=Xu,{defaultOptions:K1,spawnWorker:H1,terminateWorker:q1,onMessage:W1,loadImage:Wl,send:V1}=F1;let Vl=0;var Ju=async(t="eng",e=mn.LSTM_ONLY,n={},r={})=>{const s=z1("Worker",Vl),{logger:i,errorHandler:o,...a}=j1({...K1,...n}),l={},c={},u=typeof t=="string"?t.split("+"):t;let h=e,d=r;const m=[mn.DEFAULT,mn.LSTM_ONLY].includes(e)&&!a.legacyCore;let y,p;const b=new Promise((E,D)=>{p=E,y=D}),_=E=>{y(E.message)};let v=H1(a);v.onerror=_,Vl+=1;const w=(E,D)=>{l[E]=D},C=(E,D)=>{c[E]=D},k=({id:E,action:D,payload:q})=>new Promise((re,ie)=>{ql(`[${s}]: Start ${E}, action=${D}`);const X=`${D}-${E}`;w(X,re),C(X,ie),V1(v,{workerId:s,jobId:E,action:D,payload:q})}),A=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),S=E=>k(yt({id:E,action:"load",payload:{options:{lstmOnly:m,corePath:a.corePath,logging:a.logging}}})),K=(E,D,q)=>k(yt({id:q,action:"FS",payload:{method:"writeFile",args:[E,D]}})),T=(E,D)=>k(yt({id:D,action:"FS",payload:{method:"readFile",args:[E,{encoding:"utf8"}]}})),O=(E,D)=>k(yt({id:D,action:"FS",payload:{method:"unlink",args:[E]}})),N=(E,D,q)=>k(yt({id:q,action:"FS",payload:{method:E,args:D}})),P=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Z=(E,D)=>k(yt({id:D,action:"loadLanguage",payload:{langs:E,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[mn.LSTM_ONLY,mn.TESSERACT_LSTM_COMBINED].includes(h)&&!a.legacyLang}}})),U=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),F=(E,D,q,re)=>k(yt({id:re,action:"initialize",payload:{langs:E,oem:D,config:q}})),B=(E="eng",D,q,re)=>{if(m&&[mn.TESSERACT_ONLY,mn.TESSERACT_LSTM_COMBINED].includes(D))throw Error("Legacy model requested but code missing.");const ie=D||h;h=ie;const X=q||d;d=X;const ae=(typeof E=="string"?E.split("+"):E).filter(ue=>!u.includes(ue));return u.push(...ae),ae.length>0?Z(ae,re).then(()=>F(E,ie,X,re)):F(E,ie,X,re)},W=(E={},D)=>k(yt({id:D,action:"setParameters",payload:{params:E}})),ee=async(E,D={},q={blocks:!0,text:!0,hocr:!0,tsv:!0},re)=>k(yt({id:re,action:"recognize",payload:{image:await Wl(E),options:D,output:q}})),L=(E="Tesseract OCR Result",D=!1,q)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),k(yt({id:q,action:"getPDF",payload:{title:E,textonly:D}}))),R=async(E,D)=>{if(m)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return k(yt({id:D,action:"detect",payload:{image:await Wl(E)}}))},I=async()=>(v!==null&&(q1(v),v=null),Promise.resolve());W1(v,({workerId:E,jobId:D,status:q,action:re,data:ie})=>{const X=`${re}-${D}`;if(q==="resolve"){ql(`[${E}]: Complete ${D}`);let oe=ie;re==="recognize"?oe=U1(ie):re==="getPDF"&&(oe=Array.from({...ie,length:Object.keys(ie).length})),l[X]({jobId:D,data:oe})}else if(q==="reject")if(c[X](ie),re==="load"&&y(ie),o)o(ie);else throw Error(ie);else q==="progress"&&i({...ie,userJobId:D})});const te={id:s,worker:v,setResolve:w,setReject:C,load:A,writeText:K,readText:T,removeFile:O,FS:N,loadLanguage:P,initialize:U,reinitialize:B,setParameters:W,recognize:ee,getPDF:L,detect:R,terminate:I};return S().then(()=>Z(t)).then(()=>F(t,e,r)).then(()=>p(te)).catch(()=>{}),b};const Qu=Ju,G1=async(t,e,n)=>{const r=await Qu(e,1,n);return r.recognize(t).finally(async()=>{await r.terminate()})},Y1=async(t,e)=>{const n=await Qu("osd",0,e);return n.detect(t).finally(async()=>{await n.terminate()})};var Z1={recognize:G1,detect:Y1},X1={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},J1={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Q1=Gb,ey=Ju,ty=Z1,ny=X1,ry=Xu,sy=J1,{setLogging:iy}=ur;var oy={languages:ny,OEM:ry,PSM:sy,createScheduler:Q1,createWorker:ey,setLogging:iy,...ty};const ay=Kb(oy),ly=async(t,e,n)=>{const r=await ay.createWorker("eng");r.recognize(t).then(s=>{e(i=>i?i+`
`+s.data.text:s.data.text),r.terminate(),n&&n()})};var cy=$('<svg width=800px height=800px><path d="M3 10H4C4.93188 10 5.39782 10 5.76537 10.1522C6.25542 10.3552 6.64477 10.7446 6.84776 11.2346C7 11.6022 7 12.0681 7 13C7 13.9319 7 14.3978 6.84776 14.7654C6.64477 15.2554 6.25542 15.6448 5.76537 15.8478C5.39782 16 4.93188 16 4 16H3M19 6V5C19 3.89543 18.1046 3 17 3H15C13.8954 3 13 3.89543 13 5V6M6.2 20H17.8C18.9201 20 19.4802 20 19.908 19.782C20.2843 19.5903 20.5903 19.2843 20.782 18.908C21 18.4802 21 17.9201 21 16.8V9.2C21 8.07989 21 7.51984 20.782 7.09202C20.5903 6.71569 20.2843 6.40973 19.908 6.21799C19.4802 6 18.9201 6 17.8 6H6.2C5.0799 6 4.51984 6 4.09202 6.21799C3.71569 6.40973 3.40973 6.71569 3.21799 7.09202C3 7.51984 3 8.07989 3 9.2V16.8C3 17.9201 3 18.4802 3.21799 18.908C3.40973 19.2843 3.71569 19.5903 4.09202 19.782C4.51984 20 5.07989 20 6.2 20ZM17 13C17 14.6569 15.6569 16 14 16C12.3431 16 11 14.6569 11 13C11 11.3431 12.3431 10 14 10C15.6569 10 17 11.3431 17 13Z"stroke=#000000 stroke-width=2 stroke-linecap=round stroke-linejoin=round>');const uy=t=>(()=>{var e=cy();return Ie(e,Oe(t,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),e})();function hy(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(h=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Js(()=>import("./workbox-window.prod.es5-HOwwy-x7.js"),__vite__mapDeps([])).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o?.(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r?.()}),a.register({immediate:e}).then(h=>{i?i("/sw.js",h):s?.(h)}).catch(h=>{o?.(h)})}}return l=u(),c}function eh(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t,[a,l]=M(!1),[c,u]=M(!1),h=hy({immediate:e,onOfflineReady(){u(!0),r?.()},onNeedRefresh(){l(!0),n?.()},onRegistered:s,onRegisteredSW:i,onRegisterError:o});return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:h}}const dy="_Container_8liaz_1",fy="_Toast_8liaz_15",py="_ToastMessage_8liaz_43",gy="_ToastButton_8liaz_51",kr={Container:dy,Toast:fy,ToastMessage:py,ToastButton:gy};var my=$("<span>App ready to work offline"),vy=$("<button>Reload"),by=$("<div><div></div><button>Close"),yy=$("<div>"),_y=$("<span>New content available, click on reload button to update.");const wy=()=>{const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:s}=eh({onRegistered(o){console.log("SW Registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}}),i=()=>{e(!1),r(!1)};return(()=>{var o=yy();return g(o,f(G,{get when(){return t()||n()},get children(){var a=by(),l=a.firstChild,c=l.nextSibling;return g(l,f(G,{get fallback(){return _y()},get when(){return t()},get children(){return my()}})),g(a,f(G,{get when(){return n()},get children(){var u=vy();return u.$$click=()=>s(!0),z(()=>j(u,kr.ToastButton)),u}}),c),c.$$click=()=>i(),z(u=>{var h=kr.Toast,d=kr.Message,m=kr.ToastButton;return h!==u.e&&j(a,u.e=h),d!==u.t&&j(l,u.t=d),m!==u.a&&j(c,u.a=m),u},{e:void 0,t:void 0,a:void 0}),a}})),z(()=>j(o,kr.Container)),o})()};bt(["click"]);const _s=t=>{const[e,n]=Se($a),r=Rn(()=>t.children);return z(()=>{t.name!==void 0&&n(s=>({...s,[t.name]:r()}))}),H(()=>t.children)},$y="_tabs_1amks_1",Sy="_tabBody_1amks_19",Gl={tabs:$y,tabBody:Sy};var Bi=$("<div>"),ky=$("<b>"),Cy=$("<span>");const $a=Pn(M({})),xy=t=>f($a.Provider,{get value(){return t.value},get children(){return t.children}}),Ty=t=>{const[e,n]=we(),r=H(()=>ye(e().theme)),[s,i]=Se($a),[o,a]=M(Object.keys(s())[0]),l=H(()=>s()[o()]);Rn(()=>t.children),z(()=>{a(Object.keys(s())[0])});const c=t.styleType??"accent";return(()=>{var u=Bi();return g(u,f(xy,{value:[s,i],get children(){return[(()=>{var h=Bi();return g(h,f(Y,{get each(){return Object.keys(s())},children:(d,m)=>(()=>{var y=Cy();return y.$$click=()=>a(d),g(y,f(G,{get when(){return d===o()},get children(){var p=ky();return g(p,d),p}}),null),g(y,f(G,{get when(){return d!==o()},children:d}),null),z(()=>j(y,`${ye().hover}`)),y})()})),z(()=>j(h,`${r()[c]} ${Gl.tabs}`)),h})(),(()=>{var h=Bi();return g(h,l),z(()=>j(h,`${r()[c]} ${Gl.tabBody}`)),h})()]}})),u})()};bt(["click"]);const th=Pn({tableState:()=>({headers:[],rowTransform:[],currentColumns:[]}),setTableState:()=>{}}),Ey=t=>{const[e,n]=M(t.value);return f(th.Provider,{value:{tableState:e,setTableState:n},get children(){return t.children}})};function hr(){return Se(th)}var Yl=$("<tr>"),Zl=$("<tr><td>"),Xl=$("<td>"),Ay=$("<table><thead></thead><tbody>");const nh=t=>f(Ey,{value:{headers:[],rowTransform:[],currentColumns:[]},get children(){return f(Ly,t)}}),Ly=t=>{const e=hr(),[n,r]=M(),[s,i]=M();e.setTableState({headers:[],rowTransform:[],currentColumns:[]});const[o,a]=et(t,["data","columns","children","dropdown"]),[l,c]=M({}),u=_=>e.tableState().cellProps?e.tableState().cellProps[_]:{},h=_=>e.tableState().currentColumns.findIndex(v=>v===_),d=_=>e.tableState().headers[h(_)],m=()=>{const _=w=>e.tableState().currentColumns.findIndex(C=>C===w),v=w=>e.tableState().headers[_(w)];return(()=>{var w=Yl();return g(w,f(Y,{get each(){return o.columns},children:(C,k)=>H(()=>v(C))})),w})()},y=(_,v)=>{const w=A=>e.tableState().currentColumns.findIndex(S=>S===A),C=A=>e.tableState().rowTransform[w(A)],k=!!o.columns.map(A=>C(A)).filter(A=>typeof A=="function").length;return o.dropdown&&k?(()=>{var A=Zl(),S=A.firstChild;return g(A,f(Y,{get each(){return o.columns},children:(K,T)=>{const O=C(K);if(typeof O=="function")return(()=>{var N=Xl();return Ie(N,Oe(()=>u(w(K))),!1,!0),g(N,()=>O(_,v)),N})()}}),S),g(S,f(G,{get when(){return l()[v]},get children(){return f(he,{onClick:()=>c(K=>({...K,[v]:!1})),get children(){return f(la,{get width(){return t.dropdownArrow?.width},get height(){return t.dropdownArrow?.height}})}})}}),null),g(S,f(G,{get when(){return!l()[v]},get children(){return f(he,{onClick:()=>c(K=>({...K,[v]:!0})),get children(){return f(ca,{get width(){return t.dropdownArrow?.width},get height(){return t.dropdownArrow?.height}})}})}}),null),A})():k?(()=>{var A=Yl();return g(A,f(Y,{get each(){return o.columns},children:(S,K)=>{const T=C(S);if(typeof T=="function")return(()=>{var O=Xl();return Ie(O,Oe(()=>u(w(S))),!1,!0),g(O,()=>T(_,v)),O})()}})),A})():[]},p=(_,v)=>{const w=e.tableState().dropTransform;if(typeof w!="function"||!e.tableState().dropTransform)return[];const C=t.dropdown?o.columns.length+1:o.columns.length;return(()=>{var k=Zl(),A=k.firstChild;return Ie(k,Oe(()=>e.tableState().dropProps),!1,!0),wt(A,"colspan",C),g(A,()=>w(_,v)),k})()},b=_=>!!e.tableState().dropTransform&&(!!l()[_]||!Object.keys(t).includes("dropdown"));return tr(()=>{const _=n();_&&(_.innerHTML="",Xi(()=>m(),_));const v=s();if(v){v.innerHTML="";const w=t.data();w.length&&Xi(()=>w.map((C,k)=>b(k)?[H(()=>y(C,k)),H(()=>p(C,k))]:y(C,k)),v)}}),t.children,(()=>{var _=Ay(),v=_.firstChild,w=v.nextSibling;return Ie(_,a,!1,!0),cn(r,v),g(v,f(Y,{get each(){return o.columns},children:(C,k)=>H(()=>d(C))})),cn(i,w),g(w,f(G,{get when(){return!o.data().length},get children(){return[]}}),null),g(w,f(G,{get when(){return o.data().length},get children(){return f(Y,{get each(){return o.data()},children:(C,k)=>[H(()=>y(C,k())),f(G,{get when(){return b(k())},get children(){return p(C,k())}})]})}}),null),_})()},Py=Pn();function rh(){return Se(Py)}var Ry=$("<tr>"),Oy=$("<th>");const Jn=t=>{const{tableState:e,setTableState:n}=hr();return t.children,Xt(()=>{n(r=>({...r,currentColumns:[...r.currentColumns,t.name]}))}),Ry()},Qn=t=>{const{tableState:e,setTableState:n}=hr(),[r,s]=et(t,["children"]);return Xt(()=>{n(i=>({...i,headers:[...i.headers,(()=>{var o=Oy();return Ie(o,s,!1,!0),g(o,()=>r.children),o})()]}))}),[]},er=t=>{const[e,n]=et(t,["children"]),{tableState:r,setTableState:s}=hr();return rh(),Xt(()=>{s(i=>({...i,cellProps:[...i.cellProps?i.cellProps:[],n],rowTransform:[...i.rowTransform,e.children]}))}),[]},sh=t=>{const{tableState:e,setTableState:n}=hr();return Xt(()=>{n(r=>({...r,rowProps:t}))}),[]},Iy=t=>{const[e,n]=et(t,["children"]);rh();const{tableState:r,setTableState:s}=hr();return Xt(()=>{s(i=>({...i,dropTransform:e.children,dropProps:n}))}),[]},Dy="_formField_1o1an_1",My="_moveLegendInside_1o1an_25",Ny="_checkboxPadding_1o1an_30",Jl={formField:Dy,moveLegendInside:My,checkboxPadding:Ny};var By=$("<fieldset><legend>");const Fo=t=>f(cm,{get name(){return t.name},get children(){return f(Fy,t)}}),Fy=t=>{const[e,n]=et(t,["children","styleType","name","class","value"]),r=ua(),[s]=we(),i=H(()=>ye(s().theme)),o=H(()=>!r.getValue()&&!r.getFocused()&&r.getTextInside()),a=Rn(()=>t.children),[l,c]=M();aa(l,()=>{r.setTextInside(!!r.getValue()||!r.getFocused())}),z(()=>{r.setName(t.name)});const[u,h]=M("10px"),[d,m]=M("25px");return z(()=>{o()?(h("10px"),r.getFieldType()!=="textarea"&&m("25px"),r.getFieldType()==="textarea"&&m("15px")):(h("0px"),r.getFieldType()!=="textarea"&&m("15px"),r.getFieldType()==="textarea"&&m("8px"))}),(()=>{var y=By(),p=y.firstChild;return cn(c,y),Ie(y,Oe(n,{get style(){return{"margin-top":u(),"padding-bottom":d()}},onClick:()=>r.setTextInside(!1),get class(){return`${i()[e.styleType??"accent"]} ${Jl.formField} ${e.class??""}`}}),!1,!0),g(p,(()=>{var b=H(()=>!!r.getName());return()=>b()?r.getName():""})()),g(y,a,null),z(()=>j(p,`${o()?`${Jl.moveLegendInside}`:""}`)),y})()};var jy=$("<h1>Home"),Fi=$("<div>"),Uy=$("<div>Welcome to my app. This is a work in progress."),zy=$("<div><div></div><div>"),Ky=$("<div><div></div><div></div><span>");const Hy=()=>{const[t,e]=we();Pt(),H(()=>ye(t().theme));const n=ba();ya(),Vu(),Yu(),Ib(),qu();const[r,s]=M(`This **is** _a_ 
# test`),[i,o]=M("It'll be great eventually."),[a,l]=M("");return M(!1),f(St,{get children(){return[jy(),f(Ty,{get children(){return[f(_s,{name:"Table",get children(){var c=Fi();return g(c,f(nh,{dropdownArrow:{width:"30px",height:"30px"},dropdown:!0,data:n,columns:["hitDie","className","saves"],get children(){return[f(Jn,{name:"className",get children(){return[f(Qn,{children:"Class Name"}),f(er,{children:(u,h)=>u.name})]}}),f(Jn,{name:"hitDie",get children(){return[f(Qn,{children:"Hit Die"}),f(er,{children:u=>u.hitDie})]}}),f(Jn,{name:"saves",get children(){return[f(Qn,{children:"Saves"}),f(er,{children:u=>u.savingThrows?.join(", ")})]}}),f(sh,{style:{height:"40px"}}),f(Iy,{children:(u,h)=>(()=>{var d=Ky(),m=d.firstChild,y=m.nextSibling,p=y.nextSibling;return d.style.setProperty("border","1px solid"),d.style.setProperty("padding","5px"),d.style.setProperty("border-radius","10px"),g(m,()=>u?.name),g(y,()=>u?.hitDie),g(p,()=>u?.spellcasting?.spellcastingAbility),d})()})]}})),c}}),f(_s,{name:"Welcome",get children(){return f(xn,{get children(){return[Uy(),(()=>{var c=Fi();return c.style.setProperty("width","100%"),c.style.setProperty("padding","15px"),g(c,f(Pi,{readOnly:!0,transparent:!0,tooltip:"Testing",text:i,setText:o})),c})()]}})}}),f(_s,{name:"Markdown",get children(){var c=zy(),u=c.firstChild,h=u.nextSibling;return c.style.setProperty("height","100%"),u.style.setProperty("width","100%"),u.style.setProperty("height","max-content !important"),g(u,f(xb,{text:r})),h.style.setProperty("width","100%"),h.style.setProperty("height","max-content"),h.style.setProperty("min-height","200px"),g(h,f(Pi,{buttons:{styleType:"tertiary"},picToTextEnabled:!0,onChange:d=>s(d.currentTarget.value),readOnly:!1,transparent:!1,tooltip:"Testing",text:r,setText:s})),c}}),f(_s,{name:"Field Test",get children(){var c=Fi();return c.style.setProperty("display","flex"),c.style.setProperty("flex-direction","row"),c.style.setProperty("flex-wrap","wrap"),g(c,f(Fo,{name:"Input Test",style:{height:"min-content"},get children(){return f(Ze,{type:"text",get value(){return a()},onChange:u=>l(u.currentTarget.value),width:700,style:{"max-width":"800px !important"}})}}),null),g(c,f(Fo,{name:"TextArea Test",get children(){return f(Pi,{text:a,setText:l})}}),null),c}})]}}),f(sg,{}),f(wy,{})]}})};var qy=$("<div>Element 1"),Wy=$("<div>Element 2"),Vy=$("<div>Element 3"),Gy=$("<div>Element 4"),Yy=$("<h1>Homebrew");const Zy=()=>{Se(De)?.useStyle();const e=[{name:"Element A",element:qy()},{name:"Element 2",element:Wy()},{name:"Element fred",element:Vy()},{name:"Elem fff",element:Gy()}];return f(St,{get children(){return[Yy(),f(oi,{elements:e})]}})},Xy="_sidebar_1142h_1",Jy="_body_1142h_33",Qy="_bodyMenu_1142h_57",e0={sidebar:Xy,body:Jy,bodyMenu:Qy};var t0=$("<h1>Create"),Ql=$("<div>"),n0=$("<a><div><p>");const r0=()=>{const e=Se(De)?.useStyle(),n=[{name:"Classes"},{name:"Races"},{name:"Backgrounds"},{name:"Feats"},{name:"Spells"},{name:"Items"}],[r,s]=M(n);return f(St,{get children(){return[t0(),(()=>{var i=Ql();return g(i,f(Y,{get each(){return r()},children:(o,a)=>[(()=>{var l=n0(),c=l.firstChild,u=c.firstChild;return g(u,()=>o.name),z(h=>{var d=`${e?.primary}`,m=`/homebrew/create/${o.name.toLowerCase()}`,y=`${e?.hover}`;return d!==h.e&&j(l,h.e=d),m!==h.t&&wt(l,"href",h.t=m),y!==h.a&&j(c,h.a=y),h},{e:void 0,t:void 0,a:void 0}),l})(),f(G,{get when(){return a()===2},get children(){var l=Ql();return l.style.setProperty("height","0"),l.style.setProperty("flex-basis","100%"),l}})]})),z(()=>j(i,`${e0.bodyMenu} `)),i})()]}})};var s0=$("<td>Options"),i0=$("<table><thead><tr></tr></thead><tbody>"),o0=$("<th>"),a0=$('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M0 0h24v24H0z"fill=none></path><path d="M12 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4z">'),l0=$("<tr>"),c0=$("<td>");const vn=t=>{const[e,n]=M(t.data),[r,s]=M(t.data),i=H(()=>r());M([]);const o=H(()=>t.button?i().map(a=>t.button.generateMenuButtons(a)):[]);return[(()=>{var a=i0(),l=a.firstChild,c=l.firstChild,u=l.nextSibling;return g(c,f(Y,{get each(){return t.keys??[]},children:h=>(()=>{var d=o0();return g(d,()=>No(h.toString())),d})()}),null),g(c,f(G,{get when(){return t.button},get children(){return s0()}}),null),g(u,f(Y,{get each(){return i()},children:(h,d)=>(()=>{var m=l0();return g(m,f(Y,{get each(){return t.keys},children:y=>(()=>{var p=c0();return g(p,()=>`${h[y]}`),p})()}),null),g(m,f(G,{get when(){return t.button},get children(){return f(he,{get enableBackgroundClick(){return t.button?.backgroundClick},get overrideX(){return t.button?.overideX},get overrideY(){return t.button?.overideY},get menuItems(){return o()[d()]},get children(){return a0()}})}}),null),m})()})),a})(),f(G,{get when(){return t.paginator},get children(){return f(ai,{setPaginatedItems:s,items:e,get itemsPerPage(){return t.paginator}})}})]};var u0=$("<h1>View"),h0=$("<div>");const ec=()=>{Pt(),we();const t=wc(),e=H(()=>[{name:"Spells",element:f(vn,{get data(){return gt.spells()},keys:["name","level"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/spells?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Feats",element:f(vn,{get data(){return gt.feats()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/feats?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Classes",element:f(vn,{get data(){return gt.classes()},keys:["name","hitDie"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/classes?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Subclasses",element:f(vn,{get data(){return gt.classes().flatMap(a=>a.subclasses)},keys:["name","class"],paginator:[5,10,25,50,100],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/subclasses?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Items",element:f(vn,{get data(){return gt.items()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/items?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Backgrounds",element:f(vn,{get data(){return gt.backgrounds()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/backgrounds?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})},{name:"Races",element:f(vn,{get data(){return gt.races()},keys:["name"],button:{backgroundClick:!0,generateMenuButtons:a=>[{name:"Edit",condition:()=>!0,action:()=>{t(`/homebrew/create/races?name=${a.name}`)}},{name:"Delete",condition:()=>!0,action:()=>{console.log("Delete",a)}}]}})}]),[n,r]=fn();n.name||r({name:e()[0].name});const s=H(()=>e().findIndex(a=>a.name.toLowerCase()===n.name?.toLowerCase()));z(()=>{console.log("startingIndex",s()),console.log("searchParam",n.name)});const[i,o]=M(s());return z(()=>{r({name:e()[i()].name??"spells"})}),f(St,{get children(){return[u0(),(()=>{var a=h0();return a.style.setProperty("text-align","left"),g(a,f(oi,{get startingIndex(){return s()},currentIndex:[i,o],get elements(){return e()}})),a})()]}})},d0="_fieldStyle_1prs9_1",f0="_selectSpan_1prs9_7",p0="_rowOne_1prs9_17",g0="_twoRowContainer_1prs9_23",m0="_rowTwo_1prs9_35",v0="_allProficiency_1prs9_47",b0="_singleProficiency_1prs9_52",y0="_levelSecondRow_1prs9_71",_0="_wholeTable_1prs9_79",w0="_rowStyle_1prs9_83",$0="_headerStyle_1prs9_87",S0="_cellStyle_1prs9_92",k0="_tableFeature_1prs9_99",Ne={fieldStyle:d0,selectSpan:f0,rowOne:p0,twoRowContainer:g0,rowTwo:m0,allProficiency:v0,singleProficiency:b0,levelSecondRow:y0,wholeTable:_0,rowStyle:w0,headerStyle:$0,cellStyle:S0,tableFeature:k0};var C0=$("<div><h2>Proficiencies</h2><div><div><h3>Armor</h3><span></span></div><div><h3>Weapons</h3><span></span></div><div><h3>Tools</h3><span></span></div><div><h3>Saving Throws</h3><span></span></div><div><h3>Skills</h3><span>");const x0=t=>{const e=T0(),n=E0(),r=L0(),s=A0(),i=()=>t.currentClass.proficiencies.filter(u=>e.map(h=>h.toLowerCase()).includes(u.toLowerCase())),o=()=>t.currentClass.proficiencies.filter(u=>n.map(h=>h.toLowerCase()).includes(u.toLowerCase())),a=()=>t.currentClass.proficiencies.filter(u=>r.map(h=>h.toLowerCase()).includes(u.toLowerCase())),l=()=>t.currentClass.proficiencies.filter(u=>s.map(h=>h.toLowerCase()).includes(u.toLowerCase())),c=u=>u.length?u:["None"];return(()=>{var u=C0(),h=u.firstChild,d=h.nextSibling,m=d.firstChild,y=m.firstChild;y.firstChild;var p=y.nextSibling,b=m.nextSibling,_=b.firstChild;_.firstChild;var v=_.nextSibling,w=b.nextSibling,C=w.firstChild;C.firstChild;var k=C.nextSibling,A=w.nextSibling,S=A.firstChild;S.firstChild;var K=S.nextSibling,T=A.nextSibling,O=T.firstChild;O.firstChild;var N=O.nextSibling;return g(y,f(he,{children:"+"}),null),g(p,f(Y,{get each(){return c(i())},children:P=>f(dt,{key:"Armor",value:P})})),g(_,f(he,{children:"+"}),null),g(v,f(Y,{get each(){return c(o())},children:P=>f(dt,{key:"Weapon",value:P})})),g(C,f(he,{children:"+"}),null),g(k,f(Y,{get each(){return c(a())},children:P=>f(dt,{key:"Tool",value:P})})),g(S,f(he,{children:"+"}),null),g(K,f(Y,{get each(){return c(t.currentClass.savingThrows)},children:P=>f(dt,{key:"Saving Throw",value:P})})),g(O,f(he,{children:"+"}),null),g(N,f(Y,{get each(){return c(l())},children:P=>f(dt,{key:"Skill",value:P})})),z(P=>{var Z=Ne.rowTwo,U=`${Ne.allProficiency}`,F=`${Ne.singleProficiency}`,B=`${Ne.singleProficiency}`,W=`${Ne.singleProficiency}`,ee=`${Ne.singleProficiency}`,L=`${Ne.singleProficiency}`;return Z!==P.e&&j(u,P.e=Z),U!==P.t&&j(d,P.t=U),F!==P.a&&j(m,P.a=F),B!==P.o&&j(b,P.o=B),W!==P.i&&j(w,P.i=W),ee!==P.n&&j(A,P.n=ee),L!==P.s&&j(T,P.s=L),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),u})()},T0=()=>["Light","Medium","Heavy","Shields"],E0=()=>["Simple","Martial"],A0=()=>["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"],L0=()=>["Artisan's Tools","Disguise Kit","Forgery Kit","Gaming Set","Herbalism Kit","Musical Instrument","Navigator's Tools","Poisoner's Kit","Thieves' Tools","Vehicles (Land)","Vehicles (Water)"];var P0=$("<div><h2>Starting Equipment</h2><div><ul>"),R0=$("<i>Add Items to choose from."),O0=$("<li><h3>Choice <!> </h3><ul>"),I0=$("<li>Choose: "),D0=$("<li>or");const M0=t=>{const e=n=>n===1?t.currentClass.startingEquipment.choice1:n===2?t.currentClass.startingEquipment.choice2:n===3?t.currentClass.startingEquipment.choice3:n===4?t.currentClass.startingEquipment.choice4:[];return(()=>{var n=P0(),r=n.firstChild,s=r.nextSibling,i=s.firstChild;return i.style.setProperty("list-style","none"),g(i,f(Y,{each:[1,2,3,4],children:o=>(()=>{var a=O0(),l=a.firstChild,c=l.firstChild,u=c.nextSibling;u.nextSibling;var h=l.nextSibling;return g(l,o,u),g(l,f(he,{onClick:d=>{d.preventDefault()},children:"+"}),null),g(h,f(Y,{get each(){return e(o)},children:(d,m)=>[(()=>{var y=I0();return y.firstChild,g(y,()=>d.choose,null),g(y,f(Y,{get each(){return d.choices},children:p=>f(dt,{key:"Choice ",get value(){return p.item}})}),null),y})(),f(G,{get when(){return H(()=>e(o).length>1)()&&--e(o).length!==m()},get children(){return D0()}})]})),g(a,f(G,{get when(){return e(o).length===0},get children(){return R0()}}),null),a})()})),n})()};var N0=$("<div><h1>Classes Homebrewing</h1><div><span></span><span><label for=hitDie>Hit Die</label></span></div><div></div><div><div>");const B0=()=>{fn();const[t,e]=M({id:0,name:"",hitDie:4,proficiencies:[],proficiencyChoices:[],savingThrows:[],startingEquipment:{class:"",quantity:0,choice1:[],choice2:[],choice3:[],choice4:[]},classLevels:Array.from({length:20},(p,b)=>({level:b+1,profBonus:Math.ceil((b+1)/4)+1,features:[],classSpecific:{test:"test"},info:{className:"",level:b+1,subclassName:"",type:"",other:""}})),features:[],subclasses:[],subclassLevels:[]}),n=p=>e(b=>({...b,name:p})),r=p=>e(b=>({...b,hitDie:p})),s=p=>e(b=>({...b,proficiencies:p})),i=p=>e(b=>({...b,savingThrows:p})),o=(p,b)=>{e(_=>({..._,startingEquipment:{..._.startingEquipment,[`choice${p}`]:b}}))},[a,l]=we();H(()=>ye(a().theme)),Se(De);const[c,u]=M(["level","proficiency","options","features"]);M(Array.from({length:20},(p,b)=>b+1));const h=(p,b)=>{b||(b={name:`Feature ${Math.floor(Math.random()*10)*Math.ceil(Math.random()*10)}`,value:"a value",info:{className:"",subclassName:"",level:p,type:"",other:""}});const _=t().classLevels[p-1].features;_.push(b);const v={...t()};v.classLevels[p-1].features=_,e(v)},d=(p,b)=>{const _=t().classLevels[p-1].features.filter(w=>w.name!==b),v={...t()};v.classLevels[p-1].features=_,e(v)};tr(()=>{console.log("CurrentClass: ",t())});const[m,y]=M(t().classLevels);return tr(()=>{y(Zn(t().classLevels)),console.log("TableData: ",m())}),f(St,{get children(){var p=N0(),b=p.firstChild,_=b.nextSibling,v=_.firstChild,w=v.nextSibling;w.firstChild;var C=_.nextSibling,k=C.nextSibling,A=k.firstChild;return g(v,f(Fo,{get class(){return`${Ne.fieldStyle}`},name:"Class Name",get children(){return f(Ze,{transparent:!0,get value(){return t().name},onChange:S=>n(S.currentTarget.value)})}})),g(w,f(Ve,{id:"hitDie",transparent:!0,get value(){return t().hitDie},onChange:S=>{r(+S.currentTarget.value)},disableUnselected:!0,get children(){return f(Y,{each:[4,6,8,10,12],children:S=>f(_e,{value:S,children:S})})}}),null),g(C,f(x0,{setSaves:i,setProficiencies:s,get currentClass(){return t()}}),null),g(C,f(M0,{get currentClass(){return t()},setStartEquipChoice:o}),null),g(A,f(nh,{get class(){return`${Ne.wholeTable}`},data:m,get columns(){return c()},get children(){return[f(Jn,{name:"proficiency",get children(){return[f(Qn,{get class(){return`${Ne.headerStyle}`},children:"P.B."}),f(er,{get class(){return`${Ne.cellStyle}`},children:S=>`+${S.profBonus}`})]}}),f(Jn,{name:"level",get children(){return[f(Qn,{get class(){return`${Ne.headerStyle}`},children:"Level"}),f(er,{get class(){return`${Ne.cellStyle}`},children:S=>S.level})]}}),f(Jn,{name:"features",get children(){return[f(Qn,{get class(){return`${Ne.headerStyle}`},children:"Features"}),f(er,{get class(){return`${Ne.tableFeature}`},children:(S,K)=>[f(G,{get when(){return!!S.features?.length},get children(){return[f(he,{onClick:T=>h(S.level),children:"+"}),f(Y,{get each(){return S?.features},children:T=>f(dt,{get key(){return`${T.info.level} `},get value(){return T.name},remove:()=>d(T.info.level,T.name)})})]}}),f(G,{get when(){return!S.features?.length},get children(){return f(he,{onClick:T=>h(S.level),children:"+"})}})]})]}}),f(sh,{get class(){return`${Ne.rowStyle}`}})]}})),z(S=>{var K=`${Ne.rowOne}`,T=`${Ne.selectSpan}`,O=`${Ne.twoRowContainer}`,N=`${Ne.twoRowContainer}`,P=`${Ne.twoRowContainer}`;return K!==S.e&&j(_,S.e=K),T!==S.t&&j(w,S.t=T),O!==S.a&&j(C,S.a=O),N!==S.o&&j(k,S.o=N),P!==S.i&&j(A,S.i=P),S},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),p}})};var F0=$("<h1>Items"),j0=$("<h2>Item Types"),U0=$("<div>"),z0=$("<div><p>damage</p><p>properties</p><p>description</p><p>cost</p><p>weight</p><p>description"),K0=$("<div><p>armor class</p><p>strength requirement</p><p>stealth disadvantage</p><p>description</p><p>cost</p><p>weight"),H0=$("<div><p>description</p><p>cost</p><p>weight</p><p>consumable");const q0=()=>{Se(De);const[t,e]=we();return H(()=>ye(t().theme)),f(St,{get children(){return[F0(),j0(),(()=>{var n=U0();return g(n,f(oi,{get elements(){return[{name:"Weapon",element:z0()},{name:"Armor",element:K0()},{name:"Item",element:H0()}]}})),n})()]}})},W0="_body_1fr9g_1",V0="_name_1fr9g_24",G0="_featHomebrew_1fr9g_28",Y0="_featName_1fr9g_1",Z0="_removeChipButton_1fr9g_42",X0="_preRequisites_1fr9g_49",J0="_Description_1fr9g_63",Q0="_chipBar_1fr9g_77",Cr={body:W0,name:V0,featHomebrew:G0,featName:Y0,removeChipButton:Z0,preRequisites:X0,Description:J0,chipBar:Q0};var e_=$("<h1>Feats"),ji=$("<div>"),t_=$("<div class=featHomebrew><div><h2>Add Name</h2></div><div><h2>Add Pre-Requisites</h2><div><button>Add</button></div><div></div></div><div><h2>Description</h2><textarea id=featDescription name=featDescription></textarea></div><button>Add Feat"),on=(t=>(t[t.AbilityScore=0]="AbilityScore",t[t.Class=1]="Class",t[t.CharacterLevel=2]="CharacterLevel",t))(on||{});const n_=()=>{Se(De);const[t,e]=we();H(()=>ye(t().theme));const n=Wu();Gu();const r=new Fd({}),[s,i]=M([]),[o,a]=M(0),[l,c]=M(""),[u,h]=M("str"),[d,m]=M("0"),[y,p]=M(""),[b,_]=M(!1),v=()=>{i([]),a(0),c(""),h("str"),m("0"),p("")},w=C=>{switch(o()){case 0:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:on[0],other:""},name:u(),value:d()}]);break;case 1:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:on[1],other:""},name:u(),value:d()}]);break;case 2:i(k=>[...k,{info:{className:"",subclassName:"",level:0,type:on[2],other:""},name:u(),value:d()}]);break}};return z(()=>{switch(o()){case 0:h("STR"),m("0");break;case 1:h("Class"),m("Barbarian");break;case 2:h("Barbarian"),m("0");break}}),z(()=>{const C={};C.name=l(),C.preReqs=s(),C.desc=[y()],r.next(C)}),z(()=>{b()&&(gt.addFeat(r.value),_(!1),v())}),f(St,{get children(){return[e_(),(()=>{var C=t_(),k=C.firstChild;k.firstChild;var A=k.nextSibling,S=A.firstChild,K=S.nextSibling,T=K.firstChild,O=K.nextSibling,N=A.nextSibling,P=N.firstChild,Z=P.nextSibling,U=N.nextSibling;return g(k,f(Ze,{type:"text",id:"featName",get value(){return l()},onChange:F=>c(F.currentTarget.value)}),null),g(K,f(Ve,{get value(){return o()},onChange:F=>a(()=>+F.currentTarget.value),disableUnselected:!0,get children(){return[f(_e,{get value(){return 0},children:"Ability Score"}),f(_e,{get value(){return 1},children:"Class"}),f(_e,{get value(){return 2},children:"Class Level"})]}}),T),g(K,f(Nr,{get children(){return[f(ct,{get when(){return o()===0},get children(){var F=ji();return g(F,f(Ve,{onChange:B=>h(B.currentTarget.value),get children(){return[f(_e,{value:"STR",children:"Strength"}),f(_e,{value:"DEX",children:"Dexterity"}),f(_e,{value:"CON",children:"Constitution"}),f(_e,{value:"INT",children:"Intelligence"}),f(_e,{value:"WIS",children:"Wisdom"}),f(_e,{value:"CHA",children:"Charisma"})]}}),null),g(F,f(Ze,{type:"number",onChange:B=>m(B.currentTarget.value)}),null),F}}),f(ct,{get when(){return o()===1},get children(){var F=ji();return g(F,f(Ve,{onChange:B=>{h("Class"),m(B.currentTarget.value)},get children(){return f(Y,{get each(){return n()},children:B=>f(_e,{get value(){return B.name},get children(){return B.name}})})}})),F}}),f(ct,{get when(){return o()===2},get children(){var F=ji();return g(F,f(Ve,{onChange:B=>h(B.currentTarget.value),get children(){return f(Y,{get each(){return n()},children:B=>f(_e,{get value(){return B.name},get children(){return B.name}})})}}),null),g(F,f(Ze,{type:"number",onChange:B=>m(B.currentTarget.value)}),null),F}})]}}),T),T.$$click=w,g(O,f(dt,{get key(){return u()},get value(){return d()}}),null),g(O,f(Y,{get each(){return s()},children:(F,B)=>f(dt,{get key(){return F.name},get value(){return F.value},remove:()=>i(W=>W.filter((ee,L)=>L!==B()))})}),null),Z.addEventListener("change",F=>p(F.currentTarget.value)),U.$$click=()=>_(!0),z(F=>{var B=`${Cr.name}`,W=`${Cr.preRequisites}`,ee=s().length>=10,L=`${Cr.chipBar}`,R=`${Cr.Description}`,I=`${Cr.addButton}`;return B!==F.e&&j(k,F.e=B),W!==F.t&&j(A,F.t=W),ee!==F.a&&(T.disabled=F.a=ee),L!==F.o&&j(O,F.o=L),R!==F.i&&j(N,F.i=R),I!==F.n&&j(U,F.n=I),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),z(()=>Z.value=y()),C})()]}})};bt(["click"]);var r_=$("<h1>backgrounds"),s_=$("<div><p>ideals</p><p>bonds</p><p>flaws</p><p>personality traits</p><p>background features</p><p>languages</p><p>skills</p><p>tools");const i_=()=>{Se(De);const[t,e]=we();return H(()=>ye(t().theme)),f(St,{get children(){return[r_(),s_()]}})};var o_=$("<h1>spells"),a_=$("<p>name"),l_=$("<p>level"),c_=$("<p>school"),u_=$("<p>casting time"),h_=$("<p>range"),d_=$("<p>components"),f_=$("<p>duration"),p_=$("<p>description"),g_=$("<p>classes list");const m_=()=>{Se(De);const[t,e]=we();return H(()=>ye(t().theme)),f(St,{get children(){return[o_(),a_(),l_(),c_(),u_(),h_(),d_(),f_(),p_(),g_()]}})};var v_=$("<h1>races"),b_=$("<div><p>name</p><p>size</p><p>speed</p><p>ability score increase</p><p>age range</p><p>features");const y_=()=>{Se(De);const[t,e]=we();return H(()=>ye(t().theme)),f(St,{get children(){return[v_(),b_()]}})},__="_SpellsBody_zr12h_1",w_="_materials_needed_zr12h_1",$_="_headerBar_zr12h_23",S_="_view_zr12h_39",k_="_center_zr12h_75",Kn={SpellsBody:__,materials_needed:w_,headerBar:$_,view:S_,center:k_},C_="_searchBar_1fns4_1",x_="_booleanSelect_1fns4_46",T_="_chipBar_1fns4_77",E_="_all_1fns4_84",A_="_none_1fns4_88",L_="_top_1fns4_92",P_="_bottom_1fns4_96",R_="_left_1fns4_100",O_="_right_1fns4_104",Ui={searchBar:C_,booleanSelect:x_,chipBar:T_,all:E_,none:A_,top:L_,bottom:P_,left:R_,right:O_},I_="_chipbar_1uyza_1",D_="_chipContainer_1uyza_7",M_="_leftArrow_1uyza_20",N_="_rightArrow_1uyza_26",ws={chipbar:I_,chipContainer:D_,leftArrow:M_,rightArrow:N_};var zi=$("<span>"),B_=$("<div><div>");const F_=t=>{const[e,n]=M(!1),[r,s]=M(!1),i=c=>{s(o?.scrollLeft!==o?.scrollWidth-o?.clientWidth),n(o?.scrollLeft>0),o?.scrollLeft<=0&&n(!1)};Xt(()=>{o&&o.addEventListener("scroll",i)}),ln(()=>{o&&o.removeEventListener("scroll",i)});let o;z(()=>{t.chips().length>0&&i()});const a=()=>{o.scrollLeft-=100,i()},l=()=>{o.scrollLeft+=100,i(),n(!0)};return f(G,{get when(){return t.chips().length>0},get children(){var c=B_(),u=c.firstChild;g(c,f(G,{get when(){return e()},get children(){var d=zi();return g(d,f(he,{onClick:a,children:""})),z(()=>j(d,`${ws.leftArrow}`)),d}}),u);var h=o;return typeof h=="function"?cn(h,u):o=u,g(u,f(G,{get when(){return t.chips().length>1},get children(){var d=zi();return g(d,f(he,{onClick:()=>t.setChips([]),children:"Clear All"})),d}}),null),g(u,f(Y,{get each(){return t.chips()},children:(d,m)=>f(dt,{get key(){return d.key},get value(){return d.value},get remove(){return t.chips().length>0?()=>t.setChips(y=>[...y].filter((p,b)=>b!==m())):void 0}})}),null),g(c,f(G,{get when(){return r()},get children(){var d=zi();return g(d,f(he,{onClick:l,children:""})),z(()=>j(d,`${ws.rightArrow}`)),d}}),null),z(d=>{var m=`${ws.chipbar}`,y=`${ws.chipContainer}`;return m!==d.e&&j(c,d.e=m),y!==d.t&&j(u,d.t=y),d},{e:void 0,t:void 0}),c}})};var j_=$("<div id=booleanBar><label for=falsebox>"),U_=$("<div><div>"),z_=$("<option>"),K_=$('<svg><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z">');const H_=t=>{const[e,n]=M({key:"",value:""}),[r,s]=M("name"),[i,o]=M(""),[a,l]=M(!1),[c,u]=M([]),h=y=>{if(Array.isArray(t.spellsSrd()[0][y]))if(typeof(t.spellsSrd()[0][y]&&Array.isArray(t.spellsSrd()[0][y])?t.spellsSrd()[0][y][0]:null)=="string"){const _=t.spellsSrd().flatMap(v=>v[y]?.toString().includes(",")?v[y]?.toString().split(","):v[y]?.toString());return[...new Set(_)].sort().filter(v=>!!v)}else return[...new Set(...t.spellsSrd().flatMap(_=>Array.isArray(_[y])?_[y]:[]))].sort().filter(_=>!!_);const p=new Set;return t.spellsSrd().map(b=>b[y]&&!Array.isArray(b[y])?b[y]:"").map(b=>p.add(`${b}`)),[...p].sort().filter(b=>!!b)},d=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"];z(()=>{t.setSearchResults(t.spellsSrd().filter(y=>y&&c().length>0?![...new Set(c().map(w=>w.key))].map(w=>c().filter(C=>C.key===w)).map(w=>w.map(C=>{const k=y[C.key];if(k)switch(!0){case typeof k=="string":return k.toLowerCase().includes(C.value.toLowerCase());case Array.isArray(k):return k.join(" ").toLowerCase().includes(C.value.toLowerCase());case typeof k=="boolean":return` ${k} `.toLowerCase().includes(C.value.toLowerCase())}return!1})).map(w=>w.includes(!0)).includes(!1):!0))}),z(()=>{t.spellsSrd().length>0&&typeof t.spellsSrd()[0][r()]=="boolean"&&o(`${a()}`)}),z(()=>{u(y=>e().key?[...y,e()]:y),o(""),document.getElementById("searchBar")&&(document.getElementById("searchBar").value="")});const m=y=>{if(y==="concentration")return"Conc";if(y==="damageType")return"Dmg Type";const p=b=>(b.charAt(0).toUpperCase()+b.slice(1)).replace(/([A-Z])/g," $1").trim();return y.startsWith("is")?p(y.replace("is","")):p(y)};return(()=>{var y=U_(),p=y.firstChild;return y.style.setProperty("width","100%"),g(p,f(he,{transparent:!0,onClick:()=>n(b=>({key:r(),value:No(i())})),get children(){return f(q_,{})}}),null),g(p,f(Ve,{get class(){return`${Ui.all}`},disableUnselected:!0,onChange:b=>s(b.target.value),id:"chipDropdown",get children(){return f(Y,{get each(){return Object.keys(t.spellsSrd()[0]).filter(b=>!["materials_Needed","higherLevel","page"].includes(b))},children:b=>f(_e,{value:b,get children(){return m(b)}})})}}),null),g(p,f(Nr,{get children(){return[f(ct,{get when(){return Array.isArray(t.spellsSrd()[0][r()])||["damageType","castingTime","range","duration"].includes(r())},get children(){return f(Ve,{onChange:b=>o(b.currentTarget.value),get children(){return f(Y,{get each(){return h(r())},children:b=>(()=>{var _=z_();return _.value=b,g(_,b),_})()})}})}}),f(ct,{get when(){return typeof t.spellsSrd()[0][r()]=="boolean"},get children(){var b=j_(),_=b.firstChild;return g(b,f(Ze,{type:"checkbox",get checked(){return a()},id:"booleanCheckbox",onchange:()=>{l(!a()),o(`${a()}`)}}),_),g(_,f(G,{get when(){return!a()},children:"false"}),null),g(_,f(G,{get when(){return a()},children:"true"}),null),z(()=>j(b,`${Ui.booleanSelect}`)),b}}),f(ct,{get when(){return typeof t.spellsSrd()[0][r()]=="string"},get children(){return f(Nr,{get fallback(){return f(Ze,{id:"searchBar",onChange:b=>o(b.currentTarget.value),onKeyDown:b=>{b.key==="Enter"&&n(_=>({key:r(),value:No(b.currentTarget.value)}))},placeholder:"Search Spells...",get value(){return i()},type:"text"})},get children(){return f(ct,{get when(){return["school","level"].includes(r())},get children(){return f(Ve,{onChange:b=>o(b.currentTarget.value),get children(){return[f(G,{get when(){return r()==="school"},get children(){return f(Y,{each:d,children:b=>f(_e,{value:b,children:b})})}}),f(G,{get when(){return r()==="level"},get children(){return f(Y,{each:[0,1,2,3,4,5,6,7,8,9],children:b=>f(_e,{value:b,children:b})})}})]}})}})}})}})]}}),null),g(y,f(F_,{chips:c,setChips:u}),null),z(()=>j(p,`${Ui.searchBar}`)),y})()},q_=t=>(()=>{var e=K_();return Ie(e,Oe(t,{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"}),!0,!0),e})();var W_=$("<div><h1>Spells</h1><br><ul></ul><div>"),V_=$("<div><span></span> <span>"),G_=$("<h4>At Higher Levels: "),Y_=$("<span>"),Z_=$("<div><div><h1></h1><h2> </h2><h2>Casting time: <!> </h2><h2>Range: <!> </h2><h2>Component: </h2><h2>Duration: </h2><h2>Classes: </h2><h2>SubClasses: </h2><span>"),X_=$("<div><span></span><span>"),J_=$("<hr>");const tc=()=>{const t=Se(De),[e,n]=we(),r=H(()=>ye(e().theme)),s=Bb(),[i,o]=fn();i.name||o({name:s()[0]?.name});const a=s().filter(v=>v.name?.toLowerCase()===(i?.name||s()[0]?.name).toLowerCase())[0],[l,c]=M(a),[u,h]=M([]),[d,m]=M([]),[y,p]=M(!1),b=v=>{switch(v){case"0":return"Cantrip";case"1":return"1st";case"2":return"2nd";case"3":return"3rd";default:return`${v}th`}},_=v=>{const w=[];return v.isVerbal&&w.push("V"),v.isSomatic&&w.push("S"),v.isMaterial&&w.push("M"),v.materials_Needed?[w.join(", "),v.materials_Needed??null].join(", "):w.join(", ")};return z(()=>{o({name:l()?.name??""})}),(()=>{var v=W_(),w=v.firstChild,C=w.nextSibling,k=C.nextSibling,A=k.nextSibling;return g(v,f(H_,{searchResults:d,setSearchResults:m,spellsSrd:s}),k),g(k,f(Y,{get each(){return u()},children:(S,K)=>[f(G,{get when(){return!t?.isMobile()},get children(){return f(xn,{extraLogic:()=>c(S),get startOpen(){return l().name===S.name},get children(){return[(()=>{var T=V_(),O=T.firstChild,N=O.nextSibling,P=N.nextSibling;return g(O,()=>S.name),g(P,()=>b(S.level)),z(()=>j(T,`${Kn.headerBar}`)),T})(),(()=>{var T=Z_(),O=T.firstChild,N=O.firstChild,P=N.nextSibling,Z=P.firstChild,U=P.nextSibling,F=U.firstChild,B=F.nextSibling;B.nextSibling;var W=U.nextSibling,ee=W.firstChild,L=ee.nextSibling;L.nextSibling;var R=W.nextSibling;R.firstChild;var I=R.nextSibling;I.firstChild;var te=I.nextSibling;te.firstChild;var E=te.nextSibling;E.firstChild;var D=E.nextSibling;return g(N,()=>S.name),g(P,()=>b(S.level),Z),g(P,()=>S.school,null),g(U,()=>S.castingTime,B),g(W,()=>S.range,L),g(R,()=>_(S),null),g(I,()=>S.duration,null),g(te,()=>S.classes.join(", "),null),g(E,()=>S.subClasses.join(", "),null),g(D,()=>S.desc),g(O,f(G,{get when(){return!!S.higherLevel},get children(){return[G_()," ",(()=>{var q=Y_();return g(q,()=>S.higherLevel),q})()]}}),null),z(()=>j(T,`${Kn.view}`)),T})()]}})}}),f(G,{get when(){return t?.isMobile()},get children(){return[(()=>{var T=X_(),O=T.firstChild,N=O.nextSibling;return O.$$click=()=>{c(S),p(P=>!P)},g(O,()=>S.name),N.$$click=()=>{c(S),p(P=>!P)},g(N,()=>b(S.level)),z(()=>j(T,`${Kn.headerBar}`)),T})(),J_(),f(G,{get when(){return y()},get children(){return f(cv,{spell:l,backgroundClick:[y,p]})}})]}})]})),g(A,f(ai,{items:d,setPaginatedItems:h})),z(S=>{var K=`${r()?.primary} ${Kn.SpellsBody}`,T=`${Kn.center}`,O=`${Kn.center}`;return K!==S.e&&j(v,S.e=K),T!==S.t&&j(w,S.t=T),O!==S.a&&j(A,S.a=O),S},{e:void 0,t:void 0,a:void 0}),v})()};bt(["click"]);const Q_="_featsList_1hcnd_1",ew="_PreReqsBar_1hcnd_17",tw="_body_1hcnd_29",Ki={featsList:Q_,PreReqsBar:ew,body:tw};var nw=$("<div><div><h1>Feats</h1><div></div><ol>"),rw=$("<li> <button></button>"),nc=$("<div>"),rc=$("<br>"),sw=$("<div>Description:"),Hi=$("<span>"),iw=$("<div>Ability Score Requirement: "),ow=$("<span> of "),aw=$("<div>Class Requirement:"),lw=$("<div>class level Requirement:"),cw=$("<span> "),uw=$("<div>classes Requirement:");const hw=()=>{const[t,e]=M([]),[n,r]=M([]),s=H(()=>n().length===0?t():n()),[i,o]=M([]),a=v=>i().includes(v),l=v=>a(v)?o(i().filter(w=>w!==v)):o([...i(),v]);Se(De);const[c,u]=we(),h=H(()=>ye(c().theme)),d=Gu(),[m,y]=fn();m.name||y({name:d()[0]?.name});const p=d().filter(v=>v.name?.toLowerCase()===(m.name||d()[0]?.name).toLowerCase())[0],[b,_]=M(p);return z(()=>{y({name:b()?.name})}),(()=>{var v=nw(),w=v.firstChild,C=w.firstChild,k=C.nextSibling,A=k.nextSibling;return k.style.setProperty("height","5vh"),k.style.setProperty("width","45%"),g(k,f(Eu,{placeholder:"Search Feats...",dataSource:d,setResults:r})),g(A,f(Y,{get each(){return s()},children:(S,K)=>[(()=>{var T=rw(),O=T.firstChild,N=O.nextSibling;return g(T,()=>S.name,O),N.$$click=()=>{l(K()),_(S)},g(N,()=>a(K())?"":""),T})(),f(G,{get when(){return a(K())},get children(){return[(()=>{var T=nc();return g(T,f(Y,{get each(){return b().preReqs},children:O=>(()=>{var N=nc();return g(N,f(Nr,{get children(){return[f(ct,{get when(){return O.info.type===on[0]},get children(){return[iw(),(()=>{var P=ow(),Z=P.firstChild;return g(P,()=>O.name,Z),g(P,()=>O.value,null),P})()]}}),f(ct,{get when(){return O.info.type===on[1]},get children(){return[aw(),(()=>{var P=Hi();return g(P,()=>O.value),P})()]}}),f(ct,{get when(){return O.info.type===on[2]},get children(){return[lw(),(()=>{var P=cw(),Z=P.firstChild;return g(P,()=>O.name,Z),g(P,()=>O.value,null),P})()]}}),f(ct,{get when(){return O.info.type===on[3]},get children(){return[uw(),(()=>{var P=Hi();return g(P,()=>O.name),P})()]}})]}})),N})()})),z(()=>j(T,`${Ki.PreReqsBar}`)),T})(),rc(),sw(),(()=>{var T=Hi();return g(T,f(Y,{get each(){return b().desc},children:(O,N)=>[O,rc()]})),T})()]}})]})),g(w,f(ai,{items:d,setPaginatedItems:e}),null),z(S=>{var K=`${h()?.primary} ${Ki.featsList}`,T=`${Ki.body}`;return K!==S.e&&j(v,S.e=K),T!==S.t&&j(w,S.t=T),S},{e:void 0,t:void 0}),v})()};bt(["click"]);const dw="_sidebar_18u2w_9",fw="_sidebar_shown_18u2w_37",pw="_wrapper_18u2w_43",gw="_thePage_18u2w_48",mw="_outerStyles_18u2w_59",vw="_SelectorBar_18u2w_67",bw="_fixed_18u2w_79",yw="_flexrow_18u2w_93",_w="_wrap_18u2w_43",ww="_abilityscore_18u2w_103",$w="_sideBarBtn_18u2w_110",Sw="_animate_18u2w_124",kw="_slidein_18u2w_1",$s={sidebar:dw,sidebar_shown:fw,wrapper:pw,thePage:gw,outerStyles:mw,SelectorBar:vw,fixed:bw,flexrow:yw,wrap:_w,abilityscore:ww,sideBarBtn:$w,animate:Sw,slidein:kw},Cw="_subrace_1t2pp_1",xw={subrace:Cw};var Tw=$("<div><h3>Sub Races"),bn=$("<br>"),sc=$("<div>"),Ew=$("<span>languages:"),qi=$("<span>"),Aw=$("<h3>languages to choose from"),Lw=$("<div><span>name: </span><br><br><span>Ability Score increases:</span><br>"),Pw=$("<span><br><span></span> <span></span><br>"),Rw=$("<span>: ");const Ow=t=>{ye();let e=t.race;return f(G,{get when(){return e?.subRaces?.length>0},get children(){return f(xn,{get children(){return[Tw(),(()=>{var n=sc();return g(n,f(G,{get when(){return e?.subRaces.length>0},get children(){return[bn(),(()=>{var r=sc();return g(r,f(Y,{get each(){return e?.subRaces},children:s=>[(()=>{var i=Lw(),o=i.firstChild;o.firstChild;var a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling;return g(o,()=>s.name,null),g(i,f(G,{get when(){return s.abilityBonuses.length>0},get children(){return f(Y,{get each(){return s.abilityBonuses},children:h=>(()=>{var d=Pw(),m=d.firstChild,y=m.nextSibling,p=y.nextSibling,b=p.nextSibling;return g(y,()=>h.name),g(b,()=>h.value),d})()})}}),u),g(i,f(G,{get when(){return s.traits.length>0},get children(){return f(Y,{get each(){return s.traits},children:h=>[bn(),(()=>{var d=Rw(),m=d.firstChild;return g(d,()=>h.name,m),d})(),bn(),(()=>{var d=qi();return g(d,()=>h.value),d})(),bn()]})}}),u),g(i,f(G,{get when(){return s.languages.length>0},get children(){return[Ew(),bn(),(()=>{var h=qi();return g(h,()=>s.languages.join(", ")),h})()]}}),null),g(i,f(G,{get when(){return s.languageChoice.choices.length>0},get children(){return[Aw(),f(Y,{get each(){return s.languageChoice.choices},children:h=>[(()=>{var d=qi();return g(d,h),d})(),bn()]})]}}),null),z(h=>{var d=`${s.name}`,m=`${xw.subrace}`;return d!==h.e&&wt(i,"id",h.e=d),m!==h.t&&j(i,h.t=m),h},{e:void 0,t:void 0}),i})(),bn()]})),r})()]}})),n})()]}})}})};var Iw=$("<div><div><h1></h1><h2> traits</h2><div><h3>Ability Score Increases: </h3><div></div><h3>Age:</h3><span></span><h3>Alignment:</h3><span></span><h3>Size:</h3><span></span><h3>Speed:</h3><span>ft</span><h3>Race Specific Traits:</h3><span></span><h3>Proficiencies</h3><div></div><h3>Languages:</h3><br>"),Wi=$("<br>"),Vi=$("<span>"),Dw=$("<div>: ");const Mw=t=>{let e=t.styles,n=t.dndSrdRace;return(()=>{var r=Iw(),s=r.firstChild,i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=o.nextSibling,c=l.firstChild,u=c.nextSibling,h=u.nextSibling,d=h.nextSibling,m=d.nextSibling,y=m.nextSibling,p=y.nextSibling,b=p.nextSibling,_=b.nextSibling,v=_.nextSibling,w=v.firstChild,C=v.nextSibling,k=C.nextSibling,A=k.nextSibling,S=A.nextSibling,K=S.nextSibling,T=K.nextSibling;return g(i,()=>n().name),g(o,()=>n().name,a),g(u,f(Y,{get each(){return n().abilityBonuses},children:O=>[Wi(),(()=>{var N=Vi();return g(N,()=>O.name),N})()," ",(()=>{var N=Vi();return g(N,()=>O.value),N})(),Wi()]})),g(d,()=>n()?.age),g(y,()=>n()?.alignment),g(b,()=>n()?.sizeDescription),g(v,()=>n()?.speed,w),g(k,f(Y,{get each(){return n()?.traits},children:O=>[(()=>{var N=Dw(),P=N.firstChild;return g(N,()=>O?.name,P),g(N,f(Y,{get each(){return O?.value},children:Z=>(()=>{var U=Vi();return g(U,Z),z(()=>j(U,`${e.wrap}`)),U})()}),null),N})(),Wi()]})),g(S,()=>n()?.startingProficencies?.map(O=>O?.value)?.join(`
`)),g(l,()=>n()?.languageDesc,T),g(l,f(Ow,{styles:e,get race(){return n()}}),null),z(O=>{var N=`${e.thePage}`,P=`${n().name}`,Z=`${e.abilityscore}`,U=`${e.wrap}`,F=`${e.wrap}`,B=`${e.wrap}`;return N!==O.e&&j(r,O.e=N),P!==O.t&&wt(i,"id",O.t=P),Z!==O.a&&j(u,O.a=Z),U!==O.o&&j(d,O.o=U),F!==O.i&&j(y,O.i=F),B!==O.n&&j(b,O.n=B),O},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};var Nw=$("<div id=racesComp><h1>Races</h1><div><button></button><span></span><button></button></div><div>");const Bw=()=>{const t=Mb();Se(De);const[e,n]=we(),r=H(()=>ye(e().theme));M([]);const[s,i]=fn(),o=t()?.findIndex(u=>u.name?.toLowerCase()===s?.name?.toLowerCase()),[a,l]=M(o>=0?o:0);s.name||i({name:t().length>0?t()[a()].name:"dragonborn"});const c=H(()=>t().length>0&&a()>=0&&a()<t().length?t()[a()]:{});return z(()=>{i({name:t().length>0?c()?.name:"Dragonborn"})}),(()=>{var u=Nw(),h=u.firstChild,d=h.nextSibling,m=d.firstChild,y=m.nextSibling,p=y.nextSibling,b=d.nextSibling;return m.$$click=()=>a()===0?l(_=>t().length-1):l(_=>_-1),g(y,()=>c().name),p.$$click=()=>a()===t().length-1?l(_=>0):l(_=>_+1),g(b,f(Mw,{styles:$s,dndSrdRace:c})),z(_=>{var v=`${r().primary} ${$s.outerStyles}`,w=`${$s.SelectorBar}`,C=`${$s.wrapper}`;return v!==_.e&&j(u,_.e=v),w!==_.t&&j(d,_.t=w),C!==_.a&&j(b,_.a=C),_},{e:void 0,t:void 0,a:void 0}),u})()};bt(["click"]);const Fw="_allBackgrounds_osalx_1",jw="_backgrounds_osalx_12",Uw="_feature_osalx_23",zw="_totalPanel_osalx_27",Kw="_body_osalx_31",xr={allBackgrounds:Fw,backgrounds:jw,feature:Uw,totalPanel:zw,body:Kw};var Hw=$("<div><h1>Backgrounds</h1><div></div><div></div>"),qw=$("<div>"),Ww=$("<div><h2></h2><div></div><h3></h3><h3>choose: </h3><div></div><br><h3>Starting Equipment</h3><div></div><br><div></div><h3>Skill Proficiencies</h3><div>"),Vw=$("<span><h3></h3><br><span>"),Tr=$("<br>"),Gi=$("<span>"),Gw=$("<h3>Choose: "),Yw=$("<span> ");const Zw=()=>{Se(De);const[t,e]=we(),n=H(()=>ye(t().theme)),r=Ab(),[s,i]=M(r()||[]),o=H(()=>{if(s().length===0)return r()}),[a,l]=fn();a.name||l({name:r()[0]?.name});const c=r().filter(m=>m.name?.toLowerCase()===(a?.name||r()[0]?.name).toLowerCase())[0],[u,h]=M(c);z(()=>{l({name:u()?.name})});const d=m=>{h(m)};return(()=>{var m=Hw(),y=m.firstChild,p=y.nextSibling,b=p.nextSibling;return p.style.setProperty("width","35%"),p.style.setProperty("height","5vh"),p.style.setProperty("margin","0 auto"),g(p,f(Eu,{placeholder:"Search Backgrounds...",dataSource:r,setResults:i})),g(b,f(Y,{get each(){return o()},children:_=>f(xn,{get extraSetter(){return d(_)},styles:xr,get children(){return[(()=>{var v=qw();return g(v,()=>u().name),v})(),(()=>{var v=Ww(),w=v.firstChild,C=w.nextSibling,k=C.nextSibling,A=k.nextSibling;A.firstChild;var S=A.nextSibling,K=S.nextSibling,T=K.nextSibling,O=T.nextSibling,N=O.nextSibling,P=N.nextSibling,Z=P.nextSibling,U=Z.nextSibling;return g(w,()=>u().name),g(C,f(Y,{get each(){return u().feature},children:F=>[(()=>{var B=Vw(),W=B.firstChild,ee=W.nextSibling,L=ee.nextSibling;return g(W,()=>F.name),g(L,()=>F.value),z(()=>j(L,`${xr.feature}`)),B})(),Tr()]})),g(k,()=>u().languageChoice.type),g(A,()=>u().languageChoice.choose,null),g(S,f(Y,{get each(){return u().languageChoice.choices},children:F=>[(()=>{var B=Gi();return g(B,F),B})(),Tr()]})),g(O,f(Y,{get each(){return u().startingEquipment},children:F=>[(()=>{var B=Gi();return g(B,()=>F.item),B})(),Tr()]})),g(P,f(Y,{get each(){return u().startingEquipmentChoices},children:F=>[(()=>{var B=Gw();return B.firstChild,g(B,()=>F.choose,null),B})(),f(Y,{get each(){return F.choices},children:B=>[(()=>{var W=Yw(),ee=W.firstChild;return g(W,()=>B.quantity,ee),g(W,()=>B.item,null),W})(),Tr()]})]})),g(U,f(Y,{get each(){return u().startingProficiencies},children:F=>[(()=>{var B=Gi();return g(B,()=>F.value),B})(),Tr()]})),z(()=>j(v,`${xr.body}`)),v})()]}})})),z(_=>{var v=`${n()?.primary} ${xr.allBackgrounds}`,w=`${xr.backgrounds}`;return v!==_.e&&j(m,_.e=v),w!==_.t&&j(b,_.t=w),_},{e:void 0,t:void 0}),m})()},Xw="_CenterPage_69voi_1",Jw="_eachPage_69voi_8",Qw="_Center_69voi_1",e2="_CenterTable_69voi_18",t2="_subClasses_69voi_28",ic={CenterPage:Xw,eachPage:Jw,Center:Qw,CenterTable:e2,subClasses:t2};var n2=$("<div><div><span></span></div><hr><div>");const r2=()=>{Se(De);const[t,e]=we(),n=H(()=>ye(t().theme)),r=Wu(),[s,i]=fn(),o=r().findIndex(u=>u.name.toLowerCase()===s.name?.toLowerCase()),[a,l]=M(o>=0?o:0);s.name||i({name:r().length>0?r()[a()].name:"barbarian"});const c=H(()=>r().length>0&&a()>=0&&a()<r().length?r()[a()]:{});return H(()=>c().subclasses?.length>0?c().subclasses:[]),z(()=>{i({name:r().length>0?c().name:"barbarian"}),console.table(c())}),(()=>{var u=n2(),h=u.firstChild,d=h.firstChild,m=h.nextSibling,y=m.nextSibling;return g(h,f(he,{onClick:()=>a()===0?l(p=>r().length-1):l(p=>p-1),children:""}),d),g(d,()=>c().name),g(h,f(he,{onClick:()=>a()===r().length-1?l(p=>0):l(p=>p+1),children:""}),null),m.style.setProperty("width","100%"),g(y,f(rv,{currentClass:c})),z(p=>{var b=`${n()?.primary} ${ic.CenterPage}`,_=`${ic.eachPage}`;return b!==p.e&&j(u,p.e=b),_!==p.t&&j(y,p.t=_),p},{e:void 0,t:void 0}),u})()},s2="_body_bpryr_1",i2="_textArea_bpryr_20",o2="_checkBox_bpryr_28",a2="_castingRowOne_bpryr_33",l2="_chips_bpryr_43",Ft={body:s2,textArea:i2,checkBox:o2,castingRowOne:a2,chips:l2};var Ss=$("<div>"),c2=$('<div><textarea placeholder="Enter a Feature description..">'),u2=$("<h1>subclasses"),h2=$("<div><h2>Choose a class"),d2=$('<div><textarea placeholder="Enter a Subclass description..">'),f2=$("<div><h2>Level up features"),p2=$("<div><span><label for=casterType>Caster Type:</label></span><span><label for=castingStat>Casting Stat:"),g2=$("<div><label for=spellsKnown>Spells Known: </label><span><label for=halfCasterRoundUp>Round Up: "),m2=$("<div><h3>Spells Known </h3><div><label for=slotLevel>Class Level: </label></div><div><label for=slotAmount>Slot Amount: "),v2=$("<div><label for=hasCantrips>Has Cantrips: </label><label for=ritualCasting>Ritual Casting: "),b2=$("<div><h3>Spells Table</h3><div></div><div>"),y2=$("<div><h3>Spellcasting Info</h3><div></div><div>"),_2=$("<div><h2>Spellcasting</h2><div><div><label for=hasCasting>Has Spellcasting: </label></div><div>"),w2=$("<div><div><label>Title: </label></div><div><label>Description: </label><textarea></textarea></div><div>");const $2=()=>{const[t,e]=fn();Se(De);const[n,r]=we();H(()=>ye(n().theme));const s=ba(),i=()=>s().map(E=>E.name),[o,a]=M(1),l=ya(),[c,u]=M(!1),[h,d]=M(!1),[m,y]=M(0),[p,b]=M(""),[_,v]=M(!1),[w,C]=M(""),[k,A]=M(!1),[S,K]=M({}),[T,O]=M([]),[N,P]=M(1),[Z,U]=M(0),[F,B]=M({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),W=H(()=>{const E=F().class.toLowerCase(),[D]=s().filter(q=>q.name?.toLowerCase()===E?.toLowerCase());if(D&&D.subclassLevels&&D.subclassLevels.length)return D.subclassLevels.map(q=>`${q}`);switch(E){case"cleric":return["1","2","6","8","17"];case"druid":case"wizard":return["2","6","10","14"];case"barbarian":return["3","6","10","14"];case"monk":return["3","6","11","17"];case"bard":return["3","6","14"];case"sorcerer":case"warlock":return["1","6","14","18"];case"fighter":return["3","7","10","15","18"];case"paladin":return["3","7","15","20"];case"ranger":return["3","7","11","15"];case"rogue":return["3","9","13","17"];case"forgemaster":return["3","7","11","15","20"];default:return[]}}),ee=H(()=>{const E=s().filter(q=>q.name.toLowerCase()===F().class.toLowerCase()),D=F();return E.length===1&&D.name.trim().length>0&&D.subclassFlavor.trim().length>0&&D.desc.length}),L=()=>{B(E=>{const D={info:{className:E.class,subclassName:E.name,level:o(),type:"subclass",other:""},name:"",value:[""]};return{...E,features:[...E.features,D]}})},R=E=>F().features.filter(D=>D.info.level===E),I=E=>({name:`Level ${E}`,element:(()=>{var D=Ss();return g(D,f(Y,{get each(){return R(E)},children:(q,re)=>[(()=>{var ie=Ss();return g(ie,f(Ze,{placeholder:"Enter a Feature name..",get value(){return q.name},onChange:X=>{B(oe=>{const ae=oe.features.filter(ge=>ge.info.level===E),ue=oe.features.filter(ge=>ge.info.level!==E),fe=ae[re()];return fe.name=X.currentTarget.value,ae.splice(re(),1,fe),oe.features=[...ue,...ae],Zn(oe)})}})),ie})(),(()=>{var ie=c2(),X=ie.firstChild;return X.addEventListener("change",oe=>{B(ae=>{const ue=ae.features.filter(Me=>Me.info.level===E),fe=ae.features.filter(Me=>Me.info.level!==E),ge=ue[re()];return ge.value=oe.currentTarget.value.split(`
`),ue.splice(re(),1,ge),ae.features=[...fe,...ue],Zn(ae)})}),z(()=>j(X,`${Ft.textArea}`)),z(()=>X.value=F().features.filter(oe=>oe.info.level===E)[re()].value.join(`
`)),ie})(),(()=>{var ie=Ss();return g(ie,f(he,{onClick:X=>{B(oe=>{const ae=oe.features.filter(fe=>fe.info.level===E),ue=oe.features.filter(fe=>fe.info.level!==E);return ae.splice(re(),1),oe.features=[...ue,...ae],Zn(oe)})},children:"Remove"})),ie})()]})),D})()}),te=()=>{B({id:0,name:"",subclassFlavor:"",desc:[],features:[],class:"",spells:[]}),a(1),u(!1),d(!1),y(0),b(""),v(!1),C(""),K({})};return z(()=>{c()?B(E=>{const D={...E};D.spellcasting={info:D.spellcasting?.info||[],castingLevels:[],name:D.name,spellcastingAbility:w(),casterType:p(),spellsKnownCalc:m(),spellsKnownRoundup:h()};for(let q=1;q<=20;q++)D.spellcasting?.castingLevels.push({level:q,spellcasting:pl(q,p(),k())});return D}):B(E=>{const D={...E};return delete D.spellcasting,D})}),z(()=>{m()===6&&p().length>0&&B(E=>{const D={...E};let q;if(D.spellcasting&&D.spellcasting.castingLevels){const re=T();q=D.spellcasting.castingLevels.map(ie=>(ie.spellcasting=pl(ie.level,p(),k()),re.forEach(X=>{X.level===ie.level&&(ie.spellcasting={...ie.spellcasting,spells_known:X.amount})}),ie))}else q=D.spellcasting?.castingLevels||[];return D.spellcasting={info:D.spellcasting?.info||[],castingLevels:q,name:D.name,spellcastingAbility:w(),casterType:p(),spellsKnownCalc:m(),spellsKnownRoundup:h()},D})}),z(()=>{if(t.name&&t.subclass){if(t.name!==F().class&&t.subclass!==F().name){const[E]=s().filter(D=>D.name.toLowerCase()===t.name.toLowerCase());if(E){const[D]=E.subclasses.filter(q=>q.name.toLowerCase()===t.subclass.toLowerCase());B(D)}}}else e({name:F().class,subclass:F().name})}),f(St,{get children(){return[u2(),(()=>{var E=h2();return E.firstChild,g(E,f(Ve,{get value(){return F().class},onChange:D=>{B(q=>({...q,class:D.currentTarget.value}))},get children(){return f(Y,{get each(){return i()},children:D=>f(_e,{value:`${D}`,children:D})})}}),null),E})(),(()=>{var E=d2(),D=E.firstChild;return g(E,f(Ze,{placeholder:"Enter a Subclass name..",get value(){return F().name},onChange:q=>B(re=>({...re,name:q.currentTarget.value}))}),D),g(E,f(Ze,{placeholder:"Enter a Subclass flavor..",get value(){return F().subclassFlavor},onChange:q=>B(re=>({...re,subclassFlavor:q.currentTarget.value}))}),D),D.addEventListener("change",q=>B(re=>({...re,desc:q.currentTarget.value.split(`
`)}))),z(()=>j(D,`${Ft.textArea}`)),z(()=>D.value=F().desc.join(`
`)),E})(),(()=>{var E=f2();return E.firstChild,g(E,f(Ve,{get value(){return o()},onChange:D=>{const q=parseInt(D.currentTarget.value);a(q)},get children(){return f(Y,{get each(){return W()},children:D=>f(_e,{value:`${D}`,children:D})})}}),null),g(E,f(he,{onClick:L,children:"Add Feature"}),null),g(E,f(oi,{get elements(){return W().map(D=>I(+D))}}),null),E})(),(()=>{var E=_2(),D=E.firstChild,q=D.nextSibling,re=q.firstChild;re.firstChild;var ie=re.nextSibling;return g(re,f(Ze,{get class(){return`${Ft.checkBox}`},get checked(){return c()},onChange:X=>u(X.currentTarget.checked),type:"checkbox",name:"hasCasting"}),null),g(q,f(G,{get when(){return c()},get children(){return[(()=>{var X=p2(),oe=X.firstChild;oe.firstChild;var ae=oe.nextSibling;return ae.firstChild,g(oe,f(Ve,{name:"casterType",get value(){return p()},onChange:ue=>b(ue.currentTarget.value),get children(){return[f(_e,{value:"half",children:"Half Caster"}),f(_e,{value:"third",children:"Third Caster"})]}}),null),g(ae,f(Ve,{name:"castingStat",get value(){return w()},onChange:ue=>C(ue.currentTarget.value),get children(){return f(Y,{each:["Intelligence","Wisdom","Charisma"],children:ue=>f(_e,{value:ue,children:ue})})}}),null),z(()=>j(X,`${Ft.castingRowOne}`)),X})(),(()=>{var X=g2(),oe=X.firstChild,ae=oe.nextSibling;return ae.firstChild,g(X,f(Ve,{name:"spellsKnown",get value(){return m()},onChange:ue=>y(+ue.currentTarget.value),get children(){return[f(_e,{value:"0",children:"None"}),f(_e,{value:"1",children:"Level"}),f(_e,{value:"2",children:"Half Level"}),f(_e,{value:"3",children:"Stat Modifier + Level"}),f(_e,{value:"4",children:"Stat Modifier + Half Level"}),f(_e,{value:"5",children:"Stat Modifier + Third Level"}),f(_e,{value:"6",children:"Other"})]}}),ae),g(ae,f(Ze,{get class(){return`${Ft.checkBox}`},type:"checkbox",name:"halfCasterRoundUp",get checked(){return h()},onChange:ue=>d(ue.currentTarget.checked)}),null),X})(),f(G,{get when(){return m()===6},get children(){return[(()=>{var X=m2(),oe=X.firstChild,ae=oe.nextSibling;ae.firstChild;var ue=ae.nextSibling;return ue.firstChild,g(ae,f(Ve,{name:"slotLevel",disableUnselected:!0,onChange:fe=>{P(+fe.currentTarget.value)},get children(){return f(Y,{get each(){return Lp(20)},children:fe=>f(_e,{value:fe,get children(){return["Level ",fe]}})})}}),null),g(ue,f(Ze,{name:"slotAmount",type:"number",min:0,onChange:fe=>{U(+fe.currentTarget.value)}}),null),g(X,f(he,{onClick:fe=>{T().map(ge=>ge.level).includes(N())||O(ge=>[...ge,{level:N(),amount:Z()}].sort((Me,Rt)=>+Me.level-+Rt.level))},children:"Add"}),null),X})(),(()=>{var X=Ss();return g(X,f(dt,{get key(){return`Level ${N()}`},get value(){return`${Z()}`}}),null),g(X,f(Y,{get each(){return T()},children:oe=>f(dt,{get key(){return`Level ${oe.level}`},get value(){return`${oe.amount}`},remove:()=>{O(ae=>ae.filter(ue=>ue.level!==oe.level))}})}),null),z(()=>j(X,`${Ft.chips}`)),X})()]}}),(()=>{var X=v2(),oe=X.firstChild,ae=oe.nextSibling;return g(X,f(Ze,{get class(){return`${Ft.checkBox}`},type:"checkbox",name:"hasCantrips",get checked(){return k()},onChange:ue=>A(ue.currentTarget.checked)}),ae),g(X,f(Ze,{get class(){return`${Ft.checkBox}`},type:"checkbox",name:"ritualCasting",get checked(){return _()},onChange:ue=>v(ue.currentTarget.checked)}),null),X})(),(()=>{var X=b2(),oe=X.firstChild,ae=oe.nextSibling,ue=ae.nextSibling;return g(ae,f(Ve,{get value(){return JSON.stringify(S())},onChange:fe=>K(JSON.parse(fe.currentTarget.value)),get children(){return f(Y,{get each(){return l()},children:fe=>f(_e,{get value(){return JSON.stringify(fe)},get children(){return fe.name}})})}}),null),g(ae,f(he,{onClick:fe=>B(ge=>({...ge,spells:[...ge.spells,S()]})),children:"Add Spell"}),null),g(ue,f(Y,{get each(){return F().spells},children:fe=>f(dt,{get key(){return Ap(+fe.level)},get value(){return fe.name},remove:()=>{B(ge=>({...ge,spells:ge.spells.filter(Me=>Me.name!==fe.name)}))}})})),X})(),(()=>{var X=y2(),oe=X.firstChild,ae=oe.nextSibling,ue=ae.nextSibling;return g(ae,f(he,{onClick:fe=>{B(ge=>{const Me=[...ge.spellcasting?.info||[]];return Me.push({name:"",desc:[]}),{...ge,spellcasting:{...ge.spellcasting,info:Me}}})},children:"Add Info"})),g(ue,f(Y,{get each(){return F().spellcasting?.info||[]},children:(fe,ge)=>(()=>{var Me=w2(),Rt=Me.firstChild,dr=Rt.firstChild,Ot=Rt.nextSibling,pn=Ot.firstChild,It=pn.nextSibling,Xr=Ot.nextSibling;return g(Rt,f(Ze,{get name(){return`nameInput${ge()}`},get value(){return fe.name},onChange:He=>{B(Ge=>{const qe=[...Ge.spellcasting?.info||[]];return qe[ge()]={...qe[ge()],name:He.currentTarget.value},{...Ge,spellcasting:{...Ge.spellcasting,info:qe}}})}}),null),It.addEventListener("change",He=>{B(Ge=>{const qe=[...Ge.spellcasting?.info||[]];return qe[ge()]={...qe[ge()],desc:He.currentTarget.value.split(`
`)},{...Ge,spellcasting:{...Ge.spellcasting,info:qe}}})}),g(Xr,f(he,{onClick:He=>{B(Ge=>{const qe=[...Ge.spellcasting?.info||[]];return qe.splice(ge(),1),{...Ge,spellcasting:{...Ge.spellcasting,info:qe}}})},children:"Remove"})),z(He=>{var Ge=`nameInput${ge()}`,qe=`descInput${ge()}`,Jt=`${Ft.textArea}`,Dt=`descInput${ge()}`;return Ge!==He.e&&wt(dr,"for",He.e=Ge),qe!==He.t&&wt(pn,"for",He.t=qe),Jt!==He.a&&j(It,He.a=Jt),Dt!==He.o&&wt(It,"name",He.o=Dt),He},{e:void 0,t:void 0,a:void 0,o:void 0}),z(()=>It.value=fe.desc.join(`
`)),Me})()})),X})()]}}),ie),g(ie,f(G,{get when(){return ee()},get children(){return f(he,{onClick:X=>{const oe=s().filter(ae=>ae.name===F().class)[0];oe.subclasses=[...oe.subclasses,F()],gt.updateClass(oe),gt.updateClassesInDB(),te()},children:"Save"})}})),E})()]}})},ih=zo(()=>Js(()=>import("./characters-m7qHhEov.js"),__vite__mapDeps([0,1]))),oh=zo(()=>Js(()=>import("./create-Y0pcidMG.js"),__vite__mapDeps([2,1]))),ah=zo(()=>Js(()=>import("./view-1aDXfM1Q.js"),__vite__mapDeps([3,4]))),S2=document.getElementById("root"),k2=60*1e3;eh({onRegisteredSW(t,e){e&&setInterval(()=>{ih.preload(),oh.preload(),ah.preload(),e.update()},k2)},onRegisterError(t){console.log("SW registration error",t)},onNeedRefresh(){console.log("onNeedRefresh")},onOfflineReady(){console.log("onOfflineReady")}});Xi(()=>f(kd,{root:xg,get children(){return[f(Ae,{path:"/",component:Hy}),f(Ae,{path:"/characters",get children(){return[f(Ae,{path:"/",component:ih}),f(Ae,{path:"/view",component:ah}),f(Ae,{path:"/create",component:oh})]}}),f(Ae,{path:"/info",get children(){return[f(Ae,{path:"/races",component:Bw}),f(Ae,{path:"/spells",component:tc}),f(Ae,{path:"/feats",component:hw}),f(Ae,{path:"/classes",component:r2}),f(Ae,{path:"/backgrounds",component:Zw}),f(Ae,{path:"/*any",component:tc})]}}),f(Ae,{path:"/homebrew",get children(){return[f(Ae,{path:"/",component:Zy}),f(Ae,{path:"/view",component:ec}),f(Ae,{path:"/create",get children(){return[f(Ae,{path:"/",component:r0}),f(Ae,{path:"/classes",component:B0}),f(Ae,{path:"/subclasses",component:$2}),f(Ae,{path:"/items",component:q0}),f(Ae,{path:"/feats",component:n_}),f(Ae,{path:"/backgrounds",component:i_}),f(Ae,{path:"/spells",component:m_}),f(Ae,{path:"/races",component:y_})]}}),f(Ae,{path:"/*any",component:ec})]}})]}}),S2);export{he as B,Y as F,f as a,z as b,H as c,j as d,x2 as e,Ib as f,we as g,Wu as h,g as i,Bb as j,Gu as k,Mb as l,Ab as m,M as n,C2 as o,fn as p,wt as s,$ as t,ye as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/characters-m7qHhEov.js","assets/characters-i2fzY9Kk.css","assets/create-Y0pcidMG.js","assets/view-1aDXfM1Q.js","assets/view-aa-IgBHj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
